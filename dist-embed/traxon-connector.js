var CargoImpConnector=(function(_t){"use strict";var Dt,$,Rr,et,Or,_r,Dr,Lr,nr,ir,sr,yt={},Pr=[],lo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Nt=Array.isArray;function Be(t,r){for(var a in r)t[a]=r[a];return t}function lr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function tt(t,r,a){var o,n,i,l={};for(i in r)i=="key"?o=r[i]:i=="ref"?n=r[i]:l[i]=r[i];if(arguments.length>2&&(l.children=arguments.length>3?Dt.call(arguments,2):a),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)l[i]===void 0&&(l[i]=t.defaultProps[i]);return Lt(t,l,o,n,null)}function Lt(t,r,a,o,n){var i={type:t,props:r,key:a,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Rr,__i:-1,__u:0};return n==null&&$.vnode!=null&&$.vnode(i),i}function ce(t){return t.children}function $e(t,r){this.props=t,this.context=r}function mt(t,r){if(r==null)return t.__?mt(t.__,t.__i+1):null;for(var a;r<t.__k.length;r++)if((a=t.__k[r])!=null&&a.__e!=null)return a.__e;return typeof t.type=="function"?mt(t):null}function Hr(t){var r,a;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if((a=t.__k[r])!=null&&a.__e!=null){t.__e=t.__c.base=a.__e;break}return Hr(t)}}function Br(t){(!t.__d&&(t.__d=!0)&&et.push(t)&&!Pt.__r++||Or!=$.debounceRendering)&&((Or=$.debounceRendering)||_r)(Pt)}function Pt(){for(var t,r,a,o,n,i,l,s=1;et.length;)et.length>s&&et.sort(Dr),t=et.shift(),s=et.length,t.__d&&(a=void 0,o=void 0,n=(o=(r=t).__v).__e,i=[],l=[],r.__P&&((a=Be({},o)).__v=o.__v+1,$.vnode&&$.vnode(a),cr(r.__P,a,o,r.__n,r.__P.namespaceURI,32&o.__u?[n]:null,i,n??mt(o),!!(32&o.__u),l),a.__v=o.__v,a.__.__k[a.__i]=a,Gr(i,a,l),o.__e=o.__=null,a.__e!=n&&Hr(a)));Pt.__r=0}function $r(t,r,a,o,n,i,l,s,d,m,u){var p,c,g,f,C,N,S,v=o&&o.__k||Pr,_=r.length;for(d=co(a,r,v,d,_),p=0;p<_;p++)(g=a.__k[p])!=null&&(c=g.__i==-1?yt:v[g.__i]||yt,g.__i=p,N=cr(t,g,c,n,i,l,s,d,m,u),f=g.__e,g.ref&&c.ref!=g.ref&&(c.ref&&mr(c.ref,null,g),u.push(g.ref,g.__c||f,g)),C==null&&f!=null&&(C=f),(S=!!(4&g.__u))||c.__k===g.__k?d=Mr(g,d,t,S):typeof g.type=="function"&&N!==void 0?d=N:f&&(d=f.nextSibling),g.__u&=-7);return a.__e=C,d}function co(t,r,a,o,n){var i,l,s,d,m,u=a.length,p=u,c=0;for(t.__k=new Array(n),i=0;i<n;i++)(l=r[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=t.__k[i]=Lt(null,l,null,null,null):Nt(l)?l=t.__k[i]=Lt(ce,{children:l},null,null,null):l.constructor==null&&l.__b>0?l=t.__k[i]=Lt(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):t.__k[i]=l,d=i+c,l.__=t,l.__b=t.__b+1,s=null,(m=l.__i=mo(l,a,d,p))!=-1&&(p--,(s=a[m])&&(s.__u|=2)),s==null||s.__v==null?(m==-1&&(n>u?c--:n<u&&c++),typeof l.type!="function"&&(l.__u|=4)):m!=d&&(m==d-1?c--:m==d+1?c++:(m>d?c--:c++,l.__u|=4))):t.__k[i]=null;if(p)for(i=0;i<u;i++)(s=a[i])!=null&&(2&s.__u)==0&&(s.__e==o&&(o=mt(s)),zr(s,s));return o}function Mr(t,r,a,o){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,r=Mr(n[i],r,a,o));return r}t.__e!=r&&(o&&(r&&t.type&&!r.parentNode&&(r=mt(t)),a.insertBefore(t.__e,r||null)),r=t.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function St(t,r){return r=r||[],t==null||typeof t=="boolean"||(Nt(t)?t.some(function(a){St(a,r)}):r.push(t)),r}function mo(t,r,a,o){var n,i,l,s=t.key,d=t.type,m=r[a],u=m!=null&&(2&m.__u)==0;if(m===null&&s==null||u&&s==m.key&&d==m.type)return a;if(o>(u?1:0)){for(n=a-1,i=a+1;n>=0||i<r.length;)if((m=r[l=n>=0?n--:i++])!=null&&(2&m.__u)==0&&s==m.key&&d==m.type)return l}return-1}function Wr(t,r,a){r[0]=="-"?t.setProperty(r,a??""):t[r]=a==null?"":typeof a!="number"||lo.test(r)?a:a+"px"}function Ht(t,r,a,o,n){var i,l;e:if(r=="style")if(typeof a=="string")t.style.cssText=a;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(r in o)a&&r in a||Wr(t.style,r,"");if(a)for(r in a)o&&a[r]==o[r]||Wr(t.style,r,a[r])}else if(r[0]=="o"&&r[1]=="n")i=r!=(r=r.replace(Lr,"$1")),l=r.toLowerCase(),r=l in t||r=="onFocusOut"||r=="onFocusIn"?l.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+i]=a,a?o?a.u=o.u:(a.u=nr,t.addEventListener(r,i?sr:ir,i)):t.removeEventListener(r,i?sr:ir,i);else{if(n=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in t)try{t[r]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&r[4]!="-"?t.removeAttribute(r):t.setAttribute(r,r=="popover"&&a==1?"":a))}}function Ur(t){return function(r){if(this.l){var a=this.l[r.type+t];if(r.t==null)r.t=nr++;else if(r.t<a.u)return;return a($.event?$.event(r):r)}}}function cr(t,r,a,o,n,i,l,s,d,m){var u,p,c,g,f,C,N,S,v,_,x,E,k,D,M,V,A,X=r.type;if(r.constructor!=null)return null;128&a.__u&&(d=!!(32&a.__u),i=[s=r.__e=a.__e]),(u=$.__b)&&u(r);e:if(typeof X=="function")try{if(S=r.props,v="prototype"in X&&X.prototype.render,_=(u=X.contextType)&&o[u.__c],x=u?_?_.props.value:u.__:o,a.__c?N=(p=r.__c=a.__c).__=p.__E:(v?r.__c=p=new X(S,x):(r.__c=p=new $e(S,x),p.constructor=X,p.render=uo),_&&_.sub(p),p.state||(p.state={}),p.__n=o,c=p.__d=!0,p.__h=[],p._sb=[]),v&&p.__s==null&&(p.__s=p.state),v&&X.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Be({},p.__s)),Be(p.__s,X.getDerivedStateFromProps(S,p.__s))),g=p.props,f=p.state,p.__v=r,c)v&&X.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),v&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(v&&X.getDerivedStateFromProps==null&&S!==g&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(S,x),r.__v==a.__v||!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(S,p.__s,x)===!1){for(r.__v!=a.__v&&(p.props=S,p.state=p.__s,p.__d=!1),r.__e=a.__e,r.__k=a.__k,r.__k.some(function(se){se&&(se.__=r)}),E=0;E<p._sb.length;E++)p.__h.push(p._sb[E]);p._sb=[],p.__h.length&&l.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(S,p.__s,x),v&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(g,f,C)})}if(p.context=x,p.props=S,p.__P=t,p.__e=!1,k=$.__r,D=0,v){for(p.state=p.__s,p.__d=!1,k&&k(r),u=p.render(p.props,p.state,p.context),M=0;M<p._sb.length;M++)p.__h.push(p._sb[M]);p._sb=[]}else do p.__d=!1,k&&k(r),u=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++D<25);p.state=p.__s,p.getChildContext!=null&&(o=Be(Be({},o),p.getChildContext())),v&&!c&&p.getSnapshotBeforeUpdate!=null&&(C=p.getSnapshotBeforeUpdate(g,f)),V=u,u!=null&&u.type===ce&&u.key==null&&(V=Vr(u.props.children)),s=$r(t,Nt(V)?V:[V],r,a,o,n,i,l,s,d,m),p.base=r.__e,r.__u&=-161,p.__h.length&&l.push(p),N&&(p.__E=p.__=null)}catch(se){if(r.__v=null,d||i!=null)if(se.then){for(r.__u|=d?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,r.__e=s}else{for(A=i.length;A--;)lr(i[A]);dr(r)}else r.__e=a.__e,r.__k=a.__k,se.then||dr(r);$.__e(se,r,a)}else i==null&&r.__v==a.__v?(r.__k=a.__k,r.__e=a.__e):s=r.__e=po(a.__e,r,a,o,n,i,l,d,m);return(u=$.diffed)&&u(r),128&r.__u?void 0:s}function dr(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(dr)}function Gr(t,r,a){for(var o=0;o<a.length;o++)mr(a[o],a[++o],a[++o]);$.__c&&$.__c(r,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){$.__e(i,n.__v)}})}function Vr(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Nt(t)?t.map(Vr):Be({},t)}function po(t,r,a,o,n,i,l,s,d){var m,u,p,c,g,f,C,N=a.props||yt,S=r.props,v=r.type;if(v=="svg"?n="http://www.w3.org/2000/svg":v=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),i!=null){for(m=0;m<i.length;m++)if((g=i[m])&&"setAttribute"in g==!!v&&(v?g.localName==v:g.nodeType==3)){t=g,i[m]=null;break}}if(t==null){if(v==null)return document.createTextNode(S);t=document.createElementNS(n,v,S.is&&S),s&&($.__m&&$.__m(r,i),s=!1),i=null}if(v==null)N===S||s&&t.data==S||(t.data=S);else{if(i=i&&Dt.call(t.childNodes),!s&&i!=null)for(N={},m=0;m<t.attributes.length;m++)N[(g=t.attributes[m]).name]=g.value;for(m in N)if(g=N[m],m!="children"){if(m=="dangerouslySetInnerHTML")p=g;else if(!(m in S)){if(m=="value"&&"defaultValue"in S||m=="checked"&&"defaultChecked"in S)continue;Ht(t,m,null,g,n)}}for(m in S)g=S[m],m=="children"?c=g:m=="dangerouslySetInnerHTML"?u=g:m=="value"?f=g:m=="checked"?C=g:s&&typeof g!="function"||N[m]===g||Ht(t,m,g,N[m],n);if(u)s||p&&(u.__html==p.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),r.__k=[];else if(p&&(t.innerHTML=""),$r(r.type=="template"?t.content:t,Nt(c)?c:[c],r,a,o,v=="foreignObject"?"http://www.w3.org/1999/xhtml":n,i,l,i?i[0]:a.__k&&mt(a,0),s,d),i!=null)for(m=i.length;m--;)lr(i[m]);s||(m="value",v=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[m]||v=="progress"&&!f||v=="option"&&f!=N[m])&&Ht(t,m,f,N[m],n),m="checked",C!=null&&C!=t[m]&&Ht(t,m,C,N[m],n))}return t}function mr(t,r,a){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&r==null||(t.__u=t(r))}else t.current=r}catch(n){$.__e(n,a)}}function zr(t,r,a){var o,n;if($.unmount&&$.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||mr(o,null,r)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){$.__e(i,r)}o.base=o.__P=null}if(o=t.__k)for(n=0;n<o.length;n++)o[n]&&zr(o[n],r,a||typeof t.type!="function");a||lr(t.__e),t.__c=t.__=t.__e=void 0}function uo(t,r,a){return this.constructor(t,a)}function qr(t,r,a){var o,n,i,l;r==document&&(r=document.documentElement),$.__&&$.__(t,r),n=(o=!1)?null:r.__k,i=[],l=[],cr(r,t=r.__k=tt(ce,null,[t]),n||yt,yt,r.namespaceURI,n?null:r.firstChild?Dt.call(r.childNodes):null,i,n?n.__e:r.firstChild,o,l),Gr(i,t,l)}Dt=Pr.slice,$={__e:function(t,r,a,o){for(var n,i,l;r=r.__;)if((n=r.__c)&&!n.__)try{if((i=n.constructor)&&i.getDerivedStateFromError!=null&&(n.setState(i.getDerivedStateFromError(t)),l=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,o||{}),l=n.__d),l)return n.__E=n}catch(s){t=s}throw t}},Rr=0,$e.prototype.setState=function(t,r){var a;a=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Be({},this.state),typeof t=="function"&&(t=t(Be({},a),this.props)),t&&Be(a,t),t!=null&&this.__v&&(r&&this._sb.push(r),Br(this))},$e.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Br(this))},$e.prototype.render=ce,et=[],_r=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Dr=function(t,r){return t.__v.__b-r.__v.__b},Pt.__r=0,Lr=/(PointerCapture)$|Capture$/i,nr=0,ir=Ur(!1),sr=Ur(!0);var go=0;function e(t,r,a,o,n,i){r||(r={});var l,s,d=r;if("ref"in d)for(s in d={},r)s=="ref"?l=r[s]:d[s]=r[s];var m={type:t,props:d,key:a,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--go,__i:-1,__u:0,__source:n,__self:i};if(typeof t=="function"&&(l=t.defaultProps))for(s in l)d[s]===void 0&&(d[s]=l[s]);return $.vnode&&$.vnode(m),m}var At,ae,pr,jr,Tt=0,Xr=[],oe=$,Yr=oe.__b,Kr=oe.__r,Zr=oe.diffed,Qr=oe.__c,Jr=oe.unmount,ea=oe.__;function ur(t,r){oe.__h&&oe.__h(ae,t,Tt||r),Tt=0;var a=ae.__H||(ae.__H={__:[],__h:[]});return t>=a.__.length&&a.__.push({}),a.__[t]}function O(t){return Tt=1,ho(oa,t)}function ho(t,r,a){var o=ur(At++,2);if(o.t=t,!o.__c&&(o.__=[a?a(r):oa(void 0,r),function(s){var d=o.__N?o.__N[0]:o.__[0],m=o.t(d,s);d!==m&&(o.__N=[m,o.__[1]],o.__c.setState({}))}],o.__c=ae,!ae.__f)){var n=function(s,d,m){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(c){return!!c.__c});if(u.every(function(c){return!c.__N}))return!i||i.call(this,s,d,m);var p=o.__c.props!==s;return u.forEach(function(c){if(c.__N){var g=c.__[0];c.__=c.__N,c.__N=void 0,g!==c.__[0]&&(p=!0)}}),i&&i.call(this,s,d,m)||p};ae.__f=!0;var i=ae.shouldComponentUpdate,l=ae.componentWillUpdate;ae.componentWillUpdate=function(s,d,m){if(this.__e){var u=i;i=void 0,n(s,d,m),i=u}l&&l.call(this,s,d,m)},ae.shouldComponentUpdate=n}return o.__N||o.__}function pt(t,r){var a=ur(At++,3);!oe.__s&&aa(a.__H,r)&&(a.__=t,a.u=r,ae.__H.__h.push(a))}function ta(t){return Tt=5,ke(function(){return{current:t}},[])}function ke(t,r){var a=ur(At++,7);return aa(a.__H,r)&&(a.__=t(),a.__H=r,a.__h=t),a.__}function te(t,r){return Tt=8,ke(function(){return t},r)}function bo(){for(var t;t=Xr.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Bt),t.__H.__h.forEach(gr),t.__H.__h=[]}catch(r){t.__H.__h=[],oe.__e(r,t.__v)}}oe.__b=function(t){ae=null,Yr&&Yr(t)},oe.__=function(t,r){t&&r.__k&&r.__k.__m&&(t.__m=r.__k.__m),ea&&ea(t,r)},oe.__r=function(t){Kr&&Kr(t),At=0;var r=(ae=t.__c).__H;r&&(pr===ae?(r.__h=[],ae.__h=[],r.__.forEach(function(a){a.__N&&(a.__=a.__N),a.u=a.__N=void 0})):(r.__h.forEach(Bt),r.__h.forEach(gr),r.__h=[],At=0)),pr=ae},oe.diffed=function(t){Zr&&Zr(t);var r=t.__c;r&&r.__H&&(r.__H.__h.length&&(Xr.push(r)!==1&&jr===oe.requestAnimationFrame||((jr=oe.requestAnimationFrame)||fo)(bo)),r.__H.__.forEach(function(a){a.u&&(a.__H=a.u),a.u=void 0})),pr=ae=null},oe.__c=function(t,r){r.some(function(a){try{a.__h.forEach(Bt),a.__h=a.__h.filter(function(o){return!o.__||gr(o)})}catch(o){r.some(function(n){n.__h&&(n.__h=[])}),r=[],oe.__e(o,a.__v)}}),Qr&&Qr(t,r)},oe.unmount=function(t){Jr&&Jr(t);var r,a=t.__c;a&&a.__H&&(a.__H.__.forEach(function(o){try{Bt(o)}catch(n){r=n}}),a.__H=void 0,r&&oe.__e(r,a.__v))};var ra=typeof requestAnimationFrame=="function";function fo(t){var r,a=function(){clearTimeout(o),ra&&cancelAnimationFrame(r),setTimeout(t)},o=setTimeout(a,35);ra&&(r=requestAnimationFrame(a))}function Bt(t){var r=ae,a=t.__c;typeof a=="function"&&(t.__c=void 0,a()),ae=r}function gr(t){var r=ae;t.__c=t.__(),ae=r}function aa(t,r){return!t||t.length!==r.length||r.some(function(a,o){return a!==t[o]})}function oa(t,r){return typeof r=="function"?r(t):r}const $t={EAP:{code:"EAP",description:"e-AWB Participant",default:!0},ECC:{code:"ECC",description:"Electronic Consignment with Accompanying Paper",default:!1},SPX:{code:"SPX",description:"Secure - Examined",default:!1},PER:{code:"PER",description:"Perishable Cargo",default:!1},PEP:{code:"PEP",description:"Perishable Fruits & Vegetables",default:!1},PEF:{code:"PEF",description:"Perishable Fresh Fish/Seafood",default:!1},PES:{code:"PES",description:"Live Tropical Fish",default:!1},RFL:{code:"RFL",description:"Flowers",default:!1},COL:{code:"COL",description:"Cool Goods",default:!1},FRO:{code:"FRO",description:"Frozen Goods",default:!1},PIL:{code:"PIL",description:"Pharmaceuticals",default:!1},VAL:{code:"VAL",description:"Valuable Cargo",default:!1},VUN:{code:"VUN",description:"Vulnerable Cargo",default:!1},SPF:{code:"SPF",description:"Secure - Protected Freight",default:!1},AVI:{code:"AVI",description:"Live Animals",default:!1},DGR:{code:"DGR",description:"Dangerous Goods",default:!1},HEA:{code:"HEA",description:"Heavy Cargo",default:!1},BIG:{code:"BIG",description:"Outsized Cargo",default:!1}},na={RA:{code:"REGULATED_AGENT",short:"RA",description:"Agente Regulado (seguridad)",default:!0},SPX:{code:"SECURITY_STATUS",short:"SPX",description:"Estado de Seguridad (examinado)",default:!0},KC:{code:"KNOWN_CONSIGNOR",short:"KC",description:"Consignatario Conocido",default:!1},AEO:{code:"AUTHORISED_ECONOMIC_OPERATOR",short:"AEO",description:"Operador Económico Autorizado",default:!1},SM:{code:"SCREENING_METHOD",short:"SM",description:"Método de Inspección",default:!1},TIN:{code:"TRADER_IDENTIFICATION_NUMBER",short:"TIN",description:"NIT/Tax ID (Shipper o Consignee)",default:!1},EORI:{code:"TRADER_IDENTIFICATION_NUMBER",short:"EORI",description:"EORI Number (EU)",default:!1}},Et={sphByAirline:{"075":["ECC","EAP","PER"],145:["EAP"],985:["EAP"],"074":["EAP"],"057":["EAP"],"020":["EAP"],"006":["EAP"],"001":["EAP"],205:["EAP"],DEFAULT:["EAP"]},ociByOriginCountry:{CO:[],EC:[],PE:[],DEFAULT:[]},includeShipperTIN:!1,includeConsigneeTIN:!0,tinOciFormat:"legacy",shipperTINField:"oci",airlinesRequiringECC:["075"],securityOci:{enabled:!1,regulatedAgentNumber:"",expiryDate:"",screeningMethod:"",screeningDate:"",screenerName:""},messageConfig:{autoGenerateCSL:!0,sendTimeoutMs:3e4,maxRetries:3},cargoImp:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!1,ociWithEori:!1,defaultSphCodes:["EAP","PER"],enabledFwbSegments:["AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","SPH","OCI","CER","ISU"],enabledFhlSegments:["MBI","TXT","HBS","OCI"],controlNumber:"96728316614806",senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",defaultSignature:"CARGOOP",airlinePolicies:{"075":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["ECC","EAP","PER"],enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","PPD","COL","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","SSR","ACC","OTH","CER","NFY"]},145:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},"074":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],notes:"KLM requiere todos los segmentos incluyendo OTH"},157:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","NFY"]},369:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!1,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI"],disabledSegments:["FWB","FTR","OTH","NFY"],notes:"Atlas/Ethiopian: sin header UNB/UNH ni footer UNT/UNZ"},"057":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},"020":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},205:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],notes:"Emirates: prefijo AWB 205"},176:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],useAgencyNameForCER:!0,notes:"Emirates 176: CER usa nombre de agencia"},235:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],requiresHTS:!0,notes:"Turkish Airlines: requiere código HTS"},985:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],useConsolidatedNG:!0,notes:"LATAM Cargo: NG especial para consolidados"},"045":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},992:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"DHL Aviation: Caso 7 - FHL siempre incluye header/footer EDIFACT"},999:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"Polar Air (DHL): Caso 7"},155:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"ABX Air: Caso 7 - FHL siempre incluye header/footer EDIFACT"},DEFAULT:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],notes:"Política por defecto para aerolíneas no configuradas. Ajustar según requisitos."}}},lastUpdated:new Date().toISOString()};function ut(){try{const t=localStorage.getItem("cargo_imp_connector_config");if(t){const r=JSON.parse(t);return{...Et,...r}}}catch(t){console.warn("Error loading connector config:",t)}return Et}function ia(t){try{t.lastUpdated=new Date().toISOString(),localStorage.setItem("cargo_imp_connector_config",JSON.stringify(t))}catch(r){console.error("Error saving connector config:",r)}}function xo(t,r){for(var a in r)t[a]=r[a];return t}function hr(t,r){for(var a in t)if(a!=="__source"&&!(a in r))return!0;for(var o in r)if(o!=="__source"&&t[o]!==r[o])return!0;return!1}function sa(t,r){this.props=t,this.context=r}function br(t,r){function a(n){var i=this.props.ref,l=i==n.ref;return!l&&i&&(i.call?i(null):i.current=null),r?!r(this.props,n)||!l:hr(this.props,n)}function o(n){return this.shouldComponentUpdate=a,tt(t,n)}return o.displayName="Memo("+(t.displayName||t.name)+")",o.prototype.isReactComponent=!0,o.__f=!0,o.type=t,o}(sa.prototype=new $e).isPureReactComponent=!0,sa.prototype.shouldComponentUpdate=function(t,r){return hr(this.props,t)||hr(this.state,r)};var la=$.__b;$.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),la&&la(t)};var vo=$.__e;$.__e=function(t,r,a,o){if(t.then){for(var n,i=r;i=i.__;)if((n=i.__c)&&n.__c)return r.__e==null&&(r.__e=a.__e,r.__k=a.__k),n.__c(t,r)}vo(t,r,a,o)};var ca=$.unmount;function da(t,r,a){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=xo({},t)).__c!=null&&(t.__c.__P===a&&(t.__c.__P=r),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return da(o,r,a)})),t}function ma(t,r,a){return t&&a&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return ma(o,r,a)}),t.__c&&t.__c.__P===r&&(t.__e&&a.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=a)),t}function fr(){this.__u=0,this.o=null,this.__b=null}function pa(t){var r=t.__.__c;return r&&r.__a&&r.__a(t)}function Mt(){this.i=null,this.l=null}$.unmount=function(t){var r=t.__c;r&&r.__R&&r.__R(),r&&32&t.__u&&(t.type=null),ca&&ca(t)},(fr.prototype=new $e).__c=function(t,r){var a=r.__c,o=this;o.o==null&&(o.o=[]),o.o.push(a);var n=pa(o.__v),i=!1,l=function(){i||(i=!0,a.__R=null,n?n(s):s())};a.__R=l;var s=function(){if(!--o.__u){if(o.state.__a){var d=o.state.__a;o.__v.__k[0]=ma(d,d.__c.__P,d.__c.__O)}var m;for(o.setState({__a:o.__b=null});m=o.o.pop();)m.forceUpdate()}};o.__u++||32&r.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(l,l)},fr.prototype.componentWillUnmount=function(){this.o=[]},fr.prototype.render=function(t,r){if(this.__b){if(this.__v.__k){var a=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=da(this.__b,a,o.__O=o.__P)}this.__b=null}var n=r.__a&&tt(ce,null,t.fallback);return n&&(n.__u&=-33),[tt(ce,null,r.__a?null:t.children),n]};var ua=function(t,r,a){if(++a[1]===a[0]&&t.l.delete(r),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(a=t.i;a;){for(;a.length>3;)a.pop()();if(a[1]<a[0])break;t.i=a=a[2]}};(Mt.prototype=new $e).__a=function(t){var r=this,a=pa(r.__v),o=r.l.get(t);return o[0]++,function(n){var i=function(){r.props.revealOrder?(o.push(n),ua(r,t,o)):n()};a?a(i):i()}},Mt.prototype.render=function(t){this.i=null,this.l=new Map;var r=St(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&r.reverse();for(var a=r.length;a--;)this.l.set(r[a],this.i=[1,0,this.i]);return t.children},Mt.prototype.componentDidUpdate=Mt.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(r,a){ua(t,a,r)})};var Co=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yo=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,No=/[A-Z0-9]/g,So=typeof document<"u",Ao=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};$e.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty($e.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(r){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:r})}})});var ga=$.event;function To(){}function Eo(){return this.cancelBubble}function Io(){return this.defaultPrevented}$.event=function(t){return ga&&(t=ga(t)),t.persist=To,t.isPropagationStopped=Eo,t.isDefaultPrevented=Io,t.nativeEvent=t};var ko={enumerable:!1,configurable:!0,get:function(){return this.class}},ha=$.vnode;$.vnode=function(t){typeof t.type=="string"&&(function(r){var a=r.props,o=r.type,n={},i=o.indexOf("-")===-1;for(var l in a){var s=a[l];if(!(l==="value"&&"defaultValue"in a&&s==null||So&&l==="children"&&o==="noscript"||l==="class"||l==="className")){var d=l.toLowerCase();l==="defaultValue"&&"value"in a&&a.value==null?l="value":l==="download"&&s===!0?s="":d==="translate"&&s==="no"?s=!1:d[0]==="o"&&d[1]==="n"?d==="ondoubleclick"?l="ondblclick":d!=="onchange"||o!=="input"&&o!=="textarea"||Ao(a.type)?d==="onfocus"?l="onfocusin":d==="onblur"?l="onfocusout":yo.test(l)&&(l=d):d=l="oninput":i&&wo.test(l)?l=l.replace(No,"-$&").toLowerCase():s===null&&(s=void 0),d==="oninput"&&n[l=d]&&(l="oninputCapture"),n[l]=s}}o=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=St(a.children).forEach(function(m){m.props.selected=n.value.indexOf(m.props.value)!=-1})),o=="select"&&n.defaultValue!=null&&(n.value=St(a.children).forEach(function(m){m.props.selected=n.multiple?n.defaultValue.indexOf(m.props.value)!=-1:n.defaultValue==m.props.value})),a.class&&!a.className?(n.class=a.class,Object.defineProperty(n,"className",ko)):(a.className&&!a.class||a.class&&a.className)&&(n.class=n.className=a.className),r.props=n})(t),t.$$typeof=Co,ha&&ha(t)};var ba=$.__r;$.__r=function(t){ba&&ba(t),t.__c};var fa=$.diffed;$.diffed=function(t){fa&&fa(t);var r=t.props,a=t.__e;a!=null&&t.type==="textarea"&&"value"in r&&r.value!==a.value&&(a.value=r.value==null?"":r.value)};let xr=null,xa=0;const Fo=5e3;function Ro(){const t=Date.now();return(!xr||t-xa>Fo)&&(xr=ut(),xa=t),xr}const Oo=t=>{const r=Ro();return r.sphByAirline[t]||r.sphByAirline.DEFAULT||["EAP"]},vr=t=>t.split("-")[0]||t.substring(0,3),Cr=t=>Oo(t),va=(t,r=150)=>{if(!t||t.trim()==="")return"";const s=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ñÑ]/g,"N").replace(/\bHS\s*\d{6,10}\b/gi,"").replace(/\b\d{6,10}\b/g,"").replace(/[^A-Za-z0-9\s]/g,"").toUpperCase().replace(/\s+/g," ").trim();if(s.length===0)return"";const d=s.split(" "),m=[];let u="";for(const c of d){if(c.length>25){u.length>0&&(m.push(u.trim()),u="");for(let g=0;g<c.length;g+=25)m.push(c.substring(g,g+25));continue}u.length+c.length+1>25?(u.length>0&&m.push(u.trim()),u=c):u=u.length>0?u+" "+c:c}return u.length>0&&m.push(u.trim()),m.join(`
`).substring(0,r)},Me={FWB:{code:"FWB",name:"Message Header",description:"Cabecera del mensaje FWB con versión (incluye UNB/UNH en Caso 7)",required:!0,maxLength:200,order:1,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"version",description:"Versión del mensaje",maxLength:7,required:!0,type:"string"}]},AWB:{code:"AWB",name:"Air Waybill Number",description:"Número de guía aérea con origen, destino, piezas y peso",required:!0,maxLength:50,order:2,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"awbNumber",description:"Número AWB (11 dígitos sin guión)",maxLength:11,required:!0,type:"string"},{name:"origin",description:"Aeropuerto origen (3 chars)",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Aeropuerto destino (3 chars)",maxLength:3,required:!0,type:"code"},{name:"pieces",description:"Número de piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso bruto",maxLength:10,required:!0,type:"number"}]},FLT:{code:"FLT",name:"Flight",description:"Información de vuelo(s)",required:!1,maxLength:80,order:3,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"flight1",description:"Vuelo 1 (carrier+número)",maxLength:10,required:!1,type:"string"},{name:"date1",description:"Fecha vuelo 1 (DDMMM)",maxLength:5,required:!1,type:"date"},{name:"flight2",description:"Vuelo 2",maxLength:10,required:!1,type:"string"},{name:"date2",description:"Fecha vuelo 2",maxLength:5,required:!1,type:"date"}]},RTG:{code:"RTG",name:"Routing",description:"Ruta del envío (aeropuertos y aerolíneas)",required:!0,maxLength:100,order:4,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"segment1",description:"Primer segmento (AEROPUERTO+CARRIER)",maxLength:6,required:!0,type:"string"},{name:"segment2",description:"Segundo segmento",maxLength:6,required:!1,type:"string"},{name:"segment3",description:"Tercer segmento",maxLength:6,required:!1,type:"string"}]},SHP:{code:"SHP",name:"Shipper",description:"Información del exportador/embarcador",required:!0,maxLength:200,order:5,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal (máx 9 chars)",maxLength:9,required:!1,type:"string"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},CNE:{code:"CNE",name:"Consignee",description:"Información del importador/consignatario",required:!0,maxLength:200,order:6,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"state",description:"Estado (solo USA, 2 chars)",maxLength:2,required:!1,type:"code"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal (máx 9 chars)",maxLength:9,required:!0,type:"string"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},AGT:{code:"AGT",name:"Agent",description:"Información del agente de carga",required:!0,maxLength:100,order:7,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"iataCode",description:"Código IATA (7 dígitos)",maxLength:7,required:!0,type:"string"},{name:"cassCode",description:"Código CASS (4 dígitos)",maxLength:4,required:!1,type:"string"},{name:"name",description:"Nombre agencia",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"}]},SSR:{code:"SSR",name:"Special Service Request",description:"Instrucciones especiales de manejo",required:!1,maxLength:200,order:8,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"line1",description:"Línea 1 (máx 65 chars)",maxLength:65,required:!1,type:"string"},{name:"line2",description:"Línea 2 (máx 65 chars)",maxLength:65,required:!1,type:"string"},{name:"line3",description:"Línea 3 (máx 65 chars)",maxLength:65,required:!1,type:"string"}]},ACC:{code:"ACC",name:"Accounting Information",description:"Información contable",required:!1,maxLength:50,order:9,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"accountingInfo",description:"Info contable (máx 34 chars)",maxLength:34,required:!1,type:"string"}]},CVD:{code:"CVD",name:"Charge Declarations",description:"Declaraciones de cargos (moneda, prepaid/collect, valores)",required:!0,maxLength:80,order:10,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"currency",description:"Código moneda (3 chars)",maxLength:3,required:!0,type:"code"},{name:"wtOt",description:"Weight/Other (PP, CC, PC, CP)",maxLength:2,required:!0,type:"code",allowedValues:["PP","CC","PC","CP"]},{name:"declaredCarriage",description:"Valor declarado transporte (o NVD)",maxLength:15,required:!0,type:"string"},{name:"declaredCustoms",description:"Valor declarado aduanas (o NCV)",maxLength:15,required:!0,type:"string"},{name:"declaredInsurance",description:"Valor asegurado (o XXX)",maxLength:15,required:!0,type:"string"}]},RTD:{code:"RTD",name:"Rate Description",description:"Descripción de tarifas (líneas de cobro)",required:!0,maxLength:300,order:11,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"lineNumber",description:"Número de línea",maxLength:2,required:!0,type:"number"},{name:"pieces",description:"Número de piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso bruto",maxLength:10,required:!0,type:"number"},{name:"rateClass",description:"Clase de tarifa (C, M, N, Q)",maxLength:2,required:!0,type:"code"},{name:"commodity",description:"Código commodity (4 dígitos)",maxLength:4,required:!1,type:"string"},{name:"chargeableWeight",description:"Peso cobrable",maxLength:10,required:!1,type:"number"},{name:"rate",description:"Tarifa",maxLength:10,required:!1,type:"number"},{name:"total",description:"Total línea",maxLength:15,required:!1,type:"number"}]},NG:{code:"NG",name:"Nature of Goods",description:"Naturaleza de la mercancía",required:!0,maxLength:30,order:12,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"description",description:"Descripción mercancía (máx 20 chars)",maxLength:20,required:!0,type:"string"}]},NH:{code:"NH",name:"Harmonized Code",description:"Códigos arancelarios HTS",required:!1,maxLength:200,order:13,versions:["FWB/16","FWB/17"],fields:[{name:"codes",description:"Códigos HTS separados (múltiples)",maxLength:15,required:!1,type:"string"}]},NV:{code:"NV",name:"Volume",description:"Volumen total en metros cúbicos (suma de houses)",required:!1,maxLength:20,order:14,versions:["FWB/16","FWB/17"],fields:[{name:"volume",description:"Volumen en M3 con prefijo MC",maxLength:15,required:!1,type:"number"}]},NS:{code:"NS",name:"SLAC",description:"Shipper Load and Count (piezas del master)",required:!1,maxLength:15,order:15,versions:["FWB/16","FWB/17"],fields:[{name:"pieces",description:"Número de piezas",maxLength:10,required:!1,type:"number"}]},OTH:{code:"OTH",name:"Other Charges",description:"Otros cargos (AWC, AWA, MY)",required:!1,maxLength:150,order:14,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"prepaidOrCollect",description:"P=Prepaid, C=Collect",maxLength:1,required:!0,type:"code",allowedValues:["P","C"]},{name:"chargeCode",description:"Código cargo (AWC, AWA, MY)",maxLength:3,required:!0,type:"code"},{name:"amount",description:"Monto",maxLength:15,required:!0,type:"number"}]},PPD:{code:"PPD",name:"Prepaid Charges",description:"Resumen de cargos prepagados",required:!1,maxLength:100,order:15,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"weightCharge",description:"Cargo por peso",maxLength:15,required:!1,type:"number"},{name:"dueAgent",description:"Due Agent",maxLength:15,required:!1,type:"number"},{name:"dueCarrier",description:"Due Carrier",maxLength:15,required:!1,type:"number"},{name:"total",description:"Total",maxLength:15,required:!0,type:"number"}]},COL:{code:"COL",name:"Collect Charges",description:"Resumen de cargos por cobrar",required:!1,maxLength:100,order:16,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"weightCharge",description:"Cargo por peso",maxLength:15,required:!1,type:"number"},{name:"dueAgent",description:"Due Agent",maxLength:15,required:!1,type:"number"},{name:"dueCarrier",description:"Due Carrier",maxLength:15,required:!1,type:"number"},{name:"total",description:"Total",maxLength:15,required:!0,type:"number"}]},CER:{code:"CER",name:"Certification",description:"Certificación del embarcador",required:!1,maxLength:30,order:17,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"signature",description:"Firma (máx 20 chars)",maxLength:20,required:!1,type:"string"}]},ISU:{code:"ISU",name:"Issue",description:"Ejecución del transportista (fecha, lugar, firma)",required:!0,maxLength:60,order:18,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"date",description:"Fecha (DDMMMYY)",maxLength:7,required:!0,type:"date"},{name:"place",description:"Lugar",maxLength:17,required:!0,type:"string"},{name:"signature",description:"Firma (máx 20 chars)",maxLength:20,required:!1,type:"string"}]},REF:{code:"REF",name:"Reference",description:"Referencia del remitente (agente)",required:!0,maxLength:50,order:19,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"agentRef",description:"Referencia AGT/IATA/CASS/ORIGEN",maxLength:30,required:!0,type:"string"}]},SPH:{code:"SPH",name:"Special Handling",description:"Códigos de manejo especial (EAP, PER, etc.)",required:!0,maxLength:50,order:20,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"codes",description:"Códigos SPH separados por /",maxLength:40,required:!0,type:"string"}]},OCI:{code:"OCI",name:"Other Customs Information",description:"Información aduanera/seguridad (EORI, TIN)",required:!1,maxLength:200,order:21,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"countryCode",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"party",description:"Parte (CNE, SHP, AGT)",maxLength:3,required:!0,type:"code",allowedValues:["CNE","SHP","AGT"]},{name:"type",description:"Tipo (T=TIN, RA=RegAgent)",maxLength:2,required:!0,type:"code"},{name:"value",description:"Valor (NIT, EORI, etc.)",maxLength:35,required:!0,type:"string"}]},NFY:{code:"NFY",name:"Notify",description:"Información de notificación (también notify party)",required:!1,maxLength:200,order:22,versions:["FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!1,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!1,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!1,type:"string"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!1,type:"code"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},FTR:{code:"FTR",name:"Footer",description:"Pie del mensaje (UNT/UNZ)",required:!0,maxLength:100,order:23,versions:["FWB/9","FWB/16","FWB/17"],fields:[]}},xe={FHL:{code:"FHL",name:"Message Header",description:"Cabecera del mensaje FHL con versión (incluye UNB/UNH en Caso 7)",required:!0,maxLength:200,order:1,versions:["FHL/2","FHL/4"],fields:[{name:"version",description:"Versión del mensaje",maxLength:7,required:!0,type:"string"}]},MBI:{code:"MBI",name:"Master Bill Information",description:"Información del Master AWB",required:!0,maxLength:60,order:2,versions:["FHL/2","FHL/4"],fields:[{name:"awbNumber",description:"Número AWB master",maxLength:11,required:!0,type:"string"},{name:"origin",description:"Origen",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Destino",maxLength:3,required:!0,type:"code"},{name:"totalPieces",description:"Piezas totales master",maxLength:5,required:!0,type:"number"},{name:"totalWeight",description:"Peso total master",maxLength:10,required:!0,type:"number"}]},HBS:{code:"HBS",name:"House Bill Summary",description:"Resumen de guía hija (HAWB)",required:!0,maxLength:80,order:3,versions:["FHL/2","FHL/4"],fields:[{name:"hawbNumber",description:"Número HAWB",maxLength:20,required:!0,type:"string"},{name:"origin",description:"Origen",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Destino",maxLength:3,required:!0,type:"code"},{name:"pieces",description:"Piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso",maxLength:10,required:!0,type:"number"},{name:"natureOfGoods",description:"Descripción (máx 11 chars)",maxLength:11,required:!0,type:"string"}]},TXT:{code:"TXT",name:"Free Text (Nature of Goods)",description:"Texto libre - Descripción completa de la mercancía (natureOfGoods)",required:!1,maxLength:100,order:4,versions:["FHL/4"],fields:[{name:"text",description:"Descripción completa de mercancía",maxLength:70,required:!1,type:"string"}]},HTS:{code:"HTS",name:"Harmonized Tariff Schedule",description:"Código arancelario para la house",required:!1,maxLength:20,order:5,versions:["FHL/4"],fields:[{name:"code",description:"Código HTS",maxLength:15,required:!1,type:"string"}]},OCI:{code:"OCI",name:"Other Customs Information",description:"Información aduanera para la house",required:!1,maxLength:100,order:6,versions:["FHL/2","FHL/4"],fields:[{name:"countryCode",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"party",description:"Parte (CNE, SHP)",maxLength:3,required:!0,type:"code"},{name:"type",description:"Tipo (T=TIN)",maxLength:2,required:!0,type:"code"},{name:"value",description:"Valor (NIT, EORI)",maxLength:35,required:!0,type:"string"}]},SHP:{code:"SHP",name:"Shipper (House)",description:"Exportador de la guía hija",required:!0,maxLength:150,order:7,versions:["FHL/2","FHL/4"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"country",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal",maxLength:9,required:!1,type:"string"}]},CNE:{code:"CNE",name:"Consignee (House)",description:"Importador de la guía hija",required:!0,maxLength:150,order:8,versions:["FHL/2","FHL/4"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"state",description:"Estado (solo USA)",maxLength:2,required:!1,type:"code"},{name:"country",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal",maxLength:9,required:!0,type:"string"}]},CVD:{code:"CVD",name:"Charge Declarations (House)",description:"Declaraciones de cargos para la house",required:!0,maxLength:50,order:9,versions:["FHL/2","FHL/4"],fields:[{name:"currency",description:"Moneda",maxLength:3,required:!0,type:"code"},{name:"wtOt",description:"PP/CC",maxLength:2,required:!0,type:"code"},{name:"declaredCarriage",description:"NVD",maxLength:10,required:!0,type:"string"},{name:"declaredCustoms",description:"NCV",maxLength:10,required:!0,type:"string"},{name:"declaredInsurance",description:"XXX",maxLength:10,required:!0,type:"string"}]},FTR:{code:"FTR",name:"Footer",description:"Pie del mensaje",required:!0,maxLength:100,order:10,versions:["FHL/2","FHL/4"],fields:[]}},_o={recipientAddress:"DSGUNXA",senderPrefix:"DSGTPXA",originAddress:"TDVAGT03OPERFLOR/BOG1",defaultOrigin:"BOG",defaultPriority:"QK",functionCode:"FF",includeTimestamp:!0},je={"075":{awbPrefix:"075",name:"Iberia",policy:20,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","SSR","ACC","OTH","CER","NFY"],defaultSphCodes:["ECC","EAP","PER"],ociFormat:"withPrefix",includeUnbUnz:!0},145:{awbPrefix:"145",name:"LATAM",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0},"074":{awbPrefix:"074",name:"KLM",policy:24,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"KLM requiere todos los segmentos incluyendo OTH"},157:{awbPrefix:"157",name:"Qatar Airways",policy:23,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0},369:{awbPrefix:"369",name:"Atlas Air / Ethiopian",policy:22,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI"],disabledSegments:["FTR","OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!1,notes:"Atlas/Ethiopian: sin header UNB/UNH ni footer UNT/UNZ, pero SÍ incluye línea FWB/16"},176:{awbPrefix:"176",name:"Emirates",policy:41,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,useAgencyNameForCER:!0,notes:"Emirates: CER usa nombre de agencia"},235:{awbPrefix:"235",name:"Turkish Airlines",policy:41,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,requiresHTS:!0,notes:"Turkish: requiere código HTS"},992:{awbPrefix:"992",name:"DHL Aviation (992)",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"DHL Aviation: Caso 7 - FHL siempre incluye header/footer EDIFACT"},999:{awbPrefix:"999",name:"Polar Air Cargo (DHL)",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"Polar Air (DHL): Caso 7"},985:{awbPrefix:"985",name:"LATAM Cargo",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,useConsolidatedNG:!0,notes:"LATAM Cargo: NG especial para consolidados"},"045":{awbPrefix:"045",name:"Avianca Cargo",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0},155:{awbPrefix:"155",name:"ABX Air",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"ABX Air Caso 7: FHL siempre incluye header/footer EDIFACT"},"057":{awbPrefix:"057",name:"Air France",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Air France: destino UE, requiere EORI en OCI"},"020":{awbPrefix:"020",name:"Lufthansa",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Lufthansa: destino UE, requiere EORI en OCI"},205:{awbPrefix:"205",name:"Emirates",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Emirates: prefijo AWB 205 (176 es código IATA numérico alternativo)"},DEFAULT:{awbPrefix:"DEFAULT",name:"Default (todas las demás)",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],defaultSphCodes:["EAP"],ociFormat:"withPrefix",includeUnbUnz:!0}},Do=Object.keys(xe),Lo=new Set;function Ca(){return{cargoImp:{policyOverrides:{},fwbVersion:void 0,fhlVersion:void 0,includeUnbUnz:void 0,useTypeBHeader:!0,typeBPriority:"QK"},traxon:{apiEndpoint:void 0,senderId:void 0,settings:{}},descartes:{apiEndpoint:void 0,senderId:void 0,settings:{}}}}let ne=Ca();function Po(){ne=Ca(),gt()}function gt(){Lo.forEach(t=>t(ne))}function wr(t){const r=je[t]||je.DEFAULT,a=ne.cargoImp.policyOverrides[t]||{},o=a.enabledFhlSegments||r.enabledFhlSegments||Do,n=a.disabledFhlSegments||r.disabledFhlSegments||[];let i=[...a.enabledSegments||r.enabledSegments||[]];const l=a.disabledSegments||r.disabledSegments||[];if(i.includes("NH")){if(!i.includes("NV")&&!l.includes("NV")){const d=i.indexOf("NH");i=[...i.slice(0,d+1),"NV",...i.slice(d+1)]}if(!i.includes("NS")&&!l.includes("NS")){const d=i.indexOf("NV");if(d>=0)i=[...i.slice(0,d+1),"NS",...i.slice(d+1)];else{const m=i.indexOf("NH");i=[...i.slice(0,m+1),"NS",...i.slice(m+1)]}}}return{...r,...a,enabledSegments:i,disabledSegments:l,enabledFhlSegments:o,disabledFhlSegments:n,fwbVersion:a.fwbVersion||ne.cargoImp.fwbVersion||r.fwbVersion,fhlVersion:a.fhlVersion||ne.cargoImp.fhlVersion||r.fhlVersion,includeUnbUnz:a.includeUnbUnz??ne.cargoImp.includeUnbUnz??r.includeUnbUnz,useTypeBHeader:a.useTypeBHeader??ne.cargoImp.useTypeBHeader??r.useTypeBHeader??!0,typeBPriority:a.typeBPriority||ne.cargoImp.typeBPriority||r.typeBPriority||"QK"}}function Ho(t,r){const a=ne.cargoImp.policyOverrides[t]||{};ne.cargoImp.policyOverrides[t]={...a,...r},gt()}function Bo(t,r,a){const o=wr(t),n=ne.cargoImp.policyOverrides[t]||{};let i=[...n.enabledSegments||o.enabledSegments||[]],l=[...n.disabledSegments||o.disabledSegments||[]];a?(i.includes(r)||i.push(r),l=l.filter(s=>s!==r)):(l.includes(r)||l.push(r),i=i.filter(s=>s!==r)),ne.cargoImp.policyOverrides[t]={...n,enabledSegments:i,disabledSegments:l},gt()}function $o(t,r,a){const o=wr(t),n=ne.cargoImp.policyOverrides[t]||{};let i=[...n.enabledFhlSegments||o.enabledFhlSegments||[]],l=[...n.disabledFhlSegments||o.disabledFhlSegments||[]];a?(i.includes(r)||i.push(r),l=l.filter(s=>s!==r)):(l.includes(r)||l.push(r),i=i.filter(s=>s!==r)),ne.cargoImp.policyOverrides[t]={...n,enabledFhlSegments:i,disabledFhlSegments:l},gt()}function Mo(t){ne.cargoImp.useTypeBHeader=t,gt()}function wa(){return ne.cargoImp.useTypeBHeader??!0}function Wt(){const t=ne.cargoImp.typeBConfig;return{..._o,...t}}function Wo(t){ne.cargoImp.typeBConfig={...ne.cargoImp.typeBConfig,...t},gt()}function q(t,r=0,a=!1,o=!0){if(!t)return"";const n=a?" ":"";return t=t.replace(/,/g,"."),t=t.replace(/Ü/g,"U").replace(/ü/g,"u"),t=t.replace(/-/g,n),t=t.replace(/\//g,n),t=t.replace(/#/g,n),t=t.replace(/'/g,n),t=t.replace(/\?/g,n),t=t.replace(/ñ/g,n).replace(/Ñ/g,n),t=t.replace(/\*/g,n),t=t.replace(/&/g,n),t=t.replace(/°/g,n),t=t.replace(/:/g,n),t=t.replace(/\n/g,n).replace(/\r/g,n),t=t.replace(/\+/g,n),t=t.replace(/"/g," ").replace(/"/g," ").replace(/"/g," "),t=t.replace(/`/g," ").replace(/´/g," "),t=t.replace(/_/g,n),t=t.replace(/@/g,n),t=t.replace(/\(/g,"").replace(/\)/g,""),o&&(t=t.replace(/\./g,n)),r>0&&t.length>r&&(t=t.substring(0,r)),t=t.trim(),t=t.replace(/\s+/g," "),t.toUpperCase()}function Uo(t){return t.replace(/:/g," ").replace(/\$/g," ").replace(/=/g," ").replace(/»/g," ")}function It(t,r=!1){let a=t.replace(/\(/g,"").replace(/\)/g,"").replace(/,/g,"").replace(/&/g,"").replace(/Ñ/g,"N").replace(/ñ/g,"n");return r&&(a=a.replace(/\?/g,"")),a}function Go(t,r=["CM","SK","LG"]){let a=t.toUpperCase().trim();for(const o of r)if(a.startsWith(o)){a="0"+a;break}return a}function de(t,r=1){const a=typeof t=="string"?parseFloat(t):t;return isNaN(a)?"0.0":a.toFixed(r)}function Vo(t){const r=t?new Date(t):new Date,a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=r.getDate().toString().padStart(2,"0"),n=a[r.getMonth()],i=r.getFullYear().toString().slice(-2);return`${o}${n}${i}`}function ya(){const t=new Date,r=t.getFullYear().toString().slice(-2),a=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0"),n=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${r}${a}${o}:${n}${i}`}function yr(){const t=Ft();return t.controlNumber&&t.controlNumber.trim()?t.controlNumber.trim():Date.now().toString().slice(-14)}function kt(t){return t.replace(/-/g,"").replace(/\s/g,"")}function Na(t){const r=t.replace(/\s/g,"").replace(/-/g,"");return r.length>=11?r.substring(0,3)+"-"+r.substring(3):r}function zo(t){return t.replace(/-/g,"").replace(/\s/g,"").toUpperCase()}function De(t){return kt(t).substring(0,3)}function rt(t){return{LON:"LHR",RNG:"MDE"}[t.toUpperCase()]||t.toUpperCase()}const Xe={senderIds:{EC:{senderId:"REUAGT89ECRGML/UIO01:PIMA",senderIdDescartes:"TDVAGT03DSV/BOG01:PIMA"},CO:{senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",senderIdDescartes:"TDVAGT03DSV/BOG01:PIMA"}},defaultPostalCodes:{EC:"00000",CO:"110111",DEFAULT:"10"},chinaPostalCode:"170452",controlNumber:"96728316614806",senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",defaultSignature:"CARGOOP"};function Ft(){if(typeof localStorage>"u")return Xe;try{const t=localStorage.getItem("traxon_connector_config");if(t){const a=JSON.parse(t);if(a.cargoImp)return{...Xe,controlNumber:a.cargoImp.controlNumber||Xe.controlNumber,senderId:a.cargoImp.senderId||Xe.senderId,defaultSignature:a.cargoImp.defaultSignature||Xe.defaultSignature}}const r=localStorage.getItem("cargoimp_global_config");if(r)return{...Xe,...JSON.parse(r)}}catch(t){console.warn("Error loading CARGO-IMP global config:",t)}return{...Xe}}function at(t,r,a){if(t&&t.trim())return t.trim().substring(0,9);if(a&&a.trim())return a.trim().substring(0,9);const n=Ft().defaultPostalCodes;return r==="EC"?n.EC||"00000":r==="CO"?n.CO||"110111":n.DEFAULT||"10"}function Sa(){return Ft().chinaPostalCode||"170452"}function Aa(){return Ft().senderId||Xe.senderId}function Ut(){return Ft().defaultSignature||"CARGOOP"}class qo{constructor(){this.config=ut()}getAirlinePolicy(r){return wr(r)}reloadConfig(){this.config=ut()}getPolicyInfo(r){var i;const a=(i=this.config.cargoImp)==null?void 0:i.airlinePolicies,o=[];if(a&&a[r])return{policy:this.getAirlinePolicy(r),source:"custom",airlineName:`Aerolínea ${r} (Configuración personalizada)`,isDefault:!1,warnings:o};if(je[r])return{policy:this.getAirlinePolicy(r),source:"configured",airlineName:je[r].name,isDefault:!1,warnings:o};const n=this.getAirlinePolicy(r);return o.push(`⚠️ Aerolínea ${r} no tiene política específica configurada. Se usará la política DEFAULT.`),o.push("💡 Puedes agregar una política personalizada en Configuración → CARGO-IMP."),{policy:n,source:"default",airlineName:`Aerolínea ${r} (usando DEFAULT)`,isDefault:!0,warnings:o}}generateFWB(r,a){const o=De(r.awbNumber),n=this.getAirlinePolicy(o),i=a||n.fwbVersion,l=this.buildFwbSegments(r,n,i),s=this.assembleMessage(l,n),d=[];return l.forEach(m=>{m.errors.length>0&&d.push(...m.errors.map(u=>`${m.code}: ${u}`))}),{type:"FWB",version:i,awbNumber:r.awbNumber,segments:l,fullMessage:s,isValid:d.length===0,errors:d,policy:n,timestamp:new Date().toISOString()}}generateFHL(r,a,o){const n=De(r.awbNumber),i=this.getAirlinePolicy(n),l=o||i.fhlVersion,s=this.buildFhlSegments(r,a,i,l),d=this.assembleFhlMessage(s),m=[];return s.forEach(u=>{u.errors.length>0&&m.push(...u.errors.map(p=>`${u.code}: ${p}`))}),{type:"FHL",version:l,awbNumber:r.awbNumber,hawbNumber:a.hawbNumber,segments:s,fullMessage:d,isValid:m.length===0,errors:m,policy:i,timestamp:new Date().toISOString()}}generateConcatenatedFHL(r,a){if(!r.houseBills||r.houseBills.length===0)return"";const o=De(r.awbNumber),n=this.getAirlinePolicy(o),i=a||n.fhlVersion,l=[];return r.houseBills.forEach((s,d)=>{const m=this.generateFHL(r,s,i),u=It(m.fullMessage,!0);l.push(u)}),l.join(`&
`)}generateFHLCase7(r,a,o){const n=De(r.awbNumber),i=this.getAirlinePolicy(n),l=o||i.fhlVersion,s={...i,includeUnbUnz:!0,fhlAlwaysWithHeader:!0},d=this.buildFhlSegments(r,a,s,l,!0);let m=this.assembleFhlMessage(d);m=It(m,!1);const u=[];return d.forEach(p=>{p.errors.length>0&&u.push(...p.errors.map(c=>`${p.code}: ${c}`))}),{type:"FHL",version:l,awbNumber:r.awbNumber,hawbNumber:a.hawbNumber,segments:d,fullMessage:m,isValid:u.length===0,errors:u,policy:s,timestamp:new Date().toISOString()}}generateAllFHLCase8(r,a){if(!r.houseBills||r.houseBills.length===0)return"";const o=De(r.awbNumber),n=this.getAirlinePolicy(o),i=a||n.fhlVersion;let l=i+`
`;return r.houseBills.forEach((s,d)=>{const m=d===0,u=this.buildFhlSegmentsCase8(r,s,n,i,m),p=this.assembleFhlMessageWithoutHeader(u),c=It(p,!0);l+=c}),l}generateMessageBundle(r){const a=De(r.awbNumber),o=this.getAirlinePolicy(a),n=Math.floor(o.policy/10),i=o.policy%10,l=this.generateFWB(r);l.fullMessage=Uo(l.fullMessage);const s=[];let d;if(r.houseBills&&r.houseBills.length>0)switch(n){case 2:case 4:r.houseBills.forEach(m=>{const u=this.generateFHL(r,m);u.fullMessage=It(u.fullMessage,!1),s.push(u)});break;case 5:d=this.generateConcatenatedFHL(r);break;case 7:r.houseBills.forEach(m=>{const u=this.generateFHLCase7(r,m);s.push(u)});break;case 8:d=this.generateAllFHLCase8(r);break;default:r.houseBills.forEach(m=>{const u=this.generateFHL(r,m);u.fullMessage=It(u.fullMessage,!1),s.push(u)})}return{fwb:l,fhls:s,concatenatedFhl:d,policyCase:n,policyOption:i}}buildFwbSegments(r,a,o){const n=[],i=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","NFY","FTR"],l=a.enabledSegments||[],s=a.disabledSegments||[];return i.forEach((d,m)=>{Me[d];const u=l.length>0?l.includes(d)&&!s.includes(d):!s.includes(d),p=this.buildFwbSegment(d,r,a,o,u,m+1);n.push(p)}),n.sort((d,m)=>d.order-m.order)}buildFwbSegment(r,a,o,n,i,l){var g,f,C,N,S,v,_,x,E,k,D,M;const s=Me[r];let d="",m=[];const u=[],p=[];switch(r){case"FWB":d=this.buildFwbHeader(a,o,n),m=[{name:"version",value:n,originalValue:n,maxLength:7,required:!0,modified:!1}];break;case"AWB":d=this.buildAwbSegment(a),m=[{name:"awbNumber",value:kt(a.awbNumber),originalValue:kt(a.awbNumber),maxLength:11,required:!0,modified:!1},{name:"origin",value:a.origin,originalValue:a.origin,maxLength:3,required:!0,modified:!1},{name:"destination",value:rt(a.destination),originalValue:rt(a.destination),maxLength:3,required:!0,modified:!1},{name:"pieces",value:a.pieces.toString(),originalValue:a.pieces.toString(),maxLength:5,required:!0,modified:!1},{name:"weight",value:de(a.weight),originalValue:de(a.weight),maxLength:10,required:!0,modified:!1}];break;case"FLT":d=this.buildFltSegment(a),a.flights&&a.flights.length>0&&(m=a.flights.slice(0,2).map((le,re)=>({name:`flight${re+1}`,value:le.flightNumber,originalValue:le.flightNumber,maxLength:10,required:!1,modified:!1})));break;case"RTG":d=this.buildRtgSegment(a),m=[{name:"routing",value:d,originalValue:d,maxLength:100,required:!0,modified:!1}];break;case"SHP":const V=(f=(g=a.agent)==null?void 0:g.address)==null?void 0:f.postalCode;d=this.buildShpSegment(a.shipper,((N=(C=a.consignee)==null?void 0:C.address)==null?void 0:N.countryCode)||"",a.awbNumber,n,V),m=[{name:"name",value:q(a.shipper.name,35,!0),originalValue:q(a.shipper.name,35,!0),maxLength:35,required:!0,modified:!1},{name:"address",value:q(a.shipper.address.street,35,!0),originalValue:q(a.shipper.address.street,35,!0),maxLength:35,required:!0,modified:!1},{name:"city",value:a.shipper.address.place,originalValue:a.shipper.address.place,maxLength:17,required:!0,modified:!1},{name:"country",value:a.shipper.address.countryCode,originalValue:a.shipper.address.countryCode,maxLength:2,required:!0,modified:!1},{name:"postalCode",value:at(a.shipper.address.postalCode,a.shipper.address.countryCode,V),originalValue:at(a.shipper.address.postalCode,a.shipper.address.countryCode,V),maxLength:9,required:!1,modified:!1}];break;case"CNE":const A=(v=(S=a.agent)==null?void 0:S.address)==null?void 0:v.postalCode;d=this.buildCneSegment(a.consignee,n,A),m=[{name:"name",value:q(a.consignee.name,35,!0),originalValue:q(a.consignee.name,35,!0),maxLength:35,required:!0,modified:!1},{name:"address",value:q(a.consignee.address.street,35,!0),originalValue:q(a.consignee.address.street,35,!0),maxLength:35,required:!0,modified:!1},{name:"city",value:a.consignee.address.place,originalValue:a.consignee.address.place,maxLength:17,required:!0,modified:!1},{name:"country",value:a.consignee.address.countryCode,originalValue:a.consignee.address.countryCode,maxLength:2,required:!0,modified:!1},{name:"postalCode",value:at(a.consignee.address.postalCode,a.consignee.address.countryCode,A),originalValue:at(a.consignee.address.postalCode,a.consignee.address.countryCode,A),maxLength:9,required:!0,modified:!1}];break;case"AGT":d=this.buildAgtSegment(a),m=[{name:"iataCode",value:a.agent.iataCode,originalValue:a.agent.iataCode,maxLength:7,required:!0,modified:!1},{name:"cassCode",value:a.agent.cassCode||"",originalValue:a.agent.cassCode||"",maxLength:4,required:!1,modified:!1},{name:"name",value:a.agent.name,originalValue:a.agent.name,maxLength:35,required:!0,modified:!1}];break;case"SSR":d=this.buildSsrSegment(a),m=[{name:"ssr",value:a.specialServiceRequest||"",originalValue:a.specialServiceRequest||"",maxLength:65,required:!1,modified:!1}];break;case"ACC":d=this.buildAccSegment(a),a.accounting&&a.accounting.length>0&&(m=a.accounting.map((le,re)=>({name:`acc${re+1}`,value:le.accountingInformation||"",originalValue:le.accountingInformation||"",maxLength:34,required:!1,modified:!1})));break;case"CVD":d=this.buildCvdSegment(a);const X=this.calculateWtOt(a);m=[{name:"currency",value:a.currency,originalValue:a.currency,maxLength:3,required:!0,modified:!1},{name:"wtOt",value:X,originalValue:X,maxLength:2,required:!0,modified:!1},{name:"declaredCarriage",value:a.declaredValueCarriage||"NVD",originalValue:a.declaredValueCarriage||"NVD",maxLength:15,required:!0,modified:!1},{name:"declaredCustoms",value:a.declaredValueCustoms||"NCV",originalValue:a.declaredValueCustoms||"NCV",maxLength:15,required:!0,modified:!1}];break;case"RTD":d=this.buildRtdSegment(a,o);break;case"NG":d=this.buildNgSegment(a,o);const se=this.getNatureOfGoods(a,o);m=[{name:"description",value:se,originalValue:se,maxLength:20,required:!0,modified:!1}];break;case"NH":d=this.buildNhSegment(a);break;case"NV":d=this.buildNvSegment(a);break;case"NS":d=this.buildNsSegment(a);break;case"OTH":d=this.buildOthSegment(a);break;case"PPD":d=a.paymentMethod==="Prepaid"?this.buildChargeSummary(a,"PPD"):"";break;case"COL":d=a.paymentMethod==="Collect"?this.buildChargeSummary(a,"COL"):"";break;case"CER":d=this.buildCerSegment(a,o);break;case"ISU":d=this.buildIsuSegment(a,o);break;case"REF":d=this.buildRefSegment(a);break;case"SPH":d=this.buildSphSegment(a,o);const Ce=this.getSphCodes(a,o);m=[{name:"codes",value:Ce.join("/"),originalValue:Ce.join("/"),maxLength:40,required:!0,modified:!1}];break;case"OCI":d=this.buildOciSegment(a,o);break;case"NFY":d=this.buildNfySegment(a),a.alsoNotify&&(m=[{name:"name",value:a.alsoNotify.name||"",originalValue:a.alsoNotify.name||"",maxLength:35,required:!1,modified:!1},{name:"address",value:((_=a.alsoNotify.address)==null?void 0:_.street)||"",originalValue:((x=a.alsoNotify.address)==null?void 0:x.street)||"",maxLength:35,required:!1,modified:!1},{name:"city",value:((E=a.alsoNotify.address)==null?void 0:E.place)||"",originalValue:((k=a.alsoNotify.address)==null?void 0:k.place)||"",maxLength:17,required:!1,modified:!1},{name:"country",value:((D=a.alsoNotify.address)==null?void 0:D.countryCode)||"",originalValue:((M=a.alsoNotify.address)==null?void 0:M.countryCode)||"",maxLength:2,required:!1,modified:!1}]);break;case"FTR":d=this.buildFwbFooter(o);break}const c=d.length>s.maxLength?d:void 0;return d.length>s.maxLength&&u.push(`Excede límite: ${d.length}/${s.maxLength} caracteres (${d.length-s.maxLength} de más)`),{type:r,code:r,name:s.name,content:d,originalContent:c,order:l,enabled:i,editable:!["FWB","FTR","AWB"].includes(r),currentLength:d.length,maxLength:s.maxLength,errors:u,warnings:p,fields:m}}buildTypeBHeader(r,a,o){const n=this.getTypeBConfig(),i=a.typeBPriority||n.defaultPriority,l=n.recipientAddress||"DSGUNXA",s=n.senderPrefix||"DSGTPXA",d=n.originAddress||"TDVAGT03OPERFLOR/BOG1",m=n.includeTimestamp??!0;let u=`.${s}`;if(m){const p=new Date,c=String(p.getUTCDate()).padStart(2,"0")+String(p.getUTCHours()).padStart(2,"0")+String(p.getUTCMinutes()).padStart(2,"0");u+=` ${c}`}return u+=` ${d}`,`${i} ${l}
${u}
${o}`}getCarrierCodeForTypeB(r){if(r.flights&&r.flights.length>0&&r.flights[0].carrierCode)return r.flights[0].carrierCode.toUpperCase().substring(0,2);const a=De(r.awbNumber);return{729:"AV",134:"AV",743:"QT",270:"LA",145:"LA",985:"LA",105:"CM",230:"P5","044":"AD",957:"G3",999:"C$",695:"CX",406:"5Y","023":"5X",580:"UX","001":"AA","006":"DL","016":"UA","014":"AC",992:"AA","057":"AF","074":"KL","075":"IB","045":"IB",220:"LH","020":"LH",235:"TK",125:"BA",932:"VS",555:"SU",176:"EK",157:"QR",607:"EY","071":"ET",131:"JL",180:"KE",160:"CA",618:"SQ"}[a]||"XX"}getTypeBConfig(){return Wt()}buildFwbHeader(r,a,o){var d;if(a.useTypeBHeader)return this.buildTypeBHeader(r,a,o);if(!a.includeUnbUnz)return o;const n=Aa(),i=yr(),l=((d=r.routing)==null?void 0:d.recipientAddress)||a.airlineAddress||"AIRLINE_ADDRESS",s=o.replace("FWB/","");return`UNB+IATA:1+${n}+${l}:PIMA+${ya()}+${i}+0++L'UNH+${i}+CIMFWB:${s}'${o}`}buildAwbSegment(r){const a=Na(r.awbNumber),o=r.origin.toUpperCase(),n=rt(r.destination);return`${a}${o}${n}/T${r.pieces}K${de(r.weight)}`}buildFltSegment(r){if(!r.flights||r.flights.length===0)return"";const a=["FLT"];return r.flights.slice(0,2).forEach(o=>{const n=o.date?new Date(o.date).getDate().toString().padStart(2,"0"):"";a.push(`/${o.flightNumber}/${n}`)}),a.join("")}buildRtgSegment(r){const a=["RTG"];return r.flights&&r.flights.length>0?r.flights.forEach(o=>{const n=rt(o.destination);a.push(`/${n}${o.carrierCode}`)}):a.push(`/${r.origin}XX/${rt(r.destination)}XX`),a.join("")}buildShpSegment(r,a,o,n,i){var g;const l=q(r.name,35,!0),s=q(r.address.street,35,!0),d=r.address.place.toUpperCase(),m=r.address.countryCode.toUpperCase();let u=at(r.address.postalCode,m,i);const p=De(o);m==="EC"&&(a==="CN"||p==="992"||p==="176")&&(u=Sa());let c="";return n==="FWB/17"?c=`SHP
NAM/${l}
ADR/${s}
LOC/${d}
/${m}/${u}`:c=`SHP
/${l}
/${s}
/${d}
/${m}/${u}`,(g=r.contact)!=null&&g.number&&(c+=`/TE/${r.contact.number.replace(/\s/g,"")}`),c}buildCneSegment(r,a,o){var c,g;const n=q(r.name,35,!0),i=q(r.address.street,35,!0),l=r.address.place.toUpperCase(),s=r.address.countryCode.toUpperCase(),d=((c=r.address.state)==null?void 0:c.toUpperCase())||"",m=at(r.address.postalCode,s,o);let u=l;s==="US"&&d&&(u=`${l}/${d}`);let p=`CNE
/${n}
/${i}
/${u}
/${s}/${m}`;return(g=r.contact)!=null&&g.number&&(p+=`/TE/${r.contact.number.replace(/\s/g,"")}`),p}buildAgtSegment(r){const a=r.agent.iataCode,o=r.agent.cassCode||"",n=q(r.agent.name,35,!0),i=r.agent.place.toUpperCase();return`AGT//${a}/${o}
/${n}
/${i}`}buildSsrSegment(r){if(!r.specialServiceRequest)return"";const a=q(r.specialServiceRequest,195,!0).split(`
`).filter(o=>o.trim()).slice(0,3);return a.length===0?"":"SSR/"+a.map(o=>q(o,65,!1,!1)).join(`
/`)}buildCvdSegment(r){const a=r.currency,o=this.calculateWtOt(r),n=r.declaredValueCarriage||"NVD",i=r.declaredValueCustoms||"NCV";return`CVD/${a}//${o}/${n}/${i}/XXX`}calculateWtOt(r){const a=r.paymentMethod==="Prepaid";let o=!1,n=!1;return r.otherCharges&&r.otherCharges.length>0&&r.otherCharges.forEach(i=>{i.paymentMethod==="Collect"&&(o=!0),i.paymentMethod==="Prepaid"&&(n=!0)}),a?o&&!n?"PC":"PP":n&&!o?"CP":"CC"}buildRtdSegment(r,a){const o=[],n=a.policy%10;return r.rates.forEach((i,l)=>{let s=`RTD/${l+1}/P${i.pieces}`;if(s+=`/K${de(i.weight)}`,s+=`/C${this.mapRateClass(i.rateClassCode)}`,i.commodityCode&&/^\d+$/.test(i.commodityCode)&&(s+=`/S${i.commodityCode.padStart(4,"0").substring(0,4)}`),i.chargeableWeight&&(s+=`/W${de(i.chargeableWeight)}`),n>=1){const d=i.rateOrCharge?de(i.rateOrCharge,2):"0.0",m=i.total?de(i.total,2):"0.0";s+=`/R${d}/T${m}`}o.push(s)}),o.join(`
`)}mapRateClass(r){const a={QUANTITY_RATE:"Q",NORMAL_RATE:"N",MINIMUM_CHARGE:"M",SPECIFIC_COMMODITY_RATE:"C",BASIC_CHARGE:"B"};return r.length===1?r:a[r]||"Q"}buildNgSegment(r,a){const o=De(r.awbNumber);if(o==="985"||o==="145"){const i=r.rates[0],l=(i==null?void 0:i.commodityCode)||"";return r.hasHouses&&(l==="0609"||l==="609")?"/NC/CONSOLIDATE FLOWERS":"/NG/CUT FLOWERS"}return`/NG/${this.getNatureOfGoods(r,a)}`}getNatureOfGoods(r,a){return r.goodsDescriptionOverride?q(r.goodsDescriptionOverride,20,!0):r.description?q(r.description,20,!0):"FRESHPERISH"}buildNhSegment(r){const a=[],o=[];let n=2;return r.rates.forEach(l=>{l.hsCodes?a.push(...l.hsCodes):l.hsCode&&a.push(l.hsCode)}),r.hasHouses&&r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(l=>{l.htsCodes&&l.htsCodes.length>0&&a.push(...l.htsCodes)}),a.length===0?"":([...new Set(a)].forEach(l=>{o.push(`/${n}/NH/${l}`),n++}),o.join(`
`))}getNextLineNumberAfterNh(r){const a=[];return r.rates.forEach(n=>{n.hsCodes?a.push(...n.hsCodes):n.hsCode&&a.push(n.hsCode)}),r.hasHouses&&r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(n=>{n.htsCodes&&n.htsCodes.length>0&&a.push(...n.htsCodes)}),2+[...new Set(a)].length}buildNvSegment(r){let a=0;if(r.hasHouses&&r.houseBills&&r.houseBills.length>0?(r.houseBills.forEach((i,l)=>{const s=i.volumeCubicMeters??i.volume??0;console.log(`[NV Debug] House ${l}: volumeCubicMeters=${i.volumeCubicMeters}, volume=${i.volume}, using=${s}`),s>0&&(a+=s)}),a<=0&&r.volume&&r.volume>0&&(a=r.volume,console.log(`[NV Debug] No volume in houses, using master volume: ${a}`))):(a=r.volume??0,console.log(`[NV Debug] Direct shipment, using master volume: ${a}`)),console.log(`[NV Debug] Total volume: ${a}`),a<=0)return"";const o=this.getNextLineNumberAfterNh(r),n=Math.max(a,.01);return`/${o}/NV/MC${de(n,2)}`}buildNsSegment(r){if(!r.hasHouses||!r.pieces||r.pieces<=0)return"";let a=this.getNextLineNumberAfterNh(r),o=0;return r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(n=>{const i=n.volumeCubicMeters??n.volume??0;i>0&&(o+=i)}),o<=0&&r.volume&&r.volume>0&&(o=r.volume),o>0&&a++,`/${a}/NS/${r.pieces}`}buildOthSegment(r){if(!r.otherCharges||r.otherCharges.length===0)return"";const a=["OTH"];return r.otherCharges.forEach(o=>{const n=o.paymentMethod==="Prepaid"?"P":"C";a.push(`/${n}/${o.code}${de(o.amount,2)}`)}),a.join(`
`)}buildChargeSummary(r,a){if(r.chargeSummaryOverride){const d=r.chargeSummaryOverride;let m=`${a}`;return d.totalWeightCharge&&(m+=`/WT${d.totalWeightCharge}`),d.totalOtherChargesDueAgent&&(m+=`
/OA${d.totalOtherChargesDueAgent}`),d.totalOtherChargesDueCarrier&&(m+=`/OC${d.totalOtherChargesDueCarrier}`),m+=`/CT${d.chargeSummaryTotal}`,m}let o=0,n=0,i=0;r.rates.forEach(d=>{o+=d.total||0}),r.otherCharges&&r.otherCharges.forEach(d=>{d.entitlement==="DueAgent"?n+=d.amount:i+=d.amount});const l=o+n+i;let s=`${a}/WT${de(o,2)}`;return(n>0||i>0)&&(s+=`
/OA${de(n,2)}/OC${de(i,2)}`),s+=`/CT${de(l,2)}`,s}buildCerSegment(r,a){let o;return a.useAgencyNameForCER?o=q(r.agent.name||Ut(),20,!0):o=q(r.signature||Ut(),20,!0),`CER/${o}`}buildIsuSegment(r,a){const o=Vo(r.executionDate),n=(r.executionPlace||r.origin).toUpperCase();let i;return a!=null&&a.useAgencyNameForCER?i=q(r.agent.name||Ut(),20,!0):i=q(r.signature||Ut(),20,!0),`ISU/${o}/${n}/${i}`}buildRefSegment(r){const a=r.agent.iataCode,o=r.agent.cassCode||"",n=r.origin.toUpperCase();return`REF///AGT/${a}${o}/${n}`}buildSphSegment(r,a){return`SPH/${this.getSphCodes(r,a).join("/")}`}getSphCodes(r,a){return r.specialHandlingCodes&&r.specialHandlingCodes.length>0?r.specialHandlingCodes:a.defaultSphCodes}buildOciSegment(r,a){const o=r.consignee.address.countryCode.toUpperCase(),n=r.shipper.address.countryCode.toUpperCase(),i=r.consignee.taxId||r.consignee.accountNumber||"";let l="OCI";return n==="EC"?i?l+=`/${o}/CNE/T/${i.replace(/\s/g,"")}`:l+=`/${o}/CNE/T/EORI`:i?l+=`/${o}/CNE/T/EORI${i.replace(/\s/g,"")}`:l+=`/${o}/CNE/T/EORI`,l}buildAccSegment(r){if(!r.accounting||r.accounting.length===0)return"";const a=[];for(const o of r.accounting){let n=o.identifier||"GEN";n={GovernmentBillOfLading:"GBL",CreditCardNumber:"CC",CreditCardExpiryDate:"CCE",CreditCardIssuanceName:"CCN",GeneralInformation:"GEN",ModeOfSettlement:"MOS",ShippersReferenceNumber:"SRN"}[n]||n.substring(0,3).toUpperCase();const l=q(o.accountingInformation||"",34,!0);l&&a.push(`ACC/${n}/${l}`)}return a.join(`
`)}buildNfySegment(r){if(!r.alsoNotify)return"";const a=r.alsoNotify,o=[],n=q(a.name||"",35,!0);if(!n)return"";if(o.push(`NFY/${n}`),a.name2&&o.push(`/${q(a.name2,35,!0)}`),a.address){const i=q(a.address.street||"",35,!0);i&&o.push(`/${i}`),a.address.street2&&o.push(`/${q(a.address.street2,35,!0)}`)}if(a.address){const i=q(a.address.place||"",17,!0),l=a.address.state||"",s=a.address.countryCode||"",d=a.address.postalCode||"";(i||s)&&o.push(`/${i}/${l}/${s}/${d}`)}if(a.contact&&a.contact.number){const i=a.contact.identifier||"TE",l=q(a.contact.number,25,!0);o.push(`/${i}${l}`)}return o.join(`
`)}buildFwbFooter(r){if(r!=null&&r.useTypeBHeader)return"";const a=yr();return`'UNT+3+${a}'UNZ+1+${a}'`}getCountryFromAirport(r){return{BOG:"CO",MDE:"CO",CLO:"CO",CTG:"CO",UIO:"EC",GYE:"EC",MIA:"US",JFK:"US",LAX:"US",AMS:"NL",FRA:"DE",MAD:"ES",CDG:"FR",LHR:"GB"}[r.toUpperCase()]||"CO"}isFhlSegmentEnabled(r,a){return a.disabledFhlSegments&&a.disabledFhlSegments.length>0&&a.disabledFhlSegments.includes(r)?!1:a.enabledFhlSegments&&a.enabledFhlSegments.length>0?a.enabledFhlSegments.includes(r):!0}buildFhlSegments(r,a,o,n,i=!1){const l=[],s=i||o.fhlAlwaysWithHeader||o.includeUnbUnz&&o.policy%10<2,d=this.isFhlSegmentEnabled("FHL",o);if(s){const X=this.buildFhlEdifactHeader(r,o,n);l.push(this.createFhlSegment("FHL",X,1,d,[]))}else l.push(this.createFhlSegment("FHL",n,1,d,[]));const m=this.buildMbiSegment(r),u=this.isFhlSegmentEnabled("MBI",o);l.push(this.createFhlSegment("MBI",m,2,u,[{name:"awbNumber",value:kt(r.awbNumber),originalValue:kt(r.awbNumber),maxLength:11,required:!0,modified:!1},{name:"origin",value:r.origin,originalValue:r.origin,maxLength:3,required:!0,modified:!1},{name:"destination",value:r.destination,originalValue:r.destination,maxLength:3,required:!0,modified:!1}]));const p=this.buildHbsSegment(a,r,o),c=this.isFhlSegmentEnabled("HBS",o);l.push(this.createFhlSegment("HBS",p,3,c,[{name:"hawbNumber",value:a.hawbNumber,originalValue:a.hawbNumber,maxLength:20,required:!0,modified:!1},{name:"pieces",value:a.pieces.toString(),originalValue:a.pieces.toString(),maxLength:5,required:!0,modified:!1},{name:"weight",value:de(a.weight),originalValue:de(a.weight),maxLength:10,required:!0,modified:!1}]));const g=this.isFhlSegmentEnabled("TXT",o),C=(q(a.natureOfGoods,70,!0,!1)||"").replace(/\s*HS\s*.*/i,"").trim(),N=C?`TXT/${C}`:"";l.push(this.createFhlSegment("TXT",N,4,g&&!!N,[]));const S=this.isFhlSegmentEnabled("HTS",o);if(a.htsCodes&&a.htsCodes.length>0){const X=`HTS/${a.htsCodes[0]}`;l.push(this.createFhlSegment("HTS",X,5,S,[]))}else l.push(this.createFhlSegment("HTS","",5,!1,[]));const v=this.buildFhlOciSegment(a,r,o),_=this.isFhlSegmentEnabled("OCI",o)&&!!v;l.push(this.createFhlSegment("OCI",v,6,_,[]));const x=this.buildFhlShpSegment(a,r,o),E=this.isFhlSegmentEnabled("SHP",o);l.push(this.createFhlSegment("SHP",x,7,E,[]));const k=this.buildFhlCneSegment(a,r,o),D=this.isFhlSegmentEnabled("CNE",o);l.push(this.createFhlSegment("CNE",k,8,D,[]));const M=`CVD/${r.currency}/PP/NVD/NCV/XXX`,V=this.isFhlSegmentEnabled("CVD",o);l.push(this.createFhlSegment("CVD",M,9,V,[]));const A=this.isFhlSegmentEnabled("FTR",o)&&!o.useTypeBHeader;return s&&!o.useTypeBHeader?l.push(this.createFhlSegment("FTR",this.buildFwbFooter(o),10,A,[])):l.push(this.createFhlSegment("FTR","",10,!1,[])),l}buildFhlEdifactHeader(r,a,o){var d;if(a.useTypeBHeader)return this.buildTypeBHeaderFhl(r,a,o);const n=Aa(),i=yr(),l=((d=r.routing)==null?void 0:d.recipientAddress)||a.airlineAddress||"AIRLINE_ADDRESS",s=o.replace("FHL/","");return`UNB+IATA:1+${n}+${l}:PIMA+${ya()}+${i}+0++L'UNH+${i}+CIMFHL:${s}'${o}`}buildTypeBHeaderFhl(r,a,o){const n=this.getTypeBConfig(),i=a.typeBPriority||n.defaultPriority,l=n.recipientAddress||"DSGUNXA",s=n.senderPrefix||"DSGTPXA",d=n.originAddress||"TDVAGT03OPERFLOR/BOG1",m=n.includeTimestamp??!0;let u=`.${s}`;if(m){const p=new Date,c=String(p.getUTCDate()).padStart(2,"0")+String(p.getUTCHours()).padStart(2,"0")+String(p.getUTCMinutes()).padStart(2,"0");u+=` ${c}`}return u+=` ${d}`,`${i} ${l}
${u}
${o}`}buildFhlSegmentsCase8(r,a,o,n,i){const l=[];if(i){const C=this.buildMbiSegment(r);l.push(this.createFhlSegment("MBI",C,1,!0,[]))}const s=this.buildHbsSegment(a,r,o);l.push(this.createFhlSegment("HBS",s,2,!0,[]));const m=(q(a.natureOfGoods,70,!0,!1)||"").replace(/\s*HS\s*.*/i,"").trim(),u=m?`TXT/${m}`:"";if(u&&l.push(this.createFhlSegment("TXT",u,3,!0,[])),a.htsCodes&&a.htsCodes.length>0){const C=`HTS/${a.htsCodes[0]}`;l.push(this.createFhlSegment("HTS",C,4,!0,[]))}const p=this.buildFhlOciSegment(a,r,o);p&&l.push(this.createFhlSegment("OCI",p,5,!0,[]));const c=this.buildFhlShpSegment(a,r,o);l.push(this.createFhlSegment("SHP",c,6,!0,[]));const g=this.buildFhlCneSegment(a,r,o);l.push(this.createFhlSegment("CNE",g,7,!0,[]));const f=`CVD/${r.currency}/PP/NVD/NCV/XXX`;return l.push(this.createFhlSegment("CVD",f,8,!0,[])),l}assembleFhlMessageWithoutHeader(r){return r.filter(a=>a.enabled&&a.content).sort((a,o)=>a.order-o.order).map(a=>a.content).join(`
`)+`
`}createFhlSegment(r,a,o,n,i){const l=xe[r],s=[],d=a.length>l.maxLength?a:void 0;return a.length>l.maxLength&&s.push(`Excede límite: ${a.length}/${l.maxLength} caracteres (${a.length-l.maxLength} de más)`),{type:r,code:r,name:l.name,content:a,originalContent:d,order:o,enabled:n,editable:!["FHL","FTR","MBI"].includes(r),currentLength:a.length,maxLength:l.maxLength,errors:s,warnings:[],fields:i}}buildMbiSegment(r){const a=Na(r.awbNumber),o=r.origin.toUpperCase(),n=rt(r.destination);return`MBI/${a}${o}${n}/T${r.pieces}K${de(r.weight,0)}`}buildHbsSegment(r,a,o){const n=(r.origin||a.origin).toUpperCase(),i=rt(r.destination||a.destination),l="CUT FLOWERS",s=o.hawbPrefixAdd0||["CM","SK","LG"];let d=zo(r.hawbNumber);d=Go(d,s);const m=r.pieces.toString();return`HBS/${d}/${n}${i}/${r.pieces}/K${de(r.weight)}/${m}/${l}`}buildFhlOciSegment(r,a,o){var d,m,u,p;const n=r.consignee||a.consignee,i=((m=(d=n.address)==null?void 0:d.countryCode)==null?void 0:m.toUpperCase())||"US",l=n.taxId||n.accountNumber||"";return l?(((p=(u=(r.shipper||a.shipper).address)==null?void 0:u.countryCode)==null?void 0:p.toUpperCase())||"CO")==="EC"||o.ociFormat==="withoutPrefix"?`OCI/${i}/CNE/T/${l.replace(/\s/g,"")}`:`OCI/${i}/CNE/T/EORI${l.replace(/\s/g,"")}`:""}buildFhlShpSegment(r,a,o){var c,g,f,C,N,S,v,_;const n=r.shipper||{name:r.shipperName,address:a.shipper.address},i=q(n.name||r.shipperName,35,!0),l=q(((c=n.address)==null?void 0:c.street)||"",35,!0),s=(((g=n.address)==null?void 0:g.place)||"").toUpperCase(),d=(((f=n.address)==null?void 0:f.countryCode)||"CO").toUpperCase(),m=(N=(C=a.agent)==null?void 0:C.address)==null?void 0:N.postalCode;let u=at((S=n.address)==null?void 0:S.postalCode,d,m);if(o.requiresChinaPostalCode&&d==="EC"){const x=((_=(v=(r.consignee||a.consignee).address)==null?void 0:v.countryCode)==null?void 0:_.toUpperCase())||"",E=De(a.awbNumber);(x==="CN"||E==="992"||E==="176")&&(u=Sa())}return`SHP/${i}
/${l}
/${s}
/${d}/${u||""}`}buildFhlCneSegment(r,a,o){var f,C,N,S,v,_,x;const n=r.consignee||{name:r.consigneeName,address:a.consignee.address},i=q(n.name||r.consigneeName,35,!0),l=q(((f=n.address)==null?void 0:f.street)||"",35,!0),s=(((C=n.address)==null?void 0:C.place)||"").toUpperCase(),d=(((N=n.address)==null?void 0:N.countryCode)||"US").toUpperCase(),m=((v=(S=n.address)==null?void 0:S.state)==null?void 0:v.toUpperCase())||"";let u=((_=n.address)==null?void 0:_.postalCode)||"";u.length>9&&(u=u.substring(0,9)),u||(u="10");let p=s;d==="US"&&m&&(p=`${s}/${m}`);let c=`CNE/${i}
/${l}
/${p}
/${d}/${u}`;const g=(x=n.contact)==null?void 0:x.number;return g&&(c+=`/TE/${g.replace(/\s/g,"")}`),c}assembleMessage(r,a){return r.filter(o=>o.enabled&&o.content).sort((o,n)=>o.order-n.order).map(o=>o.content).join(`
`)}assembleFhlMessage(r){return r.filter(a=>a.enabled&&a.content).sort((a,o)=>a.order-o.order).map(a=>a.content).join(`
`)}getAllFwbSegments(){return Me}getAllFhlSegments(){return xe}getAllAirlinePolicies(){return je}updateSegment(r,a){return{...r,content:a,currentLength:a.length,errors:a.length>r.maxLength?[`Excede límite de ${r.maxLength} caracteres`]:[]}}regenerateMessage(r,a){return this.assembleMessage(r,a)}}const Gt=new qo,jo=/^[A-Z]+$/,Vt=/^[0-9]+$/,Xo=/^[A-Z0-9]+$/,Nr=/^[A-Z]{3}$/,Ta=/^[A-Z]{2}$/,Yo=/^[A-Z]{3}$/,Ko=/^[0-3][0-9](JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[0-9]{2}$/,Zo=/^[0-3]?[0-9]$/,zt=/^[0-9]+(\.[0-9]+)?$/,Qo=/^[A-Z]{3}$/,Jo=/^(TE|FX|EM)$/,en=["CNE","SHP","AGT","NFY"],tn=["T","RA","CT","CP","SM","SO","ACE","ACI","ACH","CB","RG","ID"],rn=["PP","CC","PC","CP"],an=["EAW","EAP"],Sr=70;function on(t,r){const a=[],o=[],n=t.segments.filter(c=>c.enabled);for(const c of n){let g;t.type==="FWB"?g=nn(c,t,r):g=An(c,t),a.push(g),o.push(...g.issues)}const i=Fn(t,n);o.push(...i);const l=Rn(t.fullMessage);o.push(...l);const s=o.filter(c=>c.severity==="error").length,d=o.filter(c=>c.severity==="warning").length,m=o.filter(c=>c.severity==="info").length,u=On(s,d,n.length),p=s===0?d>0?`✅ Mensaje válido con ${d} advertencia(s).`:"✅ Mensaje válido. Sin errores ni advertencias.":`⚠️ ${s} error(es) encontrado(s). Revise antes de enviar.`;return{isValid:s===0&&d===0,canSend:!0,hasErrors:s>0,segmentResults:a,allIssues:o,totalErrors:s,totalWarnings:d,totalInfo:m,score:u,summary:p,timestamp:new Date().toISOString()}}function nn(t,r,a){const o=[],n=t.content.split(`
`).filter(m=>m.trim()),i=t.code;switch(i){case"FWB":sn(n,o);break;case"AWB":ln(n,o,t);break;case"FLT":cn(n,o,t);break;case"RTG":dn(n,o,t);break;case"SHP":qt("SHP",n,o,t);break;case"CNE":qt("CNE",n,o,t);break;case"AGT":mn(n,o,t);break;case"SSR":pn(n,o,t);break;case"CVD":Ea(n,o,t,r);break;case"RTD":un(n,o,t);break;case"NG":gn(n,o,t);break;case"NH":hn(n,o,t,a);break;case"NV":bn(n,o,t);break;case"NS":fn(n,o,t);break;case"OTH":xn(n,o,t);break;case"PPD":case"COL":vn(i,n,o,t);break;case"CER":Cn(n,o,t);break;case"ISU":wn(n,o,t);break;case"REF":yn(n,o,t);break;case"SPH":Nn(n,o,t);break;case"OCI":Ia(n,o,t);break;case"NFY":Sn(n,o,t);break}["FWB","FHL","FTR"].includes(i)||n.forEach((m,u)=>{ka(m,i,u+1,o)});const l=o.filter(m=>m.severity==="error").length,s=o.filter(m=>m.severity==="warning").length,d=o.filter(m=>m.severity==="info").length;return{segment:i,segmentName:t.name,isValid:l===0,issues:o,errorCount:l,warningCount:s,infoCount:d,lines:n}}function sn(t,r,a){const o=t.join(`
`),n=o.match(/FWB\/(\d+)/);if(!n){r.push({severity:"error",segment:"FWB",field:"version",message:"Falta identificador de versión FWB/XX en el header",rule:"FWB.3[a]: El tag siempre debe ser FWB seguido de versión",suggestion:"Agregar FWB/16 o FWB/17"});return}const i=parseInt(n[1]);if((i<9||i>17)&&r.push({severity:"warning",segment:"FWB",field:"version",message:`Versión FWB/${i} no es estándar. Las versiones comunes son 16 y 17`,rule:"FWB versión: hasta 2[n]",found:`FWB/${i}`,expected:"FWB/16 o FWB/17"}),o.includes("UNB+")&&(o.includes("IATA:1")||r.push({severity:"warning",segment:"FWB",field:"UNB",message:"Header EDIFACT debería contener IATA:1 como identificador de sintaxis",rule:"EDIFACT UNB: Syntax identifier IATA:1"}),o.includes("UNH+")||r.push({severity:"error",segment:"FWB",field:"UNH",message:"Falta segmento UNH (Message Header) en el envelope EDIFACT",rule:"EDIFACT: UNB debe ir seguido de UNH"})),o.match(/^Q[KDPU]\s/)){const l=o.split(`
`);l.length<2&&r.push({severity:"error",segment:"FWB",field:"TypeB",message:"Header Type B incompleto. Debe tener al menos 2 líneas (prioridad + origen)",rule:"Type B: Priority line + Origin line + FWB version"}),l.length>=2&&!l[1].startsWith(".")&&r.push({severity:"error",segment:"FWB",field:"TypeB",message:"Segunda línea del header Type B debe comenzar con punto (.)",rule:"Type B: .SenderPrefix DDHHmm OriginAddress",found:l[1].substring(0,10),suggestion:"Formato: .DSGTPXA DDHHmm ORIGINADDRESS"})}}function ln(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"AWB",message:"Segmento AWB está vacío. Es OBLIGATORIO.",rule:"AWB: Segmento requerido en FWB"});return}const n=o.match(/^(\d{3})-(\d{8})([A-Z]{3})([A-Z]{3})\/T(\d+)([KL])([\d.]+)$/);if(n){const[i,l,s,d,m,u,p,c]=n;p==="L"&&r.push({severity:"info",segment:"AWB",field:"weightUnit",message:"Peso expresado en Libras (L). La mayoría de aerolíneas usan Kilos (K).",rule:"AWB: a[1] = K (kilos) o L (libras)",found:"L (Libras)"});const g=s.substring(0,7),f=parseInt(s[7]),C=parseInt(g)%7;f!==C&&r.push({severity:"error",segment:"AWB",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido. Serial "${s}" → últimos 7 dígitos: ${g}, mod 7 = ${C}, pero check digit es ${f}`,rule:"AWB: El 8vo dígito del serial es check digit (primeros 7 dígitos mod 7)",expected:`${g}${C}`,found:s,suggestion:`Corregir serial a ${g}${C}`}),Nr.test(d)||r.push({severity:"error",segment:"AWB",field:"origin",message:`Código de origen "${d}" no es un código IATA válido (3 letras mayúsculas)`,rule:"AWB [1/18]: Origen 3[a] código IATA",found:d}),Nr.test(m)||r.push({severity:"error",segment:"AWB",field:"destination",message:`Código de destino "${m}" no es un código IATA válido (3 letras mayúsculas)`,rule:"AWB [1/18]: Destino 3[a] código IATA",found:m}),parseInt(u)<=0&&r.push({severity:"error",segment:"AWB",field:"pieces",message:"Número de piezas debe ser mayor a 0",rule:"AWB [22J]: Piezas hasta 4[n]",found:u}),u.length>4&&r.push({severity:"warning",segment:"AWB",field:"pieces",message:`Número de piezas excede 4 dígitos (${u.length})`,rule:"AWB [22J]: Máximo 4 dígitos",found:u});const N=parseFloat(c);(isNaN(N)||N<=0)&&r.push({severity:"error",segment:"AWB",field:"weight",message:"Peso debe ser un número mayor a 0",rule:"AWB [22K]: Peso hasta 7[n] con decimales",found:c}),c.replace(".","").length>7&&r.push({severity:"warning",segment:"AWB",field:"weight",message:`Peso excede 7 dígitos (${c})`,rule:"AWB [22K]: Máximo 7 dígitos",found:c})}else{const i=o.match(/^(\d{1,3})/);i?i[1].length!==3&&r.push({severity:"error",segment:"AWB",field:"awbPrefix",message:`Prefijo de aerolínea debe ser exactamente 3 dígitos. Encontrado: ${i[1].length} dígito(s)`,rule:"AWB [1A]: Prefijo aerolínea 3[n]",expected:"3 dígitos (ej: 992)",found:i[1]}):r.push({severity:"error",segment:"AWB",field:"awbPrefix",message:"Falta prefijo de aerolínea (3 dígitos numéricos)",rule:"AWB [1A]: Prefijo aerolínea 3[n]",expected:"Ej: 992, 075, 176",found:o.substring(0,5)});const l=o.match(/^\d{3}-(\d+)/);l&&l[1].length!==8&&r.push({severity:"error",segment:"AWB",field:"awbSerial",message:`Número serial AWB debe ser exactamente 8 dígitos. Encontrado: ${l[1].length}`,rule:"AWB [1B]: Serial 8[n]",expected:"8 dígitos",found:l[1]});const s=o.match(/\d{8}([A-Z]{0,6})/);if(s){const d=s[1];d.length<6&&r.push({severity:"error",segment:"AWB",field:"origin/destination",message:"Origen y destino deben ser códigos IATA de 3 letras cada uno (total 6 caracteres)",rule:"AWB [1/18]: Origen 3[a] + Destino 3[a]",expected:"Ej: BOGMIA, UIOLHR",found:d})}o.includes("/T")||r.push({severity:"error",segment:"AWB",field:"pieces",message:"Falta indicador de piezas /T{cantidad}",rule:"AWB [22J]: Piezas hasta 4[n] con prefijo T",suggestion:"Formato: /T304 (304 piezas)"}),!o.includes("K")&&!o.includes("L")&&r.push({severity:"error",segment:"AWB",field:"weight",message:"Falta indicador de peso K{peso} o L{peso}",rule:"AWB: Peso a[1]n[1-7] — a[1] = K (kilos) o L (libras)",suggestion:"Formato: K1500.0 (1500 kilos) o L3300.0 (3300 libras)"})}}function cn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"warning",segment:"FLT",message:"Segmento FLT está vacío. Es obligatorio para procesos de aduana y ACAS.",rule:"FLT: Obligatorio para customs/ACAS",suggestion:"Formato: FLT/XX9999/DD (Aerolínea+Vuelo/Día)"});return}if(!o.startsWith("FLT")){r.push({severity:"error",segment:"FLT",message:'Segmento FLT debe comenzar con "FLT"',rule:"FLT: Tag obligatorio",found:o.substring(0,10)});return}const n=o.replace("FLT","").split(/(?=\/)/);for(const i of n){if(!i.trim())continue;if(!i.match(/^\/([A-Z0-9]{2,7})\/(\d{1,2})$/)){const s=i.match(/^\/(.+)$/);if(s){const m=s[1].split("/");if(m.length>=1){const u=m[0];if(u.match(/^([A-Z0-9]{2})(\d{1,5}[A-Z]?)$/)||r.push({severity:"error",segment:"FLT",field:"flightNumber",message:`Número de vuelo "${u}" no es válido. Formato: 2 chars carrier + hasta 5 dígitos`,rule:"FLT [19A]: Carrier 2[m] + Número hasta 5[m]",expected:"Ej: DA926, EY7122, CX456",found:u,suggestion:'NO repetir el código de aerolínea en el número. Ej: usar "926" no "DA926" si carrier ya es "DA"'}),m.length>=2){const c=m[1];if(!Zo.test(c))r.push({severity:"error",segment:"FLT",field:"flightDate",message:`Día de vuelo "${c}" no es válido. Debe ser 2 dígitos (01-31)`,rule:"FLT [19A]: Día 2[n] (día del mes)",expected:"01-31",found:c});else{const g=parseInt(c);(g<1||g>31)&&r.push({severity:"error",segment:"FLT",field:"flightDate",message:`Día de vuelo ${c} fuera de rango (1-31)`,rule:"FLT [19A]: Día debe ser 1-31",found:c})}}}}else r.push({severity:"error",segment:"FLT",message:`Formato de vuelo inválido: "${i}"`,rule:"FLT: Formato /CarrierNumber/Day",suggestion:"Ej: /DA926/15"})}}}function dn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"RTG",message:"Segmento RTG está vacío. Es OBLIGATORIO.",rule:"RTG: Segmento requerido"});return}if(!o.startsWith("RTG")){r.push({severity:"error",segment:"RTG",message:'Segmento debe comenzar con "RTG"',rule:"RTG: Tag obligatorio",found:o.substring(0,10)});return}const n=o.replace("RTG","").split("/").filter(i=>i.trim());if(n.length===0){r.push({severity:"error",segment:"RTG",message:"RTG no contiene segmentos de ruta",rule:"RTG: Debe tener al menos un segmento aeropuerto+carrier",suggestion:"Ej: RTG/MIADA/LHRBA"});return}n.length>3&&r.push({severity:"error",segment:"RTG",message:`RTG tiene ${n.length} tramos de ruta. Máximo permitido: 3`,rule:"RTG: Máximo 3 rutas (DDD+CC) permitidas por IATA",found:`${n.length} tramos`,expected:"Máximo 3 tramos"}),n.forEach((i,l)=>{const s=i.trim();if(s.length<5&&r.push({severity:"warning",segment:"RTG",field:`route${l+1}`,message:`Segmento de ruta "${s}" muy corto. Esperado: 3 letras aeropuerto + 2 letras carrier`,rule:"RTG: AeropuertoIATA(3a) + CarrierCode(2a)",expected:"Ej: MIADA (MIA + DA)",found:s}),s.length>=3){const d=s.substring(0,3);Nr.test(d)||r.push({severity:"error",segment:"RTG",field:`route${l+1}`,message:`Código aeropuerto "${d}" no es válido (debe ser 3 letras)`,rule:"RTG: Código IATA aeropuerto 3[a]",found:d})}if(s.length>=5){const d=s.substring(3,5);Xo.test(d)||r.push({severity:"warning",segment:"RTG",field:`route${l+1}`,message:`Código carrier "${d}" debe ser 2 caracteres alfanuméricos`,rule:"RTG: Carrier code 2[m]",found:d})}})}function qt(t,r,a,o){const n=o.content,i=t==="SHP"?"Remitente (Shipper)":"Consignatario (Consignee)";if(!n||n.trim()===""){a.push({severity:"error",segment:t,message:`Segmento ${t} está vacío. Es OBLIGATORIO.`,rule:`${t}: Segmento requerido`});return}if(!n.startsWith(t)){a.push({severity:"error",segment:t,message:`Segmento debe comenzar con "${t}"`,rule:`${t}: Tag obligatorio`,found:n.substring(0,5)});return}const l=n.split(`
`).slice(1),s=l[0];if(!s||s.trim()===""||s==="/")a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${i} es OBLIGATORIO y está vacío`,rule:`${t} [2/4]: Nombre hasta 35[t]`});else{const p=s.replace(/^\/?(?:NAM\/)?(.*?)$/,"$1").trim();p.length>35&&a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${i} excede 35 caracteres (tiene ${p.length})`,rule:`${t} [2/4]: Nombre hasta 35[t]`,found:p.substring(0,40)+"...",suggestion:"Truncar el nombre a 35 caracteres máximo"}),p.length===0&&a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${i} está vacío después del separador`,rule:`${t} [2/4]: Nombre obligatorio`})}const d=l[1];if(!d||d.trim()===""||d==="/")a.push({severity:"error",segment:t,field:"address",message:`Dirección del ${i} es OBLIGATORIA y está vacía`,rule:`${t} [2/4]: Dirección hasta 35[t]`});else{const p=d.replace(/^\//,"").trim();p.length>35&&a.push({severity:"error",segment:t,field:"address",message:`Dirección del ${i} excede 35 caracteres (tiene ${p.length})`,rule:`${t} [2/4]: Dirección hasta 35[t]`,found:p.substring(0,40)+"...",suggestion:"Truncar la dirección a 35 caracteres"})}const m=l[2];if(!m||m.trim()===""||m==="/")a.push({severity:"error",segment:t,field:"city",message:`Ciudad del ${i} es OBLIGATORIA y está vacía`,rule:`${t} [2/4]: Ciudad hasta 17[t]`});else{const p=m.replace(/^\//,"").split("/"),c=p[0].trim();if(c.length>17&&a.push({severity:"error",segment:t,field:"city",message:`Ciudad del ${i} excede 17 caracteres (tiene ${c.length})`,rule:`${t} [2/4]: Ciudad hasta 17[t]`,found:c}),p.length>1&&p[1].trim()){const g=p[1].trim();g.length>9&&a.push({severity:"error",segment:t,field:"state",message:`Estado/Provincia del ${i} excede 9 caracteres`,rule:`${t} [2/4]: Estado hasta 9[t] (USA: 2[a])`,found:g})}}const u=l[3];if(!u||u.trim()===""||u==="/")a.push({severity:"error",segment:t,field:"country",message:`País del ${i} es OBLIGATORIO y está vacío`,rule:`${t} [2/4]: Código de país 2[a] ISO`});else{const p=u.replace(/^\//,"").split("/"),c=p[0].trim();if(Ta.test(c)||a.push({severity:"error",segment:t,field:"country",message:`Código de país "${c}" no es válido. Debe ser código ISO de 2 letras mayúsculas`,rule:`${t} [2/4]: Código de país 2[a] ISO`,expected:"Ej: US, CO, EC, DE, CN",found:c}),p.length>=2){const f=p[1].trim().split(/\/(TE|FX|EM)\//),C=f[0].trim();if(!C||C===""?a.push({severity:"error",segment:t,field:"postalCode",message:`Código postal del ${i} está vacío. Si no se conoce, usar "00000"`,rule:`${t} [2/4]: Código postal hasta 9[t]. Regla de relleno: si no existe, usar "00000"`,suggestion:'Usar "00000" en lugar de dejar vacío'}):C.length>9&&a.push({severity:"error",segment:t,field:"postalCode",message:`Código postal del ${i} excede 9 caracteres (tiene ${C.length})`,rule:`${t} [2/4]: Código postal hasta 9[t]`,found:C}),f.length>=3){const N=f[1],S=f[2];Jo.test(N)||a.push({severity:"warning",segment:t,field:"contact",message:`Identificador de contacto "${N}" no reconocido. Usar TE (teléfono), FX (fax) o EM (email)`,rule:`${t} [2/4]: Identificador de contacto 3[a]`,expected:"TE, FX o EM",found:N}),S&&S.length>25&&a.push({severity:"warning",segment:t,field:"contact",message:"Número de contacto excede 25 caracteres (hasta 70 permitido con ACAS)",rule:`${t} [2/4]: Contacto hasta 25[t] (ACAS: 70[t])`,found:S.substring(0,30)+"..."})}}else a.push({severity:"error",segment:t,field:"postalCode",message:`Falta código postal del ${i}. Si no se conoce, usar "00000"`,rule:`${t} [2/4]: Código postal obligatorio. Regla de relleno: usar "00000" si no existe`,suggestion:"Agregar /CC/00000 después del código de país"})}u&&u.replace(/^\//,"").split("/")[0].trim()==="CN"&&t==="CNE"&&(!u.includes("/TE/")&&!u.includes("/FX/")&&!u.includes("/EM/")&&a.push({severity:"warning",segment:t,field:"contact",message:"CHINA: El consignatario en China DEBE incluir teléfono válido (/TE/). Aduanas de China lo exige para ACAS/PLACI.",rule:"CNE China: Teléfono obligatorio para Risk Assessment",suggestion:"Agregar /TE/número después del código postal"}),a.push({severity:"info",segment:t,message:'CHINA: Si el consignatario es particular (sin empresa), usar PASSPORT + número o "9999CN" como identificador en OCI.',rule:"OCI China: Regla para particulares CN",suggestion:"Agregar línea OCI: /CN/CNE/T/9999CN o /CN/CNE/P/PASSPORT_NUMBER"}))}function mn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"AGT",message:"Segmento AGT está vacío. Es OBLIGATORIO.",rule:"AGT: Segmento requerido"});return}if(!o.startsWith("AGT")){r.push({severity:"error",segment:"AGT",message:'Segmento debe comenzar con "AGT"',rule:"AGT: Tag obligatorio"});return}const n=o.match(/AGT\/\/(\d+)/);if(n){const s=n[1];s.length<7&&r.push({severity:"warning",segment:"AGT",field:"iataCode",message:`Código IATA del agente tiene ${s.length} dígitos. Se esperan 7`,rule:"AGT: Código IATA 7[n]",found:s})}else r.push({severity:"error",segment:"AGT",field:"iataCode",message:"Falta código IATA del agente",rule:"AGT: Código IATA 7 dígitos obligatorio",suggestion:"Formato: AGT//{IATA_CODE}/{CASS_CODE}"});const i=o.match(/AGT\/\/\d+\/(\d+)/);if(i){const s=i[1];s.length!==4&&r.push({severity:"warning",segment:"AGT",field:"cassCode",message:`Código CASS del agente debe ser exactamente 4 dígitos. Encontrado: ${s.length} dígito(s)`,rule:"AGT: Código CASS 4[n]",expected:"4 dígitos (ej: 0001)",found:s})}else n&&r.push({severity:"warning",segment:"AGT",field:"cassCode",message:"Falta código CASS del agente (4 dígitos después del código IATA)",rule:"AGT: Formato AGT//IATA/CASS",suggestion:"Agregar código CASS de 4 dígitos: AGT//{IATA}/{CASS}"});const l=o.split(`
`);if(l.length<2)r.push({severity:"error",segment:"AGT",field:"name",message:"Falta nombre del agente (línea 2 del segmento AGT)",rule:"AGT: Nombre obligatorio, hasta 35[t]"});else{const s=l[1].replace(/^\//,"").trim();s.length>35&&r.push({severity:"warning",segment:"AGT",field:"name",message:`Nombre del agente excede 35 caracteres (${s.length})`,rule:"AGT: Nombre hasta 35[t]",found:s.substring(0,40)+"..."})}l.length<3&&r.push({severity:"warning",segment:"AGT",field:"city",message:"Falta ciudad del agente (línea 3 del segmento AGT)",rule:"AGT: Ciudad hasta 17[t]"})}function pn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;if(!o.startsWith("SSR/")){r.push({severity:"error",segment:"SSR",message:'Segmento debe comenzar con "SSR/"',rule:"SSR: Tag obligatorio"});return}const n=o.replace("SSR/","").split(`
/`);n.length>3&&r.push({severity:"warning",segment:"SSR",message:`SSR tiene ${n.length} líneas. Máximo recomendado: 3`,rule:"SSR: Máximo 3 líneas de 65 chars"}),n.forEach((i,l)=>{i.length>65&&r.push({severity:"error",segment:"SSR",field:`line${l+1}`,line:l+1,message:`Línea ${l+1} de SSR excede 65 caracteres (tiene ${i.length})`,rule:"SSR: Cada línea máximo 65[t]",found:i.substring(0,70)+"..."})})}function Ea(t,r,a,o){var d,m;const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"CVD",message:"Segmento CVD está vacío. Es OBLIGATORIO.",rule:"CVD: Segmento requerido"});return}if(!n.startsWith("CVD/")){r.push({severity:"error",segment:"CVD",message:'Segmento debe comenzar con "CVD/"',rule:"CVD: Tag obligatorio"});return}const i=n.replace("CVD/","").split("/");if(i.length>=1){const u=i[0].trim();Yo.test(u)||r.push({severity:"error",segment:"CVD",field:"currency",message:`Código de moneda "${u}" no es válido (debe ser 3 letras ISO)`,rule:"CVD [12]: Código de moneda 3[a]",expected:"Ej: USD, EUR, COP",found:u})}if(i.length>=3){const u=i[2].trim();rn.includes(u)||r.push({severity:"error",segment:"CVD",field:"wtOt",message:`Código WT/OT "${u}" no es válido`,rule:"CVD: WT/OT debe ser PP, CC, PC o CP",expected:"PP (Prepaid), CC (Collect), PC (Weight Prepaid/Other Collect), CP (Weight Collect/Other Prepaid)",found:u})}if(i.length>=4){const u=i[3].trim();u!=="NVD"&&(u.length>12&&r.push({severity:"error",segment:"CVD",field:"declaredCarriage",message:"Valor para transporte excede 12 caracteres",rule:"CVD [16]: Valor para transporte hasta 12[m] (o NVD)",found:u}),!zt.test(u)&&u!=="0"&&r.push({severity:"warning",segment:"CVD",field:"declaredCarriage",message:`Valor para transporte "${u}" no es numérico ni NVD`,rule:"CVD [16]: Hasta 12[m] o NVD",found:u,suggestion:"Usar NVD (No Value Declared) o un valor numérico"}))}if(i.length>=5){const u=i[4].trim();u!=="NCV"&&u.length>12&&r.push({severity:"error",segment:"CVD",field:"declaredCustoms",message:"Valor para aduanas excede 12 caracteres",rule:"CVD [17]: Valor para aduanas hasta 12[m] (o NCV)",found:u})}const s=(((d=o.segments.find(u=>u.code==="AWB"))==null?void 0:d.content)||"").match(/[A-Z]{3}([A-Z]{3})/);if(s){const u=s[1],p={DAC:"Bangladesh",CGP:"Bangladesh (Chittagong)",CMB:"Sri Lanka"};p[u]&&i.length>=5&&((m=i[4])==null?void 0:m.trim())==="NCV"&&r.push({severity:"warning",segment:"CVD",field:"declaredCustoms",message:`Destino ${u} (${p[u]}) puede requerir valor numérico en lugar de NCV. Usar "0" si no hay valor`,rule:"CVD [17]: Excepción para Bangladesh/Sri Lanka: exigen valor numérico",suggestion:"Reemplazar NCV por 0 o valor real"})}}function un(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"RTD",message:"Segmento RTD está vacío. Es OBLIGATORIO.",rule:"RTD: Segmento requerido"});return}const n=o.split(`
`).filter(i=>i.trim());n.length>12&&r.push({severity:"error",segment:"RTD",message:`RTD tiene ${n.length} líneas. Máximo permitido por IATA: 12`,rule:"RTD: Máximo 12 líneas en esta sección",found:`${n.length} líneas`,expected:"Máximo 12 líneas"}),n.forEach((i,l)=>{if(!i.startsWith("RTD/")){r.push({severity:"warning",segment:"RTD",line:l+1,lineContent:i,message:`Línea ${l+1} no comienza con "RTD/"`,rule:"RTD: Cada línea debe comenzar con RTD/"});return}const s=i.replace("RTD/","").split("/");if(s[0]){const p=parseInt(s[0]);(isNaN(p)||p<1)&&r.push({severity:"warning",segment:"RTD",field:"lineNumber",line:l+1,message:`Número de línea RTD inválido: "${s[0]}"`,rule:"RTD: Número de línea hasta 2[n]"})}const d=s.find(p=>p.startsWith("P"));if(d){const p=d.substring(1);Vt.test(p)||r.push({severity:"error",segment:"RTD",field:"pieces",line:l+1,message:`Número de piezas "${p}" no es numérico`,rule:"RTD: Piezas P{n}",found:p})}const m=s.find(p=>p.startsWith("K"));if(m){const p=m.substring(1);zt.test(p)||r.push({severity:"error",segment:"RTD",field:"weight",line:l+1,message:`Peso "${p}" no tiene formato numérico válido`,rule:"RTD: Peso K{n.n}",found:p})}const u=s.find(p=>p.startsWith("C")&&p.length<=3);if(u){const p=u.substring(1),c=["Q","N","M","C","B","R","S","U","E"];p.length>0&&!c.includes(p)&&!Vt.test(p)&&r.push({severity:"warning",segment:"RTD",field:"rateClass",line:l+1,message:`Clase de tarifa "${p}" no es estándar`,rule:"RTD: Rate class C{code} - C, M, N, Q, B",found:p,expected:"C (Commodity), N (Normal), M (Minimum), Q (Quantity), B (Basic)"})}})}function gn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"NG",message:"Segmento NG está vacío. Es OBLIGATORIO.",rule:"NG: Descripción de mercancía requerida"});return}const n=o.match(/\/(NG|NC)\/(.*)/);if(!n){r.push({severity:"warning",segment:"NG",message:"Formato NG no estándar. Esperado: /NG/descripción",rule:"RTD [22I]: Descripción de mercancía 20[t] por línea",found:o.substring(0,30)});return}const i=n[2];if(i.length>20&&r.push({severity:"warning",segment:"NG",field:"description",message:`Descripción de mercancía excede 20 caracteres por línea (tiene ${i.length})`,rule:"RTD [22I]: Descripción 20[t] por línea, máximo 11 líneas",found:i.substring(0,25)+"..."}),i.length===0&&r.push({severity:"error",segment:"NG",field:"description",message:"Descripción de mercancía está vacía",rule:"NG: Descripción obligatoria"}),i.length>0){const l=["CONSOLIDATION","CONSOLIDATED","PARTS","GOODS","GENERAL","VARIOUS","MISC","MISCELLANEOUS","SAMPLES","PERSONAL EFFECTS","MERCHANDISE","CARGO","ITEMS","STUFF","THINGS"],s=i.toUpperCase().trim();l.some(m=>s===m||s===m+"S")&&r.push({severity:"warning",segment:"NG",field:"description",message:`⚠️ ACAS ALERTA: Descripción "${i}" es demasiado vaga. Descripciones genéricas como "Parts", "Consolidation" o "Goods" generan HOLDS en Risk Assessment (ACAS/PLACI).`,rule:"ACAS: Descripciones vagas causan retención en screening de seguridad",found:i,suggestion:'Usar descripción específica. Ej: "AUTOMOTIVE BRAKE PADS" en vez de "PARTS", "TEXTILE GARMENTS" en vez de "GOODS"'}),n[1]==="NC"&&r.push({severity:"warning",segment:"NG",field:"type",message:"Tipo NC (Consolidation goods) detectado. Si este es un envío DIRECTO (no consolidado), usar /NG/ en lugar de /NC/.",rule:"NG vs NC: NG = General Goods (directos), NC = Consolidation",suggestion:"Para envíos directos usar /NG/DESCRIPCION"})}}function hn(t,r,a,o){const n=a.content;if(!n||n.trim()===""){o!=null&&o.requiresHTS&&r.push({severity:"error",segment:"NH",message:"Código HS (Harmonized System) es OBLIGATORIO para esta aerolínea",rule:"NH: Código HS obligatorio según política de aerolínea",suggestion:"Agregar al menos un código HS de 6-10 dígitos"});return}n.split(`
`).filter(l=>l.trim()).forEach((l,s)=>{const d=l.match(/\/(\d+)\/NH\/(\d+)/);if(!d){r.push({severity:"warning",segment:"NH",line:s+1,lineContent:l,message:`Línea NH con formato inválido: "${l}"`,rule:"NH: Formato /lineNum/NH/codigo",suggestion:"Ej: /2/NH/060311"});return}const m=d[2];m.length<6&&r.push({severity:"error",segment:"NH",field:"hsCode",line:s+1,message:`Código HS "${m}" tiene menos de 6 dígitos. Mínimo 6 dígitos obligatorio para USA, UAE, UE y China`,rule:"NH: Código HS 6 a 10[n] - Mínimo 6 dígitos",found:m,suggestion:"Completar a mínimo 6 dígitos"}),m.length>10&&r.push({severity:"error",segment:"NH",field:"hsCode",line:s+1,message:`Código HS "${m}" excede 10 dígitos`,rule:"NH: Código HS máximo 10[n]",found:m}),Vt.test(m)||r.push({severity:"error",segment:"NH",field:"hsCode",line:s+1,message:`Código HS "${m}" contiene caracteres no numéricos`,rule:"NH: Solo dígitos permitidos",found:m})})}function bn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;const n=o.match(/\/(\d+)\/NV\/MC([\d.]+)/);if(!n){r.push({severity:"warning",segment:"NV",message:"Formato NV no estándar. Esperado: /lineNum/NV/MC{volumen}",rule:"NV: Volumen en metros cúbicos con prefijo MC",found:o.substring(0,30),suggestion:"Ej: /4/NV/MC0.50"});return}const i=parseFloat(n[2]);(isNaN(i)||i<0)&&r.push({severity:"error",segment:"NV",field:"volume",message:`Volumen "${n[2]}" no es un número válido`,rule:"NV: Volumen numérico con decimales",found:n[2]})}function fn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;const n=o.match(/\/(\d+)\/NS\/(\d+)/);if(!n){r.push({severity:"warning",segment:"NS",message:"Formato NS no estándar. Esperado: /lineNum/NS/{piezas}",rule:"NS: SLAC hasta 5[n]",found:o.substring(0,30)});return}const i=n[2];i.length>5&&r.push({severity:"warning",segment:"NS",field:"slac",message:`SLAC "${i}" excede 5 dígitos`,rule:"NS: Hasta 5[n]",found:i})}function xn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;o.split(`
`).filter(i=>i.trim()).forEach((i,l)=>{const s=i.match(/OTH\/([PC])\/([A-Z]{2,3})\/([\d.]+)/);if(!s){i.startsWith("OTH/")||r.push({severity:"warning",segment:"OTH",line:l+1,message:"Línea OTH con formato inválido",rule:"OTH: Formato OTH/P_o_C/Código/Monto",found:i.substring(0,40)});return}const d=s[1];d!=="P"&&d!=="C"&&r.push({severity:"error",segment:"OTH",field:"prepaidOrCollect",line:l+1,message:`Indicador debe ser P (Prepaid) o C (Collect): "${d}"`,rule:"OTH: P=Prepaid, C=Collect",found:d})})}function vn(t,r,a,o){const n=o.content;if(!n||n.trim()==="")return;n.startsWith(t+"/")||a.push({severity:"warning",segment:t,message:`Segmento debe comenzar con "${t}/"`,rule:`${t}: Tag obligatorio`,found:n.substring(0,10)}),n.replace(`${t}/`,"").split("/").forEach((l,s)=>{const d=l.trim();d&&!zt.test(d)&&d!=="0"&&a.push({severity:"warning",segment:t,field:`amount${s+1}`,message:`Monto "${d}" no es numérico`,rule:`${t}: Montos hasta 15[m] numéricos`,found:d})})}function Cn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;if(!o.startsWith("CER/")){r.push({severity:"warning",segment:"CER",message:'Segmento debe comenzar con "CER/"',rule:"CER: Tag obligatorio"});return}const n=o.replace("CER/","").trim();n.length>20&&r.push({severity:"warning",segment:"CER",field:"signature",message:`Firma excede 20 caracteres (tiene ${n.length})`,rule:"CER: Firma hasta 20[t]",found:n.substring(0,25)+"..."})}function wn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"ISU",message:"Segmento ISU está vacío. Es OBLIGATORIO.",rule:"ISU: Segmento requerido"});return}if(!o.startsWith("ISU/")){r.push({severity:"error",segment:"ISU",message:'Segmento debe comenzar con "ISU/"',rule:"ISU: Tag obligatorio"});return}const n=o.replace("ISU/","").split("/");if(n[0]){const i=n[0].trim();Ko.test(i)||r.push({severity:"error",segment:"ISU",field:"date",message:`Fecha "${i}" no tiene formato DDMMMYY`,rule:"ISU: Fecha DDMMMYY (7 chars)",expected:"Ej: 24JAN26",found:i})}else r.push({severity:"error",segment:"ISU",field:"date",message:"Falta fecha de emisión",rule:"ISU: Fecha obligatoria"});if(n.length>=2){const i=n[1].trim();i.length>17&&r.push({severity:"warning",segment:"ISU",field:"place",message:`Lugar de emisión excede 17 caracteres (tiene ${i.length})`,rule:"ISU: Lugar hasta 17[t]",found:i})}else r.push({severity:"error",segment:"ISU",field:"place",message:"Falta lugar de emisión",rule:"ISU: Lugar obligatorio"});if(n.length>=3){const i=n[2].trim();i.length>20&&r.push({severity:"warning",segment:"ISU",field:"signature",message:"Firma excede 20 caracteres",rule:"ISU: Firma hasta 20[t]",found:i.substring(0,25)})}}function yn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"REF",message:"Segmento REF está vacío. Es OBLIGATORIO.",rule:"REF: Referencia del agente requerida"});return}if(!o.startsWith("REF")){r.push({severity:"error",segment:"REF",message:'Segmento debe comenzar con "REF"',rule:"REF: Tag obligatorio"});return}const n=o.replace(/^REF\/?/,"").trim();n.length>30&&r.push({severity:"warning",segment:"REF",field:"agentRef",message:`Referencia excede 30 caracteres (tiene ${n.length})`,rule:"REF: Referencia hasta 30[t]",found:n.substring(0,35)+"..."})}function Nn(t,r,a,o){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"SPH",message:"Segmento SPH está vacío. Es OBLIGATORIO.",rule:"SPH: Al menos un código de manejo especial requerido"});return}if(!n.startsWith("SPH/")){r.push({severity:"error",segment:"SPH",message:'Segmento debe comenzar con "SPH/"',rule:"SPH: Tag obligatorio"});return}const l=n.replace("SPH/","").trim().split("/").filter(u=>u.trim());l.forEach((u,p)=>{const c=u.trim();Qo.test(c)||r.push({severity:"error",segment:"SPH",field:`code${p+1}`,message:`Código SPH "${c}" no es válido. Debe ser exactamente 3 letras mayúsculas`,rule:"SPH: Códigos SPL 3[a]",expected:"Ej: EAP, PER, EAW",found:c})}),l.length>9&&r.push({severity:"error",segment:"SPH",message:`SPH tiene ${l.length} códigos. Máximo permitido: 9`,rule:"SPH: Máximo 9 códigos",found:`${l.length} códigos`}),l.some(u=>an.includes(u.trim()))||r.push({severity:"error",segment:"SPH",message:"Falta código e-AWB obligatorio: EAW (sin bolsa de documentos) o EAP (con bolsa de documentos)",rule:"SPH: Mandatorios e-AWB: EAW o EAP",suggestion:"Agregar EAP (con bolsa) o EAW (sin bolsa)"});const d=l.some(u=>u.trim()==="EAW"),m=l.some(u=>u.trim()==="EAP");d&&m&&r.push({severity:"warning",segment:"SPH",message:"Se encontraron EAW y EAP simultáneamente. Usar solo uno: EAW (sin bolsa) o EAP (con bolsa)",rule:"SPH: EAW y EAP son mutuamente excluyentes",suggestion:"Remover uno de los dos códigos"})}function Ia(t,r,a){const o=a.content;if(!o||o.trim()==="")return;o.split(`
`).filter(i=>i.trim()).forEach((i,l)=>{const d=(i.startsWith("OCI")?i.replace("OCI",""):i).split("/").filter(c=>c!=="");if(d.length<4){r.push({severity:"warning",segment:"OCI",line:l+1,lineContent:i,message:"Línea OCI incompleta. Esperado: /País/Identificador/TipoControl/Información",rule:"OCI: 4 campos obligatorios (País, Party, Type, Value)",found:i.substring(0,40)});return}const m=d[0].trim();m&&!Ta.test(m)&&r.push({severity:"error",segment:"OCI",field:"country",line:l+1,message:`Código de país OCI "${m}" no es válido (debe ser 2 letras ISO)`,rule:"OCI: País 2[a]",found:m});const u=d[1].trim();u&&!en.includes(u)&&r.push({severity:"warning",segment:"OCI",field:"party",line:l+1,message:`Identificador de información "${u}" no es estándar`,rule:"OCI: Identificador de información 3[a] (CNE, SHP, AGT)",expected:"CNE, SHP, AGT, NFY",found:u});const p=d[2].trim();if(p&&p.length>2&&!tn.includes(p)&&r.push({severity:"warning",segment:"OCI",field:"type",line:l+1,message:`Identificador de control "${p}" no es estándar`,rule:"OCI: Identificador de control 1-2[a] (T, RA, CT, etc.)",found:p}),d.length>=4){const c=d[3].trim();c.length>35&&r.push({severity:"warning",segment:"OCI",field:"value",line:l+1,message:`Información OCI excede 35 caracteres (tiene ${c.length})`,rule:"OCI: Información hasta 35[m]",found:c.substring(0,40)+"..."})}m==="CN"&&r.push({severity:"info",segment:"OCI",line:l+1,message:'CHINA: Si la entidad no tiene código fiscal, usar "9999CN" como identificador (OCI /CN/CNE/T/9999CN).',rule:"OCI China: Usar 9999CN para entidades sin código",suggestion:"Si no tiene Tax ID, usar 9999CN"}),m==="US"&&r.push({severity:"info",segment:"OCI",line:l+1,message:"USA: La aduana de EE.UU. requiere Tax ID (EIN/SSN) del consignatario final en OCI.",rule:"OCI USA: Tax ID obligatorio para customs clearance",suggestion:"Verificar que el valor sea un EIN o SSN válido"})})}function Sn(t,r,a){const o=a.content;if(!o||o.trim()==="")return;o.startsWith("NFY")||r.push({severity:"warning",segment:"NFY",message:'Segmento debe comenzar con "NFY"',rule:"NFY: Tag obligatorio"});const n=o.split(`
`).slice(1);if(n.length>0){const i=n[0];if(i){const l=i.replace(/^\//,"").trim();l.length>35&&r.push({severity:"warning",segment:"NFY",field:"name",message:"Nombre de notificación excede 35 caracteres",rule:"NFY: Nombre hasta 35[t]",found:l.substring(0,40)})}}}function An(t,r,a){const o=[],n=t.content.split(`
`).filter(m=>m.trim()),i=t.code;switch(i){case"MBI":Tn(n,o,t);break;case"HBS":En(n,o,t);break;case"SHP":qt("SHP",n,o,t);break;case"CNE":qt("CNE",n,o,t);break;case"OCI":Ia(n,o,t);break;case"HTS":In(n,o,t);break;case"TXT":kn(n,o,t);break;case"CVD":Ea(n,o,t,r);break}["FHL","FTR"].includes(i)||n.forEach((m,u)=>{ka(m,i,u+1,o)});const l=o.filter(m=>m.severity==="error").length,s=o.filter(m=>m.severity==="warning").length,d=o.filter(m=>m.severity==="info").length;return{segment:i,segmentName:t.name,isValid:l===0,issues:o,errorCount:l,warningCount:s,infoCount:d,lines:n}}function Tn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"MBI",message:"Segmento MBI está vacío. Es OBLIGATORIO en FHL.",rule:"MBI: Información del Master AWB requerida"});return}const n=o.match(/(\d{3})-(\d{8})([A-Z]{3})([A-Z]{3})\/T(\d{1,4})/);if(n){const i=n[2],l=i.substring(0,7),s=parseInt(i[7]),d=parseInt(l)%7;s!==d&&r.push({severity:"error",segment:"MBI",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido. Serial "${i}" → mod 7 = ${d}, check es ${s}`,rule:"MBI: Mod-7 check digit",expected:`${l}${d}`,found:i})}else{const i=o.match(/(\d{3})-(\d{8})/);if(!i)r.push({severity:"error",segment:"MBI",field:"awbNumber",message:"Número AWB no encontrado en formato correcto (999-12345678)",rule:"MBI: AWB = prefijo(3n) + guión + serial(8n)",suggestion:"Formato: MBI/992-56984125BOGMIA/T10"});else{const l=i[2],s=l.substring(0,7),d=parseInt(l[7]),m=parseInt(s)%7;d!==m&&r.push({severity:"error",segment:"MBI",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido en MBI. Serial "${l}" → mod 7 = ${m}, check es ${d}`,rule:"MBI: El 8vo dígito del serial es check digit Mod-7",expected:`${s}${m}`,found:l}),o.match(/\d{8}([A-Z]{3})([A-Z]{3})/)||r.push({severity:"error",segment:"MBI",field:"originDestination",message:"Falta Origen(3a) + Destino(3a) después del serial AWB",rule:"MBI: a[3]a[3] = Origen + Destino IATA",suggestion:"Ej: MBI/992-56984125BOGMIA/T10"}),o.includes("/T")||r.push({severity:"warning",segment:"MBI",field:"pieces",message:"Falta indicador de piezas /T{n} en MBI",rule:"MBI: Piezas an[1]n[1-4] obligatorio"})}}}function En(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"HBS",message:"Segmento HBS está vacío. Es OBLIGATORIO en FHL.",rule:"HBS: Resumen de guía hija requerido"});return}if(!o.includes("/")){r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:"Falta número HAWB en el segmento HBS",rule:"HBS: Número HAWB obligatorio"});return}const n=o.replace(/^HBS\/?/,"").split("/").filter(d=>d!=="");if(n.length>=1){const d=n[0].trim();d.length===0?r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:"Número HAWB está vacío",rule:"HBS: Número HAWB obligatorio (max 12 alfanuméricos)"}):d.length>12&&r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:`Número HAWB "${d}" excede 12 caracteres (tiene ${d.length})`,rule:"HBS: HAWB máximo 12 caracteres alfanuméricos",found:d})}if(n.length>=2){const d=n[1].trim();(d.length!==6||!jo.test(d))&&r.push({severity:"error",segment:"HBS",field:"originDestination",message:`Origen/Destino "${d}" inválido. Debe ser 6 letras (3 origen + 3 destino)`,rule:"HBS: OOO+DDD = 6 letras IATA",expected:"Ej: BOGMIA, UIOLHR",found:d})}else r.push({severity:"error",segment:"HBS",field:"originDestination",message:"Falta Origen/Destino del House",rule:"HBS: OOO+DDD obligatorio"});const i=n.find(d=>/^[PT]\d/.test(d));if(i){const d=i.substring(1);(!Vt.test(d)||parseInt(d)<=0)&&r.push({severity:"error",segment:"HBS",field:"pieces",message:`Piezas "${d}" inválidas (debe ser número > 0)`,rule:"HBS: Piezas numéricas > 0",found:d})}else r.push({severity:"error",segment:"HBS",field:"pieces",message:"Faltan piezas en HBS (indicador P o T seguido de cantidad)",rule:"HBS: Piezas obligatorias"});const l=n.find(d=>/^[KL][\d.]/.test(d));if(l){const d=l.substring(1);(!zt.test(d)||parseFloat(d)<=0)&&r.push({severity:"error",segment:"HBS",field:"weight",message:`Peso "${d}" inválido (debe ser número > 0)`,rule:"HBS: Peso numérico > 0",found:d})}else r.push({severity:"error",segment:"HBS",field:"weight",message:"Falta peso en HBS (indicador K o L seguido de peso)",rule:"HBS: Peso obligatorio"});const s=n.find(d=>d&&!/^\d/.test(d)&&!/^[A-Z]{3}[A-Z]{3}$/.test(d)&&!/^[A-Z]{6}$/.test(d)&&!/^[PT]\d/.test(d)&&!/^[KL][\d.]/.test(d)&&d.length<=15&&/^[A-Za-z]/.test(d));s?s.length>15&&r.push({severity:"warning",segment:"HBS",field:"description",message:`Descripción "${s}" excede 15 caracteres (máximo a[1-15])`,rule:"HBS: Descripción hasta 15 caracteres alfabéticos",found:s}):r.push({severity:"info",segment:"HBS",field:"description",message:"No se detectó descripción de mercancía en HBS. Aduanas puede requerir descripción (a[1-15]).",rule:"HBS: Descripción recomendada para customs (a[1-15])",suggestion:"Agregar descripción breve de la mercancía al final de la línea HBS"})}function In(t,r,a){const o=a.content;if(!o||o.trim()==="")return;o.split(`
`).filter(i=>i.trim()).forEach((i,l)=>{const s=i.match(/\/(\d+)/);s&&s[1].length<6&&r.push({severity:"warning",segment:"HTS",field:"code",line:l+1,message:`Código HTS "${s[1]}" tiene menos de 6 dígitos`,rule:"HTS: Código HTS mínimo 6 dígitos",found:s[1]})})}function kn(t,r,a){const o=a.content;if(!o||o.trim()===""){r.push({severity:"warning",segment:"TXT",message:"Segmento TXT está vacío. Si se incluye, debe contener descripción de mercancía.",rule:"TXT: Contenido obligatorio si segmento habilitado"});return}o.split(`
`).filter(i=>i.trim()).forEach((i,l)=>{const s=i.replace(/^TXT\/?/,"").replace(/^\//,"");s.length>65&&r.push({severity:"error",segment:"TXT",line:l+1,lineContent:i.substring(0,70),message:`Línea TXT excede 65 caracteres (tiene ${s.length}). Dividir en múltiples líneas.`,rule:"TXT: Máximo 65 caracteres por línea (an[1-65])",found:s.substring(0,40)+"..."}),s.trim()===""&&r.push({severity:"warning",segment:"TXT",line:l+1,message:"Línea TXT vacía después del tag",rule:"TXT: Contenido mínimo 1 carácter (an[1-65])"})})}function Fn(t,r,a){const o=[],n=r.map(i=>i.code);if(t.type==="FWB"){const i=["AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","ISU","SPH"];if(i.forEach(s=>{n.includes(s)||o.push({severity:"error",segment:"GLOBAL",message:`Falta segmento OBLIGATORIO: ${s}`,rule:`FWB: Segmento ${s} es requerido por IATA`,suggestion:`Habilitar el segmento ${s}`})}),r.forEach(s=>{s.content.trim()===""&&i.includes(s.code)&&o.push({severity:"error",segment:s.code,message:`Segmento ${s.code} (${s.name}) está habilitado pero vacío. Es obligatorio.`,rule:`${s.code}: Contenido obligatorio`})}),r.find(s=>s.code==="AWB")&&t.awbNumber){const s=t.awbNumber.replace(/-/g,"").replace(/\s/g,"");s.length!==11&&o.push({severity:"error",segment:"GLOBAL",field:"awbNumber",message:`Número AWB "${t.awbNumber}" no tiene 11 dígitos (3 prefijo + 8 serial)`,rule:"AWB IATA: 11 dígitos (3 airline prefix + 8 serial)",found:s,expected:"11 dígitos"})}}return t.type==="FHL"&&["MBI","HBS"].forEach(l=>{n.includes(l)||o.push({severity:"error",segment:"GLOBAL",message:`Falta segmento OBLIGATORIO para FHL: ${l}`,rule:`FHL: Segmento ${l} es requerido`})}),o}function Rn(t){const r=[];return t.split(`
`).forEach((o,n)=>{o.startsWith("UNB+")||o.startsWith("UNH+")||o.startsWith("UNT+")||o.startsWith("UNZ+")||o.match(/^Q[KDPU]\s/)||o.startsWith(".")||o.length>Sr&&r.push({severity:"warning",segment:"GLOBAL",line:n+1,lineContent:o.substring(0,75)+"...",message:`Línea ${n+1} excede ${Sr} caracteres (tiene ${o.length})`,rule:`IATA: Máximo ${Sr} caracteres por línea`,found:`${o.length} caracteres`})}),r}function ka(t,r,a,o){const n=[];for(let i=0;i<t.length;i++){const l=t[i],s=l.charCodeAt(0);if(!(s>=65&&s<=90||s>=48&&s<=57||l===" "||l==="."||l==="-"||l==="/"||l==="+"||l==="'"||l==="("||l===")"||l===":"||l===","||l===`
`||l==="\r")){if(s>=97&&s<=122){n.push(`"${l}" (minúscula en posición ${i+1})`);continue}(s>127||s<32&&s!==10&&s!==13)&&n.push(`"${l}" (código ${s} en posición ${i+1})`)}}n.length>0&&o.push({severity:"warning",segment:r,line:a,lineContent:t.substring(0,50),message:`Caracteres no permitidos encontrados: ${n.slice(0,3).join(", ")}${n.length>3?` y ${n.length-3} más`:""}`,rule:"IATA: Solo A-Z mayúsculas, 0-9, punto (.) y guion (-) permitidos",suggestion:"Convertir a mayúsculas y remover caracteres especiales"})}function On(t,r,a){if(a===0)return 0;let o=100;return o-=t*15,o-=r*3,Math.max(0,Math.min(100,o))}class _n{constructor(r){this.credentials=r}updateCredentials(r){this.credentials={...this.credentials,...r}}isConfigured(){return!!(this.credentials.endpoint&&this.credentials.username&&this.credentials.password)}getAuthHeader(){const r=`${this.credentials.username}:${this.credentials.password}`;return`Basic ${btoa(r)}`}parseDescartesXml(r){const a={};try{const n=new DOMParser().parseFromString(r,"text/xml"),i=n.querySelector("parsererror");if(i)return console.warn("Error parseando XML de Descartes:",i.textContent),a;const l=m=>{const u=n.querySelector(m);return(u==null?void 0:u.textContent)||void 0};a.host=l("host"),a.service=l("service"),a.created=l("created"),a.version=l("version"),a.status=l("status"),a.tid=l("tid"),a.error=l("error"),a.errorShort=l("errorShort"),a.errorDetail=l("errorDetail"),a.unhandledException=l("unhandledException");const s=l("bytesReceived");s&&(a.bytesReceived=parseInt(s,10));const d=l("retryAfter");d&&(a.retryAfter=parseInt(d,10))}catch(o){console.error("Error parseando respuesta Descartes:",o)}return a}isSuccessResponse(r){return r.error||r.errorShort||r.errorDetail||r.unhandledException?!1:!!(r.status||r.tid)}async sendMessage(r,a,o){const n=new Date().toISOString();if(!this.isConfigured())return{success:!1,messageType:a,reference:o,error:"Servicio no configurado. Falta endpoint, usuario o contraseña.",timestamp:n};try{let i;this.credentials.proxyUrl?(console.log(`🔄 Usando proxy: ${this.credentials.proxyUrl}`),i=await fetch(this.credentials.proxyUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({descartesEndpoint:this.credentials.endpoint,username:this.credentials.username,password:this.credentials.password,message:r,messageType:a,reference:o})})):i=await fetch(this.credentials.endpoint,{method:"POST",headers:{"Content-Type":"application/x-CARGO-IMP",Authorization:this.getAuthHeader()},body:r});const l=await i.text(),s=this.parseDescartesXml(l);if(i.ok&&this.isSuccessResponse(s))return{success:!0,messageType:a,reference:o,httpStatus:i.status,responseMessage:s.status||"OK",responseRaw:l,requestBody:r,descartesResponse:s,timestamp:n};{let m="";return s.error?m=s.error:s.errorShort?m=s.errorShort:s.errorDetail?m=s.errorDetail:s.unhandledException?m=`Exception: ${s.unhandledException}`:i.ok?m="Error desconocido en respuesta":m=`HTTP ${i.status}: ${i.statusText}`,{success:!1,messageType:a,reference:o,httpStatus:i.status,responseMessage:l,responseRaw:l,requestBody:r,descartesResponse:s,error:m,timestamp:n}}}catch(i){return{success:!1,messageType:a,reference:o,requestBody:r,error:i instanceof Error?i.message:"Error de conexión desconocido",timestamp:n}}}async sendBundle(r,a,o=[],n=[]){const i=[];let l=0,s=0;console.log(`📤 Transmitiendo FWB ${a} a Descartes...`);const d=await this.sendMessage(r,"FWB",a);if(d.success?(l++,console.log(`✅ FWB ${a} transmitido exitosamente`)):(s++,console.error(`❌ Error transmitiendo FWB ${a}:`,d.error)),d.success&&o.length>0)for(let c=0;c<o.length;c++){const g=o[c],f=n[c]||`HAWB-${c+1}`;console.log(`📤 Transmitiendo FHL ${f} (${c+1}/${o.length})...`);const C=await this.sendMessage(g,"FHL",f);i.push(C),C.success?(l++,console.log(`✅ FHL ${f} transmitido exitosamente`)):(s++,console.error(`❌ Error transmitiendo FHL ${f}:`,C.error)),c<o.length-1&&await this.delay(100)}const m=1+o.length,u=s===0;let p;return u?p=`✅ Transmisión exitosa: FWB${o.length>0?` + ${o.length} FHL`:""} enviados a Descartes`:l===0?p="❌ Error en transmisión: No se pudo enviar ningún mensaje":p=`⚠️ Transmisión parcial: ${l}/${m} mensajes enviados (${s} fallidos)`,{allSuccess:u,fwbResult:d,fhlResults:i,summary:p,totalSent:m,totalSuccess:l,totalFailed:s}}delay(r){return new Promise(a=>setTimeout(a,r))}}/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ln=(...t)=>t.filter((r,a,o)=>!!r&&r.trim()!==""&&o.indexOf(r)===a).join(" ").trim();/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=({color:t="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:n,iconNode:i,class:l="",...s})=>tt("svg",{...Pn,width:String(r),height:r,stroke:t,"stroke-width":o?Number(a)*24/Number(r):a,class:["lucide",l].join(" "),...s},[...i.map(([d,m])=>tt(d,m)),...St(n)]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=(t,r)=>{const a=({class:o="",children:n,...i})=>tt(Hn,{...i,iconNode:r,class:Ln(`lucide-${Dn(t)}`,o)},n);return a.displayName=`${t}`,a};/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=B("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=B("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=B("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=B("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=B("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=B("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=B("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=B("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=B("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=B("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=B("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=B("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=B("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=B("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=B("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=B("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=B("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=B("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=B("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=B("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=B("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=B("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=B("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=B("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=B("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=B("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=B("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=B("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);let Ze={...Et};function Vn(){Ze={...Et}}const st=({title:t,icon:r,children:a,defaultOpen:o=!1,badge:n})=>{const[i,l]=O(o);return e("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[e("button",{onClick:()=>l(!i),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 transition-colors",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"text-purple-600",children:r}),e("span",{className:"font-semibold text-slate-700",children:t}),n&&e("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full",children:n})]}),i?e(Le,{size:18,className:"text-slate-400"}):e(Se,{size:18,className:"text-slate-400"})]}),i&&e("div",{className:"p-4 bg-white border-t border-slate-100",children:a})]})},zn=({isOpen:t,onClose:r,onConfigChange:a,onSaveConfig:o})=>{var Fe,me,Re,Ve,ze,Te,Z,we,he,R,lt,Qe,rr,ar,z,be,ct,K;const[n,i]=O(()=>({...Ze})),[l,s]=O(null),[d,m]=O(""),[u,p]=O([]),[c,g]=O(""),[f,C]=O("AGT"),[N,S]=O("RA"),[v,_]=O(null),[x,E]=O(()=>wa()),[k,D]=O(()=>Wt()),M=te(b=>{Mo(b),E(b),a&&setTimeout(()=>a(Ze),0)},[a]),V=te(b=>{Wo(b),D(Wt()),a&&setTimeout(()=>a(Ze),0)},[a]);pt(()=>{t&&(i({...Ze,cargoImp:{...Ze.cargoImp,airlinePolicies:{...je}}}),E(wa()),D(Wt()),s(null))},[t]);const A=te((b,F)=>{i(P=>{const J={...P,[b]:F};return Ze=J,J}),s(null),a&&setTimeout(()=>{a(Ze)},0)},[a]),X=()=>{if(d&&d.length===3&&u.length>0){const b={...n.sphByAirline,[d]:u};A("sphByAirline",b),m(""),p([])}},se=b=>{if(b==="DEFAULT")return;const F={...n.sphByAirline};delete F[b],A("sphByAirline",F)},Ce=()=>{if(c&&c.length===2){const b={...n.ociByOriginCountry,[c]:[{countryCode:c,infoIdentifier:f,controlInfo:N}]};A("ociByOriginCountry",b),g(""),C("AGT"),S("RA")}},le=(b,F,P)=>{const J=n.ociByOriginCountry[b]||[];if(J.some(pe=>pe.infoIdentifier===F&&pe.controlInfo===P))return;const W={...n.ociByOriginCountry,[b]:[...J,{countryCode:b,infoIdentifier:F,controlInfo:P}]};A("ociByOriginCountry",W)},re=(b,F)=>{const P=n.ociByOriginCountry[b]||[];if(P.length<=1)return;const J={...n.ociByOriginCountry,[b]:P.filter((W,pe)=>pe!==F)};A("ociByOriginCountry",J)},Y=b=>{if(b==="DEFAULT")return;const F={...n.ociByOriginCountry};delete F[b],A("ociByOriginCountry",F)};return t?e("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),e("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b border-purple-300 bg-purple-600 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"bg-white/30 p-2 rounded-lg",children:e(Ir,{size:22,className:"text-white"})}),e("div",{children:[e("h2",{className:"font-bold text-lg text-white",children:"Configuración del Conector"}),e("p",{className:"text-sm text-purple-200",children:"Lógicas de negocio dinámicas por aerolínea y país"})]})]}),e("button",{onClick:r,className:"hover:bg-white/20 p-2 rounded-lg transition-colors",children:e(Ke,{size:20,className:"text-white"})})]}),e("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[l&&e("div",{className:`flex items-center gap-2 p-3 rounded-lg ${l.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[l.type==="success"?e(ve,{size:18}):e(ie,{size:18}),e("span",{className:"text-sm font-medium",children:l.text})]}),e("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e("div",{className:"flex items-start gap-3",children:[e(Ue,{className:"text-purple-600 mt-0.5 flex-shrink-0",size:18}),e("div",{className:"text-sm text-purple-800",children:[e("p",{className:"font-semibold mb-1",children:"📋 Aclaración: Campo accountNumber vs NIT/RUC"}),e("p",{className:"text-purple-700",children:["El campo ",e("code",{className:"bg-purple-100 px-1 rounded",children:"accountNumber"})," en Shipper/Consignee es un",e("strong",{children:" código de cuenta asignado por la aerolínea"}),", NO el NIT/RUC del cliente."]})]})]})}),e(st,{title:"Formato de Mensaje (Descartes)",icon:e(_a,{size:18}),badge:x?"Type B":"EDIFACT",defaultOpen:!0,children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:["Selecciona el formato de envelope para los mensajes EDI. ",e("strong",{children:"Type B"})," es requerido para envío directo a Descartes."]}),e("div",{className:"grid grid-cols-2 gap-4",children:[e("button",{onClick:()=>M(!1),className:`p-4 rounded-lg border-2 text-left transition-all ${x?"border-slate-200 bg-white hover:border-slate-300":"border-purple-500 bg-purple-50"}`,children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${x?"border-slate-300":"border-purple-500"}`,children:!x&&e("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})}),e("span",{className:`font-semibold ${x?"text-slate-700":"text-purple-700"}`,children:"EDIFACT (UNB/UNZ)"})]}),e("p",{className:"text-xs text-slate-500",children:"Envelope EDIFACT estándar con segmentos UNB, UNH, UNT, UNZ"}),e("div",{className:"mt-2 text-xs font-mono bg-slate-100 p-2 rounded text-slate-600",children:["UNB+IATA:1+SENDER...",e("br",{}),"FWB/17",e("br",{}),"...",e("br",{}),"'UNT+3+...'UNZ+1+...'"]})]}),e("button",{onClick:()=>M(!0),className:`p-4 rounded-lg border-2 text-left transition-all ${x?"border-sky-500 bg-sky-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${x?"border-sky-500":"border-slate-300"}`,children:x&&e("div",{className:"w-2 h-2 bg-sky-500 rounded-full"})}),e("span",{className:`font-semibold ${x?"text-sky-700":"text-slate-700"}`,children:"Type B (Descartes)"})]}),e("p",{className:"text-xs text-slate-500",children:"Formato IATA Type B para envío a Descartes GLN"}),e("div",{className:"mt-2 text-xs font-mono bg-slate-100 p-2 rounded text-slate-600",children:["QK ",k.recipientAddress||"DSGUNXA",e("br",{}),".",k.senderPrefix||"DSGTPXA",k.includeTimestamp?" DDHHmm":""," ",k.originAddress||"TDVAGT03OPERFLOR/BOG1",e("br",{}),"FWB/17",e("br",{}),"..."]}),e("p",{className:"text-xs text-slate-400 mt-1",children:"DSGUNXA = Descartes Universal Header (enruta automáticamente)"})]})]}),x&&e("div",{className:"mt-4 p-4 bg-sky-50 border border-sky-200 rounded-lg space-y-3",children:[e("p",{className:"text-sm font-semibold text-sky-800 flex items-center gap-2",children:[e(_a,{size:16})," Configuración Type B"]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Recipient Address (Descartes)"}),e("input",{type:"text",value:k.recipientAddress||"DSGUNXA",onChange:b=>V({recipientAddress:b.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"DSGUNXA"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"DSGUNXA = Descartes Universal Header (enruta automáticamente a la aerolínea)"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Sender Prefix (Línea 2)"}),e("input",{type:"text",value:k.senderPrefix||"DSGTPXA",onChange:b=>V({senderPrefix:b.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"DSGTPXA"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"Prefijo fijo de Descartes para la línea del sender"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Origin Address (Tu identificador)"}),e("input",{type:"text",value:k.originAddress||"TDVAGT03OPERFLOR/BOG1",onChange:b=>V({originAddress:b.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"TDVAGT03OPERFLOR/BOG1"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"Tu identificador de agente (proporcionado por Descartes)"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Timestamp en línea origen"}),e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>V({includeTimestamp:!1}),className:`px-3 py-1.5 rounded text-sm transition-colors ${k.includeTimestamp?"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100":"bg-sky-600 text-white"}`,children:"Sin timestamp"}),e("button",{onClick:()=>V({includeTimestamp:!0}),className:`px-3 py-1.5 rounded text-sm transition-colors ${k.includeTimestamp?"bg-sky-600 text-white":"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100"}`,children:"Con timestamp (DDHHmm)"})]}),e("p",{className:"text-xs text-sky-600 mt-1",children:k.includeTimestamp?"Ej: .DSGTPXA 031545 TDVAGT03OPERFLOR/BOG1":"Ej: .DSGTPXA TDVAGT03OPERFLOR/BOG1"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Prioridad"}),e("div",{className:"flex gap-2",children:["QK","QD","QP","QU"].map(b=>e("button",{onClick:()=>V({defaultPriority:b}),className:`px-3 py-1.5 rounded text-sm font-mono transition-colors ${k.defaultPriority===b?"bg-sky-600 text-white":"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100"}`,children:b},b))}),e("p",{className:"text-xs text-sky-600 mt-1",children:"QK=Normal, QD=Deferred, QP=Priority, QU=Urgent"})]})]})]})}),e(st,{title:"Special Handling Codes (SPH) por Aerolínea",icon:e(it,{size:18}),badge:`${Object.keys(n.sphByAirline).length} aerolíneas`,defaultOpen:!1,children:e("div",{className:"space-y-3",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Define qué códigos SPH se agregan automáticamente según el prefijo AWB (primeros 3 dígitos)."}),e("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries(n.sphByAirline).map(([b,F])=>e("div",{className:`flex items-center justify-between p-3 rounded-lg border ${b==="DEFAULT"?"bg-purple-50 border-purple-200":"bg-slate-50 border-slate-200"}`,children:[e("div",{className:"flex items-center gap-3",children:[e("span",{className:"font-mono font-bold text-slate-700 w-12",children:b}),e("span",{className:"text-slate-400",children:"→"}),e("div",{className:"flex flex-wrap gap-1",children:F.map(P=>e("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-medium",children:P},P))})]}),b!=="DEFAULT"&&e("button",{onClick:()=>se(b),className:"text-red-500 hover:bg-red-100 p-1.5 rounded transition-colors",children:e(kr,{size:14})}),b==="DEFAULT"&&e("span",{className:"text-xs text-amber-600 font-medium",children:"Por defecto"})]},b))}),e("div",{className:"flex items-end gap-2 pt-4 border-t border-slate-200",children:[e("div",{className:"flex-shrink-0",children:[e("label",{className:"text-xs text-slate-500 font-medium block mb-1",children:"Prefijo AWB"}),e("input",{type:"text",value:d,onChange:b=>m(b.target.value.toUpperCase().slice(0,3)),placeholder:"075",className:"w-20 border border-slate-300 rounded px-2 py-1.5 text-sm font-mono",maxLength:3})]}),e("div",{className:"flex-1",children:[e("label",{className:"text-xs text-slate-500 font-medium block mb-1",children:"Códigos SPH (seleccione)"}),e("div",{className:"flex flex-wrap gap-1 border border-slate-300 rounded p-2 bg-white max-h-20 overflow-y-auto",children:Object.values($t).map(b=>e("button",{onClick:()=>{u.includes(b.code)?p(F=>F.filter(P=>P!==b.code)):p(F=>[...F,b.code])},className:`text-xs px-2 py-0.5 rounded-full transition-colors ${u.includes(b.code)?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:b.description,children:b.code},b.code))})]}),e("button",{onClick:X,disabled:!d||d.length!==3||u.length===0,className:"flex-shrink-0 bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(Zt,{size:14})," Agregar"]})]}),e("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"📋 Prefijos AWB comunes:"}),e("div",{className:"grid grid-cols-4 gap-2 text-xs text-slate-500",children:[e("span",{children:[e("strong",{children:"075"})," = Iberia"]}),e("span",{children:[e("strong",{children:"145"})," = LATAM"]}),e("span",{children:[e("strong",{children:"985"})," = LATAM Cargo"]}),e("span",{children:[e("strong",{children:"074"})," = KLM"]}),e("span",{children:[e("strong",{children:"057"})," = Air France"]}),e("span",{children:[e("strong",{children:"020"})," = Lufthansa"]}),e("span",{children:[e("strong",{children:"205"})," = Emirates"]}),e("span",{children:[e("strong",{children:"176"})," = Emirates (alt)"]}),e("span",{children:[e("strong",{children:"235"})," = Turkish"]}),e("span",{children:[e("strong",{children:"157"})," = Qatar"]}),e("span",{children:[e("strong",{children:"045"})," = Avianca"]}),e("span",{children:[e("strong",{children:"369"})," = Atlas/Ethiopian"]}),e("span",{children:[e("strong",{children:"992"})," = DHL Aviation"]}),e("span",{children:[e("strong",{children:"999"})," = Polar/DHL"]}),e("span",{children:[e("strong",{children:"155"})," = ABX Air"]})]})]})]})}),e(st,{title:"OCI (Aduanas/Seguridad) por País de Origen",icon:e(Mn,{size:18}),badge:`${Object.keys(n.ociByOriginCountry).length} países`,children:e("div",{className:"space-y-3",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Define qué información OCI se agrega automáticamente según el país de origen del envío."}),e("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:Object.entries(n.ociByOriginCountry).map(([b,F])=>e("div",{className:`p-3 rounded-lg border ${b==="DEFAULT"?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"font-mono font-bold text-slate-700 bg-white px-2 py-1 rounded border",children:b}),b==="DEFAULT"&&e("span",{className:"text-xs text-amber-600 font-medium",children:"Por defecto"})]}),e("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>_(v===b?null:b),className:"text-purple-500 hover:bg-purple-100 p-1 rounded transition-colors text-xs",children:v===b?"Cerrar":"+ Agregar OCI"}),b!=="DEFAULT"&&e("button",{onClick:()=>Y(b),className:"text-red-500 hover:bg-red-100 p-1 rounded transition-colors",children:e(kr,{size:14})})]})]}),e("div",{className:"space-y-1",children:F.map((P,J)=>e("div",{className:"text-xs text-slate-600 flex items-center gap-2 bg-white p-1.5 rounded",children:[e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded font-medium",children:P.infoIdentifier}),e("span",{children:"→"}),e("span",{className:"bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium",children:P.controlInfo}),F.length>1&&e("button",{onClick:()=>re(b,J),className:"ml-auto text-red-400 hover:text-red-600",children:e(Ke,{size:12})})]},J))}),v===b&&e("div",{className:"mt-3 pt-3 border-t border-dashed border-slate-300",children:[e("p",{className:"text-xs text-slate-500 mb-2",children:["Agregar nuevo OCI a ",b,":"]}),e("div",{className:"flex flex-wrap gap-2 items-center",children:[e("select",{value:f,onChange:P=>C(P.target.value),className:"border border-slate-300 rounded px-2 py-1 text-sm",children:[e("option",{value:"AGT",children:"AGT - Agent"}),e("option",{value:"CNE",children:"CNE - Consignee"}),e("option",{value:"SHP",children:"SHP - Shipper"}),e("option",{value:"FFW",children:"FFW - Freight Forwarder"})]}),e("select",{value:N,onChange:P=>S(P.target.value),className:"border border-slate-300 rounded px-2 py-1 text-sm",children:Object.entries(na).map(([P,J])=>e("option",{value:J.short,children:[J.short," - ",J.description]},P))}),e("button",{onClick:()=>{le(b,f,N),_(null)},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:e(Zt,{size:14})})]})]})]},b))}),e("div",{className:"pt-4 border-t border-slate-200",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Agregar nuevo país:"}),e("div",{className:"flex flex-wrap items-center gap-2",children:[e("input",{type:"text",value:c,onChange:b=>g(b.target.value.toUpperCase().slice(0,2)),placeholder:"CO",className:"w-16 border border-slate-300 rounded px-2 py-1.5 text-sm font-mono",maxLength:2}),e("select",{value:f,onChange:b=>C(b.target.value),className:"border border-slate-300 rounded px-2 py-1.5 text-sm",children:[e("option",{value:"AGT",children:"AGT - Agent"}),e("option",{value:"CNE",children:"CNE - Consignee"}),e("option",{value:"SHP",children:"SHP - Shipper"}),e("option",{value:"FFW",children:"FFW - Freight Forwarder"})]}),e("select",{value:N,onChange:b=>S(b.target.value),className:"border border-slate-300 rounded px-2 py-1.5 text-sm",children:Object.entries(na).map(([b,F])=>e("option",{value:F.short,children:[F.short," - ",F.description]},b))}),e("button",{onClick:Ce,disabled:!c||c.length!==2,className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(Zt,{size:14})," Agregar País"]})]})]}),e("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"📋 Códigos de país ISO comunes:"}),e("div",{className:"grid grid-cols-4 gap-2 text-xs text-slate-500",children:[e("span",{children:[e("strong",{children:"CO"})," = Colombia"]}),e("span",{children:[e("strong",{children:"EC"})," = Ecuador"]}),e("span",{children:[e("strong",{children:"PE"})," = Perú"]}),e("span",{children:[e("strong",{children:"PA"})," = Panamá"]}),e("span",{children:[e("strong",{children:"MX"})," = México"]}),e("span",{children:[e("strong",{children:"CL"})," = Chile"]}),e("span",{children:[e("strong",{children:"AR"})," = Argentina"]}),e("span",{children:[e("strong",{children:"BR"})," = Brasil"]})]})]})]})}),e(st,{title:"Opciones de Envío",icon:e(Ye,{size:18}),children:e("div",{className:"space-y-4",children:[e("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-green-800",children:"Incluir NIT/RUC del Importer"}),e("p",{className:"text-xs text-green-600",children:"Envía el NIT del consignee/importador como OCI (AGT/T/NIT)"}),e("p",{className:"text-xs text-green-500 mt-1 italic",children:"✅ Este es el default - Solo se envía si el importer tiene taxId"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:n.includeConsigneeTIN??!0,onChange:b=>A("includeConsigneeTIN",b.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-slate-700",children:"Incluir NIT/RUC del Shipper"}),e("p",{className:"text-xs text-slate-500",children:"Envía también el NIT del shipper/exportador (opcional)"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:n.includeShipperTIN,onChange:b=>A("includeShipperTIN",b.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-slate-700",children:"Generar CSL automático"}),e("p",{className:"text-xs text-slate-500",children:"Crear Consolidation List para envíos con houses"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:n.messageConfig.autoGenerateCSL,onChange:b=>A("messageConfig",{...n.messageConfig,autoGenerateCSL:b.target.checked}),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})}),e(st,{title:"OCI Seguridad (RA/ED/SM/SD/SN)",icon:e(Ye,{size:18}),badge:(Fe=n.securityOci)!=null&&Fe.enabled?"Activo":"Inactivo",children:e("div",{className:"space-y-4",children:[e("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e("div",{className:"flex items-start gap-2",children:[e(Ue,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),e("div",{className:"text-xs text-blue-700",children:[e("p",{className:"font-medium mb-1",children:"Información de Seguridad OCI"}),e("p",{children:"Algunos destinos/aerolíneas requieren información de seguridad adicional para documentar quién, cómo y cuándo se aseguró el envío. Active esta opción solo si la aerolínea lo requiere."})]})]})}),e("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-amber-800",children:"Incluir OCI de Seguridad"}),e("p",{className:"text-xs text-amber-600",children:"Enviar RA, ED, SM, SD, SN en el mensaje"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:((me=n.securityOci)==null?void 0:me.enabled)||!1,onChange:b=>A("securityOci",{...n.securityOci,enabled:b.target.checked}),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-amber-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),((Re=n.securityOci)==null?void 0:Re.enabled)&&e("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"RA"}),"Número de Agente Regulado"]}),e("input",{type:"text",value:((Ve=n.securityOci)==null?void 0:Ve.regulatedAgentNumber)||"",onChange:b=>A("securityOci",{...n.securityOci,regulatedAgentNumber:b.target.value}),placeholder:"Ej: 00100-01",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:35}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Número de certificado del agente regulado de Colombia"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"ED"}),"Fecha Expiración Certificado"]}),e("input",{type:"text",value:((ze=n.securityOci)==null?void 0:ze.expiryDate)||"",onChange:b=>A("securityOci",{...n.securityOci,expiryDate:b.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,4)}),placeholder:"MMYY (Ej: 1225 = Dic 2025)",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:4}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Formato MMYY - Mes y año de expiración del certificado"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-green-100 text-green-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SM"}),"Método de Screening"]}),e("select",{value:((Te=n.securityOci)==null?void 0:Te.screeningMethod)||"",onChange:b=>A("securityOci",{...n.securityOci,screeningMethod:b.target.value}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e("option",{value:"",children:"-- Seleccionar método --"}),e("option",{value:"XRY",children:"XRY - Rayos X"}),e("option",{value:"EDS",children:"EDS - Sistema de Detección de Explosivos"}),e("option",{value:"ETD",children:"ETD - Detección de Trazas de Explosivos"}),e("option",{value:"VCK",children:"VCK - Verificación Visual"}),e("option",{value:"PHS",children:"PHS - Inspección Física"}),e("option",{value:"EDD",children:"EDD - Perros Detectores de Explosivos"})]}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Método utilizado para inspeccionar la carga"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SD"}),"Fecha/Hora de Screening"]}),e("input",{type:"text",value:((Z=n.securityOci)==null?void 0:Z.screeningDate)||"",onChange:b=>A("securityOci",{...n.securityOci,screeningDate:b.target.value.toUpperCase().substring(0,13)}),placeholder:"DDMMMYYHHmm (Ej: 24DEC252359)",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:13}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Formato DDMMMYYHHmm - Fecha y hora local del screening"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-pink-100 text-pink-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SN"}),"Nombre del Responsable"]}),e("input",{type:"text",value:((we=n.securityOci)==null?void 0:we.screenerName)||"",onChange:b=>A("securityOci",{...n.securityOci,screenerName:b.target.value.toUpperCase().substring(0,35)}),placeholder:"Ej: JORGE GAMBOA",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm uppercase",maxLength:35}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Nombre de la persona que realizó el screening"})]}),e("div",{className:"mt-4 p-3 bg-slate-800 rounded-lg",children:[e("p",{className:"text-xs text-slate-400 mb-2 font-medium",children:"Vista previa del OCI de seguridad:"}),e("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:`[
${(he=n.securityOci)!=null&&he.regulatedAgentNumber?`  { "isoCountryCode": "CO", "informationIdentifier": "AGT", "additionalControlInformation": "RA", "supplementaryControlInformation": "${n.securityOci.regulatedAgentNumber}" },
`:""}${(R=n.securityOci)!=null&&R.expiryDate?`  { "additionalControlInformation": "ED", "supplementaryControlInformation": "${n.securityOci.expiryDate}" },
`:""}${(lt=n.securityOci)!=null&&lt.screeningMethod?`  { "additionalControlInformation": "SM", "supplementaryControlInformation": "${n.securityOci.screeningMethod}" },
`:""}${(Qe=n.securityOci)!=null&&Qe.screeningDate?`  { "additionalControlInformation": "SD", "supplementaryControlInformation": "${n.securityOci.screeningDate}" },
`:""}${(rr=n.securityOci)!=null&&rr.screenerName?`  { "additionalControlInformation": "SN", "supplementaryControlInformation": "${n.securityOci.screenerName}" }
`:""}]`})]})]})]})}),e(st,{title:"CARGO-IMP (EDI) Configuración",icon:e(Ot,{size:18}),badge:"Formato EDI",defaultOpen:!0,children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Configura las versiones de mensaje y opciones para el formato CARGO-IMP (IATA CIMP EDI)."}),e("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e("p",{className:"text-xs font-bold text-emerald-700 uppercase tracking-wide mb-3",children:"⚙️ Configuración Global"}),e("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e("div",{children:[e("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Versión FWB"}),e("select",{value:((ar=n.cargoImp)==null?void 0:ar.fwbVersion)||"FWB/16",onChange:b=>A("cargoImp",{...n.cargoImp,fwbVersion:b.currentTarget.value}),className:"w-full border border-emerald-300 rounded px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-emerald-400",children:[e("option",{value:"FWB/16",children:"FWB/16 (Estándar)"}),e("option",{value:"FWB/17",children:"FWB/17 (Extendido)"})]})]}),e("div",{children:[e("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Versión FHL"}),e("select",{value:((z=n.cargoImp)==null?void 0:z.fhlVersion)||"FHL/4",onChange:b=>A("cargoImp",{...n.cargoImp,fhlVersion:b.currentTarget.value}),className:"w-full border border-emerald-300 rounded px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-emerald-400",children:[e("option",{value:"FHL/4",children:"FHL/4 (Actual)"}),e("option",{value:"FHL/2",children:"FHL/2 (Legacy)"})]})]}),e("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cargoImpUNB",checked:((be=n.cargoImp)==null?void 0:be.includeUNB_UNZ)||!1,onChange:b=>A("cargoImp",{...n.cargoImp,includeUNB_UNZ:b.currentTarget.checked}),className:"w-4 h-4 rounded border-emerald-300 text-emerald-600 focus:ring-emerald-400"}),e("label",{htmlFor:"cargoImpUNB",className:"text-xs text-slate-700",children:["Incluir UNB/UNZ",e("br",{}),e("span",{className:"text-[10px] text-slate-400",children:"(EDIFACT wrapper)"})]})]}),e("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cargoImpEORI",checked:((ct=n.cargoImp)==null?void 0:ct.ociWithEori)||!1,onChange:b=>A("cargoImp",{...n.cargoImp,ociWithEori:b.currentTarget.checked}),className:"w-4 h-4 rounded border-emerald-300 text-emerald-600 focus:ring-emerald-400"}),e("label",{htmlFor:"cargoImpEORI",className:"text-xs text-slate-700",children:["EORI en OCI",e("br",{}),e("span",{className:"text-[10px] text-slate-400",children:"(Requerido UE)"})]})]})]})]}),e("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e("p",{className:"text-xs font-bold text-purple-700 uppercase tracking-wide mb-3",children:"📦 Códigos SPH por defecto"}),e("div",{className:"flex flex-wrap gap-2",children:["EAP","ECC","PER","SPX","DGR","ICE","VAL","AVI","HEA"].map(b=>{var F;return e("label",{className:"flex items-center gap-1.5 bg-white px-2 py-1 rounded border border-purple-200 cursor-pointer hover:bg-purple-100",children:[e("input",{type:"checkbox",checked:(((F=n.cargoImp)==null?void 0:F.defaultSphCodes)||[]).includes(b),onChange:P=>{var pe;const J=((pe=n.cargoImp)==null?void 0:pe.defaultSphCodes)||[],W=P.currentTarget.checked?[...J,b]:J.filter(Je=>Je!==b);A("cargoImp",{...n.cargoImp,defaultSphCodes:W})},className:"w-3 h-3 rounded border-purple-300 text-purple-600"}),e("span",{className:"text-xs font-mono text-purple-700",children:b})]},b)})})]}),e("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"✈️ Políticas por Aerolínea (Pre-configuradas)"}),e("button",{onClick:()=>{A("cargoImp",{...n.cargoImp,airlinePolicies:{...je}})},className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-1 rounded hover:bg-indigo-200",title:"Actualiza 992=DHL, 999=Polar Air, etc.",children:"🔄 Sincronizar predefinidas"})]}),e("p",{className:"text-xs text-slate-500 mb-3",children:"Haz clic en una aerolínea para expandir y editar. Los segmentos son clickeables para activar/desactivar."}),e("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Object.entries({...je,...((K=n.cargoImp)==null?void 0:K.airlinePolicies)||{}}).sort(([b],[F])=>b==="DEFAULT"?1:F==="DEFAULT"?-1:b.localeCompare(F)).map(([b,F])=>{let P=[...F.enabledSegments||[]];const J=F.disabledSegments||[];if(P.includes("NH")){if(!P.includes("NV")&&!J.includes("NV")){const L=P.indexOf("NH");P=[...P.slice(0,L+1),"NV",...P.slice(L+1)]}if(!P.includes("NS")&&!J.includes("NS")){const L=P.indexOf("NV");if(L>=0)P=[...P.slice(0,L+1),"NS",...P.slice(L+1)];else{const U=P.indexOf("NH");P=[...P.slice(0,U+1),"NS",...P.slice(U+1)]}}}const W={...F,enabledSegments:P},pe=Object.keys(Me),Je=Math.floor((W.policy||20)/10);return e("details",{className:"group bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-slate-50",children:[e("div",{className:"flex items-center gap-3 flex-wrap",children:[e("span",{className:"font-mono font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded w-12 text-center",children:b}),e("span",{className:"text-xs text-slate-600",children:W.name||b}),e("span",{className:`text-[10px] px-2 py-0.5 rounded ${Je===7?"bg-orange-100 text-orange-700":Je===5?"bg-purple-100 text-purple-700":Je===4?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:["Caso ",Je]}),e("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded",children:W.fwbVersion||"FWB/16"}),e("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded",children:W.fhlVersion||"FHL/4"})]}),e("div",{className:"flex items-center gap-2",children:[e(Se,{size:14,className:"text-slate-400 group-open:rotate-90 transition-transform"}),b!=="DEFAULT"&&e("button",{onClick:L=>{var j;L.preventDefault(),L.stopPropagation();const U={...(j=n.cargoImp)==null?void 0:j.airlinePolicies};delete U[b],A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"text-red-500 hover:text-red-700 p-1",children:e(kr,{size:14})})]})]}),e("div",{className:"px-3 pb-3 border-t border-slate-100 pt-3 space-y-3",children:[e("div",{className:"p-2 bg-amber-50 rounded border border-amber-200",children:[e("label",{className:"text-[10px] text-amber-700 font-bold block mb-1",children:"🔧 Política de Caso"}),e("select",{value:W.policy||20,onChange:L=>{var or;const U=parseInt(L.currentTarget.value),j=Object.keys(Me),ue=Object.keys(xe),Oe=["FWB","AWB","RTG","SHP","CNE","AGT","CVD","ISU","FTR"],_e=ue;let ee=[...Oe],fe=[],Ee=!0,He=!1;switch(Math.floor(U/10)){case 2:ee=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],fe=j.filter(Ie=>!ee.includes(Ie));break;case 4:ee=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],fe=j.filter(Ie=>!ee.includes(Ie));break;case 5:ee=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","REF","SPH","OCI","FTR"],fe=j.filter(Ie=>!ee.includes(Ie));break;case 7:ee=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],fe=j.filter(Ie=>!ee.includes(Ie)),He=!0;break;case 8:ee=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","SPH","OCI","FTR"],fe=j.filter(Ie=>!ee.includes(Ie));break}const dt={...((or=n.cargoImp)==null?void 0:or.airlinePolicies)||{},[b]:{...W,policy:U,enabledSegments:ee,disabledSegments:fe,enabledFhlSegments:_e,disabledFhlSegments:[],includeUnbUnz:Ee,fhlAlwaysWithHeader:He}};A("cargoImp",{...n.cargoImp,airlinePolicies:dt}),console.log(`[ConfigPanel] Caso cambiado a ${U} para ${b}, segmentos FWB: ${ee.length} habilitados`)},className:"w-full border border-amber-300 rounded px-2 py-1 text-xs bg-white",children:[e("optgroup",{label:"📦 Consolidados",children:[e("option",{value:20,children:"Caso 2: FWB + FHL individuales"}),e("option",{value:40,children:"Caso 4: FWB_NEW + FHL individuales"}),e("option",{value:50,children:"Caso 5: FWB_NEW + FHL concatenados"}),e("option",{value:70,children:"Caso 7: DHL/ABX (FHL con header)"}),e("option",{value:80,children:"Caso 8: Todas FHL en 1 mensaje"})]}),e("optgroup",{label:"📄 Directos",children:[e("option",{value:21,children:"Caso 2: FWB directo"}),e("option",{value:41,children:"Caso 4: FWB_NEW directo"}),e("option",{value:71,children:"Caso 7: DHL/ABX directo"})]})]})]}),e("div",{className:"grid grid-cols-4 gap-2",children:[e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"FWB"}),e("select",{value:W.fwbVersion||"FWB/16",onChange:L=>{var j;const U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,fwbVersion:L.currentTarget.value}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"w-full border border-slate-300 rounded px-1 py-1 text-xs",children:[e("option",{value:"FWB/16",children:"FWB/16"}),e("option",{value:"FWB/17",children:"FWB/17"}),e("option",{value:"FWB/9",children:"FWB/9"})]})]}),e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"FHL"}),e("select",{value:W.fhlVersion||"FHL/4",onChange:L=>{var j;const U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,fhlVersion:L.currentTarget.value}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"w-full border border-slate-300 rounded px-1 py-1 text-xs",children:[e("option",{value:"FHL/4",children:"FHL/4"}),e("option",{value:"FHL/2",children:"FHL/2"})]})]}),e("label",{className:"flex items-center gap-1 text-[10px] p-1 bg-slate-100 rounded",children:[e("input",{type:"checkbox",checked:W.includeUnbUnz!==!1,onChange:L=>{var j;const U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,includeUnbUnz:L.currentTarget.checked}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"w-3 h-3"}),"UNB/UNZ"]}),e("label",{className:"flex items-center gap-1 text-[10px] p-1 bg-slate-100 rounded",children:[e("input",{type:"checkbox",checked:W.ociFormat==="withPrefix",onChange:L=>{var j;const U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,ociFormat:L.currentTarget.checked?"withPrefix":"withoutPrefix"}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"w-3 h-3"}),"EORI"]})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-[10px] font-bold text-slate-700",children:"📋 Segmentos (click para toggle):"}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>{var U;const L={...((U=n.cargoImp)==null?void 0:U.airlinePolicies)||{},[b]:{...W,enabledSegments:[...pe],disabledSegments:[]}};A("cargoImp",{...n.cargoImp,airlinePolicies:L})},className:"text-[9px] text-green-600 hover:underline",children:"Todos"}),e("button",{onClick:()=>{var j;const L=["FWB","AWB","SHP","CNE","CVD","ISU","FTR"],U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,enabledSegments:L,disabledSegments:pe.filter(ue=>!L.includes(ue))}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"text-[9px] text-amber-600 hover:underline",children:"Mínimos"})]})]}),e("div",{className:"grid grid-cols-8 gap-1",children:pe.map(L=>{var j;const U=(W.enabledSegments||[]).includes(L);return e("button",{onClick:()=>{var Ee;const ue=W.enabledSegments||pe,Oe=W.disabledSegments||[];let _e,ee;U?(_e=ue.filter(He=>He!==L),ee=[...Oe,L]):(_e=[...ue,L],ee=Oe.filter(He=>He!==L));const fe={...((Ee=n.cargoImp)==null?void 0:Ee.airlinePolicies)||{},[b]:{...W,enabledSegments:_e,disabledSegments:ee}};A("cargoImp",{...n.cargoImp,airlinePolicies:fe}),Ho(b,{enabledSegments:_e,disabledSegments:ee})},className:`p-1 rounded text-[9px] font-mono font-bold text-center transition-all ${U?"bg-green-100 text-green-700 border border-green-300 hover:bg-green-200":"bg-red-50 text-red-400 border border-red-200 line-through hover:bg-red-100"}`,title:((j=Me[L])==null?void 0:j.name)||L,children:L},L)})}),e("p",{className:"text-[9px] text-slate-400 mt-1",children:["✓ ",(W.enabledSegments||[]).length," activos | ✗ ",(W.disabledSegments||[]).length," deshabilitados"]})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-[10px] font-bold text-blue-700",children:"📦 Segmentos FHL (Houses - click para toggle):"}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>{var j;const L=Object.keys(xe),U={...((j=n.cargoImp)==null?void 0:j.airlinePolicies)||{},[b]:{...W,enabledFhlSegments:[...L],disabledFhlSegments:[]}};A("cargoImp",{...n.cargoImp,airlinePolicies:U})},className:"text-[9px] text-blue-600 hover:underline",children:"Todos"}),e("button",{onClick:()=>{var ue;const L=["FHL","MBI","HBS","SHP","CNE","CVD"],U=Object.keys(xe),j={...((ue=n.cargoImp)==null?void 0:ue.airlinePolicies)||{},[b]:{...W,enabledFhlSegments:L,disabledFhlSegments:U.filter(Oe=>!L.includes(Oe))}};A("cargoImp",{...n.cargoImp,airlinePolicies:j})},className:"text-[9px] text-amber-600 hover:underline",children:"Mínimos"})]})]}),e("div",{className:"grid grid-cols-5 gap-1",children:Object.keys(xe).map(L=>{var Oe;const U=Object.keys(xe),ue=(W.enabledFhlSegments||U).includes(L);return e("button",{onClick:()=>{var Ct;const _e=W.enabledFhlSegments||U,ee=W.disabledFhlSegments||[];let fe,Ee;ue?(fe=_e.filter(dt=>dt!==L),Ee=[...ee,L]):(fe=[..._e,L],Ee=ee.filter(dt=>dt!==L));const He={...((Ct=n.cargoImp)==null?void 0:Ct.airlinePolicies)||{},[b]:{...W,enabledFhlSegments:fe,disabledFhlSegments:Ee}};A("cargoImp",{...n.cargoImp,airlinePolicies:He})},className:`p-1 rounded text-[9px] font-mono font-bold text-center transition-all ${ue?"bg-blue-100 text-blue-700 border border-blue-300 hover:bg-blue-200":"bg-red-50 text-red-400 border border-red-200 line-through hover:bg-red-100"}`,title:((Oe=xe[L])==null?void 0:Oe.name)||L,children:L},L)})}),e("p",{className:"text-[9px] text-blue-400 mt-1",children:["✓ ",(W.enabledFhlSegments||Object.keys(xe)).length," FHL activos"]})]}),W.notes&&e("div",{className:"bg-amber-50 border border-amber-200 rounded p-2",children:e("p",{className:"text-[10px] text-amber-700",children:[e(Ue,{size:10,className:"inline mr-1"}),W.notes]})})]})]},b)})}),e("div",{className:"mt-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[e("p",{className:"text-xs font-semibold text-emerald-700 mb-2",children:"+ Agregar política de aerolínea"}),e("div",{className:"flex items-end gap-2 flex-wrap",children:[e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"Prefijo AWB"}),e("input",{type:"text",maxLength:3,placeholder:"Ej: 075",value:d,onChange:b=>m(b.currentTarget.value.replace(/\D/g,"").slice(0,3)),className:"w-16 border border-emerald-300 rounded px-2 py-1 text-xs font-mono"})]}),e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"Nombre"}),e("input",{type:"text",placeholder:"Ej: DHL",id:"newPolicyName",className:"w-24 border border-emerald-300 rounded px-2 py-1 text-xs"})]}),e("button",{onClick:()=>{var b;if(d&&d.length===3){const F=document.getElementById("newPolicyName"),P=Object.keys(Me),J={...((b=n.cargoImp)==null?void 0:b.airlinePolicies)||{},[d]:{awbPrefix:d,name:(F==null?void 0:F.value)||`Aerolínea ${d}`,policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUnbUnz:!0,ociFormat:"withPrefix",enabledSegments:P,disabledSegments:[],defaultSphCodes:["EAP"]}};A("cargoImp",{...n.cargoImp,airlinePolicies:J}),m(""),F&&(F.value="")}},disabled:!d||d.length!==3,className:"bg-emerald-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(Zt,{size:12})," Agregar"]})]})]})]}),e("details",{className:"mt-4",children:[e("summary",{className:"cursor-pointer text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2 py-2 font-medium",children:[e(Se,{size:14})," Ver referencia de segmentos FWB/FHL"]}),e("div",{className:"mt-2 p-3 bg-slate-100 rounded-lg",children:e("div",{className:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("p",{className:"text-xs font-bold text-purple-700 mb-2",children:["Segmentos FWB (",Object.keys(Me).length,")"]}),e("div",{className:"flex flex-wrap gap-1",children:Object.keys(Me).map(b=>e("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded font-mono",children:b},b))})]}),e("div",{children:[e("p",{className:"text-xs font-bold text-blue-700 mb-2",children:["Segmentos FHL (",Object.keys(xe).length,")"]}),e("div",{className:"flex flex-wrap gap-1",children:Object.keys(xe).map(b=>e("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-mono",children:b},b))})]})]})})]})]})}),e(st,{title:"Configuración de Red",icon:e(jt,{size:18}),children:e("div",{className:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Timeout (ms)"}),e("input",{type:"number",value:n.messageConfig.sendTimeoutMs,onChange:b=>A("messageConfig",{...n.messageConfig,sendTimeoutMs:parseInt(b.target.value)||3e4}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",min:5e3,max:12e4,step:1e3})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Reintentos máximos"}),e("input",{type:"number",value:n.messageConfig.maxRetries,onChange:b=>A("messageConfig",{...n.messageConfig,maxRetries:parseInt(b.target.value)||3}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",min:0,max:10})]})]})})]}),e("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50 flex items-center justify-between",children:[e("p",{className:"text-xs text-slate-500",children:'Los cambios se aplican inmediatamente. Use "Guardar" para persistir en su sistema.'}),e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:r,className:"bg-slate-200 text-slate-700 px-6 py-2 rounded-lg text-sm font-medium hover:bg-slate-300 flex items-center gap-2",children:"Cerrar"}),o&&e("button",{onClick:()=>{o(n),s({type:"success",text:"✓ Configuración emitida para guardar"})},className:"bg-emerald-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 flex items-center gap-2",children:[e(ve,{size:16})," Guardar"]})]})]})]})]}):null},qn={FWB:e(ht,{size:14}),FHL:e(ht,{size:14}),AWB:e(ge,{size:14}),MBI:e(ge,{size:14}),FLT:e(it,{size:14}),RTG:e(Kt,{size:14}),SHP:e(Ge,{size:14}),CNE:e(Ge,{size:14}),AGT:e(Rt,{size:14}),SSR:e(Ue,{size:14}),ACC:e(We,{size:14}),CVD:e(We,{size:14}),RTD:e(Yt,{size:14}),NG:e(bt,{size:14}),NH:e(bt,{size:14}),NV:e(Yt,{size:14}),NS:e(ge,{size:14}),HBS:e(ge,{size:14}),HTS:e(bt,{size:14}),OTH:e(We,{size:14}),PPD:e(We,{size:14}),COL:e(We,{size:14}),CER:e(Ye,{size:14}),ISU:e(jt,{size:14}),REF:e(Ae,{size:14}),SPH:e(Ye,{size:14}),OCI:e(Ye,{size:14}),NFY:e(Ge,{size:14}),TXT:e(Ae,{size:14}),FTR:e(ht,{size:14})},jn={FWB:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},FHL:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},FTR:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},AWB:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},MBI:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},HBS:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},FLT:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700"},RTG:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700"},SHP:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700"},CNE:{bg:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700"},AGT:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700"},NFY:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700"},CVD:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},RTD:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},OTH:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-700"},PPD:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700"},COL:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700"},ACC:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},NG:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},NH:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},NV:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700"},NS:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700"},HTS:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},SSR:{bg:"bg-rose-50",border:"border-rose-300",text:"text-rose-700"},SPH:{bg:"bg-fuchsia-50",border:"border-fuchsia-300",text:"text-fuchsia-700"},OCI:{bg:"bg-violet-50",border:"border-violet-300",text:"text-violet-700"},CER:{bg:"bg-pink-50",border:"border-pink-300",text:"text-pink-700"},ISU:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700"},REF:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700"},TXT:{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-700"}},Xn=({segment:t,onEdit:r,onToggle:a,readOnly:o=!1,cardSize:n="normal"})=>{var E,k;const[i,l]=O(!1),s=t.originalContent||t.content,[d,m]=O(s),[u,p]=O(n==="expanded"),c=t.originalContent&&t.originalContent.length>t.content.length,g=t.currentLength>t.maxLength||t.originalContent&&t.originalContent.length>t.maxLength;pt(()=>{m(t.originalContent||t.content)},[t.content,t.originalContent]);const f=jn[t.code]||{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-700"},C=qn[t.code]||e(Ae,{size:14}),N=()=>{r&&r(t.code,d),l(!1)},S=()=>{m(t.content),l(!1)},v=()=>{navigator.clipboard.writeText(t.content)},_=t.currentLength>t.maxLength,x=Math.min(100,t.currentLength/t.maxLength*100);return t.enabled?e("div",{className:`
      rounded-lg border-2 ${f.border} ${f.bg}
      transition-all duration-200 hover:shadow-md
      ${t.errors.length>0?"ring-2 ring-red-400":""}
      ${g?"ring-2 ring-orange-500 border-orange-400":""}
    `,children:[g&&e("div",{className:"bg-orange-500 text-white px-3 py-1.5 text-xs font-medium flex items-center gap-2 rounded-t-md",children:[e(ie,{size:14,className:"flex-shrink-0"}),e("span",{children:["⚠️ EXCEDE LÍMITE: ",((E=t.originalContent)==null?void 0:E.length)||t.currentLength," / ",t.maxLength," caracteres (",(((k=t.originalContent)==null?void 0:k.length)||t.currentLength)-t.maxLength," de más)"]}),!o&&t.editable&&e("button",{onClick:D=>{D.stopPropagation(),l(!0),p(!0)},className:"ml-auto px-2 py-0.5 bg-white/20 hover:bg-white/30 rounded text-[10px] flex items-center gap-1",children:[e(nt,{size:10})," Editar para corregir"]})]}),e("div",{className:`
          flex items-center gap-2 p-2 cursor-pointer
          ${n==="compact"?"py-1":""}
        `,onClick:()=>!i&&p(!u),children:[e("div",{className:f.text,children:C}),e("span",{className:`font-mono font-bold ${f.text} text-sm`,children:t.code}),e("span",{className:`text-[10px] ${f.text} opacity-70 truncate flex-1`,children:t.name}),e("div",{className:"flex items-center gap-1",children:[e("div",{className:`
              text-[9px] font-mono px-1.5 py-0.5 rounded
              ${_?"bg-red-100 text-red-700":"bg-white/50 text-slate-500"}
            `,title:`${t.currentLength} / ${t.maxLength} caracteres`,children:[t.currentLength,"/",t.maxLength]}),e("div",{className:"w-8 h-1 bg-white/50 rounded-full overflow-hidden",children:e("div",{className:`h-full transition-all ${_?"bg-red-500":"bg-green-500"}`,style:{width:`${x}%`}})})]}),!o&&t.editable&&!i&&e("button",{onClick:D=>{D.stopPropagation(),l(!0),p(!0)},className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Editar segmento",children:e(nt,{size:12,className:f.text})}),e("button",{onClick:D=>{D.stopPropagation(),v()},className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Copiar contenido",children:e(Pe,{size:12,className:f.text})}),a&&!t.required&&e("button",{onClick:D=>{D.stopPropagation(),a(t.code,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors text-red-400 hover:text-red-600",title:"Deshabilitar segmento",children:e(Er,{size:12})}),u?e(Le,{size:14,className:f.text}):e(Se,{size:14,className:f.text})]}),t.errors.length>0&&e("div",{className:"px-2 pb-1",children:t.errors.map((D,M)=>e("div",{className:"flex items-center gap-1 text-[10px] text-red-600",children:[e(ie,{size:10}),e("span",{children:D})]},M))}),u&&e("div",{className:"border-t border-white/50 p-2",children:[i?e("div",{className:"space-y-2",children:[e("textarea",{value:d,onChange:D=>m(D.target.value),className:`
                  w-full font-mono text-xs p-2 rounded border
                  ${d.length>t.maxLength?"border-red-300 bg-red-50":"border-slate-300 bg-white"}
                  focus:outline-none focus:ring-2 focus:ring-purple-400
                  resize-none
                `,rows:Math.min(10,Math.max(3,s.split(`
`).length+1)),spellcheck:!1}),e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex flex-col gap-0.5",children:[e("span",{className:`text-[10px] ${d.length>t.maxLength?"text-red-600 font-semibold":"text-slate-500"}`,children:[d.length," / ",t.maxLength," caracteres",d.length>t.maxLength&&e("span",{className:"ml-1 text-red-600",children:["(⚠️ ",d.length-t.maxLength," de más - ¡Debe reducir!)"]})]}),c&&e("span",{className:"text-[9px] text-orange-600",children:"ℹ️ Mostrando texto original completo para edición"})]}),e("div",{className:"flex gap-1",children:[e("button",{onClick:S,className:"px-2 py-1 text-xs bg-slate-200 hover:bg-slate-300 rounded flex items-center gap-1",children:[e(Ke,{size:12})," Cancelar"]}),e("button",{onClick:N,className:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded flex items-center gap-1",children:[e(Oa,{size:12})," Guardar"]})]})]})]}):e("pre",{className:`
              font-mono text-[11px] whitespace-pre-wrap break-all
              ${f.text} opacity-90 leading-relaxed
            `,children:t.content||e("span",{className:"italic text-slate-400",children:"Sin contenido"})}),t.fields.length>0&&!i&&e("div",{className:"mt-2 pt-2 border-t border-white/30",children:[e("div",{className:"text-[9px] text-slate-500 mb-1 uppercase tracking-wide font-semibold",children:"Campos:"}),e("div",{className:"flex flex-wrap gap-1",children:t.fields.map((D,M)=>{var V;return e("div",{className:"text-[10px] bg-white/60 px-1.5 py-0.5 rounded border border-white/80",title:`${D.name}: máx ${D.maxLength} chars${D.required?" (requerido)":""}`,children:[e("span",{className:"font-medium text-slate-600",children:[D.name,":"]})," ",e("span",{className:`font-mono ${D.modified?"text-purple-600 font-bold":"text-slate-700"}`,children:D.value||"-"}),e("span",{className:"text-slate-400 ml-1",children:["(",((V=D.value)==null?void 0:V.length)||0,"/",D.maxLength,")"]})]},M)})})]})]})]}):e("div",{className:"relative group",children:[e("div",{className:`
          p-2 rounded-lg border-2 border-dashed border-slate-200 bg-slate-50/50
          opacity-60 hover:opacity-80
          transition-all duration-200 ${a?"cursor-pointer hover:border-green-400 hover:bg-green-50/30":"cursor-not-allowed"}
        `,onClick:()=>a&&a(t.code,!0),children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:"text-slate-400",children:C}),e("span",{className:"font-mono text-xs font-bold text-slate-400",children:t.code}),e("span",{className:"text-[10px] text-slate-400 truncate flex-1",children:t.name}),a?e("button",{onClick:D=>{D.stopPropagation(),a(t.code,!0)},className:"p-1 hover:bg-green-100 rounded transition-colors text-green-600",title:"Habilitar segmento",children:e(Xt,{size:12})}):e(Er,{size:12,className:"text-slate-400"})]}),n!=="compact"&&e("div",{className:"mt-1 text-[10px] text-slate-400 italic flex items-center justify-between",children:[e("span",{children:"Deshabilitado por política de aerolínea"}),a&&e("span",{className:"text-green-600 font-medium",children:"Clic para habilitar →"})]})]}),e("div",{className:"absolute hidden group-hover:block bottom-full left-0 mb-1 p-2 bg-slate-800 text-white text-xs rounded shadow-lg z-50 w-56",children:a?"Clic para HABILITAR este segmento y ver sus datos":"Este segmento no se incluye según la política configurada para esta aerolínea."})]})},Pa=({message:t,policy:r,onSegmentChange:a,onRegenerate:o,onToggleSegment:n,showDisabled:i=!0,readOnly:l=!1,cardSize:s="normal"})=>{const[d,m]=O(t.segments),[u,p]=O(!1),[c,g]=O(!1);pt(()=>{m(t.segments)},[t]);const f=te((E,k)=>{m(D=>D.map(M=>M.code===E?{...M,content:k,currentLength:k.length}:M)),a&&a(E,k)},[a]),C=()=>{o&&o(d)},N=()=>{navigator.clipboard.writeText(t.fullMessage),g(!0),setTimeout(()=>g(!1),2e3)},S=i?d:d.filter(E=>E.enabled),v=d.filter(E=>E.enabled).length,_=d.filter(E=>!E.enabled).length,x=d.reduce((E,k)=>E+k.errors.length,0);return e("div",{className:"space-y-4",children:[e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:`
              px-3 py-1.5 rounded-lg font-bold text-sm
              ${t.type==="FWB"?"bg-purple-600 text-white":"bg-sky-600 text-white"}
            `,children:[t.type,"/",t.version.split("/")[1]]}),e("span",{className:"font-mono text-sm text-slate-600",children:t.awbNumber}),t.hawbNumber&&e("span",{className:"font-mono text-xs text-slate-400",children:["→ ",t.hawbNumber]})]}),e("div",{className:`flex items-center gap-1 text-xs ${t.isValid?"text-green-600":"text-red-600"}`,children:[t.isValid?e(ve,{size:14}):e(ie,{size:14}),t.isValid?"Válido":`${x} error${x!==1?"es":""}`]})]}),e("div",{className:"flex items-center gap-2",children:[e("div",{className:"text-xs text-slate-500 space-x-2",children:[e("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:[v," activos"]}),_>0&&e("span",{className:"bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full",children:[_," inactivos"]})]}),e("button",{onClick:()=>p(!u),className:"px-3 py-1.5 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-1",children:[u?e(Er,{size:12}):e(Xt,{size:12}),u?"Ocultar":"Ver mensaje"]}),e("button",{onClick:N,className:`
              px-3 py-1.5 text-xs rounded-lg flex items-center gap-1
              ${c?"bg-green-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}
            `,children:[e(Pe,{size:12}),c?"¡Copiado!":"Copiar todo"]})]})]}),r&&e("div",{className:"flex items-center gap-2 text-xs text-slate-500 bg-slate-50 rounded-lg p-2",children:[e(Ue,{size:12}),e("span",{children:["Política: ",e("strong",{children:r.name})," (",r.awbPrefix,")"]}),e("span",{className:"text-slate-300",children:"|"}),e("span",{children:["Versión: ",r.fwbVersion]}),e("span",{className:"text-slate-300",children:"|"}),e("span",{children:["SPH: ",r.defaultSphCodes.join(", ")]}),r.notes&&e(ce,{children:[e("span",{className:"text-slate-300",children:"|"}),e("span",{className:"italic",children:r.notes})]})]}),u&&e("div",{className:"bg-slate-900 rounded-lg p-4 overflow-x-auto",children:e("pre",{className:"font-mono text-xs text-green-400 whitespace-pre-wrap",children:t.fullMessage})}),e("div",{className:`
        grid gap-2
        ${s==="compact"?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6":""}
        ${s==="normal"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":""}
        ${s==="expanded"?"grid-cols-1 md:grid-cols-2":""}
      `,children:S.map(E=>e(Xn,{segment:E,onEdit:f,onToggle:n,readOnly:l,cardSize:s},`${E.code}-${E.order}`))}),!l&&o&&e("div",{className:"flex justify-end pt-2",children:e("button",{onClick:C,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:[e(Oa,{size:16}),"Regenerar mensaje"]})}),e("div",{className:"border-t border-slate-200 pt-4",children:[e("div",{className:"text-xs text-slate-500 mb-2 font-semibold",children:"Leyenda de segmentos:"}),e("div",{className:"flex flex-wrap gap-2 text-[10px]",children:[e("span",{className:"bg-purple-50 border border-purple-300 text-purple-700 px-2 py-0.5 rounded",children:"AWB/Carga"}),e("span",{className:"bg-sky-50 border border-sky-300 text-sky-700 px-2 py-0.5 rounded",children:"Vuelo/Ruta"}),e("span",{className:"bg-green-50 border border-green-300 text-green-700 px-2 py-0.5 rounded",children:"Partes"}),e("span",{className:"bg-amber-50 border border-amber-300 text-amber-700 px-2 py-0.5 rounded",children:"Cargos"}),e("span",{className:"bg-indigo-50 border border-indigo-300 text-indigo-700 px-2 py-0.5 rounded",children:"Mercancía"}),e("span",{className:"bg-fuchsia-50 border border-fuchsia-300 text-fuchsia-700 px-2 py-0.5 rounded",children:"Manejo/Seguridad"}),e("span",{className:"bg-slate-50 border-2 border-dashed border-slate-300 text-slate-400 px-2 py-0.5 rounded",children:"Deshabilitado"})]})]})]})},Yn={FWB:e(ht,{size:13}),FHL:e(ht,{size:13}),AWB:e(ge,{size:13}),MBI:e(ge,{size:13}),FLT:e(it,{size:13}),RTG:e(Kt,{size:13}),SHP:e(Ge,{size:13}),CNE:e(Ge,{size:13}),AGT:e(Rt,{size:13}),SSR:e(Ue,{size:13}),CVD:e(We,{size:13}),RTD:e(Yt,{size:13}),NG:e(bt,{size:13}),NH:e(bt,{size:13}),NV:e(Yt,{size:13}),NS:e(ge,{size:13}),HBS:e(ge,{size:13}),HTS:e(bt,{size:13}),OTH:e(We,{size:13}),PPD:e(We,{size:13}),COL:e(We,{size:13}),CER:e(Ye,{size:13}),ISU:e(jt,{size:13}),REF:e(Ae,{size:13}),SPH:e(Ye,{size:13}),OCI:e(Ye,{size:13}),NFY:e(Ge,{size:13}),FTR:e(ht,{size:13}),GLOBAL:e(La,{size:13})},Ha=({issue:t,compact:r=!1})=>{const[a,o]=O(!1),i={error:{icon:e($n,{size:14,className:"text-red-500 flex-shrink-0"}),bg:"bg-red-50",border:"border-red-200",text:"text-red-700",badge:"bg-red-100 text-red-700",label:"ERROR"},warning:{icon:e(ie,{size:14,className:"text-amber-500 flex-shrink-0"}),bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",badge:"bg-amber-100 text-amber-700",label:"ADVERTENCIA"},info:{icon:e(Ue,{size:14,className:"text-blue-500 flex-shrink-0"}),bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",badge:"bg-blue-100 text-blue-700",label:"INFO"}}[t.severity];return e("div",{className:`${i.bg} ${i.border} border rounded-md p-2 text-xs`,children:[e("div",{className:"flex items-start gap-2 cursor-pointer",onClick:()=>!r&&o(!a),children:[i.icon,e("div",{className:"flex-1 min-w-0",children:[e("div",{className:`${i.text} font-medium leading-tight`,children:t.message}),t.field&&e("span",{className:"text-slate-500 text-[10px]",children:["Campo: ",t.field]})]}),!r&&(t.rule||t.suggestion||t.expected||t.found)&&e("button",{className:"text-slate-400 hover:text-slate-600 flex-shrink-0",children:a?e(Le,{size:12}):e(Se,{size:12})})]}),a&&!r&&e("div",{className:"mt-2 pt-2 border-t border-white/50 space-y-1.5 pl-6",children:[t.rule&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-slate-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Regla:"}),e("span",{className:"text-slate-600 text-[10px] font-mono",children:t.rule})]}),t.found&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-red-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Tiene:"}),e("code",{className:"text-red-600 text-[10px] bg-red-100 px-1 rounded font-mono break-all",children:t.found})]}),t.expected&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-green-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Espera:"}),e("code",{className:"text-green-600 text-[10px] bg-green-100 px-1 rounded font-mono break-all",children:t.expected})]}),t.suggestion&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-blue-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Tip:"}),e("span",{className:"text-blue-600 text-[10px] italic",children:t.suggestion})]}),t.lineContent&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-slate-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Línea:"}),e("code",{className:"text-slate-600 text-[10px] bg-slate-100 px-1 rounded font-mono break-all",children:t.lineContent})]})]})]})},Kn=({result:t,compact:r,onSelect:a})=>{const[o,n]=O(!t.isValid),i=Yn[t.segment]||e(Ae,{size:13}),s=t.errorCount>0?{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",ringColor:"ring-red-400"}:t.warningCount>0?{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",ringColor:"ring-amber-400"}:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700",ringColor:"ring-green-400"};return e("div",{className:`
      rounded-lg border ${s.border} ${s.bg} 
      ${t.errorCount>0?"ring-1 "+s.ringColor:""} 
      transition-all duration-200
    `,children:[e("button",{type:"button",onClick:()=>{n(!o),a&&a()},className:"w-full p-2 flex items-center gap-2 hover:bg-black/5 transition-colors rounded-lg",children:[e("div",{className:s.text,children:i}),e("span",{className:`font-mono font-bold text-xs ${s.text}`,children:t.segment}),e("span",{className:"text-[10px] text-slate-500 truncate flex-1 text-left",children:t.segmentName}),e("div",{className:"flex items-center gap-1",children:[t.errorCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-red-100 text-red-700 rounded-full",children:[t.errorCount," err"]}),t.warningCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-amber-100 text-amber-700 rounded-full",children:[t.warningCount," warn"]}),t.isValid&&t.warningCount===0&&e(ve,{size:14,className:"text-green-500"})]}),o?e(Le,{size:14,className:"text-slate-400"}):e(Se,{size:14,className:"text-slate-400"})]}),o&&t.issues.length>0&&e("div",{className:"px-2 pb-2 space-y-1",children:t.issues.map((d,m)=>e(Ha,{issue:d,compact:r},m))}),o&&t.isValid&&t.warningCount===0&&e("div",{className:"px-3 pb-2 text-[10px] text-green-600 flex items-center gap-1",children:[e(ve,{size:12}),"Segmento válido - Sin errores ni advertencias"]})]})},Ba=({score:t,size:r="md"})=>{const a=()=>t>=90?"text-green-600":t>=70?"text-amber-600":"text-red-600";return e("div",{className:`${r==="sm"?"w-10 h-10 text-sm":"w-14 h-14 text-lg"} ${t>=90?"bg-green-100":t>=70?"bg-amber-100":"bg-red-100"} rounded-full flex items-center justify-center ${a()} font-bold`,children:t})},$a=({message:t,policy:r,defaultCollapsed:a=!1,compact:o=!1,onSegmentSelect:n,onValidationChange:i})=>{const[l,s]=O(!a),[d,m]=O("all"),[u,p]=O(!1),c=ke(()=>on(t,r),[t,r]);ke(()=>{i&&i({canSend:c.canSend,errorCount:c.totalErrors,warningCount:c.totalWarnings,score:c.score})},[c.canSend,c.totalErrors,c.totalWarnings,c.score]);const g=ke(()=>d==="all"&&!u?c.segmentResults:c.segmentResults.filter(v=>u?v.errorCount>0||v.warningCount>0:!0).map(v=>d==="all"?v:{...v,issues:v.issues.filter(_=>_.severity===d)}).filter(v=>v.issues.length>0||!u&&d==="all"),[c,d,u]),C=c.totalErrors>0?"red":c.totalWarnings>0?"amber":"green",S={red:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",headerBg:"bg-red-100",icon:e(Bn,{size:20,className:"text-red-500"})},amber:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",headerBg:"bg-amber-100",icon:e(ie,{size:20,className:"text-amber-500"})},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",headerBg:"bg-green-100",icon:e(ve,{size:20,className:"text-green-500"})}}[C];return e("div",{className:`${S.bg} ${S.border} border rounded-lg mb-4 overflow-hidden`,children:[e("button",{type:"button",onClick:()=>s(!l),className:`w-full p-3 flex items-center justify-between hover:bg-black/5 transition-colors ${S.headerBg}`,children:[e("div",{className:"flex items-center gap-3",children:[S.icon,e("div",{className:"flex flex-col items-start",children:[e("span",{className:`font-bold text-sm ${S.text}`,children:["Validación CARGO-IMP ",t.type,t.hawbNumber&&e("span",{className:"font-normal text-slate-500 ml-1 text-xs",children:["(HAWB: ",t.hawbNumber,")"]})]}),e("span",{className:"text-xs text-slate-500",children:c.summary})]})]}),e("div",{className:"flex items-center gap-2",children:[c.totalErrors>0&&e("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-red-500 text-white rounded-full",children:[c.totalErrors," error",c.totalErrors>1?"es":""]}),c.totalWarnings>0&&e("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-amber-500 text-white rounded-full",children:[c.totalWarnings," warn",c.totalWarnings>1?"s":""]}),e(Ba,{score:c.score,size:"sm"}),l?e(Le,{size:16,className:"text-slate-400"}):e(Se,{size:16,className:"text-slate-400"})]})]}),l&&e("div",{className:"p-3 space-y-3",children:[c.totalErrors>0&&e("div",{className:"bg-amber-100 border border-amber-300 rounded-lg p-3 flex items-center gap-3",children:[e(ie,{size:18,className:"text-amber-600 flex-shrink-0"}),e("div",{children:[e("p",{className:"text-sm font-bold text-amber-800",children:["⚠️ Mensaje con ",c.totalErrors," error(es) de validación"]}),e("p",{className:"text-xs text-amber-600 mt-0.5",children:"La aerolínea podría rechazar el mensaje. Revise cada segmento marcado en rojo. Al transmitir se le pedirá confirmación."})]})]}),c.totalErrors===0&&c.totalWarnings>0&&e("div",{className:"bg-amber-100 border border-amber-300 rounded-lg p-2.5 flex items-center gap-3",children:[e(ie,{size:16,className:"text-amber-600 flex-shrink-0"}),e("div",{children:[e("p",{className:"text-xs font-bold text-amber-800",children:"⚠️ Mensaje válido con advertencias"}),e("p",{className:"text-[10px] text-amber-600",children:["Puede enviarse, pero revise las ",c.totalWarnings," advertencia(s) para mejor calidad."]})]})]}),c.totalErrors===0&&c.totalWarnings===0&&e("div",{className:"bg-green-100 border border-green-300 rounded-lg p-2.5 flex items-center gap-3",children:[e(ve,{size:16,className:"text-green-600 flex-shrink-0"}),e("p",{className:"text-xs font-bold text-green-800",children:"✅ Mensaje válido. Listo para enviar."})]}),e("div",{className:"flex items-center gap-2 flex-wrap",children:[e("span",{className:"text-[10px] text-slate-500 uppercase font-semibold",children:"Filtrar:"}),["all","error","warning","info"].map(v=>e("button",{onClick:()=>m(v),className:`
                  px-2 py-0.5 text-[10px] rounded-full transition-colors
                  ${d===v?v==="error"?"bg-red-500 text-white":v==="warning"?"bg-amber-500 text-white":v==="info"?"bg-blue-500 text-white":"bg-slate-700 text-white":"bg-slate-200 text-slate-600 hover:bg-slate-300"}
                `,children:v==="all"?"Todos":v==="error"?`Errores (${c.totalErrors})`:v==="warning"?`Warnings (${c.totalWarnings})`:`Info (${c.totalInfo})`},v)),e("label",{className:"flex items-center gap-1 text-[10px] text-slate-500 ml-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:u,onChange:()=>p(!u),className:"rounded border-slate-300 text-purple-600 w-3 h-3"}),"Solo con problemas"]})]}),e("div",{className:"flex flex-wrap gap-1",children:c.segmentResults.map(v=>e("div",{className:`
                  px-1.5 py-0.5 rounded text-[9px] font-mono font-bold cursor-pointer
                  transition-colors hover:ring-1 hover:ring-purple-400
                  ${v.errorCount>0?"bg-red-200 text-red-800":v.warningCount>0?"bg-amber-200 text-amber-800":"bg-green-200 text-green-800"}
                `,title:`${v.segment}: ${v.errorCount} error(es), ${v.warningCount} warning(s)`,onClick:()=>n&&n(v.segment),children:[v.segment,v.errorCount>0&&` ×${v.errorCount}`]},v.segment))}),e("div",{className:"space-y-2",children:g.map(v=>e(Kn,{result:v,compact:o,onSelect:()=>n&&n(v.segment)},v.segment))}),c.allIssues.filter(v=>v.segment==="GLOBAL").length>0&&e("div",{className:"border-t border-slate-200 pt-2",children:[e("div",{className:"text-[10px] font-semibold text-slate-500 uppercase mb-1.5 flex items-center gap-1",children:[e(La,{size:12})," Validaciones Globales"]}),e("div",{className:"space-y-1",children:c.allIssues.filter(v=>v.segment==="GLOBAL").map((v,_)=>e(Ha,{issue:v,compact:o},`global-${_}`))})]}),e("div",{className:"border-t border-slate-200 pt-2 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[e("span",{children:["Segmentos analizados: ",e("strong",{children:c.segmentResults.length})]}),e("span",{children:["Líneas totales: ",e("strong",{children:t.fullMessage.split(`
`).length})]}),e("span",{children:["Caracteres: ",e("strong",{children:t.fullMessage.length})]})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-[10px] text-slate-500",children:"Calidad:"}),e(Ba,{score:c.score,size:"sm"})]})]})]})]})};function Zn(t){let r=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return r=r.replace(/&lt;\/([a-zA-Z:]+)&gt;/g,'<span class="xml-bracket">&lt;/</span><span class="xml-tag">$1</span><span class="xml-bracket">&gt;</span>').replace(/&lt;([a-zA-Z:]+)(\s+[^&]*?)&gt;/g,(a,o,n)=>{const i=n.replace(/([a-zA-Z:]+)="([^"]*)"/g,'<span class="xml-attr-name">$1</span>=<span class="xml-attr-value">"$2"</span>');return`<span class="xml-bracket">&lt;</span><span class="xml-tag">${o}</span>${i}<span class="xml-bracket">&gt;</span>`}).replace(/&lt;([a-zA-Z:]+)\s*\/&gt;/g,'<span class="xml-bracket">&lt;</span><span class="xml-tag">$1</span><span class="xml-bracket"> /&gt;</span>').replace(/&lt;([a-zA-Z:]+)&gt;/g,'<span class="xml-bracket">&lt;</span><span class="xml-tag">$1</span><span class="xml-bracket">&gt;</span>').replace(/&lt;\?xml([^?]*)\?&gt;/g,'<span class="xml-declaration">&lt;?xml$1?&gt;</span>'),r}const Ma=br(({xml:t,title:r,type:a,hawbNumber:o,isValid:n,errors:i,onCopy:l})=>{const[s,d]=O(!0),[m,u]=O(!1),[p,c]=O("formatted"),g=ke(()=>p==="raw"?t:Zn(t),[t,p]),f=async()=>{try{await navigator.clipboard.writeText(t),u(!0),l==null||l(t),setTimeout(()=>u(!1),2e3)}catch(v){console.error("Error copying XML:",v)}},C=a==="XFWB"?"from-blue-50 to-indigo-50 border-blue-200":"from-purple-50 to-pink-50 border-purple-200",N=a==="XFWB"?"bg-blue-600":"bg-purple-600",S=a==="XFWB"?ge:ot;return e("div",{className:`rounded-lg border overflow-hidden mb-4 bg-gradient-to-r ${C}`,children:[e("div",{className:`${N} px-4 py-2.5 flex items-center justify-between cursor-pointer`,onClick:()=>d(!s),children:[e("div",{className:"flex items-center gap-2 text-white",children:[e("button",{className:"p-0.5 hover:bg-white/20 rounded",children:s?e(Le,{size:16}):e(Se,{size:16})}),e(S,{size:16}),e("span",{className:"font-bold",children:r}),o&&e("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded",children:["HAWB: ",o]})]}),e("div",{className:"flex items-center gap-2",children:n?e("span",{className:"flex items-center gap-1 text-xs text-green-200",children:[e(ve,{size:12})," Válido"]}):e("span",{className:"flex items-center gap-1 text-xs text-red-200",children:[e(ie,{size:12})," Errores: ",i.length]})})]}),s&&e("div",{className:"p-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{className:"flex gap-1 bg-white rounded-lg p-1 shadow-sm",children:[e("button",{onClick:()=>c("formatted"),className:`px-3 py-1 text-xs rounded ${p==="formatted"?"bg-slate-800 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Formateado"}),e("button",{onClick:()=>c("raw"),className:`px-3 py-1 text-xs rounded ${p==="raw"?"bg-slate-800 text-white":"text-slate-600 hover:bg-slate-100"}`,children:"Raw"})]}),e("button",{onClick:f,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-white hover:bg-slate-50 rounded-lg border border-slate-200 transition-colors",children:[m?e(Ar,{size:12,className:"text-green-600"}):e(Pe,{size:12}),m?"Copiado!":"Copiar XML"]})]}),i.length>0&&e("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e("div",{className:"flex items-center gap-2 text-red-700 font-bold text-sm mb-1",children:[e(ie,{size:14})," Errores de validación"]}),e("ul",{className:"text-xs text-red-600 list-disc list-inside",children:i.map((v,_)=>e("li",{children:v},_))})]}),e("div",{className:"bg-slate-900 rounded-lg overflow-hidden",children:e("div",{className:"overflow-auto max-h-96 p-4",children:p==="formatted"?e("pre",{className:"text-xs font-mono leading-relaxed",dangerouslySetInnerHTML:{__html:g}}):e("pre",{className:"text-xs font-mono leading-relaxed text-green-400 whitespace-pre-wrap",children:t})})})]}),e("style",{children:`
        .xml-bracket { color: #9ca3af; }
        .xml-tag { color: #60a5fa; }
        .xml-attr-name { color: #a78bfa; }
        .xml-attr-value { color: #34d399; }
        .xml-declaration { color: #fbbf24; }
        .xml-comment { color: #6b7280; font-style: italic; }
      `})]})}),Qn=br(({bundle:t,onCopy:r})=>{const[a,o]=O("xfwb"),[n,i]=O(!1),l=t.xfzbs&&t.xfzbs.length>0,s=ke(()=>{let m=t.xfwb.xmlContent;return l&&t.xfzbs.forEach((u,p)=>{m+=`

<!-- ========== XFZB #${p+1}: ${u.hawbNumber} ========== -->

${u.xmlContent}`}),m},[t,l]),d=async()=>{try{await navigator.clipboard.writeText(s),i(!0),setTimeout(()=>i(!1),2e3)}catch(m){console.error("Error copying all XML:",m)}};return e("div",{className:"h-full flex flex-col",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("div",{className:"bg-slate-100 p-1 rounded-lg inline-flex items-center shadow-inner",children:[e("button",{onClick:()=>o("xfwb"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${a==="xfwb"?"bg-white text-blue-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(ge,{size:14}),"XFWB (Master)"]}),l&&e("button",{onClick:()=>o("xfzb"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${a==="xfzb"?"bg-white text-purple-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(ot,{size:14}),"XFZB (Houses: ",t.xfzbs.length,")"]})]}),e("button",{onClick:d,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors",children:[n?e(Ar,{size:14,className:"text-green-600"}):e(Pe,{size:14}),n?"Copiado!":"Copiar Todo"]})]}),e("div",{className:"mb-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(Ae,{size:16,className:"text-blue-600"}),e("span",{className:"font-bold text-blue-800",children:"Vista XML - IATA Cargo-XML 3.0"}),e("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded",children:a==="xfwb"?"XFWB (Waybill)":"XFZB (HouseWaybill)"})]}),e("p",{className:"text-xs text-blue-600",children:["Formato XML estándar IATA ONE Record / Cargo-XML para mensajes electrónicos de guía aérea.",a==="xfwb"?" XFWB contiene los datos del Master Air Waybill.":" XFZB contiene los datos de las House Waybills."]})]}),e("div",{className:"flex-1 overflow-y-auto",children:[a==="xfwb"&&t.xfwb&&e(Ma,{xml:t.xfwb.xmlContent,title:`XFWB - Master AWB ${t.xfwb.awbNumber}`,type:"XFWB",isValid:t.xfwb.isValid,errors:t.xfwb.errors,onCopy:m=>r==null?void 0:r(m,"XFWB")}),a==="xfzb"&&e(ce,{children:l?e(ce,{children:[e("div",{className:"mb-3 p-2 bg-purple-50 border border-purple-200 rounded-lg",children:e("span",{className:"text-sm font-bold text-purple-800",children:["📦 ",t.xfzbs.length," Mensaje(s) XFZB"]})}),t.xfzbs.map((m,u)=>e(Ma,{xml:m.xmlContent,title:`XFZB #${u+1}`,type:"XFZB",hawbNumber:m.hawbNumber,isValid:m.isValid,errors:m.errors,onCopy:p=>r==null?void 0:r(p,`XFZB-${m.hawbNumber}`)},u))]}):e("div",{className:"text-slate-400 italic p-4 text-center",children:"No hay houses en este envío. XFZB solo se genera para envíos consolidados."})})]})]})}),Jn=`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
             xmlns:ram="iata:datamodel:3" 
             xmlns:udt="urn:un:unece:uncefact:data:standard:UnqualifiedDataType:8" 
             xmlns:ccts="urn:un:unece:uncefact:documentation:standard:CoreComponentsTechnicalSpecification:2" 
             xmlns:rsm="iata:waybill:1" 
             xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
             xsi:schemaLocation="iata:waybill:1 Waybill_1.xsd"`,ei=`xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                  xmlns:ram="iata:datamodel:3" 
                  xmlns:udt="urn:un:unece:uncefact:data:standard:UnqualifiedDataType:8" 
                  xmlns:ccts="urn:un:unece:uncefact:documentation:standard:CoreComponentsTechnicalSpecification:2" 
                  xmlns:rsm="iata:housewaybill:1" 
                  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
                  xsi:schemaLocation="iata:housewaybill:1 HouseWaybill_1.xsd"`;function I(t){return t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):""}function Wa(t){return t.replace(/\s/g,"")}function ft(t){return(t?new Date(t):new Date).toISOString().replace("Z","").split(".")[0]}function Ua(){const t=new Date,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${r}${a}${o}${n}${i}${l}`}function xt(t){return{CO:"COLOMBIA",US:"UNITED STATES",EC:"ECUADOR",MX:"MEXICO",CA:"CANADA",NL:"NETHERLANDS",DE:"GERMANY",ES:"SPAIN",FR:"FRANCE",GB:"UNITED KINGDOM",IT:"ITALY",BE:"BELGIUM",CN:"CHINA",JP:"JAPAN",KR:"SOUTH KOREA",AU:"AUSTRALIA",BR:"BRAZIL",CL:"CHILE",PE:"PERU",AR:"ARGENTINA"}[t==null?void 0:t.toUpperCase()]||(t==null?void 0:t.toUpperCase())||""}function Jt(t){return t?{FL:"FLORIDA",CA:"CALIFORNIA",NY:"NEW YORK",TX:"TEXAS",IL:"ILLINOIS",GA:"GEORGIA",NC:"NORTH CAROLINA",NJ:"NEW JERSEY",OH:"OHIO",PA:"PENNSYLVANIA",MA:"MASSACHUSETTS",WA:"WASHINGTON",MD:"MARYLAND",VA:"VIRGINIA",KY:"KENTUCKY",TN:"TENNESSEE",AZ:"ARIZONA",CO:"COLORADO",OR:"OREGON",ON:"ONTARIO",BC:"BRITISH COLUMBIA",QC:"QUEBEC"}[t.toUpperCase()]||t.toUpperCase():""}function ti(t,r,a,o,n=8){const i=[],l=" ".repeat(n),s=" ".repeat(n+4),d=(r==null?void 0:r.taxId)||"",m=(t==null?void 0:t.taxId)||"";return d&&i.push(`${l}<ram:IncludedCustomsNote>
${s}<ram:CountryID>${o}</ram:CountryID>
${s}<ram:SubjectCode>CNE</ram:SubjectCode>
${s}<ram:ContentCode>T</ram:ContentCode>
${s}<ram:Content>${I(d.replace(/\s/g,""))}</ram:Content>
${l}</ram:IncludedCustomsNote>`),m&&i.push(`${l}<ram:IncludedCustomsNote>
${s}<ram:CountryID>${a}</ram:CountryID>
${s}<ram:SubjectCode>SHP</ram:SubjectCode>
${s}<ram:ContentCode>T</ram:ContentCode>
${s}<ram:Content>${I(m.replace(/\s/g,""))}</ram:Content>
${l}</ram:IncludedCustomsNote>`),i.length>0?`
`+i.join(`
`):""}function ri(t){if(!t||t.length===0)return"";const r=t[0],a=r.unit==="INCH"?"INH":"CMT";return`
                    <ram:LinearSpatialDimension>
                        <ram:WidthMeasure unitCode="${a}">${r.width}</ram:WidthMeasure>
                        <ram:LengthMeasure unitCode="${a}">${r.length}</ram:LengthMeasure>
                        <ram:HeightMeasure unitCode="${a}">${r.height}</ram:HeightMeasure>
                    </ram:LinearSpatialDimension>`}function ai(t){if(!t||t.length===0)return"";const r=t[0],a=r.unit==="INCH"?"INH":"CMT";return`
                    <ram:LinearSpatialDimension>
                        <ram:WidthMeasure unitCode="${a}">${r.width}</ram:WidthMeasure>
                        <ram:LengthMeasure unitCode="${a}">${r.length}</ram:LengthMeasure>
                        <ram:HeightMeasure unitCode="${a}">${r.height}</ram:HeightMeasure>
                    </ram:LinearSpatialDimension>`}function oi(t){var a,o,n,i,l,s,d,m,u,p,c,g;const r=[];return t.awbNumber?/^\d{3}-\d{8}$/.test(t.awbNumber.replace(/\s/g,""))||r.push({field:"awbNumber",message:"Formato AWB debe ser XXX-XXXXXXXX",severity:"error"}):r.push({field:"awbNumber",message:"Número de AWB requerido",severity:"error"}),(!t.origin||t.origin.length!==3)&&r.push({field:"origin",message:"Origen (código IATA 3 letras) requerido",severity:"error"}),(!t.destination||t.destination.length!==3)&&r.push({field:"destination",message:"Destino (código IATA 3 letras) requerido",severity:"error"}),(!t.weight||t.weight<=0)&&r.push({field:"weight",message:"Peso debe ser mayor a 0",severity:"error"}),(!t.pieces||t.pieces<=0)&&r.push({field:"pieces",message:"Piezas debe ser mayor a 0",severity:"error"}),(a=t.shipper)!=null&&a.name||r.push({field:"shipper.name",message:"Nombre del shipper requerido",severity:"error"}),(n=(o=t.shipper)==null?void 0:o.address)!=null&&n.place||r.push({field:"shipper.address.place",message:"Ciudad del shipper requerida",severity:"error"}),(l=(i=t.shipper)==null?void 0:i.address)!=null&&l.countryCode||r.push({field:"shipper.address.countryCode",message:"País del shipper requerido",severity:"error"}),(s=t.consignee)!=null&&s.name||r.push({field:"consignee.name",message:"Nombre del consignee requerido",severity:"error"}),(m=(d=t.consignee)==null?void 0:d.address)!=null&&m.place||r.push({field:"consignee.address.place",message:"Ciudad del consignee requerida",severity:"error"}),(p=(u=t.consignee)==null?void 0:u.address)!=null&&p.countryCode||r.push({field:"consignee.address.countryCode",message:"País del consignee requerido",severity:"error"}),(c=t.agent)!=null&&c.name||r.push({field:"agent.name",message:"Nombre del agente recomendado",severity:"warning"}),(g=t.agent)!=null&&g.iataCode||r.push({field:"agent.iataCode",message:"Código IATA del agente recomendado",severity:"warning"}),!t.flights||t.flights.length===0?r.push({field:"flights",message:"Al menos un vuelo recomendado para XFWB",severity:"warning"}):t.flights.forEach((f,C)=>{f.flightNumber||r.push({field:`flights[${C}].flightNumber`,message:"Número de vuelo requerido",severity:"warning"}),f.carrierCode||r.push({field:`flights[${C}].carrierCode`,message:"Código de aerolínea requerido",severity:"warning"})}),t.hasHouses&&(!t.houseBills||t.houseBills.length===0)&&r.push({field:"houseBills",message:"AWB consolidado debe tener al menos 1 house",severity:"error"}),r}function ni(t,r){const a=[];return t.hawbNumber||a.push({field:"hawbNumber",message:"Número de HAWB requerido",severity:"error"}),(!t.weight||t.weight<=0)&&a.push({field:"weight",message:"Peso del house debe ser mayor a 0",severity:"error"}),(!t.pieces||t.pieces<=0)&&a.push({field:"pieces",message:"Piezas del house debe ser mayor a 0",severity:"error"}),(t.shipper||{name:t.shipperName}).name||a.push({field:"shipper.name",message:"Nombre del shipper del house requerido",severity:"error"}),(t.consignee||{name:t.consigneeName}).name||a.push({field:"consignee.name",message:"Nombre del consignee del house requerido",severity:"error"}),r.awbNumber||a.push({field:"awbNumber",message:"AWB master requerido para referencia en XFZB",severity:"error"}),a}function ii(t){var i,l,s,d,m,u,p,c,g;const r=[],a=oi(t),o=a.filter(f=>f.severity==="error");if(o.length>0)return{type:"XFWB",awbNumber:t.awbNumber||"",xmlContent:"",isValid:!1,errors:o.map(f=>`${f.field}: ${f.message}`),timestamp:new Date().toISOString()};a.filter(f=>f.severity==="warning").forEach(f=>{console.warn(`[XFWB Warning] ${f.field}: ${f.message}`)});const n=new Date().toISOString();try{const f=Wa(t.awbNumber),C=Ua(),N=ft(),S=ft(t.executionDate),v=t.weight||0,_=t.pieces||0,x=t.currency||"USD";let E=0,k=0,D=0;t.rates&&t.rates.length>0&&(E=t.rates.reduce((Z,we)=>Z+(we.total||0),0),k=t.rates[0].chargeableWeight||v,D=t.rates[0].rateOrCharge||0);let M=0,V=0;const A=[];t.otherCharges&&t.otherCharges.forEach(Z=>{const we=Z.paymentMethod==="Prepaid",he=Z.entitlement==="DueAgent"?"A":"C",R=Ci(Z.code);Z.entitlement==="DueAgent"?M+=Z.amount:V+=Z.amount,A.push(`
        <ram:ApplicableLogisticsAllowanceCharge>
            <ram:ID>${R}</ram:ID>
            <ram:PrepaidIndicator>${we}</ram:PrepaidIndicator>
            <ram:PartyTypeCode>${he}</ram:PartyTypeCode>
            <ram:ActualAmount currencyID="${x}">${Z.amount.toFixed(2)}</ram:ActualAmount>
        </ram:ApplicableLogisticsAllowanceCharge>`)});const X=E+M+V,Ce=(t.specialHandlingCodes||["EAP","PER"]).map(Z=>`        <ram:HandlingSPHInstructions>
            <ram:DescriptionCode>${Z}</ram:DescriptionCode>
        </ram:HandlingSPHInstructions>`).join(`
`),le=vi(t),re=le.length>0?`
`+le.map(Z=>`                <ram:TypeCode>${Z}</ram:TypeCode>`).join(`
`):"",Y=hi(t),Fe=fi(t),me=I(Ga(t)),Re=t.hasHouses?"741":"740",Ve=t.hasHouses?"C":"M",ze=((i=t.houseBills)==null?void 0:i.length)||0,Te=`<?xml version="1.0" encoding="UTF-8"?>
<rsm:Waybill ${Jn}>
    <rsm:MessageHeaderDocument>
        <ram:ID>${f}</ram:ID>
        <ram:Name>${t.hasHouses?"Master Air Waybill":"Air Waybill"}</ram:Name>
        <ram:TypeCode>${Re}</ram:TypeCode>
        <ram:IssueDateTime>${N}</ram:IssueDateTime>
        <ram:PurposeCode>Creation</ram:PurposeCode>
        <ram:VersionID>3.00</ram:VersionID>
        <ram:ConversationID>${C}</ram:ConversationID>
        <ram:SenderParty>
            <ram:PrimaryID schemeID="C">${I(((l=t.routing)==null?void 0:l.senderAddress)||"TDVAGT03OPERFLOR/BOG1")}</ram:PrimaryID>
        </ram:SenderParty>
        <ram:RecipientParty>
            <ram:PrimaryID schemeID="C">${I(((s=t.routing)==null?void 0:s.recipientAddress)||"TDVAIR08DHV")}</ram:PrimaryID>
        </ram:RecipientParty>
    </rsm:MessageHeaderDocument>
    <rsm:BusinessHeaderDocument>
        <ram:ID>${f}</ram:ID>
        <ram:IncludedHeaderNote>
            <ram:ContentCode>${Ve}</ram:ContentCode>
            <ram:Content>${me}</ram:Content>
        </ram:IncludedHeaderNote>
        <ram:SignatoryConsignorAuthentication>
            <ram:Signatory>${I(((d=t.agent)==null?void 0:d.name)||((m=t.shipper)==null?void 0:m.name)||"AGENT")}</ram:Signatory>
        </ram:SignatoryConsignorAuthentication>
        <ram:SignatoryCarrierAuthentication>
            <ram:ActualDateTime>${S}</ram:ActualDateTime>
            <ram:Signatory>${I(t.signature||"OPERATOR")}</ram:Signatory>
            <ram:IssueAuthenticationLocation>
                <ram:Name>${t.origin}</ram:Name>
            </ram:IssueAuthenticationLocation>
        </ram:SignatoryCarrierAuthentication>
    </rsm:BusinessHeaderDocument>
    <rsm:MasterConsignment>
        <ram:NilCarriageValueIndicator>true</ram:NilCarriageValueIndicator>
        <ram:NilCustomsValueIndicator>true</ram:NilCustomsValueIndicator>
        <ram:NilInsuranceValueIndicator>true</ram:NilInsuranceValueIndicator>
        <ram:TotalChargePrepaidIndicator>${t.paymentMethod==="Prepaid"}</ram:TotalChargePrepaidIndicator>
        <ram:TotalDisbursementPrepaidIndicator>${t.paymentMethod==="Prepaid"}</ram:TotalDisbursementPrepaidIndicator>
        <ram:IncludedTareGrossWeightMeasure unitCode="KGM">${v}</ram:IncludedTareGrossWeightMeasure>${t.volume?`
        <ram:GrossVolumeMeasure unitCode="MTQ">${t.volume.toFixed(2)}</ram:GrossVolumeMeasure>`:""}
        <ram:TotalPieceQuantity>${_}</ram:TotalPieceQuantity>
        ${ci(t.shipper)}
        ${di(t.consignee)}
        ${mi(t.agent)}
        <ram:OriginLocation>
            <ram:ID>${t.origin}</ram:ID>
        </ram:OriginLocation>
        <ram:FinalDestinationLocation>
            <ram:ID>${t.destination}</ram:ID>
        </ram:FinalDestinationLocation>
${Y}
${Ce}${Fe}
        <ram:ApplicableOriginCurrencyExchange>
            <ram:SourceCurrencyCode>${x}</ram:SourceCurrencyCode>
        </ram:ApplicableOriginCurrencyExchange>
        <ram:ApplicableLogisticsServiceCharge>
            <ram:TransportPaymentMethodCode>${t.paymentMethod==="Prepaid"?"PP":"CC"}</ram:TransportPaymentMethodCode>
            <ram:ServiceTypeCode>A</ram:ServiceTypeCode>
        </ram:ApplicableLogisticsServiceCharge>${A.join("")}
        <ram:ApplicableRating>
            <ram:TypeCode>A</ram:TypeCode>
            <ram:TotalChargeAmount>${E.toFixed(2)}</ram:TotalChargeAmount>
            <ram:IncludedMasterConsignmentItem>
                <ram:SequenceNumeric>1</ram:SequenceNumeric>${re}
                <ram:GrossWeightMeasure unitCode="KGM">${v}</ram:GrossWeightMeasure>${t.volume?`
                <ram:GrossVolumeMeasure unitCode="MTQ">${t.volume.toFixed(2)}</ram:GrossVolumeMeasure>`:""}
                <ram:PieceQuantity>${_}</ram:PieceQuantity>
                <ram:NatureIdentificationTransportCargo>
                    <ram:Identification>${me}</ram:Identification>
                </ram:NatureIdentificationTransportCargo>
                <ram:OriginCountry>
                    <ram:ID>${((p=(u=t.shipper)==null?void 0:u.address)==null?void 0:p.countryCode)||"CO"}</ram:ID>
                </ram:OriginCountry>
                <ram:TransportLogisticsPackage>
                    <ram:ItemQuantity>${_}</ram:ItemQuantity>
                    <ram:GrossWeightMeasure unitCode="KGM">${v}</ram:GrossWeightMeasure>${ri(t.dimensions)}
                </ram:TransportLogisticsPackage>
                <ram:ApplicableFreightRateServiceCharge>
                    <ram:CategoryCode>${wi((g=(c=t.rates)==null?void 0:c[0])==null?void 0:g.rateClassCode)}</ram:CategoryCode>
                    <ram:CommodityItemID>${t.commodityCode||"1421"}</ram:CommodityItemID>
                    <ram:ChargeableWeightMeasure unitCode="KGM">${k}</ram:ChargeableWeightMeasure>
                    <ram:AppliedRate>${D.toFixed(2)}</ram:AppliedRate>
                    <ram:AppliedAmount currencyID="${x}">${E.toFixed(2)}</ram:AppliedAmount>
                </ram:ApplicableFreightRateServiceCharge>
            </ram:IncludedMasterConsignmentItem>
        </ram:ApplicableRating>
        <ram:ApplicableTotalRating>
            <ram:TypeCode>A</ram:TypeCode>
            <ram:ApplicablePrepaidCollectMonetarySummation>
                <ram:PrepaidIndicator>${t.paymentMethod==="Prepaid"}</ram:PrepaidIndicator>
                <ram:WeightChargeTotalAmount currencyID="${x}">${E.toFixed(2)}</ram:WeightChargeTotalAmount>
                <ram:AgentTotalDuePayableAmount currencyID="${x}">${M.toFixed(2)}</ram:AgentTotalDuePayableAmount>
                <ram:CarrierTotalDuePayableAmount currencyID="${x}">${V.toFixed(2)}</ram:CarrierTotalDuePayableAmount>
                <ram:GrandTotalAmount currencyID="${x}">${X.toFixed(2)}</ram:GrandTotalAmount>
            </ram:ApplicablePrepaidCollectMonetarySummation>
        </ram:ApplicableTotalRating>
    </rsm:MasterConsignment>
</rsm:Waybill>`;return{type:"XFWB",awbNumber:f,xmlContent:Te,isValid:r.length===0,errors:r,timestamp:n}}catch(f){return r.push(`Error generando XFWB: ${f.message}`),{type:"XFWB",awbNumber:t.awbNumber,xmlContent:"",isValid:!1,errors:r,timestamp:n}}}function si(t,r){var l,s,d,m,u,p,c,g,f,C;const a=[],o=new Date().toISOString(),i=ni(r,t).filter(N=>N.severity==="error");if(i.length>0)return{type:"XFZB",awbNumber:t.awbNumber||"",hawbNumber:r.hawbNumber||"",xmlContent:"",isValid:!1,errors:i.map(N=>`${N.field}: ${N.message}`),timestamp:o};try{const N=Wa(t.awbNumber),S=r.hawbNumber,v=`${S}_${N}`,_=Ua(),x=ft(),E=ft(t.executionDate),k=t.currency||"USD",D=r.weight||0,M=r.pieces||0,V=r.htsCodes||[],A=V.length>0?`
`+V.map(me=>`                <ram:TypeCode>${me}</ram:TypeCode>`).join(`
`):"",se=(t.specialHandlingCodes||["EAP","PER"]).map(me=>`            <ram:HandlingSPHInstructions>
                <ram:DescriptionCode>${me}</ram:DescriptionCode>
            </ram:HandlingSPHInstructions>`).join(`
`),Ce=bi(t),le=I(r.natureOfGoods||Ga(t)),re=r.shipper||{name:r.shipperName,address:(l=t.shipper)==null?void 0:l.address},Y=r.consignee||{name:r.consigneeName,address:(s=t.consignee)==null?void 0:s.address},Fe=`<?xml version="1.0" encoding="UTF-8"?>
<rsm:HouseWaybill ${ei}>
    <rsm:MessageHeaderDocument>
        <ram:ID>${I(v)}</ram:ID>
        <ram:Name>House Waybill</ram:Name>
        <ram:TypeCode>703</ram:TypeCode>
        <ram:IssueDateTime>${x}</ram:IssueDateTime>
        <ram:PurposeCode>Creation</ram:PurposeCode>
        <ram:VersionID>3.00</ram:VersionID>
        <ram:ConversationID>${_}</ram:ConversationID>
        <ram:SenderParty>
            <ram:PrimaryID schemeID="C">${I(((d=t.routing)==null?void 0:d.senderAddress)||"TDVAGT03OPERFLOR/BOG1")}</ram:PrimaryID>
        </ram:SenderParty>
        <ram:RecipientParty>
            <ram:PrimaryID schemeID="C">${I(((m=t.routing)==null?void 0:m.recipientAddress)||"TDVAIR08DHV")}</ram:PrimaryID>
        </ram:RecipientParty>
    </rsm:MessageHeaderDocument>
    <rsm:BusinessHeaderDocument>
        <ram:ID>${I(S)}</ram:ID>
        <ram:SignatoryConsignorAuthentication>
            <ram:Signatory>${I(((u=t.agent)==null?void 0:u.name)||"AGENT")}</ram:Signatory>
        </ram:SignatoryConsignorAuthentication>
        <ram:SignatoryCarrierAuthentication>
            <ram:ActualDateTime>${E}</ram:ActualDateTime>
            <ram:Signatory>${I(t.signature||"OPERATOR")}</ram:Signatory>
            <ram:IssueAuthenticationLocation>
                <ram:Name>${t.origin}</ram:Name>
            </ram:IssueAuthenticationLocation>
        </ram:SignatoryCarrierAuthentication>
    </rsm:BusinessHeaderDocument>
    <rsm:MasterConsignment>
        <ram:IncludedTareGrossWeightMeasure unitCode="KGM">${t.weight}</ram:IncludedTareGrossWeightMeasure>
        <ram:TotalPieceQuantity>${t.pieces}</ram:TotalPieceQuantity>
        <ram:TransportContractDocument>
            <ram:ID>${N}</ram:ID>
        </ram:TransportContractDocument>
        <ram:OriginLocation>
            <ram:ID>${t.origin}</ram:ID>
        </ram:OriginLocation>
        <ram:FinalDestinationLocation>
            <ram:ID>${t.destination}</ram:ID>
        </ram:FinalDestinationLocation>
        <ram:IncludedHouseConsignment>
            <ram:NilCarriageValueIndicator>true</ram:NilCarriageValueIndicator>
            <ram:NilCustomsValueIndicator>true</ram:NilCustomsValueIndicator>
            <ram:NilInsuranceValueIndicator>true</ram:NilInsuranceValueIndicator>
            <ram:TotalChargePrepaidIndicator>${t.paymentMethod==="Prepaid"}</ram:TotalChargePrepaidIndicator>
            <ram:TotalDisbursementPrepaidIndicator>${t.paymentMethod==="Prepaid"}</ram:TotalDisbursementPrepaidIndicator>
            <ram:IncludedTareGrossWeightMeasure unitCode="KGM">${D}</ram:IncludedTareGrossWeightMeasure>
            <ram:TotalPieceQuantity>${M}</ram:TotalPieceQuantity>
            <ram:SummaryDescription>${le}</ram:SummaryDescription>
            ${pi(re)}
            ${ui(Y)}
            ${gi(t.agent)}
            <ram:OriginLocation>
                <ram:ID>${r.origin||t.origin}</ram:ID>
            </ram:OriginLocation>
            <ram:FinalDestinationLocation>
                <ram:ID>${r.destination||t.destination}</ram:ID>
            </ram:FinalDestinationLocation>
${Ce}
${se}${ti(re,Y,((p=re==null?void 0:re.address)==null?void 0:p.countryCode)||"CO",((c=Y==null?void 0:Y.address)==null?void 0:c.countryCode)||"US",12)}${xi(r,t)}
            <ram:AssociatedReferenceDocument>
                <ram:ID>${N}</ram:ID>
                <ram:TypeCode>741</ram:TypeCode>
                <ram:Name>Master Air Waybill</ram:Name>
            </ram:AssociatedReferenceDocument>
            <ram:ApplicableOriginCurrencyExchange>
                <ram:SourceCurrencyCode>${k}</ram:SourceCurrencyCode>
            </ram:ApplicableOriginCurrencyExchange>
            <ram:IncludedHouseConsignmentItem>
                <ram:SequenceNumeric>1</ram:SequenceNumeric>${A}
                <ram:GrossWeightMeasure unitCode="KGM">${D}</ram:GrossWeightMeasure>${r.volume?`
                <ram:GrossVolumeMeasure unitCode="MTQ">${r.volume.toFixed(3)}</ram:GrossVolumeMeasure>`:""}
                <ram:PieceQuantity>${M}</ram:PieceQuantity>
                <ram:NatureIdentificationTransportCargo>
                    <ram:Identification>${le}</ram:Identification>
                </ram:NatureIdentificationTransportCargo>
                <ram:OriginCountry>
                    <ram:ID>${((g=re==null?void 0:re.address)==null?void 0:g.countryCode)||((C=(f=t.shipper)==null?void 0:f.address)==null?void 0:C.countryCode)||"CO"}</ram:ID>
                </ram:OriginCountry>
                <ram:TransportLogisticsPackage>
                    <ram:ItemQuantity>${M}</ram:ItemQuantity>
                    <ram:GrossWeightMeasure unitCode="KGM">${D}</ram:GrossWeightMeasure>${ai(r.dimensions)}
                </ram:TransportLogisticsPackage>
                <ram:ApplicableFreightRateServiceCharge>
                    <ram:CategoryCode>K</ram:CategoryCode>
                    <ram:CommodityItemID>${t.commodityCode||"1421"}</ram:CommodityItemID>
                    <ram:ChargeableWeightMeasure unitCode="KGM">${r.chargeableWeight||D}</ram:ChargeableWeightMeasure>${r.totalCharge?`
                    <ram:AppliedAmount currencyID="${k}">${r.totalCharge.toFixed(2)}</ram:AppliedAmount>`:""}
                </ram:ApplicableFreightRateServiceCharge>
            </ram:IncludedHouseConsignmentItem>
        </ram:IncludedHouseConsignment>
    </rsm:MasterConsignment>
</rsm:HouseWaybill>`;return{type:"XFZB",awbNumber:N,hawbNumber:S,xmlContent:Fe,isValid:a.length===0,errors:a,timestamp:o}}catch(N){return a.push(`Error generando XFZB: ${N.message}`),{type:"XFZB",awbNumber:t.awbNumber,hawbNumber:r.hawbNumber,xmlContent:"",isValid:!1,errors:a,timestamp:o}}}function li(t){const r=ii(t),a=[];return t.hasHouses&&t.houseBills&&t.houseBills.length>0&&t.houseBills.forEach(o=>{a.push(si(t,o))}),{xfwb:r,xfzbs:a}}function ci(t){var r,a,o,n,i,l,s;return t?`<ram:ConsignorParty>
            <ram:Name>${I(t.name)}</ram:Name>
            <ram:PostalStructuredAddress>
                <ram:PostcodeCode>${I(((r=t.address)==null?void 0:r.postalCode)||"")}</ram:PostcodeCode>
                <ram:StreetName>${I(((a=t.address)==null?void 0:a.street)||"")}</ram:StreetName>
                <ram:CityName>${I(((o=t.address)==null?void 0:o.place)||"")}</ram:CityName>
                <ram:CountryID>${((n=t.address)==null?void 0:n.countryCode)||"CO"}</ram:CountryID>
                <ram:CountryName>${xt(((i=t.address)==null?void 0:i.countryCode)||"CO")}</ram:CountryName>
            </ram:PostalStructuredAddress>${(l=t.contact)!=null&&l.number||t.email?`
            <ram:DefinedTradeContact>${(s=t.contact)!=null&&s.number?`
                <ram:DirectTelephoneCommunication>
                    <ram:CompleteNumber>${I(t.contact.number)}</ram:CompleteNumber>
                </ram:DirectTelephoneCommunication>`:""}${t.email?`
                <ram:URIEmailCommunication>
                    <ram:URIID>${I(t.email)}</ram:URIID>
                </ram:URIEmailCommunication>`:""}
            </ram:DefinedTradeContact>`:""}
        </ram:ConsignorParty>`:""}function di(t){var a,o,n,i,l,s,d,m;if(!t)return"";const r=(a=t.address)==null?void 0:a.state;return`<ram:ConsigneeParty>
            <ram:Name>${I(t.name)}</ram:Name>
            <ram:PostalStructuredAddress>
                <ram:PostcodeCode>${I(((o=t.address)==null?void 0:o.postalCode)||"")}</ram:PostcodeCode>
                <ram:StreetName>${I(((n=t.address)==null?void 0:n.street)||"")}</ram:StreetName>
                <ram:CityName>${I(((i=t.address)==null?void 0:i.place)||"")}</ram:CityName>
                <ram:CountryID>${((l=t.address)==null?void 0:l.countryCode)||"US"}</ram:CountryID>
                <ram:CountryName>${xt(((s=t.address)==null?void 0:s.countryCode)||"US")}</ram:CountryName>${r?`
                <ram:CountrySubDivisionName>${Jt(r)}</ram:CountrySubDivisionName>`:""}
            </ram:PostalStructuredAddress>${(d=t.contact)!=null&&d.number||t.email?`
            <ram:DefinedTradeContact>${(m=t.contact)!=null&&m.number?`
                <ram:DirectTelephoneCommunication>
                    <ram:CompleteNumber>${I(t.contact.number)}</ram:CompleteNumber>
                </ram:DirectTelephoneCommunication>`:""}${t.email?`
                <ram:URIEmailCommunication>
                    <ram:URIID>${I(t.email)}</ram:URIID>
                </ram:URIEmailCommunication>`:""}
            </ram:DefinedTradeContact>`:""}
        </ram:ConsigneeParty>`}function mi(t){return t?`<ram:FreightForwarderParty>
            <ram:Name>${I(t.name)}</ram:Name>
            <ram:CargoAgentID>${I(t.iataCode)}</ram:CargoAgentID>
            <ram:FreightForwarderAddress>
                <ram:CityName>${I(t.place)}</ram:CityName>
            </ram:FreightForwarderAddress>${t.cassCode?`
            <ram:SpecifiedCargoAgentLocation>
                <ram:ID>${I(t.cassCode)}</ram:ID>
            </ram:SpecifiedCargoAgentLocation>`:""}
        </ram:FreightForwarderParty>`:""}function pi(t){var o,n;if(!t)return"";const r=t.name||t.shipperName||"",a=t.address||{};return`<ram:ConsignorParty>
                <ram:Name>${I(r)}</ram:Name>
                <ram:PostalStructuredAddress>${a.postalCode?`
                    <ram:PostcodeCode>${I(a.postalCode)}</ram:PostcodeCode>`:""}
                    <ram:StreetName>${I(a.street||"")}</ram:StreetName>
                    <ram:CityName>${I(a.place||"")}</ram:CityName>
                    <ram:CountryID>${a.countryCode||"CO"}</ram:CountryID>
                    <ram:CountryName>${xt(a.countryCode||"CO")}</ram:CountryName>
                </ram:PostalStructuredAddress>${(o=t.contact)!=null&&o.number||t.email?`
                <ram:DefinedTradeContact>${(n=t.contact)!=null&&n.number?`
                    <ram:DirectTelephoneCommunication>
                        <ram:CompleteNumber>${I(t.contact.number)}</ram:CompleteNumber>
                    </ram:DirectTelephoneCommunication>`:""}${t.email?`
                    <ram:URIEmailCommunication>
                        <ram:URIID>${I(t.email)}</ram:URIID>
                    </ram:URIEmailCommunication>`:""}
                </ram:DefinedTradeContact>`:""}
            </ram:ConsignorParty>`}function ui(t){var n,i;if(!t)return"";const r=t.name||t.consigneeName||"",a=t.address||{},o=a.state;return`<ram:ConsigneeParty>
                <ram:Name>${I(r)}</ram:Name>
                <ram:PostalStructuredAddress>${a.postalCode?`
                    <ram:PostcodeCode>${I(a.postalCode)}</ram:PostcodeCode>`:""}
                    <ram:StreetName>${I(a.street||"")}</ram:StreetName>
                    <ram:CityName>${I(a.place||"")}</ram:CityName>
                    <ram:CountryID>${a.countryCode||"US"}</ram:CountryID>
                    <ram:CountryName>${xt(a.countryCode||"US")}</ram:CountryName>${o?`
                    <ram:CountrySubDivisionName>${Jt(o)}</ram:CountrySubDivisionName>`:""}
                </ram:PostalStructuredAddress>${(n=t.contact)!=null&&n.number||t.email?`
                <ram:DefinedTradeContact>${(i=t.contact)!=null&&i.number?`
                    <ram:DirectTelephoneCommunication>
                        <ram:CompleteNumber>${I(t.contact.number)}</ram:CompleteNumber>
                    </ram:DirectTelephoneCommunication>`:""}${t.email?`
                    <ram:URIEmailCommunication>
                        <ram:URIID>${I(t.email)}</ram:URIID>
                    </ram:URIEmailCommunication>`:""}
                </ram:DefinedTradeContact>`:""}
            </ram:ConsigneeParty>`}function gi(t){return t?`<ram:FreightForwarderParty>
                <ram:Name>${I(t.name)}</ram:Name>
                <ram:PostalStructuredAddress>
                    <ram:CityName>${I(t.place)}</ram:CityName>
                    <ram:CountryID>CO</ram:CountryID>
                </ram:PostalStructuredAddress>
            </ram:FreightForwarderParty>`:""}function hi(t){return!t.flights||t.flights.length===0?"":t.flights.map((r,a)=>{const o=ft(r.date);return`        <ram:SpecifiedLogisticsTransportMovement>
            <ram:StageCode>Main-Carriage</ram:StageCode>
            <ram:ModeCode>4</ram:ModeCode>
            <ram:Mode>AIR TRANSPORT</ram:Mode>
            <ram:ID>${I(r.flightNumber)}</ram:ID>
            <ram:SequenceNumeric>${a+1}</ram:SequenceNumeric>
            <ram:UsedLogisticsTransportMeans>
                <ram:Name>${I(r.carrierCode)}</ram:Name>
            </ram:UsedLogisticsTransportMeans>
            <ram:ArrivalEvent>
                <ram:OccurrenceArrivalLocation>
                    <ram:ID>${r.destination}</ram:ID>
                    <ram:TypeCode>Airport</ram:TypeCode>
                </ram:OccurrenceArrivalLocation>
            </ram:ArrivalEvent>
            <ram:DepartureEvent>
                <ram:ScheduledOccurrenceDateTime>${o}</ram:ScheduledOccurrenceDateTime>
                <ram:OccurrenceDepartureLocation>
                    <ram:ID>${r.origin}</ram:ID>
                    <ram:TypeCode>Airport</ram:TypeCode>
                </ram:OccurrenceDepartureLocation>
            </ram:DepartureEvent>
        </ram:SpecifiedLogisticsTransportMovement>`}).join(`
`)}function bi(t){return!t.flights||t.flights.length===0?"":t.flights.map((r,a)=>{const o=ft(r.date);return`            <ram:SpecifiedLogisticsTransportMovement>
                <ram:StageCode>Main-Carriage</ram:StageCode>
                <ram:ModeCode>4</ram:ModeCode>
                <ram:Mode>AIR TRANSPORT</ram:Mode>
                <ram:ID>${I(r.flightNumber)}</ram:ID>
                <ram:SequenceNumeric>${a+1}</ram:SequenceNumeric>
                <ram:UsedLogisticsTransportMeans>
                    <ram:Name>${I(r.carrierCode)}</ram:Name>
                </ram:UsedLogisticsTransportMeans>
                <ram:ArrivalEvent>
                    <ram:OccurrenceArrivalLocation>
                        <ram:ID>${r.destination}</ram:ID>
                    </ram:OccurrenceArrivalLocation>
                </ram:ArrivalEvent>
                <ram:DepartureEvent>
                    <ram:ScheduledOccurrenceDateTime>${o}</ram:ScheduledOccurrenceDateTime>
                    <ram:OccurrenceDepartureLocation>
                        <ram:ID>${r.origin}</ram:ID>
                    </ram:OccurrenceDepartureLocation>
                </ram:DepartureEvent>
            </ram:SpecifiedLogisticsTransportMovement>`}).join(`
`)}function fi(t){var o,n;const r=[],a=t.alsoNotify;if(a!=null&&a.name){r.push(`        <ram:IncludedAccountingNote>
            <ram:ContentCode>GEN</ram:ContentCode>
            <ram:Content>NOTIFY TO: ${I(a.name)}</ram:Content>
        </ram:IncludedAccountingNote>`);const i=a.address;if(i!=null&&i.street||i!=null&&i.postalCode||(o=a.contact)!=null&&o.number){const l=[];i!=null&&i.street&&l.push(i.street),i!=null&&i.postalCode&&l.push(`ZIP: ${i.postalCode}`),(n=a.contact)!=null&&n.number&&l.push(`PH: ${a.contact.number}`),l.length>0&&r.push(`        <ram:IncludedAccountingNote>
            <ram:ContentCode>GEN</ram:ContentCode>
            <ram:Content>${I(l.join(" "))}</ram:Content>
        </ram:IncludedAccountingNote>`)}if(a.email&&r.push(`        <ram:IncludedAccountingNote>
            <ram:ContentCode>GEN</ram:ContentCode>
            <ram:Content>EMAIL: ${I(a.email)}</ram:Content>
        </ram:IncludedAccountingNote>`),i!=null&&i.place||i!=null&&i.state||i!=null&&i.countryCode){const l=[];i!=null&&i.place&&l.push(i.place),i!=null&&i.state&&l.push(Jt(i.state)),i!=null&&i.countryCode&&l.push(xt(i.countryCode)),l.length>0&&r.push(`        <ram:IncludedAccountingNote>
            <ram:ContentCode>GEN</ram:ContentCode>
            <ram:Content>${I(l.join(", "))}</ram:Content>
        </ram:IncludedAccountingNote>`)}}return t.accounting&&t.accounting.length>0&&t.accounting.forEach(i=>{i.accountingInformation&&r.push(`        <ram:IncludedAccountingNote>
            <ram:ContentCode>GEN</ram:ContentCode>
            <ram:Content>${I(i.accountingInformation)}</ram:Content>
        </ram:IncludedAccountingNote>`)}),r.length>0?`
`+r.join(`
`):""}function xi(t,r){var i,l;const a=[],o=t.alsoNotify||r.alsoNotify;if(o!=null&&o.name){a.push(`            <ram:IncludedAccountingNote>
                <ram:ContentCode>GEN</ram:ContentCode>
                <ram:Content>NOTIFY TO: ${I(o.name)}</ram:Content>
            </ram:IncludedAccountingNote>`);const s=o.address;if(s!=null&&s.street||s!=null&&s.postalCode||(i=o.contact)!=null&&i.number){const d=[];s!=null&&s.street&&d.push(s.street),s!=null&&s.postalCode&&d.push(`ZIP: ${s.postalCode}`),(l=o.contact)!=null&&l.number&&d.push(`PH: ${o.contact.number}`),d.length>0&&a.push(`            <ram:IncludedAccountingNote>
                <ram:ContentCode>GEN</ram:ContentCode>
                <ram:Content>${I(d.join(" "))}</ram:Content>
            </ram:IncludedAccountingNote>`)}if(o.email&&a.push(`            <ram:IncludedAccountingNote>
                <ram:ContentCode>GEN</ram:ContentCode>
                <ram:Content>EMAIL: ${I(o.email)}</ram:Content>
            </ram:IncludedAccountingNote>`),s!=null&&s.place||s!=null&&s.state||s!=null&&s.countryCode){const d=[];s!=null&&s.place&&d.push(s.place),s!=null&&s.state&&d.push(Jt(s.state)),s!=null&&s.countryCode&&d.push(xt(s.countryCode)),d.length>0&&a.push(`            <ram:IncludedAccountingNote>
                <ram:ContentCode>GEN</ram:ContentCode>
                <ram:Content>${I(d.join(", "))}</ram:Content>
            </ram:IncludedAccountingNote>`)}}const n=t.accounting&&t.accounting.length>0?t.accounting:r.accounting;return n&&n.length>0&&n.forEach(s=>{s.accountingInformation&&a.push(`            <ram:IncludedAccountingNote>
                <ram:ContentCode>GEN</ram:ContentCode>
                <ram:Content>${I(s.accountingInformation)}</ram:Content>
            </ram:IncludedAccountingNote>`)}),a.length>0?`
`+a.join(`
`):""}function vi(t){const r=new Set;return t.rates&&t.rates.forEach(a=>{a.hsCodes?a.hsCodes.forEach(o=>r.add(o)):a.hsCode&&r.add(a.hsCode)}),t.houseBills&&t.houseBills.forEach(a=>{a.htsCodes&&a.htsCodes.forEach(o=>r.add(o))}),Array.from(r)}function Ga(t){var r,a;return t.description?t.description.substring(0,200):t.hasHouses?"CONSOLIDATION COMERCIAL INVOICE ATTACHED FRESH CUT FLOWERS":((a=(r=t.rates)==null?void 0:r[0])==null?void 0:a.description)||"FRESH CUT FLOWERS"}function Ci(t){return{AWC:"AW",AWA:"DA",MY:"MY",FE:"FE",CG:"CG"}[t]||t.substring(0,2)}function wi(t){return t&&{N:"K",Q:"Q",C:"C",M:"M",NORMAL_RATE:"K",QUANTITY_RATE:"Q",SPECIFIC_COMMODITY_RATE:"C",MINIMUM_CHARGE:"M"}[t]||"K"}const Va=br(({house:t,index:r,isExpanded:a,onToggle:o,onUpdate:n,masterOrigin:i,masterDestination:l,isReadOnly:s})=>{const d=te(g=>{var C,N,S,v,_,x,E,k;const f=`shipper${g.charAt(0).toUpperCase()+g.slice(1)}`;return t[f]!==void 0&&t[f]!==""?t[f]:g==="name"?t.shipperName||((C=t.shipper)==null?void 0:C.name)||"":g==="taxId"?((N=t.shipper)==null?void 0:N.taxId)||"":g==="address"?((v=(S=t.shipper)==null?void 0:S.address)==null?void 0:v.street)||"":g==="city"?((x=(_=t.shipper)==null?void 0:_.address)==null?void 0:x.place)||"":g==="country"&&((k=(E=t.shipper)==null?void 0:E.address)==null?void 0:k.countryCode)||""},[t]),m=te(g=>{var C,N,S,v,_,x,E,k;const f=`consignee${g.charAt(0).toUpperCase()+g.slice(1)}`;return t[f]!==void 0&&t[f]!==""?t[f]:g==="name"?t.consigneeName||((C=t.consignee)==null?void 0:C.name)||"":g==="taxId"?((N=t.consignee)==null?void 0:N.taxId)||"":g==="address"?((v=(S=t.consignee)==null?void 0:S.address)==null?void 0:v.street)||"":g==="city"?((x=(_=t.consignee)==null?void 0:_.address)==null?void 0:x.place)||"":g==="country"&&((k=(E=t.consignee)==null?void 0:E.address)==null?void 0:k.countryCode)||""},[t]),u=te((g,f)=>{const C={...t,[g]:f};n(r,C)},[t,r,n]),p=te((g,f)=>{const C={...t},N=`shipper${g.charAt(0).toUpperCase()+g.slice(1)}`;C[N]=f,C.shipper||(C.shipper={name:"",address:{street:"",place:"",countryCode:"",postalCode:""}}),g==="name"?(C.shipper.name=f,C.shipperName=f):g==="taxId"?C.shipper.taxId=f:g==="address"?C.shipper.address.street=f:g==="city"?C.shipper.address.place=f:g==="country"&&(C.shipper.address.countryCode=f),n(r,C)},[t,r,n]),c=te((g,f)=>{const C={...t},N=`consignee${g.charAt(0).toUpperCase()+g.slice(1)}`;C[N]=f,C.consignee||(C.consignee={name:"",address:{street:"",place:"",countryCode:"",postalCode:""}}),g==="name"?(C.consignee.name=f,C.consigneeName=f):g==="taxId"?C.consignee.taxId=f:g==="address"?C.consignee.address.street=f:g==="city"?C.consignee.address.place=f:g==="country"&&(C.consignee.address.countryCode=f),n(r,C)},[t,r,n]);return e("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:[e("button",{type:"button",onClick:()=>o(r),className:"w-full bg-slate-50 px-3 py-2 border-b border-slate-200 flex items-center justify-between hover:bg-slate-100 transition-colors",children:[e("div",{className:"flex items-center gap-3",children:[e("span",{className:"bg-sky-100 text-sky-700 w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center",children:r+1}),e("span",{className:"font-mono font-bold text-slate-800 text-sm",children:t.hawbNumber||"Sin HAWB"}),e("span",{className:"text-slate-400 text-xs",children:"|"}),e("span",{className:"text-xs text-slate-600 truncate max-w-[150px]",title:String(d("name")||""),children:[String(d("name")||"?")," → ",String(m("name")||"?")]})]}),e("div",{className:"flex items-center gap-4",children:[e("div",{className:"text-right",children:[e("span",{className:"text-sm font-semibold text-slate-700",children:[t.pieces," pcs"]}),e("span",{className:"text-slate-400 mx-1",children:"/"}),e("span",{className:"text-sm font-semibold text-slate-700",children:[t.weight," kg"]})]}),a?e(Le,{size:16,className:"text-slate-400"}):e(Se,{size:16,className:"text-slate-400"})]})]}),a&&e("div",{className:"p-3 space-y-3 animate-in slide-in-from-top-1 duration-150",children:[e("div",{className:"grid grid-cols-5 gap-2",children:[e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-0.5",children:"HAWB *"}),e("input",{type:"text",value:t.hawbNumber||"",onChange:g=>u("hawbNumber",g.target.value),readOnly:s,maxLength:12,className:"text-sm border border-purple-200 rounded px-2 py-1 focus:ring-1 focus:ring-purple-400 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Origen"}),e("input",{type:"text",value:t.origin||i,onChange:g=>u("origin",g.target.value),readOnly:s,maxLength:3,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Destino"}),e("input",{type:"text",value:t.destination||l,onChange:g=>u("destination",g.target.value),readOnly:s,maxLength:3,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Piezas *"}),e("input",{type:"number",value:t.pieces,onChange:g=>u("pieces",parseInt(g.target.value)||0),readOnly:s,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Peso *"}),e("input",{type:"number",step:"0.01",value:t.weight,onChange:g=>u("weight",parseFloat(g.target.value)||0),readOnly:s,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-cyan-600 uppercase font-bold mb-0.5",children:"Vol. M³ (NV)"}),e("input",{type:"number",step:"0.01",value:t.volumeCubicMeters||"",onChange:g=>u("volumeCubicMeters",parseFloat(g.target.value)||0),readOnly:s,placeholder:"0.00",className:"text-sm border border-cyan-200 rounded px-2 py-1 focus:ring-1 outline-none bg-cyan-50/30"})]})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"bg-sky-50/50 border border-sky-100 rounded p-2",children:[e("div",{className:"text-[10px] font-bold text-sky-600 mb-1 flex items-center gap-1",children:[e(Rt,{size:10})," SHIPPER"]}),e("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[e("input",{placeholder:"Nombre *",value:d("name"),onChange:g=>p("name",g.target.value),readOnly:s,className:"col-span-2 px-1.5 py-1 border border-sky-200 rounded text-xs"}),e("input",{placeholder:"NIT/Tax ID",value:d("taxId"),onChange:g=>p("taxId",g.target.value),readOnly:s,className:"px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Dirección",value:d("address"),onChange:g=>p("address",g.target.value),readOnly:s,className:"col-span-3 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Ciudad",value:d("city"),onChange:g=>p("city",g.target.value),readOnly:s,className:"col-span-2 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"País",value:d("country"),onChange:g=>p("country",g.target.value),readOnly:s,maxLength:2,className:"px-1.5 py-1 border rounded text-xs"})]})]}),e("div",{className:"bg-purple-50/50 border border-purple-100 rounded p-2",children:[e("div",{className:"text-[10px] font-bold text-purple-600 mb-1 flex items-center gap-1",children:[e(Ge,{size:10})," CONSIGNEE"]}),e("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[e("input",{placeholder:"Nombre *",value:m("name"),onChange:g=>c("name",g.target.value),readOnly:s,className:"col-span-2 px-1.5 py-1 border border-purple-200 rounded text-xs"}),e("input",{placeholder:"NIT/Tax ID",value:m("taxId"),onChange:g=>c("taxId",g.target.value),readOnly:s,className:"px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Dirección",value:m("address"),onChange:g=>c("address",g.target.value),readOnly:s,className:"col-span-3 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Ciudad",value:m("city"),onChange:g=>c("city",g.target.value),readOnly:s,className:"col-span-2 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"País",value:m("country"),onChange:g=>c("country",g.target.value),readOnly:s,maxLength:2,className:"px-1.5 py-1 border rounded text-xs"})]})]})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Nature of Goods *"}),e("input",{type:"text",value:t.natureOfGoods||"",onChange:g=>u("natureOfGoods",g.target.value),readOnly:s,maxLength:500,className:"text-xs border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-400 uppercase font-bold mb-0.5",children:"Common Name"}),e("input",{type:"text",value:t.commonName||"",onChange:g=>u("commonName",g.target.value),readOnly:s,maxLength:500,className:"text-xs border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-0.5 flex items-center gap-1",children:[e(Tr,{size:10})," HTS Codes (Arancelarios)"]}),e("div",{className:"flex flex-wrap gap-1 min-h-[28px] p-1.5 bg-purple-50 border border-purple-200 rounded",children:[(t.htsCodes||[]).length>0&&t.htsCodes.map((g,f)=>e("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-mono",children:[g,!s&&e("button",{onClick:()=>{const C=t.htsCodes.filter((N,S)=>S!==f);u("htsCodes",C)},className:"hover:text-red-600",children:e(Ke,{size:10})})]},f)),!s&&e("input",{type:"text",placeholder:(t.htsCodes||[]).length>0?"+ Agregar HTS":"Escribe código HTS y presiona Enter",className:"flex-1 min-w-[120px] px-1 py-0.5 text-xs border-0 bg-transparent outline-none placeholder:text-purple-400 placeholder:italic",onKeyDown:g=>{if(g.key==="Enter"&&g.currentTarget.value.trim()){const f=g.currentTarget.value.trim().replace(/\D/g,""),C=t.htsCodes||[];f&&!C.includes(f)&&u("htsCodes",[...C,f]),g.currentTarget.value=""}}}),s&&(t.htsCodes||[]).length===0&&e("span",{className:"text-xs text-purple-400 italic",children:"Sin códigos HTS"})]})]})]})]})},(t,r)=>t.house===r.house&&t.isExpanded===r.isExpanded&&t.isReadOnly===r.isReadOnly&&t.index===r.index);Va.displayName="HouseRow";const yi=({title:t,children:r,defaultOpen:a=!1})=>{const[o,n]=O(a);return e("div",{className:"border border-slate-100 rounded overflow-hidden mt-2",children:[e("button",{onClick:()=>n(!o),className:"w-full flex items-center justify-between px-2 py-1.5 bg-slate-50 hover:bg-slate-100 text-xs text-slate-600",children:[e("span",{className:"flex items-center gap-1",children:[o?e(Le,{size:12}):e(Se,{size:12}),t]}),e("span",{className:"text-[10px] text-slate-400 bg-slate-200 px-1 rounded",children:"opcional"})]}),o&&e("div",{className:"p-2 bg-white border-t border-slate-100",children:r})]})},Ni=t=>typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t)),G=({label:t,value:r,onChange:a,readOnly:o=!1,maxLength:n,placeholder:i,className:l="",type:s="text",required:d=!1})=>{const m=(r==null?void 0:r.toString())||"",u=n&&m.length>n,p=d&&!m.trim(),c=d?p||u?"border-red-300 bg-red-50":"border-purple-300 focus:ring-purple-300":u?"border-red-300 bg-red-50":"border-slate-200 focus:ring-slate-200",g=d?"text-slate-600":"text-slate-400";return e("div",{className:`flex flex-col ${l}`,children:[e("div",{className:"flex justify-between items-center mb-0.5",children:[e("label",{className:`text-[10px] uppercase font-bold flex items-center gap-1 ${g}`,children:[t,d&&e("span",{className:"text-purple-500",children:"*"}),!d&&e("span",{className:"text-[9px] text-slate-300 font-normal normal-case",children:"(opt)"})]}),n&&!o&&e("span",{className:`text-[9px] ${u?"text-red-500 font-bold":"text-slate-400"}`,children:[m.length,"/",n]})]}),o?e("div",{className:`text-sm font-medium py-1.5 border-b min-h-[32px] flex items-center px-2 rounded ${d?"border-slate-200 bg-slate-50":"border-slate-100 bg-slate-50/50"} text-slate-700`,children:m||e("span",{className:"text-slate-400 italic text-xs",children:"-"})}):e("input",{type:s,value:m,onChange:f=>a==null?void 0:a(f.target.value),className:`text-sm border ${c} rounded px-2 py-1.5 focus:ring-1 outline-none transition-all h-[34px]`,placeholder:i})]})},za=({title:t,icon:r,party:a,onUpdate:o,readOnly:n})=>{var l;const i=(s,d)=>{var m;if(s.includes(".")){const[u,p]=s.split(".");u==="address"?o({...a,address:{...a.address,[p]:d}}):u==="contact"&&o({...a,contact:{...a.contact,identifier:((m=a.contact)==null?void 0:m.identifier)||"TE",[p]:d}})}else o({...a,[s]:d})};return e("div",{className:"bg-white border border-slate-200 rounded-lg p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-100 pb-2",children:[e("div",{className:"bg-purple-100 p-1 rounded text-purple-600",children:r}),e("h3",{className:"font-semibold text-slate-800 text-sm",children:t}),!n&&e("span",{className:"ml-auto text-[10px] bg-green-100 text-green-600 px-1.5 py-0.5 rounded flex items-center gap-1",children:e(nt,{size:10})})]}),e("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1.5 text-xs",children:[e(G,{label:"Nombre *",value:a.name,onChange:s=>i("name",s),readOnly:n,maxLength:35,required:!0}),e(G,{label:"Nombre 2",value:a.name2||"",onChange:s=>i("name2",s),readOnly:n,maxLength:35}),e(G,{label:"NIT/Tax ID",value:a.taxId||"",onChange:s=>i("taxId",s),readOnly:n,maxLength:17}),e(G,{label:"No. Cuenta",value:a.accountNumber||"",onChange:s=>i("accountNumber",s),readOnly:n,maxLength:14}),e(G,{label:"Dirección 1 *",value:a.address.street,onChange:s=>i("address.street",s),readOnly:n,maxLength:35,required:!0}),e(G,{label:"Dirección 2",value:a.address.street2||"",onChange:s=>i("address.street2",s),readOnly:n,maxLength:35}),e(G,{label:"Ciudad *",value:a.address.place,onChange:s=>i("address.place",s),readOnly:n,maxLength:17,required:!0}),e(G,{label:"Estado",value:a.address.state||"",onChange:s=>i("address.state",s),readOnly:n,maxLength:9}),e(G,{label:"País (ISO) *",value:a.address.countryCode,onChange:s=>i("address.countryCode",s),readOnly:n,maxLength:2,required:!0}),e(G,{label:"Código Postal",value:a.address.postalCode,onChange:s=>i("address.postalCode",s),readOnly:n,maxLength:9}),e(G,{label:"Teléfono",value:((l=a.contact)==null?void 0:l.number)||"",onChange:s=>i("contact.number",s),readOnly:n,maxLength:25,className:"col-span-2"})]}),e(yi,{title:"Campos Adicionales",children:e("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1.5 text-xs",children:[e(G,{label:"Email",value:a.email||"",onChange:s=>i("email",s),readOnly:n,maxLength:70}),e(G,{label:"Fax",value:a.fax||"",onChange:s=>i("fax",s),readOnly:n,maxLength:25})]})})]})},Si=({agent:t,onUpdate:r,readOnly:a})=>{const o=(n,i)=>{r({...t,[n]:i})};return e("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 border border-purple-200 rounded-lg p-4 shadow-sm",children:[e("div",{className:"flex items-center gap-2 mb-4 border-b border-purple-200 pb-2",children:[e("div",{className:"bg-purple-100 p-1.5 rounded text-purple-600",children:e(Ra,{size:16})}),e("h3",{className:"font-bold text-purple-800",children:"Agente de Carga (IATA)"}),!a&&e("span",{className:"ml-auto text-xs bg-green-100 text-green-600 px-2 py-0.5 rounded flex items-center gap-1",children:[e(nt,{size:10})," Editable"]})]}),e("div",{className:"grid grid-cols-3 gap-3",children:[e(G,{label:"Nombre del Agente",value:t.name,onChange:n=>o("name",n),readOnly:a,maxLength:35,required:!0,className:"col-span-2"}),e(G,{label:"Código IATA",value:t.iataCode,onChange:n=>o("iataCode",n),readOnly:a,maxLength:7,required:!0}),e(G,{label:"Código CASS",value:t.cassCode||"",onChange:n=>o("cassCode",n),readOnly:a,maxLength:4}),e(G,{label:"Ciudad/Lugar",value:t.place,onChange:n=>o("place",n),readOnly:a,maxLength:17,required:!0}),e(G,{label:"Número de Cuenta",value:t.accountNumber||"",onChange:n=>o("accountNumber",n),readOnly:a,maxLength:14})]})]})},vt=({icon:t,label:r,value:a,subvalue:o,color:n="blue"})=>e("div",{className:`rounded-lg border p-3 ${{blue:"bg-purple-50 border-purple-200 text-purple-700",green:"bg-green-50 border-green-200 text-green-700",amber:"bg-amber-50 border-amber-200 text-amber-700",purple:"bg-purple-50 border-purple-200 text-purple-700",slate:"bg-slate-50 border-slate-200 text-slate-700"}[n]}`,children:[e("div",{className:"flex items-center gap-2 mb-1",children:[t,e("span",{className:"text-xs uppercase font-bold opacity-70",children:r})]}),e("div",{className:"text-lg font-bold",children:a}),o&&e("div",{className:"text-xs opacity-60",children:o})]}),qa=({isOpen:t,onClose:r,shipment:a,onSave:o,onCopySuccess:n,onSaveConfig:i})=>{var Ya,Ka,Za,Qa,Ja,eo,to,ro,ao,oo,no,io,so;const[l,s]=O("parties"),[d,m]=O("fwb"),[u,p]=O("xfwb"),[c,g]=O(null),[f,C]=O(!1),[N,S]=O([]),[v,_]=O(!1),[x,E]=O(null),[k,D]=O("masterAndHouses"),[M,V]=O(null),[A,X]=O("edi"),[se,Ce]=O("shipper"),[le,re]=O(!1),[Y,Fe]=O(()=>ut()),[me,Re]=O(0),Ve="CARGO_IMP",[ze,Te]=O(new Set),Z=ta(null),we=ta(!0),he=(c==null?void 0:c.status)==="DRAFT",R=!he,lt=te(h=>{Te(w=>{const y=new Set(w);return y.has(h)?y.delete(h):y.add(h),y})},[]),Qe=te(()=>{Po(),Vn(),Re(0),r()},[r]),rr=te((h,w)=>{g(y=>{if(!y)return y;const T=[...y.houseBills];return T[h]=w,{...y,houseBills:T}})},[]);pt(()=>(we.current=!0,()=>{we.current=!1,Z.current!==null&&(window.clearTimeout(Z.current),Z.current=null)}),[]),pt(()=>{a&&(g(Ni(a)),m("fwb"),p("xfwb"),s("parties"),S([]),E(null),D("masterAndHouses"),X("edi"),Ce("shipper"),Te(new Set))},[a]);const ar=ke(()=>{var h,w;if(!c)return{fwbMessage:null,fhlMessages:null,concatenatedFhl:null,policyInfo:null,error:null};try{const y=((h=c.awbNumber)==null?void 0:h.split("-")[0])||"000",T=Gt.getPolicyInfo(y);console.log(`[CARGO-IMP] Regenerando (v${me}) con política: ${T.airlineName}, segmentos habilitados: ${((w=T.policy.enabledSegments)==null?void 0:w.length)||0}`);const H=Gt.generateFWB(c);let Q=[],ye="";return c.hasHouses&&c.houseBills.length>0&&(Q=c.houseBills.map(wt=>Gt.generateFHL(c,wt)),ye=Gt.generateConcatenatedFHL(c)),{fwbMessage:H,fhlMessages:Q.length>0?Q:null,concatenatedFhl:ye,policyInfo:T,error:null}}catch(y){return console.error("[CARGO-IMP Generation Error]",y),{fwbMessage:null,fhlMessages:null,concatenatedFhl:null,policyInfo:null,error:y.message||"Error generando EDI"}}},[c,Ve,me]),{fwbMessage:z,fhlMessages:be,concatenatedFhl:ct,policyInfo:K,error:b}=ar,F=ke(()=>{if(!c)return null;try{console.log("[CARGO-XML] Generando bundle XFWB/XFZB...");const h=li(c);return console.log(`[CARGO-XML] Bundle generado: XFWB válido=${h.xfwb.isValid}, XFZBs=${h.xfzbs.length}`),h}catch(h){return console.error("[CARGO-XML Generation Error]",h),null}},[c,me]),P=te((h,w)=>{if(!(c!=null&&c.awbNumber))return;const y=c.awbNumber.split("-")[0]||"000",H=Object.keys(xe).includes(h);H?$o(y,h,w):Bo(y,h,w),Re(Q=>Q+1),console.log(`[CARGO-IMP] Toggle segmento ${H?"FHL":"FWB"} ${h} -> ${w?"HABILITADO":"DESHABILITADO"} para ${y}`)},[c]),J=te(()=>{if(!(z!=null&&z.fullMessage))return;let h=z.fullMessage;c!=null&&c.hasHouses&&k==="masterAndHouses"&&ct&&(h=z.fullMessage+`

`+ct),Ct(h);const w={allSuccess:!0,summary:`✅ Mensaje EDI copiado al clipboard. FWB${c!=null&&c.hasHouses?` + ${c.houseBills.length} FHL`:""}.`,fwbMessage:z.fullMessage,fhlMessages:be==null?void 0:be.map(y=>y.fullMessage)};E(w),c&&n&&n(c.id,h)},[z,ct,be,c,k,n]),[W,pe]=O(!1),[Je,L]=O(!1),[U,j]=O(!1),[ue,Oe]=O(0),[_e,ee]=O(!1),fe=ke(()=>{var h,w,y;return!!((h=c==null?void 0:c.descartesConfig)!=null&&h.endpoint&&((w=c==null?void 0:c.descartesConfig)!=null&&w.username)&&((y=c==null?void 0:c.descartesConfig)!=null&&y.password))},[c==null?void 0:c.descartesConfig]),Ee=te(async()=>{var h,w;if(c!=null&&c.descartesConfig&&!(A==="cargoxml"&&!((h=F==null?void 0:F.xfwb)!=null&&h.xmlContent))&&!(A==="edi"&&!(z!=null&&z.fullMessage))){pe(!0),L(!1),E(null),V(null);try{const y=new _n({endpoint:c.descartesConfig.endpoint,username:c.descartesConfig.username,password:c.descartesConfig.password,proxyUrl:c.descartesConfig.proxyUrl}),T=c.awbNumber;let H,Q,ye=[];if(A==="cargoxml"){Q=F.xfwb.xmlContent;let Ne=[];c.hasHouses&&k==="masterAndHouses"&&F.xfzbs.length>0&&(ye=F.xfzbs.map(qe=>qe.xmlContent),Ne=F.xfzbs.map(qe=>qe.hawbNumber||"")),H=await y.sendBundle(Q,T,ye,Ne)}else{Q=z.fullMessage;let Ne=[];c.hasHouses&&k==="masterAndHouses"&&be&&(ye=be.map(qe=>qe.fullMessage),Ne=c.houseBills.map(qe=>qe.hawbNumber)),H=await y.sendBundle(Q,T,ye,Ne)}const wt={allSuccess:H.allSuccess,summary:H.summary,fwbMessage:Q,fhlMessages:ye.length>0?ye:void 0,transmissionResult:H};E(wt),L(H.allSuccess),H.allSuccess&&n&&n(c.id,`TRANSMITTED (${A.toUpperCase()}): ${T}`)}catch(y){const T=y instanceof Error?y.message:"Error desconocido";E({allSuccess:!1,summary:`❌ Error de transmisión: ${T}`,fwbMessage:A==="cargoxml"?(w=F==null?void 0:F.xfwb)==null?void 0:w.xmlContent:z==null?void 0:z.fullMessage})}finally{pe(!1)}}},[z,be,F,c,k,A,n]),He=te(()=>{if(A==="edi"&&U){ee(!0);return}Ee()},[A,U,Ee]),Ct=te(h=>{navigator.clipboard.writeText(h),C(!0),Z.current!==null&&window.clearTimeout(Z.current),Z.current=window.setTimeout(()=>{we.current&&C(!1),Z.current=null},2e3)},[]),{totalWeightCharge:dt,totalOtherCharges:or,grandTotal:Ie}=ke(()=>{if(!c)return{totalWeightCharge:0,totalOtherCharges:0,grandTotal:0};const h=c.rates.reduce((y,T)=>y+T.total,0),w=c.otherCharges.reduce((y,T)=>y+T.amount,0);return{totalWeightCharge:h,totalOtherCharges:w,grandTotal:h+w}},[c]);if(!t||!c)return null;const $i=[{id:"parties",icon:Gn,label:"Partes"},{id:"cargo",icon:ge,label:"Carga"},{id:"financials",icon:Fa,label:"Cargos"},{id:"security",icon:Da,label:"Seguridad"},{id:"houses",icon:ot,label:c.hasHouses?`Houses (${c.houseBills.length})`:"Houses"},{id:"summary",icon:Xt,label:"Resumen"},{id:"json",icon:Ot,label:"EDI"}];return e("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:[e("div",{className:"modal-content bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[88vh] flex flex-col overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-gradient-to-r from-slate-50 to-purple-50",children:[e("div",{className:"flex items-center gap-4",children:[e("div",{className:"bg-purple-600 p-2.5 rounded-lg text-white shadow-md",children:e(it,{size:22})}),e("div",{children:[e("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[he?"Editor de Envío":"Visualización de Envío",he&&e("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium flex items-center gap-1",children:[e(nt,{size:10})," MODO EDICIÓN"]}),!he&&e("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full font-medium",children:"SOLO LECTURA"})]}),e("p",{className:"text-sm text-slate-500 font-mono",children:["AWB: ",e("span",{className:"font-bold text-slate-700",children:c.awbNumber})]})]})]}),e("div",{className:"flex items-center gap-3",children:[e("div",{className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 ${c.status==="DRAFT"?"bg-gray-100 text-gray-600":c.status==="TRANSMITTED"?"bg-amber-100 text-amber-700":c.status==="ACKNOWLEDGED"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[c.status==="ACKNOWLEDGED"&&e(ve,{size:12}),c.status==="REJECTED"&&e(ie,{size:12}),c.status==="TRANSMITTED"&&e(jt,{size:12}),c.status]}),e("button",{onClick:()=>re(!0),className:"text-slate-500 hover:text-purple-600 hover:bg-purple-50 p-2 rounded-lg transition-colors",title:"Configuración del Conector",children:e(Ir,{size:20})}),e("button",{onClick:Qe,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 p-2 rounded-lg transition-colors",children:e(Ke,{size:20})})]})]}),e("div",{className:"px-6 border-b border-slate-200 flex gap-1 bg-white overflow-x-auto flex-nowrap min-h-[46px]",children:$i.map(h=>e("button",{onClick:()=>s(h.id),className:`py-3 px-4 text-xs font-semibold border-b-2 transition-all flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${l===h.id?"border-purple-600 text-purple-700 bg-purple-50 rounded-t-lg":"border-transparent text-slate-600 hover:text-purple-600 hover:bg-slate-50"}`,children:[e(h.icon,{size:14}),h.label]},h.id))}),N.length>0&&e("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 text-red-700 font-bold mb-2",children:[e(ie,{size:16})," Errores de Validación"]}),e("ul",{className:"text-sm text-red-600 list-disc list-inside",children:N.map((h,w)=>e("li",{children:h},w))})]}),e("div",{className:"flex-1 overflow-y-auto px-4 py-3 bg-slate-50/30",style:{maxHeight:"calc(90vh - 120px)"},children:[l==="summary"&&e("div",{className:"space-y-4",children:[e("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[e(vt,{icon:e(Kt,{size:14}),label:"Origen",value:c.origin,color:"blue"}),e(vt,{icon:e(Kt,{size:14}),label:"Destino",value:c.destination,color:"green"}),e(vt,{icon:e(ge,{size:14}),label:"Piezas",value:c.pieces,color:"amber"}),e(vt,{icon:e(Un,{size:14}),label:"Peso",value:`${c.weight} ${c.weightUnit==="KILOGRAM"?"KG":"LB"}`,color:"purple"}),e(vt,{icon:e(Fa,{size:14}),label:"Total",value:`${c.currency} ${Ie.toFixed(2)}`,color:"green"}),e(vt,{icon:e(it,{size:14}),label:"Vuelos",value:c.flights.length,subvalue:((Ya=c.flights[0])==null?void 0:Ya.flightNumber)||"Sin vuelo",color:"slate"})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-purple-600",children:[e(Rt,{size:16})," ",e("span",{className:"font-bold text-sm",children:"SHIPPER (Exportador)"})]}),e("p",{className:"font-bold text-slate-800",children:c.shipper.name}),e("p",{className:"text-sm text-slate-500",children:c.shipper.address.street}),e("p",{className:"text-sm text-slate-500",children:[c.shipper.address.place,", ",c.shipper.address.countryCode]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-green-600",children:[e(Ge,{size:16})," ",e("span",{className:"font-bold text-sm",children:"CONSIGNEE (Importador)"})]}),e("p",{className:"font-bold text-slate-800",children:c.consignee.name}),e("p",{className:"text-sm text-slate-500",children:c.consignee.address.street}),e("p",{className:"text-sm text-slate-500",children:[c.consignee.address.place,", ",c.consignee.address.countryCode]})]}),e("div",{className:"bg-white border border-amber-200 rounded-lg p-4 bg-amber-50/50",children:[e("div",{className:"flex items-center gap-2 mb-3 text-amber-600",children:[e(Ra,{size:16})," ",e("span",{className:"font-bold text-sm",children:"AGENT (Agente IATA)"})]}),e("p",{className:"font-bold text-slate-800",children:c.agent.name}),e("p",{className:"text-sm text-slate-500",children:[e("span",{className:"font-semibold",children:"IATA:"})," ",c.agent.iataCode,c.agent.cassCode&&e("span",{className:"ml-2",children:[e("span",{className:"font-semibold",children:"CASS:"})," ",c.agent.cassCode]})]}),e("p",{className:"text-sm text-slate-500",children:c.agent.place})]})]}),e("div",{className:"bg-gradient-to-r from-purple-50 to-purple-50 border border-purple-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-purple-700",children:[e(nt,{size:16})," ",e("span",{className:"font-bold text-sm",children:"FIRMA Y EJECUCIÓN"})]}),e("div",{className:"grid grid-cols-3 gap-4",children:[e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Firma Autorizada"}),e("p",{className:"font-bold text-lg text-purple-800",children:c.signature||"Sin firma"})]}),e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Fecha de Ejecución"}),e("p",{className:"font-bold text-lg text-purple-800",children:c.executionDate})]}),e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Lugar de Ejecución"}),e("p",{className:"font-bold text-lg text-purple-800",children:c.executionPlace})]})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-3",children:"DESCRIPCIÓN DE MERCANCÍA"}),e("div",{className:"grid grid-cols-3 gap-4",children:[e(G,{label:"Descripción (Backend)",value:c.description,onChange:h=>g({...c,description:h}),readOnly:R,maxLength:500,className:"col-span-2"}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Tipo de Envío"}),e("div",{className:`text-sm font-medium py-2 px-3 rounded ${c.hasHouses?"bg-amber-50 border border-amber-200 text-amber-800":"bg-slate-50 border border-slate-200 text-slate-700"}`,children:c.hasHouses?e("span",{className:"flex items-center gap-2",children:[e(ot,{size:14}),"CONSOLIDADO (",c.houseBills.length," Hijas)"]}):e("span",{className:"flex items-center gap-2",children:[e(ge,{size:14}),"DIRECTO ",c.flights.length>1&&`(${c.flights.length} Rutas)`]})})]})]}),e("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("p",{className:"text-xs font-bold text-blue-800 flex items-center gap-1",children:[e(Ae,{size:12}),"GOODS DESCRIPTION (Lo que se enviará a Traxon)"]}),e("span",{className:"text-[10px] text-blue-600",children:"Máx 25 chars/línea • Usa Enter para saltos"})]}),e("div",{className:"mb-3",children:[e("label",{className:"text-[10px] text-blue-700 font-bold mb-1 block",children:"Override Manual (deja vacío para usar automático):"}),e("textarea",{value:c.goodsDescriptionOverride||"",onChange:h=>g({...c,goodsDescriptionOverride:h.target.value||void 0}),placeholder:`Ej: FRESH CUT FLOWERS
PERISHABLE CARGO`,disabled:R,className:"w-full px-2 py-1.5 border border-blue-300 rounded text-sm font-mono bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-slate-50 resize-none",rows:3,maxLength:200}),e("div",{className:"flex justify-between text-[10px] text-blue-500 mt-1",children:[e("span",{children:"Usa Enter para nueva línea (cada línea máx 25 chars)"}),e("span",{children:[(c.goodsDescriptionOverride||"").length,"/200"]})]})]}),e("div",{className:"border-t border-blue-200 pt-2",children:[e("p",{className:"text-[10px] text-blue-700 font-bold mb-1",children:"Preview Final:"}),(()=>{var H;const h=((H=c.awbNumber)==null?void 0:H.split("-")[0])||"";let w="",y="";c.goodsDescriptionOverride?(w=c.goodsDescriptionOverride.toUpperCase(),y="override"):c.hasHouses?(w=`CONSOLIDATION AS PER
ATTACHED DOCUMENTS`,y="consolidado"):["145","985"].includes(h)?(w=c.commodityCode==="0609"||c.commodityCode==="609"?"CONSOLIDATE FLOWERS":"CUT FLOWERS",y="latam"):(w=va(c.description,150)||"FRESH CUT FLOWERS",y="auto");const T=w.split(`
`);return e("div",{className:"font-mono text-sm",children:[T.map((Q,ye)=>e("div",{className:"flex items-center gap-2",children:[e("span",{className:`${Q.length>25?"text-red-600 bg-red-100":"text-blue-900 bg-white"} px-2 py-0.5 rounded border ${Q.length>25?"border-red-300":"border-blue-200"}`,children:Q||"(vacío)"}),e("span",{className:`text-[10px] ${Q.length>25?"text-red-500 font-bold":"text-blue-500"}`,children:["(",Q.length,"/25)",Q.length>25&&" ⚠️ EXCEDE"]})]},ye)),e("p",{className:"text-[10px] text-blue-600 mt-2",children:["Total: ",w.length," chars | ",T.length," líneas |",e("span",{className:`ml-1 font-bold ${y==="override"?"text-purple-600":y==="consolidado"?"text-amber-600":y==="latam"?"text-green-600":"text-blue-600"}`,children:[y==="override"&&"✏️ Override manual",y==="consolidado"&&"📦 Consolidado (fijo)",y==="latam"&&"✈️ LATAM (específico)",y==="auto"&&"🔄 Saneado automático"]})]})]})})()]})]}),c.hasHouses&&e("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e("p",{className:"text-xs text-amber-700 font-medium mb-2",children:[e(ot,{size:12,className:"inline mr-1"}),"Este envío consolidado transmitirá: 1 Master AWB (FWB) + 1 Lista de Consolidación (CSL) + ",c.houseBills.length," House Waybills (FHL)"]}),e("div",{className:"flex flex-wrap gap-2",children:c.houseBills.map((h,w)=>e("span",{className:"text-xs bg-white px-2 py-1 rounded border border-amber-200 text-amber-800 font-mono",children:h.hawbNumber},w))})]})]}),he&&e("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between",children:[e("div",{children:[e("p",{className:"font-bold text-emerald-800",children:A==="cargoxml"?"📄 Cargo-XML (XFWB/XFZB)":"📟 CARGO-IMP (EDI)"}),e("p",{className:"text-sm text-emerald-600",children:A==="cargoxml"?"Formato: IATA Cargo-XML 3.0":"Formato: FWB/16, FWB/17, FHL/4"}),c.hasHouses&&e("p",{className:"text-xs text-purple-500 mt-1",children:["Consolidado: Master + ",c.houseBills.length," House(s)"]}),!c.hasHouses&&c.flights.length>1&&e("p",{className:"text-xs text-purple-500 mt-1",children:["Directo con ",c.flights.length," rutas"]})]}),e("div",{className:"flex items-center gap-3",children:[e("div",{className:"flex flex-col items-end",children:[e("label",{className:"text-[10px] text-blue-600 uppercase font-bold mb-1",children:"Formato"}),e("div",{className:"text-sm border border-blue-300 rounded px-3 py-2 bg-blue-50 font-medium text-blue-700",children:"EDI (CARGO-IMP)"})]}),c.hasHouses&&e("div",{className:"flex flex-col items-end",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-1",children:"Contenido"}),e("select",{value:k,onChange:h=>D(h.target.value),className:"text-sm border border-purple-300 rounded px-3 py-2 focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[e("option",{value:"masterAndHouses",children:A==="cargoxml"?`XFWB + ${c.houseBills.length} XFZB`:`FWB + ${c.houseBills.length} FHL`}),e("option",{value:"masterOnly",children:A==="cargoxml"?"Solo XFWB (Master)":"Solo FWB (Master)"})]})]}),fe&&e("div",{className:"flex flex-col items-end gap-1",children:[A==="edi"&&U&&e("span",{className:"text-xs text-amber-600 font-semibold flex items-center gap-1",children:[e(ie,{size:12})," ",ue," error(es) detectado(s) — revise antes de enviar"]}),e("button",{onClick:He,disabled:A==="cargoxml"?!((Ka=F==null?void 0:F.xfwb)!=null&&Ka.xmlContent):!(z!=null&&z.fullMessage)||W,className:`${A==="edi"&&U?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"} disabled:bg-slate-400 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-bold transition-all shadow-lg hover:shadow-xl`,children:W?e(ce,{children:[e(Wn,{size:18,className:"animate-spin"})," Transmitiendo..."]}):Je?e(ce,{children:[e(ve,{size:18})," ¡Transmitido!"]}):e(ce,{children:[e(Qt,{size:18})," ",A==="edi"&&U?"Transmitir (con errores)":"Transmitir a Descartes"]})})]})]})]}),x&&e("div",{className:`mt-4 p-4 rounded-lg border-2 shadow-lg ${x.allSuccess?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-400 animate-pulse":"bg-gradient-to-r from-red-100 to-orange-100 border-red-400 animate-pulse"}`,style:{animationDuration:"2s"},children:[e("div",{className:"flex items-center gap-2 mb-2",children:[x.allSuccess?e(ve,{size:24,className:"text-green-600 animate-bounce"}):e(ie,{size:24,className:"text-red-600 animate-bounce"}),e("span",{className:`font-bold text-lg ${x.allSuccess?"text-green-700":"text-red-700"}`,children:x.transmissionResult?x.allSuccess?"✅ TRANSMITIDO":"❌ ERROR TRANSMISIÓN":x.allSuccess?"✅ EDI COPIADO":"❌ ERROR"})]}),e("div",{className:`text-base font-bold py-2 px-3 rounded-lg mb-3 ${x.allSuccess?"bg-green-200/70 text-green-800 border border-green-300":"bg-red-200/70 text-red-800 border border-red-300"}`,children:["📊 ",x.summary]}),x.transmissionResult&&e("div",{className:"mt-2 text-xs bg-white/70 p-3 rounded border border-slate-200 space-y-2",children:[e("div",{className:"text-[10px] text-slate-400 mb-2 flex items-center gap-1",children:[e(Ue,{size:12}),e("span",{children:"Clic en cada mensaje para ver payload enviado y respuesta completa"})]}),e("div",{className:`p-2 rounded border cursor-pointer transition-all hover:shadow-md ${x.transmissionResult.fwbResult.success?"bg-green-50 border-green-200 hover:bg-green-100":"bg-red-50 border-red-200 hover:bg-red-100"}`,onClick:()=>V(M==="fwb"?null:"fwb"),children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-slate-400",children:M==="fwb"?e(Le,{size:16}):e(Se,{size:16})}),e("span",{className:`text-lg ${x.transmissionResult.fwbResult.success?"text-green-600":"text-red-600"}`,children:x.transmissionResult.fwbResult.success?"✓":"✗"}),e("strong",{className:"text-sm",children:["FWB (",x.transmissionResult.fwbResult.reference,")"]}),e("span",{className:"ml-auto text-[10px] text-slate-400",children:x.transmissionResult.fwbResult.timestamp?new Date(x.transmissionResult.fwbResult.timestamp).toLocaleTimeString():""})]}),x.transmissionResult.fwbResult.descartesResponse&&e("div",{className:"ml-8 text-xs flex flex-wrap gap-3 mt-1",children:[x.transmissionResult.fwbResult.descartesResponse.tid&&e("span",{children:[e("span",{className:"text-slate-500",children:"TID:"})," ",e("span",{className:"font-mono text-blue-700",children:x.transmissionResult.fwbResult.descartesResponse.tid})]}),x.transmissionResult.fwbResult.descartesResponse.status&&e("span",{children:[e("span",{className:"text-slate-500",children:"Status:"})," ",e("span",{className:"text-green-700 font-medium",children:x.transmissionResult.fwbResult.descartesResponse.status})]}),x.transmissionResult.fwbResult.descartesResponse.error&&e("span",{className:"text-red-600",children:x.transmissionResult.fwbResult.descartesResponse.error})]}),x.transmissionResult.fwbResult.error&&!x.transmissionResult.fwbResult.descartesResponse&&e("p",{className:"ml-8 text-red-600",children:x.transmissionResult.fwbResult.error})]}),M==="fwb"&&e("div",{className:"ml-4 p-3 bg-slate-100 rounded border border-slate-300 space-y-3 animate-fadeIn",children:[e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Qt,{size:12})," Mensaje Enviado (Request)"]}),x.transmissionResult.fwbResult.requestBody&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(x.transmissionResult.fwbResult.requestBody||"")},children:[e(Pe,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:x.transmissionResult.fwbResult.requestBody||"(No disponible)"})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Ae,{size:12})," Respuesta API (Response)"]}),x.transmissionResult.fwbResult.responseRaw&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(x.transmissionResult.fwbResult.responseRaw||"")},children:[e(Pe,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:x.transmissionResult.fwbResult.responseRaw||x.transmissionResult.fwbResult.responseMessage||"(No disponible)"})]}),x.transmissionResult.fwbResult.descartesResponse&&e("div",{children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[e(Tr,{size:12})," Respuesta Parseada"]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-32 font-mono",children:JSON.stringify(x.transmissionResult.fwbResult.descartesResponse,null,2)})]})]}),x.transmissionResult.fhlResults.map((h,w)=>e("div",{children:[e("div",{className:`p-2 rounded border cursor-pointer transition-all hover:shadow-md ${h.success?"bg-green-50 border-green-200 hover:bg-green-100":"bg-red-50 border-red-200 hover:bg-red-100"}`,onClick:()=>V(M===w?null:w),children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-slate-400",children:M===w?e(Le,{size:16}):e(Se,{size:16})}),e("span",{className:`text-lg ${h.success?"text-green-600":"text-red-600"}`,children:h.success?"✓":"✗"}),e("strong",{className:"text-sm",children:["FHL (",h.reference,")"]}),e("span",{className:"ml-auto text-[10px] text-slate-400",children:h.timestamp?new Date(h.timestamp).toLocaleTimeString():""})]}),h.descartesResponse&&e("div",{className:"ml-8 text-xs flex flex-wrap gap-3 mt-1",children:[h.descartesResponse.tid&&e("span",{children:[e("span",{className:"text-slate-500",children:"TID:"})," ",e("span",{className:"font-mono text-blue-700",children:h.descartesResponse.tid})]}),h.descartesResponse.status&&e("span",{children:[e("span",{className:"text-slate-500",children:"Status:"})," ",e("span",{className:"text-green-700 font-medium",children:h.descartesResponse.status})]}),h.descartesResponse.error&&e("span",{className:"text-red-600",children:h.descartesResponse.error})]}),h.error&&!h.descartesResponse&&e("p",{className:"ml-8 text-red-600",children:h.error})]}),M===w&&e("div",{className:"ml-4 mt-2 p-3 bg-slate-100 rounded border border-slate-300 space-y-3 animate-fadeIn",children:[e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Qt,{size:12})," Mensaje Enviado (Request)"]}),h.requestBody&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:y=>{y.stopPropagation(),navigator.clipboard.writeText(h.requestBody||"")},children:[e(Pe,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:h.requestBody||"(No disponible)"})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Ae,{size:12})," Respuesta API (Response)"]}),h.responseRaw&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:y=>{y.stopPropagation(),navigator.clipboard.writeText(h.responseRaw||"")},children:[e(Pe,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:h.responseRaw||h.responseMessage||"(No disponible)"})]}),h.descartesResponse&&e("div",{children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[e(Tr,{size:12})," Respuesta Parseada"]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-32 font-mono",children:JSON.stringify(h.descartesResponse,null,2)})]})]})]},w)),e("div",{className:"pt-2 border-t border-slate-300 flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:["📈 Total: ",e("strong",{children:[x.transmissionResult.totalSuccess,"/",x.transmissionResult.totalSent]})," exitosos"]}),x.transmissionResult.totalFailed>0&&e("span",{className:"text-red-600 font-medium",children:["⚠️ ",x.transmissionResult.totalFailed," fallidos"]})]})]}),!x.transmissionResult&&x.fwbMessage&&e("div",{className:"mt-2 text-xs font-mono bg-white/70 p-2 rounded border border-slate-200",children:e("p",{children:[e("strong",{children:"FWB:"})," Mensaje generado correctamente"]})}),!x.transmissionResult&&x.fhlMessages&&x.fhlMessages.length>0&&e("div",{className:"mt-1 text-xs font-mono bg-white/70 p-2 rounded border border-slate-200",children:e("p",{className:"font-bold mb-1",children:[e("strong",{children:"FHL:"})," ",x.fhlMessages.length," mensaje(s) FHL generado(s)"]})})]})]})]}),l==="parties"&&e("div",{className:"space-y-4",children:[e("div",{className:"grid grid-cols-2 gap-4",children:[e(za,{title:"SHIPPER (Exportador)",icon:e(Rt,{size:16}),party:c.shipper,onUpdate:h=>g({...c,shipper:h}),readOnly:R}),e(za,{title:"CONSIGNEE (Importador)",icon:e(Ge,{size:16}),party:c.consignee,onUpdate:h=>g({...c,consignee:h}),readOnly:R})]}),e(Si,{agent:c.agent,onUpdate:h=>g({...c,agent:h}),readOnly:R}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-3 flex items-center gap-2",children:[e(nt,{size:14})," FIRMA Y EJECUCIÓN DEL TRANSPORTISTA"]}),e("div",{className:"grid grid-cols-3 gap-4",children:[e(G,{label:"Firma Autorizada",value:c.signature,onChange:h=>g({...c,signature:h}),readOnly:R,maxLength:20,required:!0}),e(G,{label:"Fecha de Ejecución",value:c.executionDate,onChange:h=>g({...c,executionDate:h}),readOnly:R,type:"date",required:!0}),e(G,{label:"Lugar de Ejecución",value:c.executionPlace,onChange:h=>g({...c,executionPlace:h}),readOnly:R,maxLength:17,required:!0})]})]})]}),l==="cargo"&&e("div",{className:"space-y-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"DATOS PRINCIPALES AWB"}),e("div",{className:"grid grid-cols-5 gap-3",children:[e(G,{label:"AWB Number *",value:c.awbNumber,onChange:h=>g({...c,awbNumber:h}),readOnly:R,maxLength:12,required:!0}),e(G,{label:"Origen (IATA) *",value:c.origin,onChange:h=>g({...c,origin:h}),readOnly:R,maxLength:3,required:!0}),e(G,{label:"Destino (IATA) *",value:c.destination,onChange:h=>g({...c,destination:h}),readOnly:R,maxLength:3,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Pago *"}),e("select",{value:c.paymentMethod,onChange:h=>g({...c,paymentMethod:h.target.value}),disabled:R,className:"text-sm border border-slate-300 rounded px-2 py-1.5 focus:ring-2 focus:ring-purple-500 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Servicio"}),e("select",{value:c.serviceCode||"",onChange:h=>g({...c,serviceCode:h.target.value}),disabled:R,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"",children:"--"}),e("option",{value:"AIRPORT_TO_AIRPORT",children:"A-A"}),e("option",{value:"DOOR_TO_DOOR_SERVICE",children:"D-D"}),e("option",{value:"AIRPORT_TO_DOOR",children:"A-D"}),e("option",{value:"DOOR_TO_AIRPORT",children:"D-A"})]})]})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"PESO Y VOLUMEN"}),e("div",{className:"grid grid-cols-6 gap-3",children:[e(G,{label:"Piezas *",value:c.pieces,onChange:h=>g({...c,pieces:parseInt(h)||0}),readOnly:R,type:"number",required:!0}),e(G,{label:"Peso Total *",value:c.weight,onChange:h=>g({...c,weight:parseFloat(h)||0}),readOnly:R,type:"number",required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Unidad"}),e("select",{value:c.weightUnit,onChange:h=>g({...c,weightUnit:h.target.value}),disabled:R,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"KILOGRAM",children:"KG"}),e("option",{value:"POUND",children:"LB"})]})]}),e(G,{label:"Volumen",value:c.volume,onChange:h=>g({...c,volume:parseFloat(h)||0}),readOnly:R,type:"number"}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Vol Unit"}),e("select",{value:c.volumeUnit||"CUBIC_METRE",onChange:h=>g({...c,volumeUnit:h.target.value}),disabled:R,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"CUBIC_METRE",children:"m³"}),e("option",{value:"CUBIC_CENTIMETRE",children:"cm³"}),e("option",{value:"CUBIC_FOOT",children:"ft³"})]})]}),e(G,{label:"SLAC",value:c.slac||"",onChange:h=>g({...c,slac:parseInt(h)||0}),readOnly:R,type:"number"})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2 flex items-center gap-2",children:[e(it,{size:14})," VUELOS / ROUTING"]}),c.flights.length===0?e("p",{className:"text-slate-500 italic text-sm",children:"Sin vuelos asignados"}):e("div",{className:"space-y-2",children:c.flights.map((h,w)=>e("div",{className:"grid grid-cols-4 gap-3 bg-slate-50 p-2 rounded-lg",children:[e(G,{label:"Vuelo",value:h.flightNumber,onChange:y=>{const T=[...c.flights];T[w]={...h,flightNumber:y},g({...c,flights:T})},readOnly:R}),e(G,{label:"Fecha",value:h.date,onChange:y=>{const T=[...c.flights];T[w]={...h,date:y},g({...c,flights:T})},readOnly:R,type:"date"}),e(G,{label:"Origen",value:h.origin,readOnly:!0}),e(G,{label:"Destino",value:h.destination,readOnly:!0})]},w))})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"DESCRIPCIÓN DE MERCANCÍA"}),e("div",{className:"grid grid-cols-2 gap-3",children:[e(G,{label:"Descripción *",value:c.description,onChange:h=>g({...c,description:h}),readOnly:R,maxLength:500,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"SPH Codes"}),e("div",{className:"text-sm bg-slate-50 px-2 py-1.5 rounded border border-slate-200 min-h-[32px] flex flex-wrap gap-1",children:c.specialHandlingCodes&&c.specialHandlingCodes.length>0?c.specialHandlingCodes.map(h=>e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-xs",children:h},h)):e("span",{className:"text-slate-400 text-xs",children:"Ninguno"})})]})]})]})]}),l==="financials"&&e("div",{className:"space-y-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"CHARGE DECLARATIONS"}),e("div",{className:"grid grid-cols-4 gap-3",children:[e(G,{label:"Moneda (ISO) *",value:c.currency,onChange:h=>g({...c,currency:h}),readOnly:R,maxLength:3,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Pago Weight *"}),e("select",{value:c.paymentMethod,onChange:h=>g({...c,paymentMethod:h.target.value}),disabled:R,className:"text-sm border border-slate-300 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})]}),e(G,{label:"Valor Declarado Carga",value:c.declaredValueCarriage||"",onChange:h=>g({...c,declaredValueCarriage:h}),readOnly:R}),e(G,{label:"Valor Declarado Aduana",value:c.declaredValueCustoms||"",onChange:h=>g({...c,declaredValueCustoms:h}),readOnly:R})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"font-bold text-sm text-slate-700",children:"RATE CHARGES"}),!R&&e("button",{onClick:()=>g({...c,rates:[...c.rates,{pieces:0,weight:0,rateClassCode:"QUANTITY_RATE",rateOrCharge:0,total:0,description:""}]}),className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200",children:"+ Añadir Rate"})]}),e("table",{className:"w-full text-xs",children:[e("thead",{className:"bg-slate-100",children:e("tr",{children:[e("th",{className:"text-left p-1.5 w-16",children:"Pzas"}),e("th",{className:"text-left p-1.5 w-20",children:"Peso"}),e("th",{className:"text-left p-1.5 w-24",children:"P.Cobr"}),e("th",{className:"text-left p-1.5 w-28",children:"Clase"}),e("th",{className:"text-left p-1.5 w-20",children:"Tarifa"}),e("th",{className:"text-left p-1.5 w-32",children:"Desc. Merc."}),e("th",{className:"text-right p-1.5 w-24",children:"Total"}),!R&&e("th",{className:"w-8"})]})}),e("tbody",{children:c.rates.map((h,w)=>e("tr",{className:"border-b",children:[e("td",{className:"p-1",children:e("input",{type:"number",value:h.pieces,onChange:y=>{const T=[...c.rates];T[w]={...h,pieces:parseInt(y.target.value)||0},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border border-slate-200 rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"number",value:h.weight,onChange:y=>{const T=[...c.rates],H=parseFloat(y.target.value)||0;T[w]={...h,weight:H,total:H*(h.rateOrCharge||0)},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border border-slate-200 rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"number",value:h.chargeableWeight||h.weight,onChange:y=>{const T=[...c.rates];T[w]={...h,chargeableWeight:parseFloat(y.target.value)||0},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border border-purple-200 rounded text-xs font-semibold text-purple-700 disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("select",{value:h.rateClassCode,onChange:y=>{const T=[...c.rates];T[w]={...h,rateClassCode:y.target.value},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"QUANTITY_RATE",children:"Q-Cantidad"}),e("option",{value:"MINIMUM_CHARGE",children:"M-Mínimo"}),e("option",{value:"NORMAL_RATE",children:"N-Normal"}),e("option",{value:"SPECIFIC_COMMODITY_RATE",children:"C-SCR"}),e("option",{value:"BASIC_CHARGE",children:"B-Básico"})]})}),e("td",{className:"p-1",children:e("input",{type:"number",step:"0.01",value:h.rateOrCharge,onChange:y=>{const T=[...c.rates],H=parseFloat(y.target.value)||0,Q=h.chargeableWeight||h.weight;T[w]={...h,rateOrCharge:H,total:Q*H},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"text",value:h.goodsDescriptionOverride||"",placeholder:"Auto",onChange:y=>{const T=[...c.rates];T[w]={...h,goodsDescriptionOverride:y.target.value||void 0},g({...c,rates:T})},disabled:R,className:"w-full px-1 py-0.5 border border-amber-200 rounded text-xs disabled:bg-slate-50 placeholder:text-slate-400",title:"Descripción de mercancía (ej: CONSOLIDATE FLOWERS). Deja vacío para usar valor automático."})}),e("td",{className:"p-1 text-right font-bold",children:[c.currency," ",h.total.toFixed(2)]}),!R&&e("td",{className:"p-1",children:e("button",{onClick:()=>{const y=c.rates.filter((T,H)=>H!==w);g({...c,rates:y})},className:"text-red-500 hover:text-red-700",children:e(Ke,{size:14})})})]},w))}),e("tfoot",{className:"bg-purple-50",children:e("tr",{children:[e("td",{colSpan:6,className:"p-1.5 text-right font-bold text-xs",children:"Total Weight:"}),e("td",{className:"p-1.5 text-right font-bold text-purple-700",children:[c.currency," ",dt.toFixed(2)]}),!R&&e("td",{})]})})]}),e("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e("div",{className:"flex items-center justify-between mb-2",children:e("p",{className:"text-xs font-bold text-blue-800 flex items-center gap-1",children:[e(Ae,{size:12}),"GOODS DESCRIPTION - Preview por Rate (máx 25 chars/línea)"]})}),e("div",{className:"space-y-2",children:c.rates.map((h,w)=>{var wt;const y=((wt=c.awbNumber)==null?void 0:wt.split("-")[0])||"";let T="",H="";h.goodsDescriptionOverride?(T=h.goodsDescriptionOverride.toUpperCase(),H="override-rate"):c.goodsDescriptionOverride?(T=c.goodsDescriptionOverride.toUpperCase(),H="override-master"):c.hasHouses?(T=`CONSOLIDATION AS PER
ATTACHED DOCUMENTS`,H="consolidado"):["145","985"].includes(y)?(T=c.commodityCode==="0609"||c.commodityCode==="609"?"CONSOLIDATE FLOWERS":"CUT FLOWERS",H="latam"):(T=va(h.description||c.description,150)||"FRESH CUT FLOWERS",H="auto");const Q=T.split(`
`),ye=Q.some(Ne=>Ne.length>25);return e("div",{className:`p-2 rounded border ${ye?"bg-red-50 border-red-200":"bg-white border-blue-100"}`,children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("span",{className:"text-[10px] font-bold text-slate-600",children:["Rate #",w+1]}),e("span",{className:`text-[10px] px-1 rounded ${H==="override-rate"?"bg-purple-100 text-purple-700":H==="override-master"?"bg-indigo-100 text-indigo-700":H==="consolidado"?"bg-amber-100 text-amber-700":H==="latam"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:[H==="override-rate"&&"✏️ Override Rate",H==="override-master"&&"✏️ Override Master",H==="consolidado"&&"📦 Consolidado",H==="latam"&&"✈️ LATAM",H==="auto"&&"🔄 Auto"]})]}),e("div",{className:"font-mono text-xs space-y-0.5",children:Q.map((Ne,qe)=>e("div",{className:"flex items-center gap-1",children:[e("span",{className:`px-1 rounded ${Ne.length>25?"bg-red-200 text-red-800":"bg-slate-100"}`,children:Ne||"(vacío)"}),e("span",{className:`text-[9px] ${Ne.length>25?"text-red-600 font-bold":"text-slate-400"}`,children:[Ne.length,"/25 ",Ne.length>25&&"⚠️"]})]},qe))})]},w)})}),e("p",{className:"text-[10px] text-blue-600 mt-2",children:'💡 Para editar: escribe en "Desc. Merc." de cada rate, o usa el Override Master arriba en "Descripción de Mercancía"'})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"font-bold text-sm text-slate-700",children:"OTHER CHARGES"}),!R&&e("button",{onClick:()=>g({...c,otherCharges:[...c.otherCharges,{code:"AW",entitlement:"DueCarrier",paymentMethod:"Prepaid",amount:0}]}),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded hover:bg-amber-200",children:"+ Añadir Cargo"})]}),e("table",{className:"w-full text-xs",children:[e("thead",{className:"bg-slate-100",children:e("tr",{children:[e("th",{className:"text-left p-1.5 w-24",children:"Código"}),e("th",{className:"text-left p-1.5 w-24",children:"Entitlement"}),e("th",{className:"text-left p-1.5 w-24",children:"Pago"}),e("th",{className:"text-right p-1.5 w-28",children:"Monto"}),!R&&e("th",{className:"w-8"})]})}),e("tbody",{children:c.otherCharges.map((h,w)=>e("tr",{className:"border-b",children:[e("td",{className:"p-1",children:e("select",{value:h.code,onChange:y=>{const T=[...c.otherCharges];T[w]={...h,code:y.target.value},g({...c,otherCharges:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs font-mono disabled:bg-slate-50",children:[e("option",{value:"AW",children:"AW-AWB Fee"}),e("option",{value:"FC",children:"FC-Fuel"}),e("option",{value:"SC",children:"SC-Security"}),e("option",{value:"MY",children:"MY-Customs"}),e("option",{value:"TX",children:"TX-Taxes"}),e("option",{value:"RA",children:"RA-DGR"}),e("option",{value:"CC",children:"CC-Collect Fee"}),e("option",{value:"IN",children:"IN-Insurance"})]})}),e("td",{className:"p-1",children:e("select",{value:h.entitlement,onChange:y=>{const T=[...c.otherCharges];T[w]={...h,entitlement:y.target.value},g({...c,otherCharges:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"DueCarrier",children:"Carrier"}),e("option",{value:"DueAgent",children:"Agent"})]})}),e("td",{className:"p-1",children:e("select",{value:h.paymentMethod,onChange:y=>{const T=[...c.otherCharges];T[w]={...h,paymentMethod:y.target.value},g({...c,otherCharges:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})}),e("td",{className:"p-1",children:e("input",{type:"number",step:"0.01",value:h.amount,onChange:y=>{const T=[...c.otherCharges];T[w]={...h,amount:parseFloat(y.target.value)||0},g({...c,otherCharges:T})},disabled:R,className:"w-full px-1 py-0.5 border rounded text-xs text-right disabled:bg-slate-50"})}),!R&&e("td",{className:"p-1",children:e("button",{onClick:()=>{const y=c.otherCharges.filter((T,H)=>H!==w);g({...c,otherCharges:y})},className:"text-red-500 hover:text-red-700",children:e(Ke,{size:14})})})]},w))}),e("tfoot",{className:"bg-amber-50",children:e("tr",{children:[e("td",{colSpan:3,className:"p-1.5 text-right font-bold text-xs",children:"Total Other:"}),e("td",{className:"p-1.5 text-right font-bold text-amber-700",children:[c.currency," ",or.toFixed(2)]}),!R&&e("td",{})]})})]})]}),e("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:e("div",{className:"flex justify-between items-center",children:[e("span",{className:"font-bold text-green-800",children:"GRAND TOTAL"}),e("span",{className:"font-bold text-green-800 text-xl",children:[c.currency," ",Ie.toFixed(2)]})]})})]}),l==="security"&&e("div",{className:"space-y-6",children:[e("div",{className:"bg-gradient-to-br from-purple-50 to-purple-50 border border-purple-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{className:"flex items-center gap-2",children:[e(Da,{size:18,className:"text-purple-600"}),e("h3",{className:"font-bold text-purple-800",children:"Special Handling Codes (SPH)"})]}),e("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:["Default: ",Cr(vr(c.awbNumber)).join(", ")]})]}),e("div",{className:"flex flex-wrap gap-2 mb-3",children:(c.specialHandlingCodes&&c.specialHandlingCodes.length>0?c.specialHandlingCodes:Cr(vr(c.awbNumber))).map((h,w)=>{var y,T;return e("span",{className:"inline-flex items-center gap-1 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[h,((y=$t[h])==null?void 0:y.description)&&e("span",{className:"text-purple-200 text-xs",children:["(",(T=$t[h])==null?void 0:T.description,")"]}),!R&&e("button",{onClick:()=>{const H=c.specialHandlingCodes||[];g({...c,specialHandlingCodes:H.filter(Q=>Q!==h)})},className:"ml-1 hover:bg-purple-700 rounded-full p-0.5",children:e(Ke,{size:12})})]},w)})}),!R&&e("div",{className:"border-t border-purple-200 pt-3",children:[e("p",{className:"text-xs text-purple-600 mb-2 font-medium",children:"Agregar código adicional:"}),e("div",{className:"flex flex-wrap gap-2",children:Object.entries($t).map(([h,w])=>{const y=c.specialHandlingCodes||Cr(vr(c.awbNumber)),T=y.includes(h);return e("button",{onClick:()=>{g(T?{...c,specialHandlingCodes:y.filter(H=>H!==h)}:{...c,specialHandlingCodes:[...y,h]})},className:`px-2 py-1 rounded text-xs font-medium transition-all ${T?"bg-purple-600 text-white":"bg-white border border-purple-300 text-purple-700 hover:bg-purple-100"}`,title:w.description,children:h},h)})})]}),e("p",{className:"text-xs text-purple-500 mt-3 italic",children:"💡 Si no envías SPH desde tu backend, se usarán los valores por defecto según la aerolínea."})]}),e("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3",children:[e(Ae,{size:18,className:"text-amber-600"}),e("h3",{className:"font-bold text-amber-800",children:"Special Service Request (SSR)"}),e("span",{className:"text-xs bg-amber-100 text-amber-600 px-2 py-0.5 rounded ml-auto",children:"Opcional"})]}),e("textarea",{value:c.specialServiceRequest||"",onChange:h=>g({...c,specialServiceRequest:h.target.value||void 0}),disabled:R,placeholder:"Ej: MUST BE KEPT ABOVE 5 DEGREES CELSIUS. / EN CLOSE POUCH WITH EXPORT DOCUMENTS",className:"w-full px-3 py-2 border border-amber-200 rounded-lg text-sm resize-none h-20 focus:ring-2 focus:ring-amber-300 outline-none disabled:bg-slate-50"}),e("p",{className:"text-xs text-amber-600 mt-2 italic",children:"💡 Instrucciones especiales de servicio que se envían a la aerolínea. Deja vacío si no se requiere."})]}),e("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3",children:[e(Ue,{size:18,className:"text-amber-600"}),e("h3",{className:"font-bold text-amber-800",children:"OCI / Información de Seguridad y Aduanas"})]}),e("div",{className:"bg-white/70 rounded-lg p-3 border border-amber-200",children:[e("p",{className:"text-amber-700 text-sm mb-2 font-bold flex items-center gap-1",children:[e(Xt,{size:14})," Vista previa del OCI que se enviará:"]}),e("div",{className:"space-y-1 text-xs font-mono",children:[(Y.includeConsigneeTIN??!0)&&((Za=c.consignee)==null?void 0:Za.taxId)&&e("div",{className:"bg-green-100 text-green-800 p-2 rounded flex items-center gap-2",children:[e(ve,{size:12,className:"text-green-600"}),e("span",{children:[e("strong",{children:[((Ja=(Qa=c.consignee)==null?void 0:Qa.address)==null?void 0:Ja.countryCode)||"US","/AGT/T/"]}),c.consignee.taxId]}),e("span",{className:"text-green-600 text-[10px] ml-auto",children:"← NIT Importer"})]}),(Y.includeConsigneeTIN??!0)&&!((eo=c.consignee)!=null&&eo.taxId)&&e("div",{className:"bg-slate-100 text-slate-500 p-2 rounded flex items-center gap-2 italic",children:[e(ie,{size:12,className:"text-slate-400"}),e("span",{children:"Importer sin taxId - No se enviará OCI de TIN"})]}),Y.includeShipperTIN&&((to=c.shipper)==null?void 0:to.taxId)&&e("div",{className:"bg-purple-100 text-purple-800 p-2 rounded flex items-center gap-2",children:[e(ve,{size:12,className:"text-purple-600"}),e("span",{children:[e("strong",{children:[((ao=(ro=c.shipper)==null?void 0:ro.address)==null?void 0:ao.countryCode)||"CO","/AGT/T/"]}),c.shipper.taxId]}),e("span",{className:"text-purple-600 text-[10px] ml-auto",children:"← NIT Shipper"})]}),((oo=Y.securityOci)==null?void 0:oo.enabled)&&e(ce,{children:[Y.securityOci.regulatedAgentNumber&&e("div",{className:"bg-amber-100 text-amber-800 p-2 rounded flex items-center gap-2",children:[e("span",{children:[e("strong",{children:"CO/AGT/RA/"}),Y.securityOci.regulatedAgentNumber]}),e("span",{className:"text-amber-600 text-[10px] ml-auto",children:"← Agente Regulado"})]}),Y.securityOci.expiryDate&&e("div",{className:"bg-orange-100 text-orange-800 p-2 rounded",children:[e("strong",{children:"ED/"}),Y.securityOci.expiryDate]}),Y.securityOci.screeningMethod&&e("div",{className:"bg-blue-100 text-blue-800 p-2 rounded",children:[e("strong",{children:"SM/"}),Y.securityOci.screeningMethod]}),Y.securityOci.screeningDate&&e("div",{className:"bg-cyan-100 text-cyan-800 p-2 rounded",children:[e("strong",{children:"SD/"}),Y.securityOci.screeningDate]}),Y.securityOci.screenerName&&e("div",{className:"bg-pink-100 text-pink-800 p-2 rounded",children:[e("strong",{children:"SN/"}),Y.securityOci.screenerName]})]}),!(Y.includeConsigneeTIN??!0)&&!Y.includeShipperTIN&&!((no=Y.securityOci)!=null&&no.enabled)&&e("div",{className:"bg-slate-100 text-slate-500 p-2 rounded italic",children:"No hay OCI configurados. Activa opciones en el panel de Configuración."})]}),e("p",{className:"text-amber-500 text-[10px] mt-2 italic",children:["💡 Para modificar estos valores, ve al panel de ",e("strong",{children:"Configuración"})," (⚙️)"]})]})]})]}),l==="houses"&&e("div",{className:"space-y-2",children:[e("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-slate-50/95 backdrop-blur-sm py-2 -mt-2 -mx-2 px-2 z-10 border-b border-slate-200",children:[e("div",{className:"flex items-center gap-3",children:[e("h3",{className:"font-bold text-slate-700 text-sm",children:"House Waybills"}),e("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${c.hasHouses?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:c.hasHouses?`${c.houseBills.length} houses`:"Directo"})]}),c.hasHouses&&c.houseBills.length>0&&e("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>Te(new Set(c.houseBills.map((h,w)=>w))),className:"text-[10px] text-purple-600 hover:text-purple-800 px-2 py-1 rounded hover:bg-purple-50",children:"Expandir todo"}),e("button",{onClick:()=>Te(new Set),className:"text-[10px] text-slate-500 hover:text-slate-700 px-2 py-1 rounded hover:bg-slate-100",children:"Colapsar todo"})]})]}),c.hasHouses?e("div",{className:"space-y-1.5 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:c.houseBills.map((h,w)=>e(Va,{house:h,index:w,isExpanded:ze.has(w),onToggle:lt,onUpdate:rr,masterOrigin:c.origin,masterDestination:c.destination,isReadOnly:R},h.id||w))}):e("div",{className:"text-center py-8 text-slate-400",children:[e(ge,{size:32,className:"mx-auto mb-2 opacity-50"}),e("p",{className:"text-sm",children:"Envío directo - No tiene house waybills"})]}),c.hasHouses&&c.houseBills.length>0&&e("div",{className:"mt-3 pt-2 border-t border-slate-200 flex items-center justify-between text-xs text-slate-500",children:[e("span",{children:["Total: ",c.houseBills.reduce((h,w)=>h+w.pieces,0)," piezas, ",c.houseBills.reduce((h,w)=>h+w.weight,0).toFixed(2)," kg"]}),e("span",{className:"text-amber-600 font-medium",children:[ze.size," de ",c.houseBills.length," expandidos"]})]})]}),l==="json"&&e("div",{className:"h-full flex flex-col",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("div",{className:"bg-slate-100 p-1 rounded-lg inline-flex items-center shadow-inner",children:[e("button",{onClick:()=>m("fwb"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${d==="fwb"?"bg-white text-emerald-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(Ot,{size:14}),"FWB/",((io=z==null?void 0:z.messageVersion)==null?void 0:io.split("/")[1])||"16"]}),c.hasHouses&&e("button",{onClick:()=>m("fhl"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${d==="fhl"?"bg-white text-emerald-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(ot,{size:14}),"FHL/4 (Houses)"]})]}),e("div",{className:"flex gap-2",children:e("button",{onClick:()=>{Ct(d==="fwb"?(z==null?void 0:z.fullMessage)||"":ct||"")},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors",children:[f?e(Ar,{size:14,className:"text-green-600"}):e(Pe,{size:14}),f?"Copiado!":"Copiar EDI"]})})]}),b&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4 flex items-center gap-2 text-red-700",children:[e(ie,{size:16})," Error generando EDI: ",b]}),e("div",{className:"mb-4 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg",children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(Ot,{size:16,className:"text-emerald-600"}),e("span",{className:"font-bold text-emerald-800",children:"Vista EDI - IATA CARGO-IMP"}),e("span",{className:"text-xs bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded",children:(z==null?void 0:z.messageVersion)||"FWB/16"})]}),e("p",{className:"text-xs text-emerald-600",children:"Formato EDI legado IATA Cargo Interchange Message Procedures. Cada segmento se visualiza como una tarjeta editable con límites de caracteres."})]}),K&&e("div",{className:`mb-4 p-3 rounded-lg border ${K.isDefault?"bg-amber-50 border-amber-300":K.source==="custom"?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:[e("div",{className:"flex items-center justify-between mb-2",children:e("div",{className:"flex items-center gap-2",children:[e(it,{size:14,className:K.isDefault?"text-amber-600":"text-blue-600"}),e("span",{className:`font-bold text-sm ${K.isDefault?"text-amber-800":"text-blue-800"}`,children:K.airlineName}),e("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${K.source==="custom"?"bg-purple-200 text-purple-700":K.source==="configured"?"bg-blue-200 text-blue-700":"bg-amber-200 text-amber-700"}`,children:K.source==="custom"?"✏️ Personalizada":K.source==="configured"?"✓ Pre-configurada":"⚠️ DEFAULT"})]})}),e("div",{className:"flex flex-wrap gap-2 mb-2",children:[e("span",{className:"text-[10px] bg-white px-1.5 py-0.5 rounded border border-slate-200",children:[e("strong",{children:"FWB:"})," ",K.policy.fwbVersion]}),e("span",{className:"text-[10px] bg-white px-1.5 py-0.5 rounded border border-slate-200",children:[e("strong",{children:"FHL:"})," ",K.policy.fhlVersion]}),K.policy.includeUNB_UNZ&&e("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"UNB/UNZ"}),K.policy.ociWithEori&&e("span",{className:"text-[10px] bg-violet-100 text-violet-700 px-1.5 py-0.5 rounded",children:"EORI"}),K.policy.sphCodes&&K.policy.sphCodes.length>0&&e("span",{className:"text-[10px] bg-rose-100 text-rose-700 px-1.5 py-0.5 rounded",children:["SPH: ",K.policy.sphCodes.join(", ")]})]}),K.warnings.length>0&&e("div",{className:"mt-2 space-y-1",children:K.warnings.map((h,w)=>e("p",{className:"text-xs text-amber-700",children:h},w))}),K.isDefault&&e("button",{onClick:()=>re(!0),className:"mt-2 text-xs text-amber-700 underline hover:text-amber-900 flex items-center gap-1",children:[e(Ir,{size:12})," Configurar política para aerolínea ",(so=c==null?void 0:c.awbNumber)==null?void 0:so.split("-")[0]]})]}),b&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4 flex items-center gap-2 text-red-700",children:[e(ie,{size:16})," Error generando EDI: ",b]}),e("div",{className:"flex-1 overflow-y-auto",children:[d==="fwb"&&z&&e(ce,{children:[e($a,{message:z,policy:K==null?void 0:K.policy,onValidationChange:({canSend:h,errorCount:w})=>{j(w>0),Oe(w)}}),e(Pa,{message:z,onSegmentChange:(h,w)=>{console.log(`[CARGO-IMP] Editando segmento ${h}:`,w)},onToggleSegment:P})]}),d==="fhl"&&e(ce,{children:be&&be.length>0?e(ce,{children:[e("div",{className:"mb-3 p-2 bg-purple-50 border border-purple-200 rounded-lg",children:e("span",{className:"text-sm font-bold text-purple-800",children:["📦 ",be.length," Mensaje(s) FHL"]})}),be.map((h,w)=>e("div",{className:"mb-4",children:[e("div",{className:"bg-purple-100 px-3 py-2 rounded-t-lg font-bold text-purple-800 flex items-center gap-2",children:[e(ot,{size:14}),"FHL #",w+1]}),e($a,{message:h,policy:K==null?void 0:K.policy,defaultCollapsed:!0,compact:!0}),e(Pa,{message:h,onSegmentChange:(y,T)=>{console.log(`[CARGO-IMP FHL ${w}] Editando segmento ${y}:`,T)},onToggleSegment:P})]},w))]}):e("div",{className:"text-slate-400 italic p-4 text-center",children:"No hay houses en este envío. FHL solo se genera para envíos consolidados."})})]}),z&&e("details",{className:"mt-4",children:[e("summary",{className:"cursor-pointer text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2 py-2",children:[e(Ot,{size:14})," Ver EDI Raw (Formato plano)"]}),e("div",{className:"bg-slate-900 text-green-400 p-4 rounded-lg overflow-auto font-mono text-xs leading-relaxed max-h-64 mt-2",children:e("pre",{children:z.fullMessage})})]})]}),l==="xml"&&e("div",{className:"h-full flex flex-col",children:F?e(Qn,{bundle:F,onCopy:(h,w)=>{console.log(`[CARGO-XML] Copiado ${w}`)}}):e("div",{className:"flex items-center justify-center h-full text-slate-400",children:e("div",{className:"text-center",children:[e(Ae,{size:48,className:"mx-auto mb-4 opacity-50"}),e("p",{children:"No se pudo generar el Cargo-XML"}),e("p",{className:"text-sm",children:"Verifique los datos del envío"})]})})})]}),e("div",{className:"px-3 py-2 border-t border-slate-100 flex justify-between items-center bg-white",children:[e("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px]",children:(x==null?void 0:x.allSuccess)&&e("span",{className:"text-green-500",children:"EDI copiado al portapapeles"})}),e("div",{className:"flex gap-1.5",children:[e("button",{onClick:Qe,className:"px-3 py-1.5 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:"Cerrar"}),he&&z&&e("button",{onClick:J,className:"px-4 py-1.5 text-xs bg-emerald-600 hover:bg-emerald-700 text-white rounded transition-colors flex items-center gap-1.5 font-semibold",children:[e(Pe,{size:12})," Copiar EDI"]})]})]})]}),_e&&e("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-amber-300 max-w-md mx-4 overflow-hidden animate-bounce-in",children:[e("div",{className:"bg-gradient-to-r from-amber-400 to-orange-400 px-6 py-4 flex items-center gap-3",children:[e(ie,{size:28,className:"text-white"}),e("div",{children:[e("h3",{className:"text-white font-bold text-lg",children:"⚠️ Mensaje con Errores"}),e("p",{className:"text-amber-100 text-xs",children:"Validación IATA CARGO-IMP"})]})]}),e("div",{className:"px-6 py-5",children:[e("p",{className:"text-slate-700 mb-3",children:["El mensaje EDI tiene ",e("span",{className:"font-bold text-red-600",children:[ue," error(es)"]})," de validación según las especificaciones IATA."]}),e("p",{className:"text-slate-600 text-sm mb-4",children:["La aerolínea podría ",e("strong",{children:"rechazar"})," el mensaje o generar un ",e("strong",{children:"HOLD"})," en el sistema de Risk Assessment (ACAS/PLACI)."]}),e("p",{className:"text-slate-800 font-semibold text-center text-base mb-2",children:"¿Está seguro que desea transmitir?"})]}),e("div",{className:"px-6 py-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-200",children:[e("button",{onClick:()=>ee(!1),className:"px-5 py-2.5 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-semibold transition-colors",children:"Cancelar"}),e("button",{onClick:()=>{ee(!1),Ee()},className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold transition-colors flex items-center gap-2 shadow-lg",children:[e(Qt,{size:16})," Sí, Enviar de Todas Formas"]})]})]})}),e(zn,{isOpen:le,onClose:()=>re(!1),onConfigChange:h=>{Fe(h),Re(w=>w+1)},onSaveConfig:i})]})},Fr=[{id:"uat-consolidado-20251217-001",status:"DRAFT",awbNumber:"145-11223344",origin:"BOG",destination:"MIA",pieces:75,weight:1275,weightUnit:"KILOGRAM",volume:7.5,volumeUnit:"CUBIC_METRE",dimensions:[{pieces:75,length:100,width:40,height:25,unit:"CENTIMETRE"}],description:"CONSOLIDATE FLOWERS",commodityCode:"0609",currency:"USD",paymentMethod:"Collect",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:75,weight:1275,chargeableWeight:1350,rateClassCode:"Q",rateOrCharge:1.1,total:1485,description:"CONSOLIDATE FLOWERS",commodityCode:"0609"}],otherCharges:[],oci:[{countryCode:"US",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["EAP","PER"],hasHouses:!0,houseBills:[{id:"h1",hawbNumber:"HAWB20251217A",pieces:25,weight:425,shipperName:"FINCA LAS ROSAS SAS",consigneeName:"BLOOM MIAMI LLC",natureOfGoods:"ROSES RED",commonName:"RED ROSES"},{id:"h2",hawbNumber:"HAWB20251217B",pieces:25,weight:425,shipperName:"FLORES DEL CAMPO LTDA",consigneeName:"SUNNY FLOWERS INC",natureOfGoods:"CARNATIONS",commonName:"CARNATIONS"},{id:"h3",hawbNumber:"HAWB20251217C",pieces:25,weight:425,shipperName:"ORQUIDEAS COLOMBIA SAS",consigneeName:"ORCHID WORLD USA",natureOfGoods:"ORCHIDS",commonName:"ORCHIDS"}],shipper:{name:"CONSOLIDADORA FLORES COLOMBIA SAS",address:{street:"CRA 7 NO 140-20 PISO 3",place:"BOGOTA",countryCode:"CO",postalCode:"110121"}},consignee:{name:"USA FLOWER DISTRIBUTORS LLC",address:{street:"8000 NW 36TH STREET SUITE 200",place:"DORAL",state:"FL",countryCode:"US",postalCode:"33166"}},flights:[{flightNumber:"LA4567",date:"2025-12-18",origin:"BOG",destination:"MIA",carrierCode:"LA"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]},{id:"uat-directo-20251217-002",status:"DRAFT",awbNumber:"145-55667788",origin:"BOG",destination:"MIA",pieces:25,weight:425,weightUnit:"KILOGRAM",volume:2.5,volumeUnit:"CUBIC_METRE",dimensions:[{pieces:25,length:100,width:40,height:25,unit:"CENTIMETRE"}],description:"CUT FLOWERS",commodityCode:"0603",currency:"USD",paymentMethod:"Collect",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:25,weight:425,chargeableWeight:450,rateClassCode:"Q",rateOrCharge:1.1,total:495,description:"CUT FLOWERS",commodityCode:"0603"}],otherCharges:[],oci:[{countryCode:"US",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["EAP","PER"],hasHouses:!1,houseBills:[],shipper:{name:"FLORES DIRECTAS DE COLOMBIA SAS",address:{street:"CRA 7 NO 140-20 PISO 3",place:"BOGOTA",countryCode:"CO",postalCode:"110121"}},consignee:{name:"DIRECT FLOWERS USA INC",address:{street:"8000 NW 36TH STREET SUITE 100",place:"DORAL",state:"FL",countryCode:"US",postalCode:"33166"}},flights:[{flightNumber:"LA4567",date:"2025-12-18",origin:"BOG",destination:"MIA",carrierCode:"LA"},{flightNumber:"AA1234",date:"2025-12-18",origin:"MIA",destination:"JFK",carrierCode:"AA"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]},{id:"uat-iberia-20251217-003",status:"DRAFT",awbNumber:"075-99887766",origin:"BOG",destination:"MAD",pieces:30,weight:510,weightUnit:"KILOGRAM",volume:3,volumeUnit:"CUBIC_METRE",dimensions:[],description:"FRESH FLOWERS",commodityCode:"0603",currency:"USD",paymentMethod:"Prepaid",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:30,weight:510,chargeableWeight:540,rateClassCode:"Q",rateOrCharge:1.5,total:810,description:"FRESH FLOWERS",commodityCode:"0603"}],otherCharges:[{code:"MY",entitlement:"DueCarrier",amount:25,paymentMethod:"Prepaid"},{code:"AW",entitlement:"DueAgent",amount:15,paymentMethod:"Prepaid"}],oci:[{countryCode:"ES",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["ECC","EAP","PER"],hasHouses:!1,houseBills:[],shipper:{name:"EXPORTADORA FLORES IBERIA SAS",address:{street:"CALLE 100 NO 20-30",place:"BOGOTA",countryCode:"CO",postalCode:"110111"}},consignee:{name:"FLORES MADRID SL",address:{street:"CALLE GRAN VIA 123",place:"MADRID",countryCode:"ES",postalCode:"28013"}},flights:[{flightNumber:"IB6524",date:"2025-12-18",origin:"BOG",destination:"MAD",carrierCode:"IB"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]}],Ai=`
/* Reset básico para Shadow DOM del Portal */
:host {
  /* No usar all: initial para evitar perder estilos de Tailwind en prod */
  display: block !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 2147483647 !important;
  pointer-events: none !important;
  /* Forzar nuevo stacking context */
  isolation: isolate !important;
  contain: layout style !important;
}

:host([data-visible="true"]) {
  pointer-events: auto !important;
}

/* Contenedor raíz del portal */
#cargo-imp-portal-mount {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 2147483647 !important;
  pointer-events: none !important;
}

#cargo-imp-portal-mount:has(.modal-overlay),
#cargo-imp-portal-mount:has(.fixed) {
  pointer-events: auto !important;
}

*, *::before, *::after {
  box-sizing: border-box;
}

/* ===================================================== */
/* ESTILOS CRÍTICOS PARA PRODUCCIÓN                     */
/* Aseguran layout correcto independiente de Tailwind   */
/* ===================================================== */

/* Flexbox container para la vista fullscreen */
.fixed.inset-0.flex.flex-col {
  display: flex !important;
  flex-direction: column !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Flex-1 para contenido scrolleable */
.flex-1 {
  flex: 1 1 0% !important;
}

/* Flex-shrink-0 para header/footer */
.flex-shrink-0 {
  flex-shrink: 0 !important;
}

/* Overflow para scrolling */
.overflow-y-auto {
  overflow-y: auto !important;
}

.overflow-hidden {
  overflow: hidden !important;
}

/* Footer siempre visible al fondo */
footer.flex-shrink-0 {
  flex-shrink: 0 !important;
  margin-top: auto !important;
}

/* Header siempre arriba */
header.flex-shrink-0 {
  flex-shrink: 0 !important;
}

/* Modal overlay */
.modal-overlay {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 50 !important;
}

/* Modal content */
.modal-content {
  display: flex !important;
  flex-direction: column !important;
  background-color: white !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
  max-height: 88vh !important;
  overflow: hidden !important;
}

/* Grids básicos */
.grid {
  display: grid !important;
}

.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
.grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
.grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)) !important; }
.grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)) !important; }
.grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)) !important; }

/* Gap */
.gap-1 { gap: 0.25rem !important; }
.gap-2 { gap: 0.5rem !important; }
.gap-3 { gap: 0.75rem !important; }
.gap-4 { gap: 1rem !important; }
.gap-6 { gap: 1.5rem !important; }

/* Padding y margin críticos */
.p-4 { padding: 1rem !important; }
.p-6 { padding: 1.5rem !important; }
.px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
.px-6 { padding-left: 1.5rem !important; padding-right: 1.5rem !important; }
.py-2 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
.py-3 { padding-top: 0.75rem !important; padding-bottom: 0.75rem !important; }
.py-4 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
.py-6 { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
.mb-4 { margin-bottom: 1rem !important; }
.mb-6 { margin-bottom: 1.5rem !important; }

/* Colores de fondo críticos */
.bg-white { background-color: #ffffff !important; }
.bg-gray-50 { background-color: #f9fafb !important; }
.bg-slate-50 { background-color: #f8fafc !important; }
.bg-purple-50 { background-color: #faf5ff !important; }
.bg-purple-600 { background-color: #9333ea !important; }
.bg-purple-700 { background-color: #7c3aed !important; }

/* Colores de texto críticos */
.text-white { color: #ffffff !important; }
.text-slate-500 { color: #64748b !important; }
.text-slate-600 { color: #475569 !important; }
.text-slate-700 { color: #334155 !important; }
.text-slate-800 { color: #1e293b !important; }
.text-slate-900 { color: #0f172a !important; }
.text-purple-600 { color: #9333ea !important; }
.text-purple-700 { color: #7c3aed !important; }

/* Bordes */
.border { border-width: 1px !important; border-style: solid !important; }
.border-t { border-top-width: 1px !important; border-top-style: solid !important; }
.border-b { border-bottom-width: 1px !important; border-bottom-style: solid !important; }
.border-slate-100 { border-color: #f1f5f9 !important; }
.border-slate-200 { border-color: #e2e8f0 !important; }
.border-slate-300 { border-color: #cbd5e1 !important; }

/* Rounded */
.rounded { border-radius: 0.25rem !important; }
.rounded-lg { border-radius: 0.5rem !important; }
.rounded-xl { border-radius: 0.75rem !important; }
.rounded-2xl { border-radius: 1rem !important; }
.rounded-full { border-radius: 9999px !important; }

/* Shadow */
.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important; }
.shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important; }
.shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important; }
.shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important; }

/* CRÍTICO: Gradientes de fondo para vista CompactAwbView */
.bg-gradient-to-br {
  background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)) !important;
}
.bg-gradient-to-r {
  background-image: linear-gradient(to right, var(--tw-gradient-stops)) !important;
}
.from-slate-100 { --tw-gradient-from: #f1f5f9 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(241, 245, 249, 0)) !important; }
.via-purple-50 { --tw-gradient-stops: var(--tw-gradient-from), #faf5ff, var(--tw-gradient-to, rgba(250, 245, 255, 0)) !important; }
.to-indigo-100 { --tw-gradient-to: #e0e7ff !important; }
.from-purple-600 { --tw-gradient-from: #9333ea !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(147, 51, 234, 0)) !important; }
.to-indigo-600 { --tw-gradient-to: #4f46e5 !important; }
.from-purple-700 { --tw-gradient-from: #7c3aed !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(124, 58, 237, 0)) !important; }
.via-purple-800 { --tw-gradient-stops: var(--tw-gradient-from), #6b21a8, var(--tw-gradient-to, rgba(107, 33, 168, 0)) !important; }
.to-indigo-900 { --tw-gradient-to: #312e81 !important; }
.from-sky-300 { --tw-gradient-from: #7dd3fc !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(125, 211, 252, 0)) !important; }
.to-purple-500 { --tw-gradient-to: #a855f7 !important; }
.from-sky-400 { --tw-gradient-from: #38bdf8 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(56, 189, 248, 0)) !important; }
.from-purple-400 { --tw-gradient-from: #c084fc !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(192, 132, 252, 0)) !important; }
.to-purple-600 { --tw-gradient-to: #9333ea !important; }

/* Backdrop blur */
.backdrop-blur-sm { backdrop-filter: blur(4px) !important; -webkit-backdrop-filter: blur(4px) !important; }

/* Opacidad de fondo blanco */
.bg-white/80 { background-color: rgba(255, 255, 255, 0.8) !important; }
.bg-white/20 { background-color: rgba(255, 255, 255, 0.2) !important; }

/* Colores adicionales de fondo */
.bg-indigo-100 { background-color: #e0e7ff !important; }
.bg-sky-400/20 { background-color: rgba(56, 189, 248, 0.2) !important; }

/* Sticky positioning */
.sticky { position: sticky !important; }
.top-0 { top: 0 !important; }
.z-10 { z-index: 10 !important; }

/* Colores de texto adicionales */
.text-purple-200 { color: #e9d5ff !important; }
.text-sky-100 { color: #e0f2fe !important; }
.text-green-600 { color: #16a34a !important; }
.text-sky-600 { color: #0284c7 !important; }
.text-amber-700 { color: #b45309 !important; }
.text-red-700 { color: #b91c1c !important; }
.text-indigo-600 { color: #4f46e5 !important; }

/* Bordes adicionales */
.border-sky-400/30 { border-color: rgba(56, 189, 248, 0.3) !important; }
.border-white/30 { border-color: rgba(255, 255, 255, 0.3) !important; }

/* Colores de fondo para estados */
.bg-gray-100 { background-color: #f3f4f6 !important; }
.text-gray-600 { color: #4b5563 !important; }
.bg-amber-100 { background-color: #fef3c7 !important; }
.bg-green-100 { background-color: #dcfce7 !important; }
.text-green-700 { color: #15803d !important; }
.bg-red-100 { background-color: #fee2e2 !important; }

/* Overflow */
.overflow-auto { overflow: auto !important; }

/* Flexbox helpers */
.flex { display: flex !important; }
.flex-col { flex-direction: column !important; }
.flex-row { flex-direction: row !important; }
.items-center { align-items: center !important; }
.justify-between { justify-content: space-between !important; }
.justify-center { justify-content: center !important; }

/* Tamaños de texto */
.text-xs { font-size: 0.75rem !important; line-height: 1rem !important; }
.text-sm { font-size: 0.875rem !important; line-height: 1.25rem !important; }
.text-base { font-size: 1rem !important; line-height: 1.5rem !important; }
.text-lg { font-size: 1.125rem !important; line-height: 1.75rem !important; }
.text-xl { font-size: 1.25rem !important; line-height: 1.75rem !important; }
.text-2xl { font-size: 1.5rem !important; line-height: 2rem !important; }
.text-3xl { font-size: 1.875rem !important; line-height: 2.25rem !important; }
.text-4xl { font-size: 2.25rem !important; line-height: 2.5rem !important; }

/* Font weights */
.font-medium { font-weight: 500 !important; }
.font-semibold { font-weight: 600 !important; }
.font-bold { font-weight: 700 !important; }

/* Max widths */
.max-w-6xl { max-width: 72rem !important; }
.max-w-7xl { max-width: 80rem !important; }
.mx-auto { margin-left: auto !important; margin-right: auto !important; }

/* Z-index */
.z-50 { z-index: 50 !important; }

/* Inset-0 */
.inset-0 {
  top: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  left: 0 !important;
}

/* Width/Height */
.w-full { width: 100% !important; }
.h-16 { height: 4rem !important; }
`+`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-content:""}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-red-900:oklch(39.6% .141 25.723);--color-orange-50:oklch(98% .016 73.684);--color-orange-100:oklch(95.4% .038 75.164);--color-orange-200:oklch(90.1% .076 70.697);--color-orange-300:oklch(83.7% .128 66.29);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-orange-800:oklch(47% .157 37.304);--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-200:oklch(92.4% .12 95.746);--color-amber-300:oklch(87.9% .169 91.605);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-amber-800:oklch(47.3% .137 46.201);--color-amber-900:oklch(41.4% .112 45.904);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-200:oklch(94.5% .129 101.54);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-300:oklch(87.1% .15 154.449);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-green-900:oklch(39.3% .095 152.535);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-100:oklch(95% .052 163.051);--color-emerald-200:oklch(90.5% .093 164.15);--color-emerald-300:oklch(84.5% .143 164.978);--color-emerald-400:oklch(76.5% .177 163.223);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-600:oklch(59.6% .145 163.225);--color-emerald-700:oklch(50.8% .118 165.612);--color-emerald-800:oklch(43.2% .095 166.913);--color-teal-50:oklch(98.4% .014 180.72);--color-teal-300:oklch(85.5% .138 181.071);--color-teal-700:oklch(51.1% .096 186.391);--color-cyan-50:oklch(98.4% .019 200.873);--color-cyan-100:oklch(95.6% .045 203.388);--color-cyan-200:oklch(91.7% .08 205.041);--color-cyan-300:oklch(86.5% .127 207.078);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-600:oklch(60.9% .126 221.723);--color-cyan-700:oklch(52% .105 223.128);--color-cyan-800:oklch(45% .085 224.283);--color-sky-50:oklch(97.7% .013 236.62);--color-sky-100:oklch(95.1% .026 236.824);--color-sky-200:oklch(90.1% .058 230.902);--color-sky-300:oklch(82.8% .111 230.318);--color-sky-400:oklch(74.6% .16 232.661);--color-sky-500:oklch(68.5% .169 237.323);--color-sky-600:oklch(58.8% .158 241.966);--color-sky-700:oklch(50% .134 242.749);--color-sky-800:oklch(44.3% .11 240.79);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-blue-900:oklch(37.9% .146 265.522);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-200:oklch(87% .065 274.039);--color-indigo-300:oklch(78.5% .115 274.713);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-indigo-800:oklch(39.8% .195 277.366);--color-indigo-900:oklch(35.9% .144 278.697);--color-violet-50:oklch(96.9% .016 293.756);--color-violet-100:oklch(94.3% .029 294.588);--color-violet-300:oklch(81.1% .111 293.571);--color-violet-700:oklch(49.1% .27 292.581);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-purple-800:oklch(43.8% .218 303.724);--color-purple-900:oklch(38.1% .176 304.987);--color-fuchsia-50:oklch(97.7% .017 320.058);--color-fuchsia-100:oklch(95.2% .037 318.852);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-fuchsia-400:oklch(74% .238 322.16);--color-fuchsia-500:oklch(66.7% .295 322.15);--color-fuchsia-600:oklch(59.1% .293 322.896);--color-fuchsia-700:oklch(51.8% .253 323.949);--color-pink-50:oklch(97.1% .014 343.198);--color-pink-100:oklch(94.8% .028 342.258);--color-pink-300:oklch(82.3% .12 346.018);--color-pink-700:oklch(52.5% .223 3.958);--color-pink-800:oklch(45.9% .187 3.815);--color-rose-50:oklch(96.9% .015 12.422);--color-rose-100:oklch(94.1% .03 12.58);--color-rose-300:oklch(81% .117 11.638);--color-rose-700:oklch(51.4% .222 16.935);--color-slate-50:oklch(98.4% .003 247.858);--color-slate-100:oklch(96.8% .007 247.896);--color-slate-200:oklch(92.9% .013 255.508);--color-slate-300:oklch(86.9% .022 252.894);--color-slate-400:oklch(70.4% .04 256.788);--color-slate-500:oklch(55.4% .046 257.417);--color-slate-600:oklch(44.6% .043 257.281);--color-slate-700:oklch(37.2% .044 257.287);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--container-3xl:48rem;--container-4xl:56rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--tracking-wider:.05em;--leading-tight:1.25;--leading-relaxed:1.625;--leading-loose:2;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--animate-bounce:bounce 1s infinite;--blur-sm:8px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.right-0{right:calc(var(--spacing)*0)}.right-1{right:calc(var(--spacing)*1)}.right-2{right:calc(var(--spacing)*2)}.right-4{right:calc(var(--spacing)*4)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-1{bottom:calc(var(--spacing)*1)}.bottom-2{bottom:calc(var(--spacing)*2)}.bottom-full{bottom:100%}.left-0{left:calc(var(--spacing)*0)}.left-1{left:calc(var(--spacing)*1)}.left-1\\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.isolate{isolation:isolate}.z-10{z-index:10}.z-50{z-index:50}.z-\\[9999\\]{z-index:9999}.z-\\[99999\\]{z-index:99999}.col-span-2{grid-column:span 2/span 2}.col-span-3{grid-column:span 3/span 3}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.-mx-2{margin-inline:calc(var(--spacing)*-2)}.mx-1{margin-inline:calc(var(--spacing)*1)}.mx-3{margin-inline:calc(var(--spacing)*3)}.mx-4{margin-inline:calc(var(--spacing)*4)}.mx-6{margin-inline:calc(var(--spacing)*6)}.mx-auto{margin-inline:auto}.-mt-2{margin-top:calc(var(--spacing)*-2)}.mt-0{margin-top:calc(var(--spacing)*0)}.mt-0\\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-0\\.5{margin-bottom:calc(var(--spacing)*.5)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-1\\.5{margin-bottom:calc(var(--spacing)*1.5)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-0{margin-left:calc(var(--spacing)*0)}.ml-0\\.5{margin-left:calc(var(--spacing)*.5)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-auto{margin-left:auto}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-flex{display:inline-flex}.table{display:table}.h-0{height:calc(var(--spacing)*0)}.h-0\\.5{height:calc(var(--spacing)*.5)}.h-1{height:calc(var(--spacing)*1)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-10{height:calc(var(--spacing)*10)}.h-14{height:calc(var(--spacing)*14)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-\\[34px\\]{height:34px}.h-full{height:100%}.max-h-20{max-height:calc(var(--spacing)*20)}.max-h-32{max-height:calc(var(--spacing)*32)}.max-h-40{max-height:calc(var(--spacing)*40)}.max-h-48{max-height:calc(var(--spacing)*48)}.max-h-60{max-height:calc(var(--spacing)*60)}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-96{max-height:calc(var(--spacing)*96)}.max-h-\\[88vh\\]{max-height:88vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[200px\\]{max-height:200px}.max-h-\\[400px\\]{max-height:400px}.max-h-\\[500px\\]{max-height:500px}.min-h-\\[28px\\]{min-height:28px}.min-h-\\[32px\\]{min-height:32px}.min-h-\\[46px\\]{min-height:46px}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-11{width:calc(var(--spacing)*11)}.w-12{width:calc(var(--spacing)*12)}.w-14{width:calc(var(--spacing)*14)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-56{width:calc(var(--spacing)*56)}.w-64{width:calc(var(--spacing)*64)}.w-full{width:100%}.w-px{width:1px}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[80px\\]{max-width:80px}.max-w-\\[120px\\]{max-width:120px}.max-w-\\[150px\\]{max-width:150px}.max-w-\\[200px\\]{max-width:200px}.max-w-md{max-width:var(--container-md)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\\[60px\\]{min-width:60px}.min-w-\\[80px\\]{min-width:80px}.min-w-\\[120px\\]{min-width:120px}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1\\/2{--tw-translate-y: 50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-105{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.rotate-45{rotate:45deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-bounce{animation:var(--animate-bounce)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-help{cursor:help}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize-none{resize:none}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-nowrap{flex-wrap:nowrap}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}:where(.space-y-0>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*0)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*0)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-0\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}.gap-x-2{column-gap:calc(var(--spacing)*2)}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}.gap-y-1{row-gap:calc(var(--spacing)*1)}.gap-y-1\\.5{row-gap:calc(var(--spacing)*1.5)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.rounded-t-md{border-top-left-radius:var(--radius-md);border-top-right-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-amber-200{border-color:var(--color-amber-200)}.border-amber-300{border-color:var(--color-amber-300)}.border-blue-100{border-color:var(--color-blue-100)}.border-blue-200{border-color:var(--color-blue-200)}.border-blue-300{border-color:var(--color-blue-300)}.border-cyan-200{border-color:var(--color-cyan-200)}.border-cyan-300{border-color:var(--color-cyan-300)}.border-emerald-200{border-color:var(--color-emerald-200)}.border-emerald-300{border-color:var(--color-emerald-300)}.border-fuchsia-300{border-color:var(--color-fuchsia-300)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-green-300{border-color:var(--color-green-300)}.border-green-400{border-color:var(--color-green-400)}.border-indigo-200{border-color:var(--color-indigo-200)}.border-indigo-300{border-color:var(--color-indigo-300)}.border-indigo-600{border-color:var(--color-indigo-600)}.border-orange-300{border-color:var(--color-orange-300)}.border-orange-400{border-color:var(--color-orange-400)}.border-pink-300{border-color:var(--color-pink-300)}.border-purple-100{border-color:var(--color-purple-100)}.border-purple-200{border-color:var(--color-purple-200)}.border-purple-300{border-color:var(--color-purple-300)}.border-purple-400{border-color:var(--color-purple-400)}.border-purple-400\\/30{border-color:#c07eff4d}@supports (color:color-mix(in lab,red,red)){.border-purple-400\\/30{border-color:color-mix(in oklab,var(--color-purple-400)30%,transparent)}}.border-purple-500{border-color:var(--color-purple-500)}.border-purple-600{border-color:var(--color-purple-600)}.border-red-200{border-color:var(--color-red-200)}.border-red-300{border-color:var(--color-red-300)}.border-red-400{border-color:var(--color-red-400)}.border-rose-300{border-color:var(--color-rose-300)}.border-sky-100{border-color:var(--color-sky-100)}.border-sky-200{border-color:var(--color-sky-200)}.border-sky-300{border-color:var(--color-sky-300)}.border-sky-400{border-color:var(--color-sky-400)}.border-sky-400\\/30{border-color:#00bcfe4d}@supports (color:color-mix(in lab,red,red)){.border-sky-400\\/30{border-color:color-mix(in oklab,var(--color-sky-400)30%,transparent)}}.border-sky-500{border-color:var(--color-sky-500)}.border-slate-100{border-color:var(--color-slate-100)}.border-slate-200{border-color:var(--color-slate-200)}.border-slate-300{border-color:var(--color-slate-300)}.border-teal-300{border-color:var(--color-teal-300)}.border-transparent{border-color:#0000}.border-violet-300{border-color:var(--color-violet-300)}.border-white{border-color:var(--color-white)}.border-white\\/30{border-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.border-white\\/30{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.border-white\\/50{border-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.border-white\\/50{border-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.border-white\\/80{border-color:#fffc}@supports (color:color-mix(in lab,red,red)){.border-white\\/80{border-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-50\\/50{background-color:#fffbeb80}@supports (color:color-mix(in lab,red,red)){.bg-amber-50\\/50{background-color:color-mix(in oklab,var(--color-amber-50)50%,transparent)}}.bg-amber-100{background-color:var(--color-amber-100)}.bg-amber-200{background-color:var(--color-amber-200)}.bg-amber-500{background-color:var(--color-amber-500)}.bg-black{background-color:var(--color-black)}.bg-black\\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-200{background-color:var(--color-blue-200)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-50{background-color:var(--color-cyan-50)}.bg-cyan-50\\/30{background-color:#ecfeff4d}@supports (color:color-mix(in lab,red,red)){.bg-cyan-50\\/30{background-color:color-mix(in oklab,var(--color-cyan-50)30%,transparent)}}.bg-cyan-100{background-color:var(--color-cyan-100)}.bg-cyan-500{background-color:var(--color-cyan-500)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-emerald-100{background-color:var(--color-emerald-100)}.bg-emerald-600{background-color:var(--color-emerald-600)}.bg-fuchsia-50{background-color:var(--color-fuchsia-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-50\\/50{background-color:#f0fdf480}@supports (color:color-mix(in lab,red,red)){.bg-green-50\\/50{background-color:color-mix(in oklab,var(--color-green-50)50%,transparent)}}.bg-green-100{background-color:var(--color-green-100)}.bg-green-200{background-color:var(--color-green-200)}.bg-green-200\\/70{background-color:#b9f8cfb3}@supports (color:color-mix(in lab,red,red)){.bg-green-200\\/70{background-color:color-mix(in oklab,var(--color-green-200)70%,transparent)}}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-50{background-color:var(--color-orange-50)}.bg-orange-100{background-color:var(--color-orange-100)}.bg-orange-500{background-color:var(--color-orange-500)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-pink-50{background-color:var(--color-pink-50)}.bg-pink-100{background-color:var(--color-pink-100)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-50\\/50{background-color:#faf5ff80}@supports (color:color-mix(in lab,red,red)){.bg-purple-50\\/50{background-color:color-mix(in oklab,var(--color-purple-50)50%,transparent)}}.bg-purple-100{background-color:var(--color-purple-100)}.bg-purple-200{background-color:var(--color-purple-200)}.bg-purple-400{background-color:var(--color-purple-400)}.bg-purple-400\\/20{background-color:#c07eff33}@supports (color:color-mix(in lab,red,red)){.bg-purple-400\\/20{background-color:color-mix(in oklab,var(--color-purple-400)20%,transparent)}}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-purple-700{background-color:var(--color-purple-700)}.bg-purple-800{background-color:var(--color-purple-800)}.bg-red-50{background-color:var(--color-red-50)}.bg-red-50\\/50{background-color:#fef2f280}@supports (color:color-mix(in lab,red,red)){.bg-red-50\\/50{background-color:color-mix(in oklab,var(--color-red-50)50%,transparent)}}.bg-red-100{background-color:var(--color-red-100)}.bg-red-200{background-color:var(--color-red-200)}.bg-red-200\\/70{background-color:#ffcacab3}@supports (color:color-mix(in lab,red,red)){.bg-red-200\\/70{background-color:color-mix(in oklab,var(--color-red-200)70%,transparent)}}.bg-red-400{background-color:var(--color-red-400)}.bg-red-500{background-color:var(--color-red-500)}.bg-rose-50{background-color:var(--color-rose-50)}.bg-rose-100{background-color:var(--color-rose-100)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-sky-50\\/50{background-color:#f0f9ff80}@supports (color:color-mix(in lab,red,red)){.bg-sky-50\\/50{background-color:color-mix(in oklab,var(--color-sky-50)50%,transparent)}}.bg-sky-100{background-color:var(--color-sky-100)}.bg-sky-400{background-color:var(--color-sky-400)}.bg-sky-400\\/20{background-color:#00bcfe33}@supports (color:color-mix(in lab,red,red)){.bg-sky-400\\/20{background-color:color-mix(in oklab,var(--color-sky-400)20%,transparent)}}.bg-sky-500{background-color:var(--color-sky-500)}.bg-sky-600{background-color:var(--color-sky-600)}.bg-slate-50{background-color:var(--color-slate-50)}.bg-slate-50\\/30{background-color:#f8fafc4d}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/30{background-color:color-mix(in oklab,var(--color-slate-50)30%,transparent)}}.bg-slate-50\\/50{background-color:#f8fafc80}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/50{background-color:color-mix(in oklab,var(--color-slate-50)50%,transparent)}}.bg-slate-50\\/95{background-color:#f8fafcf2}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/95{background-color:color-mix(in oklab,var(--color-slate-50)95%,transparent)}}.bg-slate-100{background-color:var(--color-slate-100)}.bg-slate-200{background-color:var(--color-slate-200)}.bg-slate-300{background-color:var(--color-slate-300)}.bg-slate-600{background-color:var(--color-slate-600)}.bg-slate-700{background-color:var(--color-slate-700)}.bg-slate-800{background-color:var(--color-slate-800)}.bg-slate-900{background-color:var(--color-slate-900)}.bg-teal-50{background-color:var(--color-teal-50)}.bg-transparent{background-color:#0000}.bg-violet-50{background-color:var(--color-violet-50)}.bg-violet-100{background-color:var(--color-violet-100)}.bg-white{background-color:var(--color-white)}.bg-white\\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-white\\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\\/50{background-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.bg-white\\/50{background-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.bg-white\\/60{background-color:#fff9}@supports (color:color-mix(in lab,red,red)){.bg-white\\/60{background-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.bg-white\\/70{background-color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/70{background-color:color-mix(in oklab,var(--color-white)70%,transparent)}}.bg-white\\/80{background-color:#fffc}@supports (color:color-mix(in lab,red,red)){.bg-white\\/80{background-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-amber-50{--tw-gradient-from:var(--color-amber-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-50{--tw-gradient-from:var(--color-blue-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-600{--tw-gradient-from:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-emerald-50{--tw-gradient-from:var(--color-emerald-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-50{--tw-gradient-from:var(--color-green-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-100{--tw-gradient-from:var(--color-green-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-50{--tw-gradient-from:var(--color-purple-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-400{--tw-gradient-from:var(--color-purple-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-600{--tw-gradient-from:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-700{--tw-gradient-from:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-100{--tw-gradient-from:var(--color-red-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-sky-300{--tw-gradient-from:var(--color-sky-300);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-sky-400{--tw-gradient-from:var(--color-sky-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-50{--tw-gradient-from:var(--color-slate-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-100{--tw-gradient-from:var(--color-slate-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-800{--tw-gradient-from:var(--color-slate-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.via-purple-50{--tw-gradient-via:var(--color-purple-50);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-700{--tw-gradient-via:var(--color-purple-700);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-800{--tw-gradient-via:var(--color-purple-800);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-blue-700{--tw-gradient-to:var(--color-blue-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-50{--tw-gradient-to:var(--color-emerald-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-100{--tw-gradient-to:var(--color-emerald-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-fuchsia-50{--tw-gradient-to:var(--color-fuchsia-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-50{--tw-gradient-to:var(--color-indigo-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-100{--tw-gradient-to:var(--color-indigo-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-600{--tw-gradient-to:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-900{--tw-gradient-to:var(--color-indigo-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-50{--tw-gradient-to:var(--color-orange-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-100{--tw-gradient-to:var(--color-orange-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-400{--tw-gradient-to:var(--color-orange-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-pink-50{--tw-gradient-to:var(--color-pink-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-50{--tw-gradient-to:var(--color-purple-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-600{--tw-gradient-to:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-800{--tw-gradient-to:var(--color-purple-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-slate-700{--tw-gradient-to:var(--color-slate-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-teal-50{--tw-gradient-to:var(--color-teal-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-yellow-50{--tw-gradient-to:var(--color-yellow-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-0{padding:calc(var(--spacing)*0)}.p-0\\.5{padding:calc(var(--spacing)*.5)}.p-1{padding:calc(var(--spacing)*1)}.p-1\\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-2\\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-2\\.5{padding-inline:calc(var(--spacing)*2.5)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-4{padding-right:calc(var(--spacing)*4)}.pb-1{padding-bottom:calc(var(--spacing)*1)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pl-3{padding-left:calc(var(--spacing)*3)}.pl-6{padding-left:calc(var(--spacing)*6)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.break-all{word-break:break-all}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-amber-100{color:var(--color-amber-100)}.text-amber-500{color:var(--color-amber-500)}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-amber-800{color:var(--color-amber-800)}.text-blue-100{color:var(--color-blue-100)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500{color:var(--color-blue-500)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-blue-900{color:var(--color-blue-900)}.text-cyan-600{color:var(--color-cyan-600)}.text-cyan-700{color:var(--color-cyan-700)}.text-cyan-800{color:var(--color-cyan-800)}.text-emerald-600{color:var(--color-emerald-600)}.text-emerald-700{color:var(--color-emerald-700)}.text-emerald-800{color:var(--color-emerald-800)}.text-fuchsia-700{color:var(--color-fuchsia-700)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-green-200{color:var(--color-green-200)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-indigo-200{color:var(--color-indigo-200)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-indigo-800{color:var(--color-indigo-800)}.text-orange-600{color:var(--color-orange-600)}.text-orange-700{color:var(--color-orange-700)}.text-orange-800{color:var(--color-orange-800)}.text-pink-700{color:var(--color-pink-700)}.text-pink-800{color:var(--color-pink-800)}.text-purple-100{color:var(--color-purple-100)}.text-purple-200{color:var(--color-purple-200)}.text-purple-300{color:var(--color-purple-300)}.text-purple-400{color:var(--color-purple-400)}.text-purple-500{color:var(--color-purple-500)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-purple-800{color:var(--color-purple-800)}.text-purple-900{color:var(--color-purple-900)}.text-red-200{color:var(--color-red-200)}.text-red-400{color:var(--color-red-400)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-rose-700{color:var(--color-rose-700)}.text-sky-100{color:var(--color-sky-100)}.text-sky-600{color:var(--color-sky-600)}.text-sky-700{color:var(--color-sky-700)}.text-sky-800{color:var(--color-sky-800)}.text-slate-50{color:var(--color-slate-50)}.text-slate-300{color:var(--color-slate-300)}.text-slate-400{color:var(--color-slate-400)}.text-slate-500{color:var(--color-slate-500)}.text-slate-600{color:var(--color-slate-600)}.text-slate-700{color:var(--color-slate-700)}.text-slate-800{color:var(--color-slate-800)}.text-slate-900{color:var(--color-slate-900)}.text-teal-700{color:var(--color-teal-700)}.text-transparent{color:#0000}.text-violet-700{color:var(--color-violet-700)}.text-white{color:var(--color-white)}.normal-case{text-transform:none}.uppercase{text-transform:uppercase}.italic{font-style:italic}.line-through{text-decoration-line:line-through}.underline{text-decoration-line:underline}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 var(--tw-shadow-color,#0000000d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-amber-400{--tw-ring-color:var(--color-amber-400)}.ring-black{--tw-ring-color:var(--color-black)}.ring-black\\/5{--tw-ring-color:#0000000d}@supports (color:color-mix(in lab,red,red)){.ring-black\\/5{--tw-ring-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.ring-green-400{--tw-ring-color:var(--color-green-400)}.ring-orange-500{--tw-ring-color:var(--color-orange-500)}.ring-purple-400{--tw-ring-color:var(--color-purple-400)}.ring-red-400{--tw-ring-color:var(--color-red-400)}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-150{--tw-duration:.15s;transition-duration:.15s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.outline-none{--tw-outline-style:none;outline-style:none}.group-open\\:rotate-90:is(:where(.group):is([open],:popover-open,:open) *){rotate:90deg}@media(hover:hover){.group-hover\\:block:is(:where(.group):hover *){display:block}.group-hover\\:translate-x-1:is(:where(.group):hover *){--tw-translate-x:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.group-hover\\:text-blue-600:is(:where(.group):hover *){color:var(--color-blue-600)}.group-hover\\:text-purple-600:is(:where(.group):hover *){color:var(--color-purple-600)}}.peer-checked\\:bg-amber-500:is(:where(.peer):checked~*){background-color:var(--color-amber-500)}.peer-checked\\:bg-green-600:is(:where(.peer):checked~*){background-color:var(--color-green-600)}.peer-checked\\:bg-purple-600:is(:where(.peer):checked~*){background-color:var(--color-purple-600)}.peer-focus\\:ring-2:is(:where(.peer):focus~*){--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.peer-focus\\:ring-amber-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-amber-300)}.peer-focus\\:ring-green-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-green-300)}.peer-focus\\:ring-purple-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-purple-300)}.placeholder\\:text-purple-400::placeholder{color:var(--color-purple-400)}.placeholder\\:text-slate-400::placeholder{color:var(--color-slate-400)}.placeholder\\:italic::placeholder{font-style:italic}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:top-\\[2px\\]:after{content:var(--tw-content);top:2px}.after\\:left-\\[2px\\]:after{content:var(--tw-content);left:2px}.after\\:h-5:after{content:var(--tw-content);height:calc(var(--spacing)*5)}.after\\:w-5:after{content:var(--tw-content);width:calc(var(--spacing)*5)}.after\\:rounded-full:after{content:var(--tw-content);border-radius:3.40282e38px}.after\\:bg-white:after{content:var(--tw-content);background-color:var(--color-white)}.after\\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.after\\:content-\\[\\'\\'\\]:after{--tw-content:"";content:var(--tw-content)}.peer-checked\\:after\\:translate-x-full:is(:where(.peer):checked~*):after{content:var(--tw-content);--tw-translate-x:100%;translate:var(--tw-translate-x)var(--tw-translate-y)}@media(hover:hover){.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-blue-300:hover{border-color:var(--color-blue-300)}.hover\\:border-green-400:hover{border-color:var(--color-green-400)}.hover\\:border-slate-300:hover{border-color:var(--color-slate-300)}.hover\\:bg-amber-200:hover{background-color:var(--color-amber-200)}.hover\\:bg-amber-600:hover{background-color:var(--color-amber-600)}.hover\\:bg-black\\/5:hover{background-color:#0000000d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-black\\/5:hover{background-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.hover\\:bg-blue-200:hover{background-color:var(--color-blue-200)}.hover\\:bg-emerald-700:hover{background-color:var(--color-emerald-700)}.hover\\:bg-green-50\\/30:hover{background-color:#f0fdf44d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-green-50\\/30:hover{background-color:color-mix(in oklab,var(--color-green-50)30%,transparent)}}.hover\\:bg-green-100:hover{background-color:var(--color-green-100)}.hover\\:bg-green-200:hover{background-color:var(--color-green-200)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-50:hover{background-color:var(--color-indigo-50)}.hover\\:bg-indigo-200:hover{background-color:var(--color-indigo-200)}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-purple-50:hover{background-color:var(--color-purple-50)}.hover\\:bg-purple-100:hover{background-color:var(--color-purple-100)}.hover\\:bg-purple-200:hover{background-color:var(--color-purple-200)}.hover\\:bg-purple-600:hover{background-color:var(--color-purple-600)}.hover\\:bg-purple-700:hover{background-color:var(--color-purple-700)}.hover\\:bg-red-50:hover{background-color:var(--color-red-50)}.hover\\:bg-red-100:hover{background-color:var(--color-red-100)}.hover\\:bg-sky-100:hover{background-color:var(--color-sky-100)}.hover\\:bg-slate-50:hover{background-color:var(--color-slate-50)}.hover\\:bg-slate-100:hover{background-color:var(--color-slate-100)}.hover\\:bg-slate-200:hover{background-color:var(--color-slate-200)}.hover\\:bg-slate-200\\/50:hover{background-color:#e2e8f080}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-slate-200\\/50:hover{background-color:color-mix(in oklab,var(--color-slate-200)50%,transparent)}}.hover\\:bg-slate-300:hover{background-color:var(--color-slate-300)}.hover\\:bg-slate-700:hover{background-color:var(--color-slate-700)}.hover\\:bg-white\\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\\:bg-white\\/30:hover{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/30:hover{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.hover\\:bg-white\\/50:hover{background-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/50:hover{background-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.hover\\:text-amber-700:hover{color:var(--color-amber-700)}.hover\\:text-amber-900:hover{color:var(--color-amber-900)}.hover\\:text-indigo-700:hover{color:var(--color-indigo-700)}.hover\\:text-purple-500:hover{color:var(--color-purple-500)}.hover\\:text-purple-600:hover{color:var(--color-purple-600)}.hover\\:text-purple-800:hover{color:var(--color-purple-800)}.hover\\:text-red-600:hover{color:var(--color-red-600)}.hover\\:text-red-700:hover{color:var(--color-red-700)}.hover\\:text-slate-600:hover{color:var(--color-slate-600)}.hover\\:text-slate-700:hover{color:var(--color-slate-700)}.hover\\:text-slate-800:hover{color:var(--color-slate-800)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-80:hover{opacity:.8}.hover\\:opacity-90:hover{opacity:.9}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:ring-1:hover{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:ring-purple-400:hover{--tw-ring-color:var(--color-purple-400)}}.focus\\:border-purple-500:focus{border-color:var(--color-purple-500)}.focus\\:border-slate-400:focus{border-color:var(--color-slate-400)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-amber-300:focus{--tw-ring-color:var(--color-amber-300)}.focus\\:ring-blue-400:focus{--tw-ring-color:var(--color-blue-400)}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:ring-emerald-400:focus{--tw-ring-color:var(--color-emerald-400)}.focus\\:ring-purple-200:focus{--tw-ring-color:var(--color-purple-200)}.focus\\:ring-purple-300:focus{--tw-ring-color:var(--color-purple-300)}.focus\\:ring-purple-400:focus{--tw-ring-color:var(--color-purple-400)}.focus\\:ring-purple-500:focus{--tw-ring-color:var(--color-purple-500)}.focus\\:ring-slate-100:focus{--tw-ring-color:var(--color-slate-100)}.focus\\:ring-slate-200:focus{--tw-ring-color:var(--color-slate-200)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\\:scale-95:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:bg-slate-50:disabled{background-color:var(--color-slate-50)}.disabled\\:bg-slate-400:disabled{background-color:var(--color-slate-400)}.disabled\\:opacity-50:disabled{opacity:.5}@media(min-width:40rem){.sm\\:flex-row{flex-direction:row}.sm\\:px-6{padding-inline:calc(var(--spacing)*6)}}@media(min-width:48rem){.md\\:inline{display:inline}.md\\:w-80{width:calc(var(--spacing)*80)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:items-center{align-items:center}.md\\:items-end{align-items:flex-end}.md\\:border-t-0{border-top-style:var(--tw-border-style);border-top-width:0}.md\\:border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.md\\:p-8{padding:calc(var(--spacing)*8)}.md\\:pt-0{padding-top:calc(var(--spacing)*0)}.md\\:pl-6{padding-left:calc(var(--spacing)*6)}.md\\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.md\\:text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}}@media(min-width:64rem){.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.lg\\:px-8{padding-inline:calc(var(--spacing)*8)}}}:host,:host *,#traxon-portal-mount,#traxon-portal-mount *{--color-white:#fff!important;--color-black:#000!important;--color-slate-50:#f8fafc!important;--color-slate-100:#f1f5f9!important;--color-slate-200:#e2e8f0!important;--color-slate-300:#cbd5e1!important;--color-slate-400:#94a3b8!important;--color-slate-500:#64748b!important;--color-slate-600:#475569!important;--color-slate-700:#334155!important;--color-slate-800:#1e293b!important;--color-slate-900:#0f172a!important;--color-slate-950:#020617!important;--color-gray-50:#f9fafb!important;--color-gray-100:#f3f4f6!important;--color-gray-200:#e5e7eb!important;--color-gray-300:#d1d5db!important;--color-gray-400:#9ca3af!important;--color-gray-500:#6b7280!important;--color-gray-600:#4b5563!important;--color-gray-700:#374151!important;--color-gray-800:#1f2937!important;--color-gray-900:#111827!important;--color-red-50:#fef2f2!important;--color-red-100:#fee2e2!important;--color-red-200:#fecaca!important;--color-red-300:#fca5a5!important;--color-red-400:#f87171!important;--color-red-500:#ef4444!important;--color-red-600:#dc2626!important;--color-red-700:#b91c1c!important;--color-red-800:#991b1b!important;--color-red-900:#7f1d1d!important;--color-orange-50:#fff7ed!important;--color-orange-100:#ffedd5!important;--color-orange-200:#fed7aa!important;--color-orange-300:#fdba74!important;--color-orange-400:#fb923c!important;--color-orange-500:#f97316!important;--color-orange-600:#ea580c!important;--color-orange-700:#c2410c!important;--color-amber-50:#fffbeb!important;--color-amber-100:#fef3c7!important;--color-amber-200:#fde68a!important;--color-amber-300:#fcd34d!important;--color-amber-400:#fbbf24!important;--color-amber-500:#f59e0b!important;--color-amber-600:#d97706!important;--color-amber-700:#b45309!important;--color-amber-800:#92400e!important;--color-amber-900:#78350f!important;--color-yellow-50:#fefce8!important;--color-yellow-100:#fef9c3!important;--color-yellow-200:#fef08a!important;--color-yellow-300:#fde047!important;--color-yellow-400:#facc15!important;--color-yellow-500:#eab308!important;--color-green-50:#f0fdf4!important;--color-green-100:#dcfce7!important;--color-green-200:#bbf7d0!important;--color-green-300:#86efac!important;--color-green-400:#4ade80!important;--color-green-500:#22c55e!important;--color-green-600:#16a34a!important;--color-green-700:#15803d!important;--color-green-800:#166534!important;--color-green-900:#14532d!important;--color-emerald-50:#ecfdf5!important;--color-emerald-100:#d1fae5!important;--color-emerald-500:#10b981!important;--color-emerald-600:#059669!important;--color-sky-50:#f0f9ff!important;--color-sky-100:#e0f2fe!important;--color-sky-200:#bae6fd!important;--color-sky-300:#7dd3fc!important;--color-sky-400:#38bdf8!important;--color-sky-500:#0ea5e9!important;--color-sky-600:#0284c7!important;--color-sky-700:#0369a1!important;--color-sky-800:#075985!important;--color-blue-50:#eff6ff!important;--color-blue-100:#dbeafe!important;--color-blue-200:#bfdbfe!important;--color-blue-300:#93c5fd!important;--color-blue-400:#60a5fa!important;--color-blue-500:#3b82f6!important;--color-blue-600:#2563eb!important;--color-blue-700:#1d4ed8!important;--color-blue-800:#1e40af!important;--color-blue-900:#1e3a8a!important;--color-indigo-50:#eef2ff!important;--color-indigo-100:#e0e7ff!important;--color-indigo-200:#c7d2fe!important;--color-indigo-300:#a5b4fc!important;--color-indigo-400:#818cf8!important;--color-indigo-500:#6366f1!important;--color-indigo-600:#4f46e5!important;--color-indigo-700:#4338ca!important;--color-indigo-800:#3730a3!important;--color-indigo-900:#312e81!important;--color-purple-50:#faf5ff!important;--color-purple-100:#f3e8ff!important;--color-purple-200:#e9d5ff!important;--color-purple-300:#d8b4fe!important;--color-purple-400:#c084fc!important;--color-purple-500:#a855f7!important;--color-purple-600:#9333ea!important;--color-purple-700:#7c3aed!important;--color-purple-800:#6b21a8!important;--color-purple-900:#581c87!important;--color-fuchsia-50:#fdf4ff!important;--color-fuchsia-100:#fae8ff!important;--color-fuchsia-400:#e879f9!important;--color-fuchsia-500:#d946ef!important;--color-fuchsia-600:#c026d3!important;--spacing:.25rem!important;--text-xs:.75rem!important;--text-xs--line-height:1rem!important;--text-sm:.875rem!important;--text-sm--line-height:1.25rem!important;--text-base:1rem!important;--text-base--line-height:1.5rem!important;--text-lg:1.125rem!important;--text-lg--line-height:1.75rem!important;--text-xl:1.25rem!important;--text-xl--line-height:1.75rem!important;--text-2xl:1.5rem!important;--text-2xl--line-height:2rem!important;--text-3xl:1.875rem!important;--text-3xl--line-height:2.25rem!important;--text-4xl:2.25rem!important;--text-4xl--line-height:2.5rem!important;--font-weight-normal:400!important;--font-weight-medium:500!important;--font-weight-semibold:600!important;--font-weight-bold:700!important;--font-mono:ui-monospace,SFMono-Regular,"SF Mono",Menlo,Consolas,monospace!important;--leading-tight:1.25!important;--leading-relaxed:1.625!important;--leading-loose:2!important;--tracking-wide:.025em!important;--tracking-wider:.05em!important;--ease-in-out:cubic-bezier(.4,0,.2,1)!important;--ease-out:cubic-bezier(0,0,.2,1)!important;--blur-sm:4px!important;--default-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;--default-transition-duration:.15s!important;--tw-border-opacity:1!important;--tw-ring-opacity:1!important;--tw-ring-offset-width:0px!important;--tw-ring-offset-color:#fff!important;--radius-sm:.125rem!important;--radius-md:.375rem!important;--radius-lg:.5rem!important;--radius-xl:.75rem!important;--radius-2xl:1rem!important;--radius-full:9999px!important}:host input,:host select,:host textarea,:host button{font-family:inherit!important;font-size:inherit!important;line-height:inherit!important;color:inherit!important}:host input,:host select,:host textarea{border-width:1px;border-style:solid!important;border-color:var(--color-slate-200,#e2e8f0)!important;color:#0f172a!important;background-color:#fff!important}:host input[type=text],:host input[type=number],:host input[type=date],:host input[type=time],:host select{box-sizing:border-box!important;height:34px!important;min-height:34px!important;padding-top:.375rem!important;padding-bottom:.375rem!important}:host select{-webkit-appearance:auto!important;-moz-appearance:auto!important;appearance:auto!important;background-color:#fff!important}:host .border{border-style:solid!important;border-width:1px!important;border-color:var(--color-slate-200,#e2e8f0)!important}:host .focus\\:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)!important;--tw-ring-shadow:var(--tw-ring-inset)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color)!important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)!important}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}`,Ti=({initialShipment:t,initialShipments:r,onClose:a,isVisible:o,onCopyResult:n,onSaveConfig:i})=>{const[l,s]=O([]),[d,m]=O(null),[u,p]=O(!1),[c,g]=O(!1),f=l.length===1;pt(()=>{if(o)if(r&&r.length>0){const x=r.map(E=>Xa(E));s(x),x.length===1&&(m(x[0]),p(!0)),g(!1)}else if(t&&Object.keys(t).length>0){const x=Xa(t);s([x]),m(x),p(!0),g(!1)}else s([Fr[0]]),m(Fr[0]),p(!0),g(!1);else p(!1),g(!1)},[o,t,r]);const C=te(x=>{s(E=>E.map(k=>k.id===x.id?x:k)),m(x)},[]),N=te((x,E)=>{const k=`log-${Date.now()}`,D=new Date().toISOString(),M=(d==null?void 0:d.awbNumber)||"";n&&n(!0,M,{timestamp:D,summary:"EDI copiado al portapapeles",ediContent:E});const V={id:k,timestamp:D,type:"OUTBOUND",status:"ACCEPTED",payloadJson:E,responseMessage:"EDI copiado exitosamente",responseTimestamp:new Date().toISOString()};s(A=>A.map(X=>X.id!==x?X:{...X,logs:[V,...X.logs||[]]})),console.log(`✅ EDI copiado para shipment ${x}`)},[d,n]),S=te(()=>{p(!1),l.length===1?(m(null),a()):m(null)},[l.length,a]),v=te(()=>{p(!1),g(!1),m(null),a()},[a]);te(()=>{p(!0)},[]);const _=te(x=>{m(x),p(!0)},[]);return o?f&&d?e(qa,{isOpen:u,onClose:S,shipment:d,onSave:C,onCopySuccess:N,onSaveConfig:i}):e(ce,{children:[e(Ei,{shipments:l,onSelectShipment:_,onClose:v}),e(qa,{isOpen:u,onClose:S,shipment:d,onSave:C,onCopySuccess:N,onSaveConfig:i})]}):null},Ei=({shipments:t,onSelectShipment:r,onClose:a})=>{const[o,n]=O(""),i=t.filter(s=>{if(!o.trim())return!0;const d=o.toLowerCase();return s.awbNumber.toLowerCase().includes(d)||s.shipper.name.toLowerCase().includes(d)||s.consignee.name.toLowerCase().includes(d)}),l=s=>{switch(s){case"TRANSMITTED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"Pending"});case"ACKNOWLEDGED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Confirmed"});case"REJECTED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Rejected"});default:return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600",children:"Draft"})}};return e("div",{className:"modal-overlay",children:e("div",{className:"modal-content max-w-4xl w-full",children:[e("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 flex items-center justify-between flex-shrink-0",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"bg-white/20 p-2 rounded-lg",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e("div",{children:[e("h2",{className:"text-lg font-bold",children:"Shipment Management"}),e("p",{className:"text-blue-100 text-sm",children:[t.length," AWBs para transmitir"]})]})]}),e("button",{onClick:a,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"px-6 py-4 border-b border-slate-200 bg-slate-50",children:e("div",{className:"relative max-w-md",children:[e("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Buscar AWB, Shipper, Consignee...",value:o,onChange:s=>n(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})}),e("div",{className:"flex-1 overflow-y-auto p-4",style:{maxHeight:"calc(70vh - 150px)"},children:[e("div",{className:"space-y-3",children:i.map(s=>e("div",{onClick:()=>r(s),className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all cursor-pointer group",children:e("div",{className:"flex items-center justify-between",children:e("div",{className:"flex-1",children:[e("div",{className:"flex items-center gap-3 mb-2",children:[e("span",{className:"text-lg font-bold font-mono text-slate-900 group-hover:text-blue-600 transition-colors",children:s.awbNumber}),l(s.status),s.hasHouses&&e("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Consol (",s.houseBills.length,")"]})]}),e("div",{className:"grid grid-cols-4 gap-4 text-sm text-slate-600",children:[e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Ruta"}),e("span",{className:"font-semibold",children:[s.origin," → ",s.destination]})]}),e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Shipper"}),e("span",{className:"truncate block max-w-[150px]",children:s.shipper.name})]}),e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Piezas/Peso"}),e("span",{className:"font-semibold",children:[s.pieces," pcs / ",s.weight," kg"]})]}),e("div",{className:"flex items-center justify-end",children:e("span",{className:"text-blue-600 group-hover:translate-x-1 transition-transform",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]})]})})},s.id))}),i.length===0&&e("div",{className:"text-center py-12 text-slate-500",children:['No se encontraron guías que coincidan con "',o,'"']})]}),e("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50 text-sm text-slate-600",children:"Selecciona una guía para revisar y transmitir a Traxon"})]})})};function Ii(t){if(!t)return"KILOGRAM";const r=t.toUpperCase().trim();return["KG","KGS","KILOGRAM","KILOGRAMS","KILO","KILOS"].includes(r)?"KILOGRAM":["LB","LBS","POUND","POUNDS","LIBRA","LIBRAS"].includes(r)?"POUND":"KILOGRAM"}function ki(t){if(!t)return;const r=t.toUpperCase().trim();return["CM3","CM³","CUBIC_CENTIMETRE","CUBIC_CENTIMETER","CC"].includes(r)?"CUBIC_CENTIMETRE":(["M3","M³","CUBIC_METRE","CUBIC_METER","CBM"].includes(r),"CUBIC_METRE")}function ja(t){if(!t)return"Prepaid";const r=t.toUpperCase().trim();return["COLLECT","COL","C","COBRAR","POR_COBRAR"].includes(r)?"Collect":(["PREPAID","PRE","P","PP","PREPAGO","PAGADO"].includes(r),"Prepaid")}function Fi(t){if(!t)return"DRAFT";const r=t.toUpperCase().trim();return["DRAFT","BORRADOR","NUEVO","NEW"].includes(r)?"DRAFT":["TRANSMITTED","ENVIADO","SENT","PENDING"].includes(r)?"TRANSMITTED":["ACKNOWLEDGED","ACK","CONFIRMADO","CONFIRMED","OK"].includes(r)?"ACKNOWLEDGED":["REJECTED","RECHAZADO","ERROR","FAILED"].includes(r)?"REJECTED":"DRAFT"}function Ri(t){if(!t)return"CENTIMETRE";const r=t.toUpperCase().trim();return["IN","INCH","INCHES","PULGADA","PULGADAS"].includes(r)?"INCH":"CENTIMETRE"}function Oi(t){if(!t)return"QUANTITY_RATE";const r=t.toUpperCase().trim(),a={Q:"QUANTITY_RATE",N:"NORMAL_RATE",M:"MINIMUM_CHARGE",B:"BASIC_CHARGE",C:"SPECIFIC_COMMODITY_RATE",K:"RATE_PER_KILOGRAM",R:"CLASS_RATE_REDUCTION",S:"CLASS_RATE_SURCHARGE",E:"INTERNATIONAL_PRIORITY_SERVICE_RATE",X:"UNIT_LOAD_DEVICE_ADDITIONAL_INFORMATION",Y:"UNIT_LOAD_DEVICE_ADDITIONAL_RATE",U:"UNIT_LOAD_DEVIDE_BASIC_CHARGE_OR_RATE",W:"UNIT_LOAD_DEVICE_DISCOUNT"};return a[r]?a[r]:new Set(Object.values(a)).has(r)?r:"QUANTITY_RATE"}function _i(t){if(!t)return"DueAgent";const r=t.toUpperCase().trim();return["DUECARRIER","DUE_CARRIER","CARRIER","C","AEROLINEA"].includes(r)?"DueCarrier":"DueAgent"}function er(t,r){var a,o,n,i,l,s,d,m,u,p;return t?{name:t.name||r.name,name2:t.name2||"",accountNumber:t.accountNumber||"",taxId:t.taxId||t.nit||t.ruc||"",address:{street:((a=t.address)==null?void 0:a.street)||t.direccion||r.address.street,street2:((o=t.address)==null?void 0:o.street2)||"",place:((n=t.address)==null?void 0:n.place)||((i=t.address)==null?void 0:i.city)||t.ciudad||r.address.place,state:((l=t.address)==null?void 0:l.state)||((s=t.address)==null?void 0:s.provincia)||"",countryCode:(((d=t.address)==null?void 0:d.countryCode)||((m=t.address)==null?void 0:m.country)||t.pais||r.address.countryCode).toUpperCase().substring(0,2),postalCode:((u=t.address)==null?void 0:u.postalCode)||((p=t.address)==null?void 0:p.zip)||""},contact:t.contact||r.contact||{identifier:"TE",number:""}}:r}function Di(t,r){return t?{name:t.name||r.name,iataCode:t.iataCode||t.codigoIata||r.iataCode,cassCode:t.cassCode||t.codigoCass||"",place:t.place||t.ciudad||r.place,accountNumber:t.accountNumber||""}:r}function Li(t){var S,v,_,x,E,k,D,M,V,A,X,se,Ce,le,re,Y,Fe,me,Re,Ve,ze,Te,Z,we,he,R,lt,Qe;const r=t.shipperName||((S=t.shipper)==null?void 0:S.name)||"",a=t.shipperTaxId||((v=t.shipper)==null?void 0:v.taxId)||"",o=t.shipperAddress||((x=(_=t.shipper)==null?void 0:_.address)==null?void 0:x.street)||"",n=t.shipperCity||((k=(E=t.shipper)==null?void 0:E.address)==null?void 0:k.place)||"",i=t.shipperCountry||((M=(D=t.shipper)==null?void 0:D.address)==null?void 0:M.countryCode)||"",l=t.shipperState||((A=(V=t.shipper)==null?void 0:V.address)==null?void 0:A.state)||"",s=t.shipperPostalCode||((se=(X=t.shipper)==null?void 0:X.address)==null?void 0:se.postalCode)||"",d=t.shipperPhone||((le=(Ce=t.shipper)==null?void 0:Ce.contact)==null?void 0:le.number)||"",m=t.consigneeName||((re=t.consignee)==null?void 0:re.name)||"",u=t.consigneeTaxId||((Y=t.consignee)==null?void 0:Y.taxId)||"",p=t.consigneeAddress||((me=(Fe=t.consignee)==null?void 0:Fe.address)==null?void 0:me.street)||"",c=t.consigneeCity||((Ve=(Re=t.consignee)==null?void 0:Re.address)==null?void 0:Ve.place)||"",g=t.consigneeCountry||((Te=(ze=t.consignee)==null?void 0:ze.address)==null?void 0:Te.countryCode)||"",f=t.consigneeState||((we=(Z=t.consignee)==null?void 0:Z.address)==null?void 0:we.state)||"",C=t.consigneePostalCode||((R=(he=t.consignee)==null?void 0:he.address)==null?void 0:R.postalCode)||"",N=t.consigneePhone||((Qe=(lt=t.consignee)==null?void 0:lt.contact)==null?void 0:Qe.number)||"";return{id:t.id||`house-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,messageId:t.messageId,hawbNumber:t.hawbNumber||t.numero||"",origin:t.origin||"",destination:t.destination||"",shipperName:r,shipperTaxId:a,shipperAddress:o,shipperCity:n,shipperCountry:i,shipperState:l,shipperPostalCode:s,shipperPhone:d,consigneeName:m,consigneeTaxId:u,consigneeAddress:p,consigneeCity:c,consigneeCountry:g,consigneeState:f,consigneePostalCode:C,consigneePhone:N,pieces:t.pieces??0,weight:t.weight??0,chargeableWeight:t.chargeableWeight??t.pesoFacturable??void 0,volume:t.volume??t.volumen??void 0,volumeCubicMeters:t.volumeCubicMeters??t.volumenM3??t.cbm??t.volume??void 0,natureOfGoods:t.natureOfGoods||t.descripcion||"",commonName:t.commonName||"",htsCodes:t.htsCodes||[],shipper:t.shipper?er(t.shipper,{name:"",address:{street:"",place:"",countryCode:"CO",postalCode:""}}):r?{name:r,taxId:a,address:{street:o,place:n,countryCode:i||"CO",state:l,postalCode:s},contact:d?{identifier:"TE",number:d}:void 0}:void 0,consignee:t.consignee?er(t.consignee,{name:"",address:{street:"",place:"",countryCode:"US",postalCode:""}}):m?{name:m,taxId:u,address:{street:p,place:c,countryCode:g||"US",state:f,postalCode:C},contact:N?{identifier:"TE",number:N}:void 0}:void 0}}function Pi(t){return{pieces:t.pieces??0,weight:t.weight??0,chargeableWeight:t.chargeableWeight||t.pesoFacturable,rateClassCode:Oi(t.rateClassCode),rateOrCharge:t.rateOrCharge??t.tarifa??0,total:t.total??0,description:t.description||t.descripcion||"",goodsDescriptionOverride:t.goodsDescriptionOverride||t.descripcionMercancia||void 0,commodityCode:t.commodityCode||"",hsCode:t.hsCode||""}}function Hi(t){return{code:t.code||t.codigo||"",entitlement:_i(t.entitlement),amount:t.amount??t.monto??0,paymentMethod:ja(t.paymentMethod)}}function Bi(t){return{length:t.length??t.largo??0,width:t.width??t.ancho??0,height:t.height??t.alto??0,pieces:t.pieces??t.piezas??1,unit:Ri(t.unit)}}function Xa(t){const r=Fr[0],a=(t.rates||r.rates).map(Pi),o=(t.houseBills||[]).map(Li),n=(t.otherCharges||[]).map(Hi),i=t.dimensions?t.dimensions.map(Bi):void 0;return{id:t.id||`shipment-${Date.now()}`,messageId:t.messageId,status:Fi(t.status),traxonResponse:t.traxonResponse,awbNumber:t.awbNumber||r.awbNumber,origin:(t.origin||r.origin).toUpperCase().substring(0,3),destination:(t.destination||r.destination).toUpperCase().substring(0,3),pieces:t.pieces??r.pieces,weight:t.weight??r.weight,weightUnit:Ii(t.weightUnit),volume:t.volume,volumeUnit:t.volume?ki(t.volumeUnit):void 0,dimensions:i,description:t.description||r.description,commodityCode:t.commodityCode||r.commodityCode,currency:(t.currency||"USD").toUpperCase(),paymentMethod:ja(t.paymentMethod),shipper:er(t.shipper,r.shipper),consignee:er(t.consignee,r.consignee),agent:Di(t.agent,r.agent),routing:t.routing||r.routing,flights:t.flights||r.flights,rates:a,otherCharges:n,oci:t.oci||[],specialHandlingCodes:t.specialHandlingCodes||[],specialServiceRequest:t.specialServiceRequest||void 0,chargeSummaryOverride:t.chargeSummaryOverride||void 0,executionDate:t.executionDate||new Date().toISOString().split("T")[0],executionPlace:t.executionPlace||"BOGOTA",signature:t.signature||"AVTOPF",hasHouses:t.hasHouses??o.length>0,houseBills:o,logs:t.logs||[],descartesConfig:t.descartesConfig}}class tr extends HTMLElement{constructor(){super(),this.portalMountRef=null,this.isVisible=!1,this.currentShipment=null,this.currentShipments=null,this.portalContainer=null,this.portalShadow=null,this.copyResultCallback=null,this.shadowRoot_=this.attachShadow({mode:"open"}),this.mountPoint=document.createElement("div"),this.mountPoint.id="cargo-imp-connector-root",this.shadowRoot_.appendChild(this.mountPoint)}getOrCreatePortal(){if(!this.portalContainer){this.portalContainer=document.createElement("div"),this.portalContainer.id="cargo-imp-connector-portal",this.portalContainer.style.cssText=`
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 2147483647 !important;
        pointer-events: none;
      `,document.body.appendChild(this.portalContainer),this.portalShadow=this.portalContainer.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=Ai,this.portalShadow.appendChild(r);const a=document.createElement("div");a.id="cargo-imp-portal-mount",this.portalShadow.appendChild(a)}return{container:this.portalContainer,shadow:this.portalShadow}}updatePortalVisibility(r){this.portalContainer&&(this.portalContainer.style.pointerEvents=r?"auto":"none",this.portalContainer.setAttribute("data-visible",r.toString()))}connectedCallback(){const{shadow:r}=this.getOrCreatePortal(),a=r.getElementById("cargo-imp-portal-mount");a&&(this.portalMountRef=a,this.renderApp())}disconnectedCallback(){this.portalMountRef&&(qr(null,this.portalMountRef),this.portalMountRef=null),this.portalContainer&&this.portalContainer.parentNode&&(this.portalContainer.parentNode.removeChild(this.portalContainer),this.portalContainer=null,this.portalShadow=null)}renderApp(){this.updatePortalVisibility(this.isVisible),this.portalMountRef&&qr(e(Ti,{initialShipment:this.currentShipment,initialShipments:this.currentShipments,onClose:()=>this.close(),isVisible:this.isVisible,onCopyResult:(r,a,o)=>{const n={success:r,awbNumber:a,timestamp:o.timestamp,summary:o.summary,ediContent:o.ediContent};this.copyResultCallback&&this.copyResultCallback(n),this.dispatchEvent(new CustomEvent("cargo-imp-copy-result",{detail:n,bubbles:!0,composed:!0}))},onSaveConfig:r=>{this.dispatchEvent(new CustomEvent("cargo-imp-config-saved",{detail:{config:r,timestamp:new Date().toISOString()},bubbles:!0,composed:!0}))}}),this.portalMountRef)}openWithShipment(r){r.onCopyResult?this.copyResultCallback=r.onCopyResult:this.copyResultCallback=null;const{onCopyResult:a,...o}=r;this.currentShipment=o,this.currentShipments=null,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipment:o,mode:"single"},bubbles:!0,composed:!0}))}openWithShipments(r){const a=r.map(o=>{const{onCopyResult:n,...i}=o;return i});this.currentShipment=null,this.currentShipments=a,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipments:a,mode:"multiple",count:a.length},bubbles:!0,composed:!0}))}open(){this.currentShipment=null,this.currentShipments=null,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipment:null,usingDemo:!0},bubbles:!0,composed:!0}))}close(){this.isVisible=!1,this.currentShipment=null,this.currentShipments=null,this.removeAttribute("data-visible"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-closed",{bubbles:!0,composed:!0}))}getConfig(){return ut()}loadConfig(r){const o={...ut(),...r};ia(o),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-config-loaded",{detail:{config:o},bubbles:!0,composed:!0}))}setConfig(r){this.loadConfig(r)}resetConfig(){ia(Et),this.dispatchEvent(new CustomEvent("cargo-imp-config-reset",{bubbles:!0,composed:!0}))}isOpen(){return this.isVisible}}if(customElements.get("traxon-connector")||customElements.define("traxon-connector",tr),!customElements.get("cargo-imp-connector")){class t extends tr{}customElements.define("cargo-imp-connector",t)}return _t.CargoImpConnectorElement=tr,_t.default=tr,Object.defineProperties(_t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),_t})({});
