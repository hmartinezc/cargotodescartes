var CargoImpConnector=(function(Zt){"use strict";var Kt,j,$r,mt,Ur,Gr,Wr,zr,fr,xr,vr,Rt={},Vr=[],fo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Lt=Array.isArray;function Qe(t,r){for(var a in r)t[a]=r[a];return t}function Nr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function gt(t,r,a){var n,o,s,i={};for(s in r)s=="key"?n=r[s]:s=="ref"?o=r[s]:i[s]=r[s];if(arguments.length>2&&(i.children=arguments.length>3?Kt.call(arguments,2):a),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)i[s]===void 0&&(i[s]=t.defaultProps[s]);return Yt(t,i,n,o,null)}function Yt(t,r,a,n,o){var s={type:t,props:r,key:a,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++$r,__i:-1,__u:0};return o==null&&j.vnode!=null&&j.vnode(s),s}function se(t){return t.children}function et(t,r){this.props=t,this.context=r}function wt(t,r){if(r==null)return t.__?wt(t.__,t.__i+1):null;for(var a;r<t.__k.length;r++)if((a=t.__k[r])!=null&&a.__e!=null)return a.__e;return typeof t.type=="function"?wt(t):null}function qr(t){var r,a;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if((a=t.__k[r])!=null&&a.__e!=null){t.__e=t.__c.base=a.__e;break}return qr(t)}}function jr(t){(!t.__d&&(t.__d=!0)&&mt.push(t)&&!Jt.__r++||Ur!=j.debounceRendering)&&((Ur=j.debounceRendering)||Gr)(Jt)}function Jt(){for(var t,r,a,n,o,s,i,c=1;mt.length;)mt.length>c&&mt.sort(Wr),t=mt.shift(),c=mt.length,t.__d&&(a=void 0,n=void 0,o=(n=(r=t).__v).__e,s=[],i=[],r.__P&&((a=Qe({},n)).__v=n.__v+1,j.vnode&&j.vnode(a),Cr(r.__P,a,n,r.__n,r.__P.namespaceURI,32&n.__u?[o]:null,s,o??wt(n),!!(32&n.__u),i),a.__v=n.__v,a.__.__k[a.__i]=a,Jr(s,a,i),n.__e=n.__=null,a.__e!=o&&qr(a)));Jt.__r=0}function Xr(t,r,a,n,o,s,i,c,d,p,m){var u,l,g,v,f,S,T,b=n&&n.__k||Vr,k=r.length;for(d=xo(a,r,b,d,k),u=0;u<k;u++)(g=a.__k[u])!=null&&(l=g.__i==-1?Rt:b[g.__i]||Rt,g.__i=u,S=Cr(t,g,l,o,s,i,c,d,p,m),v=g.__e,g.ref&&l.ref!=g.ref&&(l.ref&&yr(l.ref,null,g),m.push(g.ref,g.__c||v,g)),f==null&&v!=null&&(f=v),(T=!!(4&g.__u))||l.__k===g.__k?d=Zr(g,d,t,T):typeof g.type=="function"&&S!==void 0?d=S:v&&(d=v.nextSibling),g.__u&=-7);return a.__e=f,d}function xo(t,r,a,n,o){var s,i,c,d,p,m=a.length,u=m,l=0;for(t.__k=new Array(o),s=0;s<o;s++)(i=r[s])!=null&&typeof i!="boolean"&&typeof i!="function"?(typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?i=t.__k[s]=Yt(null,i,null,null,null):Lt(i)?i=t.__k[s]=Yt(se,{children:i},null,null,null):i.constructor==null&&i.__b>0?i=t.__k[s]=Yt(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):t.__k[s]=i,d=s+l,i.__=t,i.__b=t.__b+1,c=null,(p=i.__i=vo(i,a,d,u))!=-1&&(u--,(c=a[p])&&(c.__u|=2)),c==null||c.__v==null?(p==-1&&(o>m?l--:o<m&&l++),typeof i.type!="function"&&(i.__u|=4)):p!=d&&(p==d-1?l--:p==d+1?l++:(p>d?l--:l++,i.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<m;s++)(c=a[s])!=null&&(2&c.__u)==0&&(c.__e==n&&(n=wt(c)),ea(c,c));return n}function Zr(t,r,a,n){var o,s;if(typeof t.type=="function"){for(o=t.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=t,r=Zr(o[s],r,a,n));return r}t.__e!=r&&(n&&(r&&t.type&&!r.parentNode&&(r=wt(t)),a.insertBefore(t.__e,r||null)),r=t.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function Pt(t,r){return r=r||[],t==null||typeof t=="boolean"||(Lt(t)?t.some(function(a){Pt(a,r)}):r.push(t)),r}function vo(t,r,a,n){var o,s,i,c=t.key,d=t.type,p=r[a],m=p!=null&&(2&p.__u)==0;if(p===null&&c==null||m&&c==p.key&&d==p.type)return a;if(n>(m?1:0)){for(o=a-1,s=a+1;o>=0||s<r.length;)if((p=r[i=o>=0?o--:s++])!=null&&(2&p.__u)==0&&c==p.key&&d==p.type)return i}return-1}function Kr(t,r,a){r[0]=="-"?t.setProperty(r,a??""):t[r]=a==null?"":typeof a!="number"||fo.test(r)?a:a+"px"}function Qt(t,r,a,n,o){var s,i;e:if(r=="style")if(typeof a=="string")t.style.cssText=a;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(r in n)a&&r in a||Kr(t.style,r,"");if(a)for(r in a)n&&a[r]==n[r]||Kr(t.style,r,a[r])}else if(r[0]=="o"&&r[1]=="n")s=r!=(r=r.replace(zr,"$1")),i=r.toLowerCase(),r=i in t||r=="onFocusOut"||r=="onFocusIn"?i.slice(2):r.slice(2),t.l||(t.l={}),t.l[r+s]=a,a?n?a.u=n.u:(a.u=fr,t.addEventListener(r,s?vr:xr,s)):t.removeEventListener(r,s?vr:xr,s);else{if(o=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in t)try{t[r]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&r[4]!="-"?t.removeAttribute(r):t.setAttribute(r,r=="popover"&&a==1?"":a))}}function Yr(t){return function(r){if(this.l){var a=this.l[r.type+t];if(r.t==null)r.t=fr++;else if(r.t<a.u)return;return a(j.event?j.event(r):r)}}}function Cr(t,r,a,n,o,s,i,c,d,p){var m,u,l,g,v,f,S,T,b,k,C,A,N,w,O,D,y,M=r.type;if(r.constructor!=null)return null;128&a.__u&&(d=!!(32&a.__u),s=[c=r.__e=a.__e]),(m=j.__b)&&m(r);e:if(typeof M=="function")try{if(T=r.props,b="prototype"in M&&M.prototype.render,k=(m=M.contextType)&&n[m.__c],C=m?k?k.props.value:m.__:n,a.__c?S=(u=r.__c=a.__c).__=u.__E:(b?r.__c=u=new M(T,C):(r.__c=u=new et(T,C),u.constructor=M,u.render=Co),k&&k.sub(u),u.state||(u.state={}),u.__n=n,l=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&M.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Qe({},u.__s)),Qe(u.__s,M.getDerivedStateFromProps(T,u.__s))),g=u.props,v=u.state,u.__v=r,l)b&&M.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&M.getDerivedStateFromProps==null&&T!==g&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(T,C),r.__v==a.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(T,u.__s,C)===!1){for(r.__v!=a.__v&&(u.props=T,u.state=u.__s,u.__d=!1),r.__e=a.__e,r.__k=a.__k,r.__k.some(function(B){B&&(B.__=r)}),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[],u.__h.length&&i.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(T,u.__s,C),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(g,v,f)})}if(u.context=C,u.props=T,u.__P=t,u.__e=!1,N=j.__r,w=0,b){for(u.state=u.__s,u.__d=!1,N&&N(r),m=u.render(u.props,u.state,u.context),O=0;O<u._sb.length;O++)u.__h.push(u._sb[O]);u._sb=[]}else do u.__d=!1,N&&N(r),m=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++w<25);u.state=u.__s,u.getChildContext!=null&&(n=Qe(Qe({},n),u.getChildContext())),b&&!l&&u.getSnapshotBeforeUpdate!=null&&(f=u.getSnapshotBeforeUpdate(g,v)),D=m,m!=null&&m.type===se&&m.key==null&&(D=Qr(m.props.children)),c=Xr(t,Lt(D)?D:[D],r,a,n,o,s,i,c,d,p),u.base=r.__e,r.__u&=-161,u.__h.length&&i.push(u),S&&(u.__E=u.__=null)}catch(B){if(r.__v=null,d||s!=null)if(B.then){for(r.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,r.__e=c}else{for(y=s.length;y--;)Nr(s[y]);wr(r)}else r.__e=a.__e,r.__k=a.__k,B.then||wr(r);j.__e(B,r,a)}else s==null&&r.__v==a.__v?(r.__k=a.__k,r.__e=a.__e):c=r.__e=No(a.__e,r,a,n,o,s,i,d,p);return(m=j.diffed)&&m(r),128&r.__u?void 0:c}function wr(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(wr)}function Jr(t,r,a){for(var n=0;n<a.length;n++)yr(a[n],a[++n],a[++n]);j.__c&&j.__c(r,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(s){s.call(o)})}catch(s){j.__e(s,o.__v)}})}function Qr(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Lt(t)?t.map(Qr):Qe({},t)}function No(t,r,a,n,o,s,i,c,d){var p,m,u,l,g,v,f,S=a.props||Rt,T=r.props,b=r.type;if(b=="svg"?o="http://www.w3.org/2000/svg":b=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(p=0;p<s.length;p++)if((g=s[p])&&"setAttribute"in g==!!b&&(b?g.localName==b:g.nodeType==3)){t=g,s[p]=null;break}}if(t==null){if(b==null)return document.createTextNode(T);t=document.createElementNS(o,b,T.is&&T),c&&(j.__m&&j.__m(r,s),c=!1),s=null}if(b==null)S===T||c&&t.data==T||(t.data=T);else{if(s=s&&Kt.call(t.childNodes),!c&&s!=null)for(S={},p=0;p<t.attributes.length;p++)S[(g=t.attributes[p]).name]=g.value;for(p in S)if(g=S[p],p!="children"){if(p=="dangerouslySetInnerHTML")u=g;else if(!(p in T)){if(p=="value"&&"defaultValue"in T||p=="checked"&&"defaultChecked"in T)continue;Qt(t,p,null,g,o)}}for(p in T)g=T[p],p=="children"?l=g:p=="dangerouslySetInnerHTML"?m=g:p=="value"?v=g:p=="checked"?f=g:c&&typeof g!="function"||S[p]===g||Qt(t,p,g,S[p],o);if(m)c||u&&(m.__html==u.__html||m.__html==t.innerHTML)||(t.innerHTML=m.__html),r.__k=[];else if(u&&(t.innerHTML=""),Xr(r.type=="template"?t.content:t,Lt(l)?l:[l],r,a,n,b=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,i,s?s[0]:a.__k&&wt(a,0),c,d),s!=null)for(p=s.length;p--;)Nr(s[p]);c||(p="value",b=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[p]||b=="progress"&&!v||b=="option"&&v!=S[p])&&Qt(t,p,v,S[p],o),p="checked",f!=null&&f!=t[p]&&Qt(t,p,f,S[p],o))}return t}function yr(t,r,a){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&r==null||(t.__u=t(r))}else t.current=r}catch(o){j.__e(o,a)}}function ea(t,r,a){var n,o;if(j.unmount&&j.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||yr(n,null,r)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){j.__e(s,r)}n.base=n.__P=null}if(n=t.__k)for(o=0;o<n.length;o++)n[o]&&ea(n[o],r,a||typeof t.type!="function");a||Nr(t.__e),t.__c=t.__=t.__e=void 0}function Co(t,r,a){return this.constructor(t,a)}function ta(t,r,a){var n,o,s,i;r==document&&(r=document.documentElement),j.__&&j.__(t,r),o=(n=!1)?null:r.__k,s=[],i=[],Cr(r,t=r.__k=gt(se,null,[t]),o||Rt,Rt,r.namespaceURI,o?null:r.firstChild?Kt.call(r.childNodes):null,s,o?o.__e:r.firstChild,n,i),Jr(s,t,i)}Kt=Vr.slice,j={__e:function(t,r,a,n){for(var o,s,i;r=r.__;)if((o=r.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(t)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,n||{}),i=o.__d),i)return o.__E=o}catch(c){t=c}throw t}},$r=0,et.prototype.setState=function(t,r){var a;a=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Qe({},this.state),typeof t=="function"&&(t=t(Qe({},a),this.props)),t&&Qe(a,t),t!=null&&this.__v&&(r&&this._sb.push(r),jr(this))},et.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),jr(this))},et.prototype.render=se,mt=[],Gr=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wr=function(t,r){return t.__v.__b-r.__v.__b},Jt.__r=0,zr=/(PointerCapture)$|Capture$/i,fr=0,xr=Yr(!1),vr=Yr(!0);var wo=0;function e(t,r,a,n,o,s){r||(r={});var i,c,d=r;if("ref"in d)for(c in d={},r)c=="ref"?i=r[c]:d[c]=r[c];var p={type:t,props:d,key:a,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--wo,__i:-1,__u:0,__source:o,__self:s};if(typeof t=="function"&&(i=t.defaultProps))for(c in i)d[c]===void 0&&(d[c]=i[c]);return j.vnode&&j.vnode(p),p}var _t,fe,Ar,ra,Dt=0,aa=[],Ne=j,oa=Ne.__b,na=Ne.__r,sa=Ne.diffed,ia=Ne.__c,la=Ne.unmount,ca=Ne.__;function Sr(t,r){Ne.__h&&Ne.__h(fe,t,Dt||r),Dt=0;var a=fe.__H||(fe.__H={__:[],__h:[]});return t>=a.__.length&&a.__.push({}),a.__[t]}function _(t){return Dt=1,yo(ga,t)}function yo(t,r,a){var n=Sr(_t++,2);if(n.t=t,!n.__c&&(n.__=[a?a(r):ga(void 0,r),function(c){var d=n.__N?n.__N[0]:n.__[0],p=n.t(d,c);d!==p&&(n.__N=[p,n.__[1]],n.__c.setState({}))}],n.__c=fe,!fe.__f)){var o=function(c,d,p){if(!n.__c.__H)return!0;var m=n.__c.__H.__.filter(function(l){return!!l.__c});if(m.every(function(l){return!l.__N}))return!s||s.call(this,c,d,p);var u=n.__c.props!==c;return m.forEach(function(l){if(l.__N){var g=l.__[0];l.__=l.__N,l.__N=void 0,g!==l.__[0]&&(u=!0)}}),s&&s.call(this,c,d,p)||u};fe.__f=!0;var s=fe.shouldComponentUpdate,i=fe.componentWillUpdate;fe.componentWillUpdate=function(c,d,p){if(this.__e){var m=s;s=void 0,o(c,d,p),s=m}i&&i.call(this,c,d,p)},fe.shouldComponentUpdate=o}return n.__N||n.__}function st(t,r){var a=Sr(_t++,3);!Ne.__s&&ma(a.__H,r)&&(a.__=t,a.u=r,fe.__H.__h.push(a))}function da(t){return Dt=5,ze(function(){return{current:t}},[])}function ze(t,r){var a=Sr(_t++,7);return ma(a.__H,r)&&(a.__=t(),a.__H=r,a.__h=t),a.__}function ie(t,r){return Dt=8,ze(function(){return t},r)}function Ao(){for(var t;t=aa.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(er),t.__H.__h.forEach(Er),t.__H.__h=[]}catch(r){t.__H.__h=[],Ne.__e(r,t.__v)}}Ne.__b=function(t){fe=null,oa&&oa(t)},Ne.__=function(t,r){t&&r.__k&&r.__k.__m&&(t.__m=r.__k.__m),ca&&ca(t,r)},Ne.__r=function(t){na&&na(t),_t=0;var r=(fe=t.__c).__H;r&&(Ar===fe?(r.__h=[],fe.__h=[],r.__.forEach(function(a){a.__N&&(a.__=a.__N),a.u=a.__N=void 0})):(r.__h.forEach(er),r.__h.forEach(Er),r.__h=[],_t=0)),Ar=fe},Ne.diffed=function(t){sa&&sa(t);var r=t.__c;r&&r.__H&&(r.__H.__h.length&&(aa.push(r)!==1&&ra===Ne.requestAnimationFrame||((ra=Ne.requestAnimationFrame)||So)(Ao)),r.__H.__.forEach(function(a){a.u&&(a.__H=a.u),a.u=void 0})),Ar=fe=null},Ne.__c=function(t,r){r.some(function(a){try{a.__h.forEach(er),a.__h=a.__h.filter(function(n){return!n.__||Er(n)})}catch(n){r.some(function(o){o.__h&&(o.__h=[])}),r=[],Ne.__e(n,a.__v)}}),ia&&ia(t,r)},Ne.unmount=function(t){la&&la(t);var r,a=t.__c;a&&a.__H&&(a.__H.__.forEach(function(n){try{er(n)}catch(o){r=o}}),a.__H=void 0,r&&Ne.__e(r,a.__v))};var pa=typeof requestAnimationFrame=="function";function So(t){var r,a=function(){clearTimeout(n),pa&&cancelAnimationFrame(r),setTimeout(t)},n=setTimeout(a,35);pa&&(r=requestAnimationFrame(a))}function er(t){var r=fe,a=t.__c;typeof a=="function"&&(t.__c=void 0,a()),fe=r}function Er(t){var r=fe;t.__c=t.__(),fe=r}function ma(t,r){return!t||t.length!==r.length||r.some(function(a,n){return a!==t[n]})}function ga(t,r){return typeof r=="function"?r(t):r}const tr={EAP:{code:"EAP",description:"e-AWB Participant",default:!0},ECC:{code:"ECC",description:"Electronic Consignment with Accompanying Paper",default:!1},SPX:{code:"SPX",description:"Secure - Examined",default:!1},PER:{code:"PER",description:"Perishable Cargo",default:!1},PEP:{code:"PEP",description:"Perishable Fruits & Vegetables",default:!1},PEF:{code:"PEF",description:"Perishable Fresh Fish/Seafood",default:!1},PES:{code:"PES",description:"Live Tropical Fish",default:!1},RFL:{code:"RFL",description:"Flowers",default:!1},COL:{code:"COL",description:"Cool Goods",default:!1},FRO:{code:"FRO",description:"Frozen Goods",default:!1},PIL:{code:"PIL",description:"Pharmaceuticals",default:!1},VAL:{code:"VAL",description:"Valuable Cargo",default:!1},VUN:{code:"VUN",description:"Vulnerable Cargo",default:!1},SPF:{code:"SPF",description:"Secure - Protected Freight",default:!1},AVI:{code:"AVI",description:"Live Animals",default:!1},DGR:{code:"DGR",description:"Dangerous Goods",default:!1},HEA:{code:"HEA",description:"Heavy Cargo",default:!1},BIG:{code:"BIG",description:"Outsized Cargo",default:!1}},ua={RA:{code:"REGULATED_AGENT",short:"RA",description:"Agente Regulado (seguridad)",default:!0},SPX:{code:"SECURITY_STATUS",short:"SPX",description:"Estado de Seguridad (examinado)",default:!0},KC:{code:"KNOWN_CONSIGNOR",short:"KC",description:"Consignatario Conocido",default:!1},AEO:{code:"AUTHORISED_ECONOMIC_OPERATOR",short:"AEO",description:"Operador Económico Autorizado",default:!1},SM:{code:"SCREENING_METHOD",short:"SM",description:"Método de Inspección",default:!1},TIN:{code:"TRADER_IDENTIFICATION_NUMBER",short:"TIN",description:"NIT/Tax ID (Shipper o Consignee)",default:!1},EORI:{code:"TRADER_IDENTIFICATION_NUMBER",short:"EORI",description:"EORI Number (EU)",default:!1}},Bt={sphByAirline:{"075":["ECC","EAP","PER","COL"],145:["EAP","PER","COL"],985:["EAP","PER","COL"],"074":["EAP","PER","COL"],"057":["EAP","PER","COL"],"020":["EAP","PER","COL"],"006":["EAP","PER","COL"],"001":["EAP","PER","COL"],205:["EAP","PER","COL"],DEFAULT:["EAP","PER","COL"]},ociByOriginCountry:{CO:[],EC:[],PE:[],DEFAULT:[]},includeShipperTIN:!1,includeConsigneeTIN:!0,tinOciFormat:"legacy",shipperTINField:"oci",airlinesRequiringECC:["075"],securityOci:{enabled:!1,regulatedAgentNumber:"",expiryDate:"",screeningMethod:"",screeningDate:"",screenerName:""},messageConfig:{autoGenerateCSL:!0,sendTimeoutMs:3e4,maxRetries:3},cargoImp:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!1,ociWithEori:!1,defaultSphCodes:["EAP","PER","COL"],enabledFwbSegments:["AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","SPH","OCI","CER","ISU"],enabledFhlSegments:["MBI","TXT","HBS","OCI"],controlNumber:"96728316614806",senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",defaultSignature:"CARGOOP",airlinePolicies:{"075":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["ECC","EAP","PER"],enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","PPD","COL","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","SSR","ACC","OTH","CER","NFY"]},145:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},"074":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],notes:"KLM requiere todos los segmentos incluyendo OTH"},157:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","NFY"]},369:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!1,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI"],disabledSegments:["FWB","FTR","OTH","NFY"],notes:"Atlas/Ethiopian: sin header UNB/UNH ni footer UNT/UNZ"},"057":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},"020":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!0,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},205:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],notes:"Emirates: prefijo AWB 205"},176:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],useAgencyNameForCER:!0,notes:"Emirates 176: CER usa nombre de agencia"},235:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["NFY"],requiresHTS:!0,notes:"Turkish Airlines: requiere código HTS"},985:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],useConsolidatedNG:!0,notes:"LATAM Cargo: NG especial para consolidados"},"045":{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"]},992:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"DHL Aviation: Caso 7 - FHL siempre incluye header/footer EDIFACT"},999:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"Polar Air (DHL): Caso 7"},155:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH"],fhlAlwaysWithHeader:!0,notes:"ABX Air: Caso 7 - FHL siempre incluye header/footer EDIFACT"},DEFAULT:{fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUNB_UNZ:!0,ociWithEori:!1,sphCodes:["EAP"],enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["OTH","NFY"],notes:"Política por defecto para aerolíneas no configuradas. Ajustar según requisitos."}}},lastUpdated:new Date().toISOString()};function yt(){try{const t=localStorage.getItem("cargo_imp_connector_config");if(t){const r=JSON.parse(t);return{...Bt,...r}}}catch(t){console.warn("Error loading connector config:",t)}return Bt}function ha(t){try{t.lastUpdated=new Date().toISOString(),localStorage.setItem("cargo_imp_connector_config",JSON.stringify(t))}catch(r){console.error("Error saving connector config:",r)}}function Eo(t,r){for(var a in r)t[a]=r[a];return t}function Tr(t,r){for(var a in t)if(a!=="__source"&&!(a in r))return!0;for(var n in r)if(n!=="__source"&&t[n]!==r[n])return!0;return!1}function ba(t,r){this.props=t,this.context=r}function To(t,r){function a(o){var s=this.props.ref,i=s==o.ref;return!i&&s&&(s.call?s(null):s.current=null),r?!r(this.props,o)||!i:Tr(this.props,o)}function n(o){return this.shouldComponentUpdate=a,gt(t,o)}return n.displayName="Memo("+(t.displayName||t.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n.type=t,n}(ba.prototype=new et).isPureReactComponent=!0,ba.prototype.shouldComponentUpdate=function(t,r){return Tr(this.props,t)||Tr(this.state,r)};var fa=j.__b;j.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),fa&&fa(t)};var Io=j.__e;j.__e=function(t,r,a,n){if(t.then){for(var o,s=r;s=s.__;)if((o=s.__c)&&o.__c)return r.__e==null&&(r.__e=a.__e,r.__k=a.__k),o.__c(t,r)}Io(t,r,a,n)};var xa=j.unmount;function va(t,r,a){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=Eo({},t)).__c!=null&&(t.__c.__P===a&&(t.__c.__P=r),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return va(n,r,a)})),t}function Na(t,r,a){return t&&a&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return Na(n,r,a)}),t.__c&&t.__c.__P===r&&(t.__e&&a.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=a)),t}function Ir(){this.__u=0,this.o=null,this.__b=null}function Ca(t){var r=t.__.__c;return r&&r.__a&&r.__a(t)}function rr(){this.i=null,this.l=null}j.unmount=function(t){var r=t.__c;r&&r.__R&&r.__R(),r&&32&t.__u&&(t.type=null),xa&&xa(t)},(Ir.prototype=new et).__c=function(t,r){var a=r.__c,n=this;n.o==null&&(n.o=[]),n.o.push(a);var o=Ca(n.__v),s=!1,i=function(){s||(s=!0,a.__R=null,o?o(c):c())};a.__R=i;var c=function(){if(!--n.__u){if(n.state.__a){var d=n.state.__a;n.__v.__k[0]=Na(d,d.__c.__P,d.__c.__O)}var p;for(n.setState({__a:n.__b=null});p=n.o.pop();)p.forceUpdate()}};n.__u++||32&r.__u||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(i,i)},Ir.prototype.componentWillUnmount=function(){this.o=[]},Ir.prototype.render=function(t,r){if(this.__b){if(this.__v.__k){var a=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=va(this.__b,a,n.__O=n.__P)}this.__b=null}var o=r.__a&&gt(se,null,t.fallback);return o&&(o.__u&=-33),[gt(se,null,r.__a?null:t.children),o]};var wa=function(t,r,a){if(++a[1]===a[0]&&t.l.delete(r),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(a=t.i;a;){for(;a.length>3;)a.pop()();if(a[1]<a[0])break;t.i=a=a[2]}};(rr.prototype=new et).__a=function(t){var r=this,a=Ca(r.__v),n=r.l.get(t);return n[0]++,function(o){var s=function(){r.props.revealOrder?(n.push(o),wa(r,t,n)):o()};a?a(s):s()}},rr.prototype.render=function(t){this.i=null,this.l=new Map;var r=Pt(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&r.reverse();for(var a=r.length;a--;)this.l.set(r[a],this.i=[1,0,this.i]);return t.children},rr.prototype.componentDidUpdate=rr.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(r,a){wa(t,a,r)})};var ko=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Oo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Fo=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ro=/[A-Z0-9]/g,Lo=typeof document<"u",Po=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};et.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(et.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(r){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:r})}})});var ya=j.event;function _o(){}function Do(){return this.cancelBubble}function Bo(){return this.defaultPrevented}j.event=function(t){return ya&&(t=ya(t)),t.persist=_o,t.isPropagationStopped=Do,t.isDefaultPrevented=Bo,t.nativeEvent=t};var Ho={enumerable:!1,configurable:!0,get:function(){return this.class}},Aa=j.vnode;j.vnode=function(t){typeof t.type=="string"&&(function(r){var a=r.props,n=r.type,o={},s=n.indexOf("-")===-1;for(var i in a){var c=a[i];if(!(i==="value"&&"defaultValue"in a&&c==null||Lo&&i==="children"&&n==="noscript"||i==="class"||i==="className")){var d=i.toLowerCase();i==="defaultValue"&&"value"in a&&a.value==null?i="value":i==="download"&&c===!0?c="":d==="translate"&&c==="no"?c=!1:d[0]==="o"&&d[1]==="n"?d==="ondoubleclick"?i="ondblclick":d!=="onchange"||n!=="input"&&n!=="textarea"||Po(a.type)?d==="onfocus"?i="onfocusin":d==="onblur"?i="onfocusout":Fo.test(i)&&(i=d):d=i="oninput":s&&Oo.test(i)?i=i.replace(Ro,"-$&").toLowerCase():c===null&&(c=void 0),d==="oninput"&&o[i=d]&&(i="oninputCapture"),o[i]=c}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Pt(a.children).forEach(function(p){p.props.selected=o.value.indexOf(p.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=Pt(a.children).forEach(function(p){p.props.selected=o.multiple?o.defaultValue.indexOf(p.props.value)!=-1:o.defaultValue==p.props.value})),a.class&&!a.className?(o.class=a.class,Object.defineProperty(o,"className",Ho)):(a.className&&!a.class||a.class&&a.className)&&(o.class=o.className=a.className),r.props=o})(t),t.$$typeof=ko,Aa&&Aa(t)};var Sa=j.__r;j.__r=function(t){Sa&&Sa(t),t.__c};var Ea=j.diffed;j.diffed=function(t){Ea&&Ea(t);var r=t.props,a=t.__e;a!=null&&t.type==="textarea"&&"value"in r&&r.value!==a.value&&(a.value=r.value==null?"":r.value)};let kr=null,Ta=0;const Mo=5e3;function $o(){const t=Date.now();return(!kr||t-Ta>Mo)&&(kr=yt(),Ta=t),kr}const Uo=t=>{const r=$o();return r.sphByAirline[t]||r.sphByAirline.DEFAULT||["EAP"]},Ht=t=>t.split("-")[0]||t.substring(0,3),Mt=t=>Uo(t),Go=(t,r=150)=>{if(!t||t.trim()==="")return"";const c=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ñÑ]/g,"N").replace(/\bHS\s*\d{6,10}\b/gi,"").replace(/\b\d{6,10}\b/g,"").replace(/[^A-Za-z0-9\s]/g,"").toUpperCase().replace(/\s+/g," ").trim();if(c.length===0)return"";const d=c.split(" "),p=[];let m="";for(const l of d){if(l.length>25){m.length>0&&(p.push(m.trim()),m="");for(let g=0;g<l.length;g+=25)p.push(l.substring(g,g+25));continue}m.length+l.length+1>25?(m.length>0&&p.push(m.trim()),m=l):m=m.length>0?m+" "+l:l}return m.length>0&&p.push(m.trim()),p.join(`
`).substring(0,r)},tt={FWB:{code:"FWB",name:"Message Header",description:"Cabecera del mensaje FWB con versión (incluye UNB/UNH en Caso 7)",required:!0,maxLength:200,order:1,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"version",description:"Versión del mensaje",maxLength:7,required:!0,type:"string"}]},AWB:{code:"AWB",name:"Air Waybill Number",description:"Número de guía aérea con origen, destino, piezas y peso",required:!0,maxLength:50,order:2,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"awbNumber",description:"Número AWB (11 dígitos sin guión)",maxLength:11,required:!0,type:"string"},{name:"origin",description:"Aeropuerto origen (3 chars)",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Aeropuerto destino (3 chars)",maxLength:3,required:!0,type:"code"},{name:"pieces",description:"Número de piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso bruto",maxLength:10,required:!0,type:"number"}]},FLT:{code:"FLT",name:"Flight",description:"Información de vuelo(s)",required:!1,maxLength:80,order:3,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"flight1",description:"Vuelo 1 (carrier+número)",maxLength:10,required:!1,type:"string"},{name:"date1",description:"Fecha vuelo 1 (DDMMM)",maxLength:5,required:!1,type:"date"},{name:"flight2",description:"Vuelo 2",maxLength:10,required:!1,type:"string"},{name:"date2",description:"Fecha vuelo 2",maxLength:5,required:!1,type:"date"}]},RTG:{code:"RTG",name:"Routing",description:"Ruta del envío (aeropuertos y aerolíneas)",required:!0,maxLength:100,order:4,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"segment1",description:"Primer segmento (AEROPUERTO+CARRIER)",maxLength:6,required:!0,type:"string"},{name:"segment2",description:"Segundo segmento",maxLength:6,required:!1,type:"string"},{name:"segment3",description:"Tercer segmento",maxLength:6,required:!1,type:"string"}]},SHP:{code:"SHP",name:"Shipper",description:"Información del exportador/embarcador",required:!0,maxLength:200,order:5,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal (máx 9 chars)",maxLength:9,required:!1,type:"string"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},CNE:{code:"CNE",name:"Consignee",description:"Información del importador/consignatario",required:!0,maxLength:200,order:6,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"state",description:"Estado (solo USA, 2 chars)",maxLength:2,required:!1,type:"code"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal (máx 9 chars)",maxLength:9,required:!0,type:"string"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},AGT:{code:"AGT",name:"Agent",description:"Información del agente de carga",required:!0,maxLength:100,order:7,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"iataCode",description:"Código IATA (7 dígitos)",maxLength:7,required:!0,type:"string"},{name:"cassCode",description:"Código CASS (4 dígitos)",maxLength:4,required:!1,type:"string"},{name:"name",description:"Nombre agencia",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"}]},SSR:{code:"SSR",name:"Special Service Request",description:"Instrucciones especiales de manejo",required:!1,maxLength:200,order:8,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"line1",description:"Línea 1 (máx 65 chars)",maxLength:65,required:!1,type:"string"},{name:"line2",description:"Línea 2 (máx 65 chars)",maxLength:65,required:!1,type:"string"},{name:"line3",description:"Línea 3 (máx 65 chars)",maxLength:65,required:!1,type:"string"}]},ACC:{code:"ACC",name:"Accounting Information",description:"Información contable",required:!1,maxLength:50,order:9,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"accountingInfo",description:"Info contable (máx 34 chars)",maxLength:34,required:!1,type:"string"}]},CVD:{code:"CVD",name:"Charge Declarations",description:"Declaraciones de cargos (moneda, prepaid/collect, valores)",required:!0,maxLength:80,order:10,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"currency",description:"Código moneda (3 chars)",maxLength:3,required:!0,type:"code"},{name:"wtOt",description:"Weight/Other (PP, CC, PC, CP)",maxLength:2,required:!0,type:"code",allowedValues:["PP","CC","PC","CP"]},{name:"declaredCarriage",description:"Valor declarado transporte (o NVD)",maxLength:15,required:!0,type:"string"},{name:"declaredCustoms",description:"Valor declarado aduanas (o NCV)",maxLength:15,required:!0,type:"string"},{name:"declaredInsurance",description:"Valor asegurado (o XXX)",maxLength:15,required:!0,type:"string"}]},RTD:{code:"RTD",name:"Rate Description",description:"Descripción de tarifas (líneas de cobro)",required:!0,maxLength:300,order:11,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"lineNumber",description:"Número de línea",maxLength:2,required:!0,type:"number"},{name:"pieces",description:"Número de piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso bruto",maxLength:10,required:!0,type:"number"},{name:"rateClass",description:"Clase de tarifa (C, M, N, Q)",maxLength:2,required:!0,type:"code"},{name:"commodity",description:"Código commodity (4 dígitos)",maxLength:4,required:!1,type:"string"},{name:"chargeableWeight",description:"Peso cobrable",maxLength:10,required:!1,type:"number"},{name:"rate",description:"Tarifa",maxLength:10,required:!1,type:"number"},{name:"total",description:"Total línea",maxLength:15,required:!1,type:"number"}]},NG:{code:"NG",name:"Nature of Goods",description:"Naturaleza de la mercancía",required:!0,maxLength:30,order:12,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"description",description:"Descripción mercancía (máx 20 chars)",maxLength:20,required:!0,type:"string"}]},NH:{code:"NH",name:"Harmonized Code",description:"Códigos arancelarios HTS",required:!1,maxLength:200,order:13,versions:["FWB/16","FWB/17"],fields:[{name:"codes",description:"Códigos HTS separados (múltiples)",maxLength:15,required:!1,type:"string"}]},NV:{code:"NV",name:"Volume",description:"Volumen total en metros cúbicos (suma de houses)",required:!1,maxLength:20,order:14,versions:["FWB/16","FWB/17"],fields:[{name:"volume",description:"Volumen en M3 con prefijo MC",maxLength:15,required:!1,type:"number"}]},NS:{code:"NS",name:"SLAC",description:"Shipper Load and Count (piezas del master)",required:!1,maxLength:15,order:15,versions:["FWB/16","FWB/17"],fields:[{name:"pieces",description:"Número de piezas",maxLength:10,required:!1,type:"number"}]},OTH:{code:"OTH",name:"Other Charges",description:"Otros cargos (AWC, AWA, MY)",required:!1,maxLength:150,order:14,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"prepaidOrCollect",description:"P=Prepaid, C=Collect",maxLength:1,required:!0,type:"code",allowedValues:["P","C"]},{name:"chargeCode",description:"Código cargo (AWC, AWA, MY)",maxLength:3,required:!0,type:"code"},{name:"amount",description:"Monto",maxLength:15,required:!0,type:"number"}]},PPD:{code:"PPD",name:"Prepaid Charges",description:"Resumen de cargos prepagados",required:!1,maxLength:100,order:15,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"weightCharge",description:"Cargo por peso",maxLength:15,required:!1,type:"number"},{name:"dueAgent",description:"Due Agent",maxLength:15,required:!1,type:"number"},{name:"dueCarrier",description:"Due Carrier",maxLength:15,required:!1,type:"number"},{name:"total",description:"Total",maxLength:15,required:!0,type:"number"}]},COL:{code:"COL",name:"Collect Charges",description:"Resumen de cargos por cobrar",required:!1,maxLength:100,order:16,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"weightCharge",description:"Cargo por peso",maxLength:15,required:!1,type:"number"},{name:"dueAgent",description:"Due Agent",maxLength:15,required:!1,type:"number"},{name:"dueCarrier",description:"Due Carrier",maxLength:15,required:!1,type:"number"},{name:"total",description:"Total",maxLength:15,required:!0,type:"number"}]},CER:{code:"CER",name:"Certification",description:"Certificación del embarcador",required:!1,maxLength:30,order:17,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"signature",description:"Firma (máx 20 chars)",maxLength:20,required:!1,type:"string"}]},ISU:{code:"ISU",name:"Issue",description:"Ejecución del transportista (fecha, lugar, firma)",required:!0,maxLength:60,order:18,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"date",description:"Fecha (DDMMMYY)",maxLength:7,required:!0,type:"date"},{name:"place",description:"Lugar",maxLength:17,required:!0,type:"string"},{name:"signature",description:"Firma (máx 20 chars)",maxLength:20,required:!1,type:"string"}]},REF:{code:"REF",name:"Reference",description:"Referencia del remitente (agente)",required:!0,maxLength:50,order:19,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"agentRef",description:"Referencia AGT/IATA/CASS/ORIGEN",maxLength:30,required:!0,type:"string"}]},SPH:{code:"SPH",name:"Special Handling",description:"Códigos de manejo especial (EAP, PER, etc.)",required:!0,maxLength:50,order:20,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"codes",description:"Códigos SPH separados por /",maxLength:40,required:!0,type:"string"}]},OCI:{code:"OCI",name:"Other Customs Information",description:"Información aduanera/seguridad (EORI, TIN)",required:!1,maxLength:200,order:21,versions:["FWB/9","FWB/16","FWB/17"],fields:[{name:"countryCode",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"party",description:"Parte (CNE, SHP, AGT)",maxLength:3,required:!0,type:"code",allowedValues:["CNE","SHP","AGT"]},{name:"type",description:"Tipo (T=TIN, RA=RegAgent)",maxLength:2,required:!0,type:"code"},{name:"value",description:"Valor (NIT, EORI, etc.)",maxLength:35,required:!0,type:"string"}]},NFY:{code:"NFY",name:"Notify",description:"Información de notificación (también notify party)",required:!1,maxLength:200,order:22,versions:["FWB/16","FWB/17"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!1,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!1,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!1,type:"string"},{name:"country",description:"País (2 chars ISO)",maxLength:2,required:!1,type:"code"},{name:"phone",description:"Teléfono",maxLength:25,required:!1,type:"string"}]},FTR:{code:"FTR",name:"Footer",description:"Pie del mensaje (UNT/UNZ)",required:!0,maxLength:100,order:23,versions:["FWB/9","FWB/16","FWB/17"],fields:[]}},Le={FHL:{code:"FHL",name:"Message Header",description:"Cabecera del mensaje FHL con versión (incluye UNB/UNH en Caso 7)",required:!0,maxLength:200,order:1,versions:["FHL/2","FHL/4"],fields:[{name:"version",description:"Versión del mensaje",maxLength:7,required:!0,type:"string"}]},MBI:{code:"MBI",name:"Master Bill Information",description:"Información del Master AWB",required:!0,maxLength:60,order:2,versions:["FHL/2","FHL/4"],fields:[{name:"awbNumber",description:"Número AWB master",maxLength:11,required:!0,type:"string"},{name:"origin",description:"Origen",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Destino",maxLength:3,required:!0,type:"code"},{name:"totalPieces",description:"Piezas totales master",maxLength:5,required:!0,type:"number"},{name:"totalWeight",description:"Peso total master",maxLength:10,required:!0,type:"number"}]},HBS:{code:"HBS",name:"House Bill Summary",description:"Resumen de guía hija (HAWB)",required:!0,maxLength:80,order:3,versions:["FHL/2","FHL/4"],fields:[{name:"hawbNumber",description:"Número HAWB",maxLength:20,required:!0,type:"string"},{name:"origin",description:"Origen",maxLength:3,required:!0,type:"code"},{name:"destination",description:"Destino",maxLength:3,required:!0,type:"code"},{name:"pieces",description:"Piezas",maxLength:5,required:!0,type:"number"},{name:"weight",description:"Peso",maxLength:10,required:!0,type:"number"},{name:"natureOfGoods",description:"Descripción (máx 11 chars)",maxLength:11,required:!0,type:"string"}]},TXT:{code:"TXT",name:"Free Text (Nature of Goods)",description:"Texto libre - Descripción completa de la mercancía (natureOfGoods)",required:!1,maxLength:100,order:4,versions:["FHL/4"],fields:[{name:"text",description:"Descripción completa de mercancía",maxLength:70,required:!1,type:"string"}]},HTS:{code:"HTS",name:"Harmonized Tariff Schedule",description:"Código arancelario para la house",required:!1,maxLength:20,order:5,versions:["FHL/4"],fields:[{name:"code",description:"Código HTS",maxLength:15,required:!1,type:"string"}]},OCI:{code:"OCI",name:"Other Customs Information",description:"Información aduanera para la house",required:!1,maxLength:100,order:6,versions:["FHL/2","FHL/4"],fields:[{name:"countryCode",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"party",description:"Parte (CNE, SHP)",maxLength:3,required:!0,type:"code"},{name:"type",description:"Tipo (T=TIN)",maxLength:2,required:!0,type:"code"},{name:"value",description:"Valor (NIT, EORI)",maxLength:35,required:!0,type:"string"}]},SHP:{code:"SHP",name:"Shipper (House)",description:"Exportador de la guía hija",required:!0,maxLength:150,order:7,versions:["FHL/2","FHL/4"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"country",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal",maxLength:9,required:!1,type:"string"}]},CNE:{code:"CNE",name:"Consignee (House)",description:"Importador de la guía hija",required:!0,maxLength:150,order:8,versions:["FHL/2","FHL/4"],fields:[{name:"name",description:"Nombre (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"address",description:"Dirección (máx 35 chars)",maxLength:35,required:!0,type:"string"},{name:"city",description:"Ciudad",maxLength:17,required:!0,type:"string"},{name:"state",description:"Estado (solo USA)",maxLength:2,required:!1,type:"code"},{name:"country",description:"País (2 chars)",maxLength:2,required:!0,type:"code"},{name:"postalCode",description:"Código postal",maxLength:9,required:!0,type:"string"}]},CVD:{code:"CVD",name:"Charge Declarations (House)",description:"Declaraciones de cargos para la house",required:!0,maxLength:50,order:9,versions:["FHL/2","FHL/4"],fields:[{name:"currency",description:"Moneda",maxLength:3,required:!0,type:"code"},{name:"wtOt",description:"PP/CC",maxLength:2,required:!0,type:"code"},{name:"declaredCarriage",description:"NVD",maxLength:10,required:!0,type:"string"},{name:"declaredCustoms",description:"NCV",maxLength:10,required:!0,type:"string"},{name:"declaredInsurance",description:"XXX",maxLength:10,required:!0,type:"string"}]},FTR:{code:"FTR",name:"Footer",description:"Pie del mensaje",required:!0,maxLength:100,order:10,versions:["FHL/2","FHL/4"],fields:[]}},Wo={recipientAddress:"DSGUNXA",senderPrefix:"DSGTPXA",originAddress:"TDVAGT03OPERFLOR/BOG1",defaultOrigin:"BOG",defaultPriority:"QK",functionCode:"FF",includeTimestamp:!0},ut={"075":{awbPrefix:"075",name:"Iberia",policy:20,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","REF","SPH","OCI","FTR"],disabledSegments:["FLT","SSR","ACC","OTH","CER","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0},145:{awbPrefix:"145",name:"LATAM",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0},"074":{awbPrefix:"074",name:"KLM",policy:24,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"KLM requiere todos los segmentos incluyendo OTH"},157:{awbPrefix:"157",name:"Qatar Airways",policy:23,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","FLT","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0},369:{awbPrefix:"369",name:"Atlas Air / Ethiopian",policy:22,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI"],disabledSegments:["SSR","FTR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!1,notes:"Atlas/Ethiopian: sin header UNB/UNH ni footer UNT/UNZ, pero SÍ incluye línea FWB/16"},176:{awbPrefix:"176",name:"Emirates",policy:41,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,useAgencyNameForCER:!0,notes:"Emirates: CER usa nombre de agencia"},235:{awbPrefix:"235",name:"Turkish Airlines",policy:41,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,requiresHTS:!0,notes:"Turkish: requiere código HTS"},992:{awbPrefix:"992",name:"DHL Aviation (992)",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"DHL Aviation: Caso 7 - FHL siempre incluye header/footer EDIFACT"},999:{awbPrefix:"999",name:"Polar Air Cargo (DHL)",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"Polar Air (DHL): Caso 7"},985:{awbPrefix:"985",name:"LATAM Cargo",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,useConsolidatedNG:!0,notes:"LATAM Cargo: NG especial para consolidados"},"045":{awbPrefix:"045",name:"Avianca Cargo",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0},155:{awbPrefix:"155",name:"ABX Air",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,notes:"ABX Air Caso 7: FHL siempre incluye header/footer EDIFACT"},"057":{awbPrefix:"057",name:"Air France",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Air France: destino UE, requiere EORI en OCI"},"020":{awbPrefix:"020",name:"Lufthansa",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Lufthansa: destino UE, requiere EORI en OCI"},205:{awbPrefix:"205",name:"Emirates",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,notes:"Emirates: prefijo AWB 205 (176 es código IATA numérico alternativo)"},DEFAULT:{awbPrefix:"DEFAULT",name:"Default (todas las demás)",policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:["SSR","OTH","NFY"],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0}},Ia=Object.keys(Le),zo=new Set;function ka(){return{cargoImp:{policyOverrides:{},fwbVersion:void 0,fhlVersion:void 0,includeUnbUnz:void 0,useTypeBHeader:!0,typeBPriority:"QK"},traxon:{apiEndpoint:void 0,senderId:void 0,settings:{}},descartes:{apiEndpoint:void 0,senderId:void 0,settings:{}}}}let Ce=ka();function Vo(){Ce=ka(),At()}function At(){zo.forEach(t=>t(Ce))}const qo={awbPrefix:"000",name:"Política Completa (Default para todos)",policy:71,fwbVersion:"FWB/16",fhlVersion:"FHL/4",enabledSegments:["FWB","AWB","FLT","RTG","SHP","CNE","AGT","NFY","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],disabledSegments:[],enabledFhlSegments:Ia,disabledFhlSegments:[],defaultSphCodes:["EAP","PER","COL"],ociFormat:"withPrefix",includeUnbUnz:!0,fhlAlwaysWithHeader:!0,useTypeBHeader:!0,typeBPriority:"QK",notes:"Política completa unificada - todos los segmentos habilitados"};function Or(t){const r=ut[t],a={...qo,awbPrefix:t,name:r?`${r.name} (política completa)`:`AWB ${t} (política completa)`},n=Ce.cargoImp.policyOverrides[t]||{},o=n.enabledFhlSegments||a.enabledFhlSegments||Ia,s=n.disabledFhlSegments||a.disabledFhlSegments||[];let i=[...n.enabledSegments||a.enabledSegments||[]];const c=n.disabledSegments||a.disabledSegments||[];if(i.includes("NH")){if(!i.includes("NV")&&!c.includes("NV")){const p=i.indexOf("NH");i=[...i.slice(0,p+1),"NV",...i.slice(p+1)]}if(!i.includes("NS")&&!c.includes("NS")){const p=i.indexOf("NV");if(p>=0)i=[...i.slice(0,p+1),"NS",...i.slice(p+1)];else{const m=i.indexOf("NH");i=[...i.slice(0,m+1),"NS",...i.slice(m+1)]}}}return{...a,...n,enabledSegments:i,disabledSegments:c,enabledFhlSegments:o,disabledFhlSegments:s,fwbVersion:n.fwbVersion||Ce.cargoImp.fwbVersion||a.fwbVersion,fhlVersion:n.fhlVersion||Ce.cargoImp.fhlVersion||a.fhlVersion,includeUnbUnz:n.includeUnbUnz??Ce.cargoImp.includeUnbUnz??a.includeUnbUnz,useTypeBHeader:n.useTypeBHeader??Ce.cargoImp.useTypeBHeader??a.useTypeBHeader??!0,typeBPriority:n.typeBPriority||Ce.cargoImp.typeBPriority||a.typeBPriority||"QK"}}function jo(t,r){const a=Ce.cargoImp.policyOverrides[t]||{};Ce.cargoImp.policyOverrides[t]={...a,...r},At()}function Xo(t,r,a){const n=Or(t),o=Ce.cargoImp.policyOverrides[t]||{};let s=[...o.enabledSegments||n.enabledSegments||[]],i=[...o.disabledSegments||n.disabledSegments||[]];a?(s.includes(r)||s.push(r),i=i.filter(c=>c!==r)):(i.includes(r)||i.push(r),s=s.filter(c=>c!==r)),Ce.cargoImp.policyOverrides[t]={...o,enabledSegments:s,disabledSegments:i},At()}function Zo(t,r,a){const n=Or(t),o=Ce.cargoImp.policyOverrides[t]||{};let s=[...o.enabledFhlSegments||n.enabledFhlSegments||[]],i=[...o.disabledFhlSegments||n.disabledFhlSegments||[]];a?(s.includes(r)||s.push(r),i=i.filter(c=>c!==r)):(i.includes(r)||i.push(r),s=s.filter(c=>c!==r)),Ce.cargoImp.policyOverrides[t]={...o,enabledFhlSegments:s,disabledFhlSegments:i},At()}function Ko(t){Ce.cargoImp.useTypeBHeader=t,At()}function Oa(){return Ce.cargoImp.useTypeBHeader??!0}function ar(){const t=Ce.cargoImp.typeBConfig;return{...Wo,...t}}function Yo(t){Ce.cargoImp.typeBConfig={...Ce.cargoImp.typeBConfig,...t},At()}function te(t,r=0,a=!1,n=!0){if(!t)return"";const o=a?" ":"";return t=t.replace(/,/g,"."),t=t.replace(/Ü/g,"U").replace(/ü/g,"u"),t=t.replace(/-/g,o),t=t.replace(/\//g,o),t=t.replace(/#/g,o),t=t.replace(/'/g,o),t=t.replace(/\?/g,o),t=t.replace(/ñ/g,o).replace(/Ñ/g,o),t=t.replace(/\*/g,o),t=t.replace(/&/g,o),t=t.replace(/°/g,o),t=t.replace(/:/g,o),t=t.replace(/\n/g,o).replace(/\r/g,o),t=t.replace(/\+/g,o),t=t.replace(/"/g," ").replace(/"/g," ").replace(/"/g," "),t=t.replace(/`/g," ").replace(/´/g," "),t=t.replace(/_/g,o),t=t.replace(/@/g,o),t=t.replace(/\(/g,"").replace(/\)/g,""),n&&(t=t.replace(/\./g,o)),r>0&&t.length>r&&(t=t.substring(0,r)),t=t.trim(),t=t.replace(/\s+/g," "),t.toUpperCase()}function Jo(t){return t.replace(/:/g," ").replace(/\$/g," ").replace(/=/g," ").replace(/»/g," ")}function $t(t,r=!1){let a=t.replace(/\(/g,"").replace(/\)/g,"").replace(/,/g,"").replace(/&/g,"").replace(/Ñ/g,"N").replace(/ñ/g,"n");return r&&(a=a.replace(/\?/g,"")),a}function Qo(t,r=["CM","SK","LG"]){let a=t.toUpperCase().trim();for(const n of r)if(a.startsWith(n)){a="0"+a;break}return a}function Ae(t,r=1){const a=typeof t=="string"?parseFloat(t):t;return isNaN(a)?"0.0":a.toFixed(r)}function en(t){const r=t?new Date(t):new Date,a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],n=r.getDate().toString().padStart(2,"0"),o=a[r.getMonth()],s=r.getFullYear().toString().slice(-2);return`${n}${o}${s}`}function Fa(){const t=new Date,r=t.getFullYear().toString().slice(-2),a=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),s=t.getMinutes().toString().padStart(2,"0");return`${r}${a}${n}:${o}${s}`}function Fr(){const t=Gt();return t.controlNumber&&t.controlNumber.trim()?t.controlNumber.trim():Date.now().toString().slice(-14)}function Ut(t){return t.replace(/-/g,"").replace(/\s/g,"")}function Ra(t){const r=t.replace(/\s/g,"").replace(/-/g,"");return r.length>=11?r.substring(0,3)+"-"+r.substring(3):r}function tn(t){return t.replace(/-/g,"").replace(/\s/g,"").toUpperCase()}function Ve(t){return Ut(t).substring(0,3)}function ht(t){return{LON:"LHR",RNG:"MDE"}[t.toUpperCase()]||t.toUpperCase()}const it={senderIds:{EC:{senderId:"REUAGT89ECRGML/UIO01:PIMA",senderIdDescartes:"TDVAGT03DSV/BOG01:PIMA"},CO:{senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",senderIdDescartes:"TDVAGT03DSV/BOG01:PIMA"}},defaultPostalCodes:{EC:"00000",CO:"110111",DEFAULT:"10"},chinaPostalCode:"170452",controlNumber:"96728316614806",senderId:"REUAGT89COCRGMASTER/BOG01:PIMA",defaultSignature:"CARGOOP"};function Gt(){if(typeof localStorage>"u")return it;try{const t=localStorage.getItem("traxon_connector_config");if(t){const a=JSON.parse(t);if(a.cargoImp)return{...it,controlNumber:a.cargoImp.controlNumber||it.controlNumber,senderId:a.cargoImp.senderId||it.senderId,defaultSignature:a.cargoImp.defaultSignature||it.defaultSignature}}const r=localStorage.getItem("cargoimp_global_config");if(r)return{...it,...JSON.parse(r)}}catch(t){console.warn("Error loading CARGO-IMP global config:",t)}return{...it}}function bt(t,r,a){if(t&&t.trim())return t.trim().substring(0,9);if(a&&a.trim())return a.trim().substring(0,9);const o=Gt().defaultPostalCodes;return r==="EC"?o.EC||"00000":r==="CO"?o.CO||"110111":o.DEFAULT||"10"}function La(){return Gt().chinaPostalCode||"170452"}function Pa(){return Gt().senderId||it.senderId}function or(){return Gt().defaultSignature||"CARGOOP"}class rn{constructor(){this.config=yt()}getAirlinePolicy(r){return Or(r)}reloadConfig(){this.config=yt()}getPolicyInfo(r){var s;const a=(s=this.config.cargoImp)==null?void 0:s.airlinePolicies,n=[];if(a&&a[r])return{policy:this.getAirlinePolicy(r),source:"custom",airlineName:`Aerolínea ${r} (Configuración personalizada)`,isDefault:!1,warnings:n};if(ut[r])return{policy:this.getAirlinePolicy(r),source:"configured",airlineName:ut[r].name,isDefault:!1,warnings:n};const o=this.getAirlinePolicy(r);return n.push(`⚠️ Aerolínea ${r} no tiene política específica configurada. Se usará la política DEFAULT.`),n.push("💡 Puedes agregar una política personalizada en Configuración → CARGO-IMP."),{policy:o,source:"default",airlineName:`Aerolínea ${r} (usando DEFAULT)`,isDefault:!0,warnings:n}}generateFWB(r,a){const n=Ve(r.awbNumber),o=this.getAirlinePolicy(n),s=a||o.fwbVersion,i=this.buildFwbSegments(r,o,s),c=this.assembleMessage(i,o),d=[];return i.forEach(p=>{p.errors.length>0&&d.push(...p.errors.map(m=>`${p.code}: ${m}`))}),{type:"FWB",version:s,awbNumber:r.awbNumber,isConsolidation:!!r.hasHouses,segments:i,fullMessage:c,isValid:d.length===0,errors:d,policy:o,timestamp:new Date().toISOString()}}generateFHL(r,a,n){const o=Ve(r.awbNumber),s=this.getAirlinePolicy(o),i=n||s.fhlVersion,c=this.buildFhlSegments(r,a,s,i),d=this.assembleFhlMessage(c),p=[];return c.forEach(m=>{m.errors.length>0&&p.push(...m.errors.map(u=>`${m.code}: ${u}`))}),{type:"FHL",version:i,awbNumber:r.awbNumber,hawbNumber:a.hawbNumber,segments:c,fullMessage:d,isValid:p.length===0,errors:p,policy:s,timestamp:new Date().toISOString()}}generateConcatenatedFHL(r,a){if(!r.houseBills||r.houseBills.length===0)return"";const n=Ve(r.awbNumber),o=this.getAirlinePolicy(n),s=a||o.fhlVersion,i=[];return r.houseBills.forEach((c,d)=>{const p=this.generateFHL(r,c,s),m=$t(p.fullMessage,!0);i.push(m)}),i.join(`&
`)}generateFHLCase7(r,a,n){const o=Ve(r.awbNumber),s=this.getAirlinePolicy(o),i=n||s.fhlVersion,c={...s,includeUnbUnz:!0,fhlAlwaysWithHeader:!0},d=this.buildFhlSegments(r,a,c,i,!0);let p=this.assembleFhlMessage(d);p=$t(p,!1);const m=[];return d.forEach(u=>{u.errors.length>0&&m.push(...u.errors.map(l=>`${u.code}: ${l}`))}),{type:"FHL",version:i,awbNumber:r.awbNumber,hawbNumber:a.hawbNumber,segments:d,fullMessage:p,isValid:m.length===0,errors:m,policy:c,timestamp:new Date().toISOString()}}generateAllFHLCase8(r,a){if(!r.houseBills||r.houseBills.length===0)return"";const n=Ve(r.awbNumber),o=this.getAirlinePolicy(n),s=a||o.fhlVersion;let i=s+`
`;return r.houseBills.forEach((c,d)=>{const p=d===0,m=this.buildFhlSegmentsCase8(r,c,o,s,p),u=this.assembleFhlMessageWithoutHeader(m),l=$t(u,!0);i+=l}),i}generateMessageBundle(r){const a=Ve(r.awbNumber),n=this.getAirlinePolicy(a),o=Math.floor(n.policy/10),s=n.policy%10,i=this.generateFWB(r);i.fullMessage=Jo(i.fullMessage);const c=[];let d;if(r.houseBills&&r.houseBills.length>0)switch(o){case 2:case 4:r.houseBills.forEach(p=>{const m=this.generateFHL(r,p);m.fullMessage=$t(m.fullMessage,!1),c.push(m)});break;case 5:d=this.generateConcatenatedFHL(r);break;case 7:r.houseBills.forEach(p=>{const m=this.generateFHLCase7(r,p);c.push(m)});break;case 8:d=this.generateAllFHLCase8(r);break;default:r.houseBills.forEach(p=>{const m=this.generateFHL(r,p);m.fullMessage=$t(m.fullMessage,!1),c.push(m)})}return{fwb:i,fhls:c,concatenatedFhl:d,policyCase:o,policyOption:s}}buildFwbSegments(r,a,n){const o=[],s=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","NFY","FTR"],i=a.enabledSegments||[],c=a.disabledSegments||[];return s.forEach((d,p)=>{tt[d];const m=i.length>0?i.includes(d)&&!c.includes(d):!c.includes(d),u=this.buildFwbSegment(d,r,a,n,m,p+1);o.push(u)}),o.sort((d,p)=>d.order-p.order)}buildFwbSegment(r,a,n,o,s,i){var g,v,f,S,T,b,k,C,A,N,w,O;const c=tt[r];let d="",p=[];const m=[],u=[];switch(r){case"FWB":d=this.buildFwbHeader(a,n,o),p=[{name:"version",value:o,originalValue:o,maxLength:7,required:!0,modified:!1}];break;case"AWB":d=this.buildAwbSegment(a),p=[{name:"awbNumber",value:Ut(a.awbNumber),originalValue:Ut(a.awbNumber),maxLength:11,required:!0,modified:!1},{name:"origin",value:a.origin,originalValue:a.origin,maxLength:3,required:!0,modified:!1},{name:"destination",value:ht(a.destination),originalValue:ht(a.destination),maxLength:3,required:!0,modified:!1},{name:"pieces",value:a.pieces.toString(),originalValue:a.pieces.toString(),maxLength:5,required:!0,modified:!1},{name:"weight",value:Ae(a.weight),originalValue:Ae(a.weight),maxLength:10,required:!0,modified:!1}];break;case"FLT":d=this.buildFltSegment(a),a.flights&&a.flights.length>0&&(p=a.flights.slice(0,2).map((Z,E)=>({name:`flight${E+1}`,value:Z.flightNumber,originalValue:Z.flightNumber,maxLength:10,required:!1,modified:!1})));break;case"RTG":d=this.buildRtgSegment(a),p=[{name:"routing",value:d,originalValue:d,maxLength:100,required:!0,modified:!1}];break;case"SHP":const D=(v=(g=a.agent)==null?void 0:g.address)==null?void 0:v.postalCode;d=this.buildShpSegment(a.shipper,((S=(f=a.consignee)==null?void 0:f.address)==null?void 0:S.countryCode)||"",a.awbNumber,o,D),p=[{name:"name",value:te(a.shipper.name,35,!0),originalValue:te(a.shipper.name,35,!0),maxLength:35,required:!0,modified:!1},{name:"address",value:te(a.shipper.address.street,35,!0),originalValue:te(a.shipper.address.street,35,!0),maxLength:35,required:!0,modified:!1},{name:"city",value:a.shipper.address.place,originalValue:a.shipper.address.place,maxLength:17,required:!0,modified:!1},{name:"country",value:a.shipper.address.countryCode,originalValue:a.shipper.address.countryCode,maxLength:2,required:!0,modified:!1},{name:"postalCode",value:bt(a.shipper.address.postalCode,a.shipper.address.countryCode,D),originalValue:bt(a.shipper.address.postalCode,a.shipper.address.countryCode,D),maxLength:9,required:!1,modified:!1}];break;case"CNE":const y=(b=(T=a.agent)==null?void 0:T.address)==null?void 0:b.postalCode;d=this.buildCneSegment(a.consignee,o,y),p=[{name:"name",value:te(a.consignee.name,35,!0),originalValue:te(a.consignee.name,35,!0),maxLength:35,required:!0,modified:!1},{name:"address",value:te(a.consignee.address.street,35,!0),originalValue:te(a.consignee.address.street,35,!0),maxLength:35,required:!0,modified:!1},{name:"city",value:a.consignee.address.place,originalValue:a.consignee.address.place,maxLength:17,required:!0,modified:!1},{name:"country",value:a.consignee.address.countryCode,originalValue:a.consignee.address.countryCode,maxLength:2,required:!0,modified:!1},{name:"postalCode",value:bt(a.consignee.address.postalCode,a.consignee.address.countryCode,y),originalValue:bt(a.consignee.address.postalCode,a.consignee.address.countryCode,y),maxLength:9,required:!0,modified:!1}];break;case"AGT":d=this.buildAgtSegment(a),p=[{name:"iataCode",value:a.agent.iataCode,originalValue:a.agent.iataCode,maxLength:7,required:!0,modified:!1},{name:"cassCode",value:a.agent.cassCode||"",originalValue:a.agent.cassCode||"",maxLength:4,required:!1,modified:!1},{name:"name",value:a.agent.name,originalValue:a.agent.name,maxLength:35,required:!0,modified:!1}];break;case"SSR":d=this.buildSsrSegment(a),p=[{name:"ssr",value:a.specialServiceRequest||"",originalValue:a.specialServiceRequest||"",maxLength:65,required:!1,modified:!1}];break;case"ACC":d=this.buildAccSegment(a),a.accounting&&a.accounting.length>0&&(p=a.accounting.map((Z,E)=>({name:`acc${E+1}`,value:Z.accountingInformation||"",originalValue:Z.accountingInformation||"",maxLength:34,required:!1,modified:!1})));break;case"CVD":d=this.buildCvdSegment(a);const M=this.calculateWtOt(a);p=[{name:"currency",value:a.currency,originalValue:a.currency,maxLength:3,required:!0,modified:!1},{name:"wtOt",value:M,originalValue:M,maxLength:2,required:!0,modified:!1},{name:"declaredCarriage",value:a.declaredValueCarriage||"NVD",originalValue:a.declaredValueCarriage||"NVD",maxLength:15,required:!0,modified:!1},{name:"declaredCustoms",value:a.declaredValueCustoms||"NCV",originalValue:a.declaredValueCustoms||"NCV",maxLength:15,required:!0,modified:!1}];break;case"RTD":d=this.buildRtdSegment(a,n);break;case"NG":d=this.buildNgSegment(a,n);const B=this.getNatureOfGoods(a,n);p=[{name:"description",value:B,originalValue:B,maxLength:20,required:!0,modified:!1}];break;case"NH":d=this.buildNhSegment(a);break;case"NV":d=this.buildNvSegment(a);break;case"NS":d=this.buildNsSegment(a);break;case"OTH":d=this.buildOthSegment(a);break;case"PPD":d=a.paymentMethod==="Prepaid"?this.buildChargeSummary(a,"PPD"):"";break;case"COL":d=a.paymentMethod==="Collect"?this.buildChargeSummary(a,"COL"):"";break;case"CER":d=this.buildCerSegment(a,n);break;case"ISU":d=this.buildIsuSegment(a,n);break;case"REF":d=this.buildRefSegment(a);break;case"SPH":d=this.buildSphSegment(a,n);const ne=this.getSphCodes(a,n);p=[{name:"codes",value:ne.join("/"),originalValue:ne.join("/"),maxLength:40,required:!0,modified:!1}];break;case"OCI":d=this.buildOciSegment(a,n);break;case"NFY":d=this.buildNfySegment(a),a.alsoNotify&&(p=[{name:"name",value:a.alsoNotify.name||"",originalValue:a.alsoNotify.name||"",maxLength:35,required:!1,modified:!1},{name:"address",value:((k=a.alsoNotify.address)==null?void 0:k.street)||"",originalValue:((C=a.alsoNotify.address)==null?void 0:C.street)||"",maxLength:35,required:!1,modified:!1},{name:"city",value:((A=a.alsoNotify.address)==null?void 0:A.place)||"",originalValue:((N=a.alsoNotify.address)==null?void 0:N.place)||"",maxLength:17,required:!1,modified:!1},{name:"country",value:((w=a.alsoNotify.address)==null?void 0:w.countryCode)||"",originalValue:((O=a.alsoNotify.address)==null?void 0:O.countryCode)||"",maxLength:2,required:!1,modified:!1}]);break;case"FTR":d=this.buildFwbFooter(n);break}const l=d.length>c.maxLength?d:void 0;return d.length>c.maxLength&&m.push(`Excede límite: ${d.length}/${c.maxLength} caracteres (${d.length-c.maxLength} de más)`),{type:r,code:r,name:c.name,content:d,originalContent:l,order:i,enabled:s,editable:!["FWB","FTR","AWB"].includes(r),currentLength:d.length,maxLength:c.maxLength,errors:m,warnings:u,fields:p}}buildTypeBHeader(r,a,n){const o=this.getTypeBConfig(),s=a.typeBPriority||o.defaultPriority,i=o.recipientAddress||"DSGUNXA",c=o.senderPrefix||"DSGTPXA",d=o.originAddress||"TDVAGT03OPERFLOR/BOG1",p=o.includeTimestamp??!0;let m=`.${c}`;if(p){const u=new Date,l=String(u.getUTCDate()).padStart(2,"0")+String(u.getUTCHours()).padStart(2,"0")+String(u.getUTCMinutes()).padStart(2,"0");m+=` ${l}`}return m+=` ${d}`,`${s} ${i}
${m}
${n}`}getCarrierCodeForTypeB(r){if(r.flights&&r.flights.length>0&&r.flights[0].carrierCode)return r.flights[0].carrierCode.toUpperCase().substring(0,2);const a=Ve(r.awbNumber);return{729:"AV",134:"AV",743:"QT",270:"LA",145:"LA",985:"LA",105:"CM",230:"P5","044":"AD",957:"G3",999:"C$",695:"CX",406:"5Y","023":"5X",580:"UX","001":"AA","006":"DL","016":"UA","014":"AC",992:"AA","057":"AF","074":"KL","075":"IB","045":"IB",220:"LH","020":"LH",235:"TK",125:"BA",932:"VS",555:"SU",176:"EK",157:"QR",607:"EY","071":"ET",131:"JL",180:"KE",160:"CA",618:"SQ"}[a]||"XX"}getTypeBConfig(){return ar()}buildFwbHeader(r,a,n){var d;if(a.useTypeBHeader)return this.buildTypeBHeader(r,a,n);if(!a.includeUnbUnz)return n;const o=Pa(),s=Fr(),i=((d=r.routing)==null?void 0:d.recipientAddress)||a.airlineAddress||"AIRLINE_ADDRESS",c=n.replace("FWB/","");return`UNB+IATA:1+${o}+${i}:PIMA+${Fa()}+${s}+0++L'UNH+${s}+CIMFWB:${c}'${n}`}buildAwbSegment(r){const a=Ra(r.awbNumber),n=r.origin.toUpperCase(),o=ht(r.destination);return`${a}${n}${o}/T${r.pieces}K${Ae(r.weight)}`}buildFltSegment(r){if(!r.flights||r.flights.length===0)return"";const a=["FLT"];return r.flights.slice(0,2).forEach(n=>{const o=n.date?new Date(n.date).getDate().toString().padStart(2,"0"):"";a.push(`/${n.flightNumber}/${o}`)}),a.join("")}buildRtgSegment(r){const a=["RTG"];return r.flights&&r.flights.length>0?r.flights.forEach(n=>{const o=ht(n.destination);a.push(`/${o}${n.carrierCode}`)}):a.push(`/${r.origin}XX/${ht(r.destination)}XX`),a.join("")}buildShpSegment(r,a,n,o,s){var g;const i=te(r.name,35,!0),c=te(r.address.street,35,!0),d=r.address.place.toUpperCase(),p=r.address.countryCode.toUpperCase();let m=bt(r.address.postalCode,p,s);const u=Ve(n);p==="EC"&&(a==="CN"||u==="992"||u==="176")&&(m=La());let l="";return o==="FWB/17"?l=`SHP
NAM/${i}
ADR/${c}
LOC/${d}
/${p}/${m}`:l=`SHP
/${i}
/${c}
/${d}
/${p}/${m}`,(g=r.contact)!=null&&g.number&&(l+=`/TE/${r.contact.number.replace(/\s/g,"")}`),l}buildCneSegment(r,a,n){var l,g;const o=te(r.name,35,!0),s=te(r.address.street,35,!0),i=r.address.place.toUpperCase(),c=r.address.countryCode.toUpperCase(),d=((l=r.address.state)==null?void 0:l.toUpperCase())||"",p=bt(r.address.postalCode,c,n);let m=i;c==="US"&&d&&(m=`${i}/${d}`);let u=`CNE
/${o}
/${s}
/${m}
/${c}/${p}`;return(g=r.contact)!=null&&g.number&&(u+=`/TE/${r.contact.number.replace(/\s/g,"")}`),u}buildAgtSegment(r){const a=r.agent.iataCode,n=r.agent.cassCode||"",o=te(r.agent.name,35,!0),s=r.agent.place.toUpperCase();return`AGT//${a}/${n}
/${o}
/${s}`}buildSsrSegment(r){if(!r.specialServiceRequest)return"";const a=te(r.specialServiceRequest,195,!0).split(`
`).filter(n=>n.trim()).slice(0,3);return a.length===0?"":"SSR/"+a.map(n=>te(n,65,!1,!1)).join(`
/`)}buildCvdSegment(r){const a=r.currency,n=this.calculateWtOt(r),o=r.declaredValueCarriage||"NVD",s=r.declaredValueCustoms||"NCV";return`CVD/${a}//${n}/${o}/${s}/XXX`}calculateWtOt(r){const a=r.paymentMethod==="Prepaid";let n=!1,o=!1;return r.otherCharges&&r.otherCharges.length>0&&r.otherCharges.forEach(s=>{s.paymentMethod==="Collect"&&(n=!0),s.paymentMethod==="Prepaid"&&(o=!0)}),a?n&&!o?"PC":"PP":o&&!n?"CP":"CC"}buildRtdSegment(r,a){const n=[],o=a.policy%10;return r.rates.forEach((s,i)=>{let c=`RTD/${i+1}/P${s.pieces}`;if(c+=`/K${Ae(s.weight)}`,c+=`/C${this.mapRateClass(s.rateClassCode)}`,s.commodityCode&&/^\d+$/.test(s.commodityCode)&&(c+=`/S${s.commodityCode.padStart(4,"0").substring(0,4)}`),s.chargeableWeight&&(c+=`/W${Ae(s.chargeableWeight)}`),o>=1){const d=s.rateOrCharge?Ae(s.rateOrCharge,2):"0.0",p=s.total?Ae(s.total,2):"0.0";c+=`/R${d}/T${p}`}n.push(c)}),n.join(`
`)}mapRateClass(r){const a={QUANTITY_RATE:"Q",NORMAL_RATE:"N",MINIMUM_CHARGE:"M",SPECIFIC_COMMODITY_RATE:"C",BASIC_CHARGE:"B"};return r.length===1?r:a[r]||"Q"}buildNgSegment(r,a){const n=Ve(r.awbNumber);if(n==="985"||n==="145"){const s=r.rates[0],i=(s==null?void 0:s.commodityCode)||"";return r.hasHouses?i==="0609"||i==="609"?"/NC/CONSOLIDATE FLOWERS":`/NC/${this.getNatureOfGoods(r,a)}`:"/NG/CUT FLOWERS"}const o=this.getNatureOfGoods(r,a);return r.hasHouses?`/NC/${o}`:`/NG/${o}`}getNatureOfGoods(r,a){return r.goodsDescriptionOverride?te(r.goodsDescriptionOverride,20,!0):r.description?te(r.description,20,!0):"FRESHPERISH"}buildNhSegment(r){const a=[],n=[];let o=2;return r.rates.forEach(i=>{i.hsCodes?a.push(...i.hsCodes):i.hsCode&&a.push(i.hsCode)}),r.hasHouses&&r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(i=>{i.htsCodes&&i.htsCodes.length>0&&a.push(...i.htsCodes)}),a.length===0?"":([...new Set(a)].forEach(i=>{n.push(`/${o}/NH/${i}`),o++}),n.join(`
`))}getNextLineNumberAfterNh(r){const a=[];return r.rates.forEach(o=>{o.hsCodes?a.push(...o.hsCodes):o.hsCode&&a.push(o.hsCode)}),r.hasHouses&&r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(o=>{o.htsCodes&&o.htsCodes.length>0&&a.push(...o.htsCodes)}),2+[...new Set(a)].length}buildNvSegment(r){let a=0;if(r.hasHouses&&r.houseBills&&r.houseBills.length>0?(r.houseBills.forEach((s,i)=>{const c=s.volumeCubicMeters??s.volume??0;console.log(`[NV Debug] House ${i}: volumeCubicMeters=${s.volumeCubicMeters}, volume=${s.volume}, using=${c}`),c>0&&(a+=c)}),a<=0&&r.volume&&r.volume>0&&(a=r.volume,console.log(`[NV Debug] No volume in houses, using master volume: ${a}`))):(a=r.volume??0,console.log(`[NV Debug] Direct shipment, using master volume: ${a}`)),console.log(`[NV Debug] Total volume: ${a}`),a<=0)return"";const n=this.getNextLineNumberAfterNh(r),o=Math.max(a,.01);return`/${n}/NV/MC${Ae(o,2)}`}buildNsSegment(r){if(!r.hasHouses||!r.pieces||r.pieces<=0)return"";let a=this.getNextLineNumberAfterNh(r),n=0;return r.houseBills&&r.houseBills.length>0&&r.houseBills.forEach(o=>{const s=o.volumeCubicMeters??o.volume??0;s>0&&(n+=s)}),n<=0&&r.volume&&r.volume>0&&(n=r.volume),n>0&&a++,`/${a}/NS/${r.pieces}`}buildOthSegment(r){if(!r.otherCharges||r.otherCharges.length===0)return"";const a=["OTH"];return r.otherCharges.forEach(n=>{const o=n.paymentMethod==="Prepaid"?"P":"C";a.push(`/${o}/${n.code}${Ae(n.amount,2)}`)}),a.join(`
`)}buildChargeSummary(r,a){if(r.chargeSummaryOverride){const d=r.chargeSummaryOverride;let p=`${a}`;return d.totalWeightCharge&&(p+=`/WT${d.totalWeightCharge}`),d.totalOtherChargesDueAgent&&(p+=`
/OA${d.totalOtherChargesDueAgent}`),d.totalOtherChargesDueCarrier&&(p+=`/OC${d.totalOtherChargesDueCarrier}`),p+=`/CT${d.chargeSummaryTotal}`,p}let n=0,o=0,s=0;r.rates.forEach(d=>{n+=d.total||0}),r.otherCharges&&r.otherCharges.forEach(d=>{d.entitlement==="DueAgent"?o+=d.amount:s+=d.amount});const i=n+o+s;let c=`${a}/WT${Ae(n,2)}`;return(o>0||s>0)&&(c+=`
/OA${Ae(o,2)}/OC${Ae(s,2)}`),c+=`/CT${Ae(i,2)}`,c}buildCerSegment(r,a){let n;return a.useAgencyNameForCER?n=te(r.agent.name||or(),20,!0):n=te(r.signature||or(),20,!0),`CER/${n}`}buildIsuSegment(r,a){const n=en(r.executionDate),o=(r.executionPlace||r.origin).toUpperCase();let s;return a!=null&&a.useAgencyNameForCER?s=te(r.agent.name||or(),20,!0):s=te(r.signature||or(),20,!0),`ISU/${n}/${o}/${s}`}buildRefSegment(r){const a=r.agent.iataCode,n=r.agent.cassCode||"",o=r.origin.toUpperCase();return`REF///AGT/${a}${n}/${o}`}buildSphSegment(r,a){return`SPH/${this.getSphCodes(r,a).join("/")}`}getSphCodes(r,a){return r.specialHandlingCodes&&r.specialHandlingCodes.length>0?r.specialHandlingCodes:a.defaultSphCodes}buildOciSegment(r,a){const n=r.consignee.address.countryCode.toUpperCase(),o=r.shipper.address.countryCode.toUpperCase(),s=r.consignee.taxId||r.consignee.accountNumber||"";if(!s.trim())return"";const i=s.replace(/\s/g,"");return o==="EC"||n==="US"||n==="CA"?`OCI/${n}/CNE/T/${i}`:`OCI/${n}/CNE/T/EORI${i}`}buildAccSegment(r){if(!r.accounting||r.accounting.length===0)return"";const a=[];for(const n of r.accounting){let o=n.identifier||"GEN";o={GovernmentBillOfLading:"GBL",CreditCardNumber:"CC",CreditCardExpiryDate:"CCE",CreditCardIssuanceName:"CCN",GeneralInformation:"GEN",ModeOfSettlement:"MOS",ShippersReferenceNumber:"SRN"}[o]||o.substring(0,3).toUpperCase();const i=te(n.accountingInformation||"",34,!0);i&&a.push(`ACC/${o}/${i}`)}return a.join(`
`)}buildNfySegment(r){if(!r.alsoNotify)return"";const a=r.alsoNotify,n=[],o=te(a.name||"",35,!0);if(!o)return"";if(n.push(`NFY/${o}`),a.name2&&n.push(`/${te(a.name2,35,!0)}`),a.address){const s=te(a.address.street||"",35,!0);s&&n.push(`/${s}`),a.address.street2&&n.push(`/${te(a.address.street2,35,!0)}`)}if(a.address){const s=te(a.address.place||"",17,!0),i=a.address.state||"",c=a.address.countryCode||"",d=a.address.postalCode||"";(s||c)&&n.push(`/${s}/${i}/${c}/${d}`)}if(a.contact&&a.contact.number){const s=a.contact.identifier||"TE",i=te(a.contact.number,25,!0);n.push(`/${s}${i}`)}return n.join(`
`)}buildFwbFooter(r){if(r!=null&&r.useTypeBHeader)return"";const a=Fr();return`'UNT+3+${a}'UNZ+1+${a}'`}getCountryFromAirport(r){return{BOG:"CO",MDE:"CO",CLO:"CO",CTG:"CO",UIO:"EC",GYE:"EC",MIA:"US",JFK:"US",LAX:"US",AMS:"NL",FRA:"DE",MAD:"ES",CDG:"FR",LHR:"GB"}[r.toUpperCase()]||"CO"}isFhlSegmentEnabled(r,a){return a.disabledFhlSegments&&a.disabledFhlSegments.length>0&&a.disabledFhlSegments.includes(r)?!1:a.enabledFhlSegments&&a.enabledFhlSegments.length>0?a.enabledFhlSegments.includes(r):!0}buildFhlSegments(r,a,n,o,s=!1){const i=[],c=s||n.fhlAlwaysWithHeader||n.includeUnbUnz&&n.policy%10<2,d=this.isFhlSegmentEnabled("FHL",n);if(c){const B=this.buildFhlEdifactHeader(r,n,o);i.push(this.createFhlSegment("FHL",B,1,d,[]))}else i.push(this.createFhlSegment("FHL",o,1,d,[]));const p=this.buildMbiSegment(r),m=this.isFhlSegmentEnabled("MBI",n);i.push(this.createFhlSegment("MBI",p,2,m,[{name:"awbNumber",value:Ut(r.awbNumber),originalValue:Ut(r.awbNumber),maxLength:11,required:!0,modified:!1},{name:"origin",value:r.origin,originalValue:r.origin,maxLength:3,required:!0,modified:!1},{name:"destination",value:r.destination,originalValue:r.destination,maxLength:3,required:!0,modified:!1}]));const u=this.buildHbsSegment(a,r,n),l=this.isFhlSegmentEnabled("HBS",n);i.push(this.createFhlSegment("HBS",u,3,l,[{name:"hawbNumber",value:a.hawbNumber,originalValue:a.hawbNumber,maxLength:20,required:!0,modified:!1},{name:"pieces",value:a.pieces.toString(),originalValue:a.pieces.toString(),maxLength:5,required:!0,modified:!1},{name:"weight",value:Ae(a.weight),originalValue:Ae(a.weight),maxLength:10,required:!0,modified:!1}]));const g=this.isFhlSegmentEnabled("TXT",n),f=(te(a.natureOfGoods,70,!0,!1)||"").replace(/\s*HS\s*.*/i,"").trim(),S=a.pieces?` SLAC-${a.pieces}`:"",T=f?`TXT/${f}${S}`:"";i.push(this.createFhlSegment("TXT",T,4,g&&!!T,[]));const b=this.isFhlSegmentEnabled("HTS",n);if(a.htsCodes&&a.htsCodes.length>0){const B=`HTS/${a.htsCodes[0]}`;i.push(this.createFhlSegment("HTS",B,5,b,[]))}else i.push(this.createFhlSegment("HTS","",5,!1,[]));const k=this.buildFhlOciSegment(a,r,n),C=this.isFhlSegmentEnabled("OCI",n)&&!!k;i.push(this.createFhlSegment("OCI",k,6,C,[]));const A=this.buildFhlShpSegment(a,r,n),N=this.isFhlSegmentEnabled("SHP",n);i.push(this.createFhlSegment("SHP",A,7,N,[]));const w=this.buildFhlCneSegment(a,r,n),O=this.isFhlSegmentEnabled("CNE",n);i.push(this.createFhlSegment("CNE",w,8,O,[]));const D=`CVD/${r.currency}/PP/NVD/NCV/XXX`,y=this.isFhlSegmentEnabled("CVD",n);i.push(this.createFhlSegment("CVD",D,9,y,[]));const M=this.isFhlSegmentEnabled("FTR",n)&&!n.useTypeBHeader;return c&&!n.useTypeBHeader?i.push(this.createFhlSegment("FTR",this.buildFwbFooter(n),10,M,[])):i.push(this.createFhlSegment("FTR","",10,!1,[])),i}buildFhlEdifactHeader(r,a,n){var d;if(a.useTypeBHeader)return this.buildTypeBHeaderFhl(r,a,n);const o=Pa(),s=Fr(),i=((d=r.routing)==null?void 0:d.recipientAddress)||a.airlineAddress||"AIRLINE_ADDRESS",c=n.replace("FHL/","");return`UNB+IATA:1+${o}+${i}:PIMA+${Fa()}+${s}+0++L'UNH+${s}+CIMFHL:${c}'${n}`}buildTypeBHeaderFhl(r,a,n){const o=this.getTypeBConfig(),s=a.typeBPriority||o.defaultPriority,i=o.recipientAddress||"DSGUNXA",c=o.senderPrefix||"DSGTPXA",d=o.originAddress||"TDVAGT03OPERFLOR/BOG1",p=o.includeTimestamp??!0;let m=`.${c}`;if(p){const u=new Date,l=String(u.getUTCDate()).padStart(2,"0")+String(u.getUTCHours()).padStart(2,"0")+String(u.getUTCMinutes()).padStart(2,"0");m+=` ${l}`}return m+=` ${d}`,`${s} ${i}
${m}
${n}`}buildFhlSegmentsCase8(r,a,n,o,s){const i=[];if(s){const S=this.buildMbiSegment(r);i.push(this.createFhlSegment("MBI",S,1,!0,[]))}const c=this.buildHbsSegment(a,r,n);i.push(this.createFhlSegment("HBS",c,2,!0,[]));const p=(te(a.natureOfGoods,70,!0,!1)||"").replace(/\s*HS\s*.*/i,"").trim(),m=a.pieces?` SLAC-${a.pieces}`:"",u=p?`TXT/${p}${m}`:"";if(u&&i.push(this.createFhlSegment("TXT",u,3,!0,[])),a.htsCodes&&a.htsCodes.length>0){const S=`HTS/${a.htsCodes[0]}`;i.push(this.createFhlSegment("HTS",S,4,!0,[]))}const l=this.buildFhlOciSegment(a,r,n);l&&i.push(this.createFhlSegment("OCI",l,5,!0,[]));const g=this.buildFhlShpSegment(a,r,n);i.push(this.createFhlSegment("SHP",g,6,!0,[]));const v=this.buildFhlCneSegment(a,r,n);i.push(this.createFhlSegment("CNE",v,7,!0,[]));const f=`CVD/${r.currency}/PP/NVD/NCV/XXX`;return i.push(this.createFhlSegment("CVD",f,8,!0,[])),i}assembleFhlMessageWithoutHeader(r){return r.filter(a=>a.enabled&&a.content).sort((a,n)=>a.order-n.order).map(a=>a.content).join(`
`)+`
`}createFhlSegment(r,a,n,o,s){const i=Le[r],c=[],d=a.length>i.maxLength?a:void 0;return a.length>i.maxLength&&c.push(`Excede límite: ${a.length}/${i.maxLength} caracteres (${a.length-i.maxLength} de más)`),{type:r,code:r,name:i.name,content:a,originalContent:d,order:n,enabled:o,editable:!["FHL","FTR","MBI"].includes(r),currentLength:a.length,maxLength:i.maxLength,errors:c,warnings:[],fields:s}}buildMbiSegment(r){const a=Ra(r.awbNumber),n=r.origin.toUpperCase(),o=ht(r.destination);return`MBI/${a}${n}${o}/T${r.pieces}K${Ae(r.weight,0)}`}buildHbsSegment(r,a,n){const o=(r.origin||a.origin).toUpperCase(),s=ht(r.destination||a.destination),i="CUT FLOWERS",c=n.hawbPrefixAdd0||["CM","SK","LG"];let d=tn(r.hawbNumber);d=Qo(d,c);const p=r.pieces.toString();return`HBS/${d}/${o}${s}/${r.pieces}/K${Ae(r.weight)}/${p}/${i}`}buildFhlOciSegment(r,a,n){var m,u,l,g;const o=r.consignee||a.consignee,s=((u=(m=o.address)==null?void 0:m.countryCode)==null?void 0:u.toUpperCase())||"US",i=o.taxId||o.accountNumber||"";if(!i||!i.trim())return"";const c=((g=(l=(r.shipper||a.shipper).address)==null?void 0:l.countryCode)==null?void 0:g.toUpperCase())||"CO",d=i.replace(/\s/g,"");return c==="EC"||s==="US"||s==="CA"||n.ociFormat==="withoutPrefix"?`OCI/${s}/CNE/T/${d}`:`OCI/${s}/CNE/T/EORI${d}`}buildFhlShpSegment(r,a,n){var l,g,v,f,S,T,b,k;const o=r.shipper||{name:r.shipperName,address:a.shipper.address},s=te(o.name||r.shipperName,35,!0),i=te(((l=o.address)==null?void 0:l.street)||"",35,!0),c=(((g=o.address)==null?void 0:g.place)||"").toUpperCase(),d=(((v=o.address)==null?void 0:v.countryCode)||"CO").toUpperCase(),p=(S=(f=a.agent)==null?void 0:f.address)==null?void 0:S.postalCode;let m=bt((T=o.address)==null?void 0:T.postalCode,d,p);if(n.requiresChinaPostalCode&&d==="EC"){const C=((k=(b=(r.consignee||a.consignee).address)==null?void 0:b.countryCode)==null?void 0:k.toUpperCase())||"",A=Ve(a.awbNumber);(C==="CN"||A==="992"||A==="176")&&(m=La())}return`SHP/${s}
/${i}
/${c}
/${d}/${m||""}`}buildFhlCneSegment(r,a,n){var v,f,S,T,b,k,C;const o=r.consignee||{name:r.consigneeName,address:a.consignee.address},s=te(o.name||r.consigneeName,35,!0),i=te(((v=o.address)==null?void 0:v.street)||"",35,!0),c=(((f=o.address)==null?void 0:f.place)||"").toUpperCase(),d=(((S=o.address)==null?void 0:S.countryCode)||"US").toUpperCase(),p=((b=(T=o.address)==null?void 0:T.state)==null?void 0:b.toUpperCase())||"";let m=((k=o.address)==null?void 0:k.postalCode)||"";m.length>9&&(m=m.substring(0,9)),m||(m="10");let u=c;d==="US"&&p&&(u=`${c}/${p}`);let l=`CNE/${s}
/${i}
/${u}
/${d}/${m}`;const g=(C=o.contact)==null?void 0:C.number;return g&&(l+=`/TE/${g.replace(/\s/g,"")}`),l}assembleMessage(r,a){return r.filter(n=>n.enabled&&n.content).sort((n,o)=>n.order-o.order).map(n=>n.content).join(`
`)}assembleFhlMessage(r){return r.filter(a=>a.enabled&&a.content).sort((a,n)=>a.order-n.order).map(a=>a.content).join(`
`)}getAllFwbSegments(){return tt}getAllFhlSegments(){return Le}getAllAirlinePolicies(){return ut}updateSegment(r,a){return{...r,content:a,currentLength:a.length,errors:a.length>r.maxLength?[`Excede límite de ${r.maxLength} caracteres`]:[]}}regenerateMessage(r,a){return this.assembleMessage(r,a)}}const Wt=new rn,an=/^[A-Z]+$/,St=/^[0-9]+$/,on=/^[A-Z0-9]+$/,nr=/^[A-Z]{3}$/,_a=/^[A-Z]{2}$/,nn=/^[A-Z]{3}$/,sn=/^[0-3][0-9](JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[0-9]{2}$/,ln=/^[0-3]?[0-9]$/,ft=/^[0-9]+(\.[0-9]+)?$/,cn=/^[A-Z]{3}$/,dn=/^(TE|FX|EM)$/,pn=["CNE","SHP","AGT","NFY"],mn=["T","RA","CT","CP","SM","SO","ACE","ACI","ACH","CB","RG","ID"],gn=["PP","CC","PC","CP"],un=["EAW","EAP"],Rr=70;function Et(t,r){const a=[],n=[],o=t.segments.filter(l=>l.enabled);for(const l of o){let g;t.type==="FWB"?g=hn(l,t,r):g=Pn(l,t),a.push(g),n.push(...g.issues)}const s=$n(t,o);for(const l of s)if(l.segment!=="GLOBAL"){const g=a.find(v=>v.segment===l.segment);g&&(g.issues.push(l),l.severity==="error"?(g.errorCount++,g.isValid=!1):l.severity==="warning"?g.warningCount++:l.severity==="info"&&g.infoCount++)}n.push(...s);const i=Wn(t.fullMessage);n.push(...i);const c=n.filter(l=>l.severity==="error").length,d=n.filter(l=>l.severity==="warning").length,p=n.filter(l=>l.severity==="info").length,m=zn(c,d,o.length),u=c===0?d>0?`✅ Mensaje válido con ${d} advertencia(s).`:"✅ Mensaje válido. Sin errores ni advertencias.":`⚠️ ${c} error(es) encontrado(s). Revise antes de enviar.`;return{isValid:c===0&&d===0,canSend:!0,hasErrors:c>0,segmentResults:a,allIssues:n,totalErrors:c,totalWarnings:d,totalInfo:p,score:m,summary:u,timestamp:new Date().toISOString()}}function hn(t,r,a){const n=[],o=t.content.split(`
`).filter(p=>p.trim()),s=t.code;switch(s){case"FWB":bn(o,n);break;case"AWB":fn(o,n,t);break;case"FLT":xn(o,n,t);break;case"RTG":vn(o,n,t);break;case"SHP":sr("SHP",o,n,t);break;case"CNE":sr("CNE",o,n,t);break;case"AGT":Nn(o,n,t);break;case"SSR":Cn(o,n,t);break;case"CVD":Da(o,n,t,r);break;case"RTD":wn(o,n,t);break;case"NG":yn(o,n,t,r);break;case"NH":An(o,n,t,a);break;case"NV":Sn(o,n,t);break;case"NS":En(o,n,t);break;case"OTH":Tn(o,n,t);break;case"PPD":case"COL":In(s,o,n,t);break;case"CER":kn(o,n,t);break;case"ISU":On(o,n,t);break;case"REF":Fn(o,n,t);break;case"SPH":Rn(o,n,t);break;case"OCI":Ba(o,n,t);break;case"NFY":Ln(o,n,t);break}["FWB","FHL","FTR"].includes(s)||o.forEach((p,m)=>{Ma(p,s,m+1,n)});const i=n.filter(p=>p.severity==="error").length,c=n.filter(p=>p.severity==="warning").length,d=n.filter(p=>p.severity==="info").length;return{segment:s,segmentName:t.name,isValid:i===0,issues:n,errorCount:i,warningCount:c,infoCount:d,lines:o}}function bn(t,r,a){const n=t.join(`
`),o=n.match(/FWB\/(\d+)/);if(!o){r.push({severity:"error",segment:"FWB",field:"version",message:"Falta identificador de versión FWB/XX en el header",rule:"FWB.3[a]: El tag siempre debe ser FWB seguido de versión",suggestion:"Agregar FWB/16 o FWB/17"});return}const s=parseInt(o[1]);if((s<9||s>17)&&r.push({severity:"warning",segment:"FWB",field:"version",message:`Versión FWB/${s} no es estándar. Las versiones comunes son 16 y 17`,rule:"FWB versión: hasta 2[n]",found:`FWB/${s}`,expected:"FWB/16 o FWB/17"}),n.includes("UNB+")&&(n.includes("IATA:1")||r.push({severity:"warning",segment:"FWB",field:"UNB",message:"Header EDIFACT debería contener IATA:1 como identificador de sintaxis",rule:"EDIFACT UNB: Syntax identifier IATA:1"}),n.includes("UNH+")||r.push({severity:"error",segment:"FWB",field:"UNH",message:"Falta segmento UNH (Message Header) en el envelope EDIFACT",rule:"EDIFACT: UNB debe ir seguido de UNH"})),n.match(/^Q[KDPU]\s/)){const i=n.split(`
`);i.length<2&&r.push({severity:"error",segment:"FWB",field:"TypeB",message:"Header Type B incompleto. Debe tener al menos 2 líneas (prioridad + origen)",rule:"Type B: Priority line + Origin line + FWB version"}),i.length>=2&&!i[1].startsWith(".")&&r.push({severity:"error",segment:"FWB",field:"TypeB",message:"Segunda línea del header Type B debe comenzar con punto (.)",rule:"Type B: .SenderPrefix DDHHmm OriginAddress",found:i[1].substring(0,10),suggestion:"Formato: .DSGTPXA DDHHmm ORIGINADDRESS"})}}function fn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"AWB",message:"Segmento AWB está vacío. Es OBLIGATORIO.",rule:"AWB: Segmento requerido en FWB [FNA: AWB0010]"});return}const o=n.match(/^(\d{3})-(\d{8})([A-Z]{3})([A-Z]{3})\/T(\d+)([KL])([\d.]+)$/);if(o){const[s,i,c,d,p,m,u,l]=o;u==="L"&&r.push({severity:"info",segment:"AWB",field:"weightUnit",message:"Peso expresado en Libras (L). La mayoría de aerolíneas usan Kilos (K).",rule:"AWB: a[1] = K (kilos) o L (libras)",found:"L (Libras)"});const g=c.substring(0,7),v=parseInt(c[7]),f=parseInt(g)%7;v!==f&&r.push({severity:"error",segment:"AWB",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido. Serial "${c}" → últimos 7 dígitos: ${g}, mod 7 = ${f}, pero check digit es ${v}`,rule:"AWB: El 8vo dígito del serial es check digit Mod-7 [FNA: AWB0020]",expected:`${g}${f}`,found:c,suggestion:`Corregir serial a ${g}${f}`}),nr.test(d)||r.push({severity:"error",segment:"AWB",field:"origin",message:`Código de origen "${d}" no es un código IATA válido (3 letras mayúsculas)`,rule:"AWB [1/18]: Origen 3[a] código IATA [FNA: AWB0025]",found:d}),nr.test(p)||r.push({severity:"error",segment:"AWB",field:"destination",message:`Código de destino "${p}" no es un código IATA válido (3 letras mayúsculas)`,rule:"AWB [1/18]: Destino 3[a] código IATA [FNA: AWB0030]",found:p}),parseInt(m)<=0&&r.push({severity:"error",segment:"AWB",field:"pieces",message:"Número de piezas debe ser mayor a 0",rule:"AWB [22J]: Piezas hasta 4[n] [FNA: AWB0040]",found:m}),m.length>4&&r.push({severity:"warning",segment:"AWB",field:"pieces",message:`Número de piezas excede 4 dígitos (${m.length})`,rule:"AWB [22J]: Máximo 4 dígitos [FNA: AWB0040]",found:m});const S=parseFloat(l);(isNaN(S)||S<=0)&&r.push({severity:"error",segment:"AWB",field:"weight",message:"Peso debe ser un número mayor a 0",rule:"AWB [22K]: Peso hasta 7[n] con decimales [FNA: AWB0050]",found:l}),l.replace(".","").length>7&&r.push({severity:"warning",segment:"AWB",field:"weight",message:`Peso excede 7 dígitos (${l})`,rule:"AWB [22K]: Máximo 7 dígitos [FNA: AWB0050]",found:l})}else{const s=n.match(/^(\d{1,3})/);s?s[1].length!==3&&r.push({severity:"error",segment:"AWB",field:"awbPrefix",message:`Prefijo de aerolínea debe ser exactamente 3 dígitos. Encontrado: ${s[1].length} dígito(s)`,rule:"AWB [1A]: Prefijo aerolínea 3[n] [FNA: AWB0015]",expected:"3 dígitos (ej: 992)",found:s[1]}):r.push({severity:"error",segment:"AWB",field:"awbPrefix",message:"Falta prefijo de aerolínea (3 dígitos numéricos)",rule:"AWB [1A]: Prefijo aerolínea 3[n] [FNA: AWB0015]",expected:"Ej: 992, 075, 176",found:n.substring(0,5)});const i=n.match(/^\d{3}-(\d+)/);i&&i[1].length!==8&&r.push({severity:"error",segment:"AWB",field:"awbSerial",message:`Número serial AWB debe ser exactamente 8 dígitos. Encontrado: ${i[1].length}`,rule:"AWB [1B]: Serial 8[n] [FNA: AWB0020]",expected:"8 dígitos",found:i[1]});const c=n.match(/\d{8}([A-Z]{0,6})/);if(c){const d=c[1];d.length<6&&r.push({severity:"error",segment:"AWB",field:"origin/destination",message:"Origen y destino deben ser códigos IATA de 3 letras cada uno (total 6 caracteres)",rule:"AWB [1/18]: Origen 3[a] + Destino 3[a]",expected:"Ej: BOGMIA, UIOLHR",found:d})}n.includes("/T")||r.push({severity:"error",segment:"AWB",field:"pieces",message:"Falta indicador de piezas /T{cantidad}",rule:"AWB [22J]: Piezas hasta 4[n] con prefijo T [FNA: AWB0040]",suggestion:"Formato: /T304 (304 piezas)"}),!n.includes("K")&&!n.includes("L")&&r.push({severity:"error",segment:"AWB",field:"weight",message:"Falta indicador de peso K{peso} o L{peso}",rule:"AWB: Peso a[1]n[1-7] — K (kilos) o L (libras) [FNA: AWB0045/AWB0050]",suggestion:"Formato: K1500.0 (1500 kilos) o L3300.0 (3300 libras)"})}}function xn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"warning",segment:"FLT",message:"Segmento FLT está vacío. Es obligatorio para procesos de aduana y ACAS.",rule:"FLT: Obligatorio para customs/ACAS [FNA: FLT0010]",suggestion:"Formato: FLT/XX9999/DD (Aerolínea+Vuelo/Día)"});return}if(!n.startsWith("FLT")){r.push({severity:"error",segment:"FLT",message:'Segmento FLT debe comenzar con "FLT"',rule:"FLT: Tag obligatorio",found:n.substring(0,10)});return}const s=n.replace(/^FLT\/?/,"").split("/").filter(c=>c!=="");if(s.length===0){r.push({severity:"error",segment:"FLT",message:"Segmento FLT no contiene información de vuelo.",rule:"FLT: Al menos un vuelo requerido",suggestion:"Formato: FLT/XX9999/DD"});return}let i=0;for(;i<s.length;){const c=s[i],d=s[i+1];if(c.match(/^([A-Z0-9]{2})(\d{1,5}[A-Z]?)$/)||r.push({severity:"error",segment:"FLT",field:"flightNumber",message:`Número de vuelo "${c}" no es válido. Formato: 2 chars carrier + hasta 5 dígitos`,rule:"FLT [19A]: Carrier 2[m] + Número hasta 5[m] [FNA: FLT0015/FLT0020]",expected:"Ej: DA926, EY7122, CX456",found:c,suggestion:'NO repetir el código de aerolínea en el número. Ej: usar "926" no "DA926" si carrier ya es "DA"'}),d!==void 0){if(!ln.test(d))r.push({severity:"error",segment:"FLT",field:"flightDate",message:`Día de vuelo "${d}" no es válido. Debe ser 2 dígitos (01-31)`,rule:"FLT [19A]: Día n[2] (día del mes) [FNA: FLT0025]",expected:"01-31",found:d});else{d.length===1&&r.push({severity:"warning",segment:"FLT",field:"flightDate",message:`Día de vuelo "${d}" tiene 1 dígito. Spec IATA exige n[2] (2 dígitos). Usar "0${d}" para cumplir spec.`,rule:"FLT [19A]: Día n[2] — usar cero-fill",found:d,expected:`0${d}`,suggestion:`Cambiar ${d} por 0${d}`});const m=parseInt(d);(m<1||m>31)&&r.push({severity:"error",segment:"FLT",field:"flightDate",message:`Día de vuelo ${d} fuera de rango (1-31)`,rule:"FLT [19A]: Día debe ser 1-31",found:d})}i+=2}else r.push({severity:"warning",segment:"FLT",field:"flightDate",message:`Vuelo "${c}" no tiene día de vuelo.`,rule:"FLT [19A]: Día n[2] recomendado",suggestion:"Agregar día: /DD después del número de vuelo"}),i+=1}}function vn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"RTG",message:"Segmento RTG está vacío. Es OBLIGATORIO.",rule:"RTG: Segmento requerido"});return}if(!n.startsWith("RTG")){r.push({severity:"error",segment:"RTG",message:'Segmento debe comenzar con "RTG"',rule:"RTG: Tag obligatorio",found:n.substring(0,10)});return}const o=n.replace("RTG","").split("/").filter(s=>s.trim());if(o.length===0){r.push({severity:"error",segment:"RTG",message:"RTG no contiene segmentos de ruta",rule:"RTG: Debe tener al menos un segmento aeropuerto+carrier",suggestion:"Ej: RTG/MIADA/LHRBA"});return}o.length>3&&r.push({severity:"error",segment:"RTG",message:`RTG tiene ${o.length} tramos de ruta. Máximo permitido: 3`,rule:"RTG: Máximo 3 rutas (DDD+CC) permitidas por IATA",found:`${o.length} tramos`,expected:"Máximo 3 tramos"}),o.forEach((s,i)=>{const c=s.trim();if(c.length<5&&r.push({severity:"warning",segment:"RTG",field:`route${i+1}`,message:`Segmento de ruta "${c}" muy corto. Esperado: 3 letras aeropuerto + 2 letras carrier`,rule:"RTG: AeropuertoIATA(3a) + CarrierCode(2a)",expected:"Ej: MIADA (MIA + DA)",found:c}),c.length>=3){const d=c.substring(0,3);nr.test(d)||r.push({severity:"error",segment:"RTG",field:`route${i+1}`,message:`Código aeropuerto "${d}" no es válido (debe ser 3 letras)`,rule:"RTG: Código IATA aeropuerto 3[a]",found:d})}if(c.length>=5){const d=c.substring(3,5);on.test(d)||r.push({severity:"warning",segment:"RTG",field:`route${i+1}`,message:`Código carrier "${d}" debe ser 2 caracteres alfanuméricos`,rule:"RTG: Carrier code 2[m]",found:d})}})}function sr(t,r,a,n){const o=n.content,s=t==="SHP"?"Remitente (Shipper)":"Consignatario (Consignee)";if(!o||o.trim()===""){a.push({severity:"error",segment:t,message:`Segmento ${t} está vacío. Es OBLIGATORIO.`,rule:`${t}: Segmento requerido [FNA: ${t}0010]`});return}if(!o.startsWith(t)){a.push({severity:"error",segment:t,message:`Segmento debe comenzar con "${t}"`,rule:`${t}: Tag obligatorio`,found:o.substring(0,5)});return}const i=o.split(`
`),c=i[0];let d;c===t||c.match(new RegExp(`^${t}$`))?d=i.slice(1):c.startsWith(t+"/")||c.startsWith(t+`
`)?d=[c.substring(t.length),...i.slice(1)]:d=i.slice(1);const p=d[0];if(!p||p.trim()===""||p==="/")a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${s} es OBLIGATORIO y está vacío`,rule:`${t} [2/4]: Nombre hasta 35[t] [FNA: ${t}0020]`});else{const g=p.replace(/^\/?(?:NAM\/)?(.*?)$/,"$1").trim();g.length>35&&a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${s} excede 35 caracteres (tiene ${g.length})`,rule:`${t} [2/4]: Nombre hasta 35[t] [FNA: ${t}0020]`,found:g.substring(0,40)+"...",suggestion:"Truncar el nombre a 35 caracteres máximo"}),g.length===0&&a.push({severity:"error",segment:t,field:"name",message:`Nombre del ${s} está vacío después del separador`,rule:`${t} [2/4]: Nombre obligatorio`})}const m=d[1];if(!m||m.trim()===""||m==="/")a.push({severity:"error",segment:t,field:"address",message:`Dirección del ${s} es OBLIGATORIA y está vacía. Si no se conoce, usar SN (Sin Número).`,rule:`${t} [2/4]: Dirección hasta 35[t] [FNA: ${t}0025]`,suggestion:"Si no se tiene dirección completa, usar /SN (Sin Número)"});else{const g=m.replace(/^\//,"").trim();g.length>35&&a.push({severity:"error",segment:t,field:"address",message:`Dirección del ${s} excede 35 caracteres (tiene ${g.length})`,rule:`${t} [2/4]: Dirección hasta 35[t] [FNA: ${t}0025]`,found:g.substring(0,40)+"...",suggestion:"Truncar la dirección a 35 caracteres"}),g&&!/\d/.test(g)&&a.push({severity:"info",segment:t,field:"address",message:`Dirección del ${s} no contiene número. Si falta el número de calle, agregar SN (Sin Número) según IATA.`,rule:`${t}: Si falta número de calle, usar SN`,suggestion:"Agregar SN al final de la dirección si no tiene número"})}const u=d[2];if(!u||u.trim()===""||u==="/")a.push({severity:"error",segment:t,field:"city",message:`Ciudad del ${s} es OBLIGATORIA y está vacía`,rule:`${t} [2/4]: Ciudad hasta 17[t] [FNA: ${t}0030]`});else{const g=u.replace(/^\//,"").split("/"),v=g[0].trim();if(v.length>17&&a.push({severity:"error",segment:t,field:"city",message:`Ciudad del ${s} excede 17 caracteres (tiene ${v.length})`,rule:`${t} [2/4]: Ciudad hasta 17[t] [FNA: ${t}0030]`,found:v}),g.length>1&&g[1].trim()){const f=g[1].trim();f.length>9&&a.push({severity:"error",segment:t,field:"state",message:`Estado/Provincia del ${s} excede 9 caracteres`,rule:`${t} [2/4]: Estado hasta 9[t] (USA: 2[a]) [FNA: ${t}0035]`,found:f})}}const l=d[3];if(!l||l.trim()===""||l==="/")a.push({severity:"error",segment:t,field:"country",message:`País del ${s} es OBLIGATORIO y está vacío`,rule:`${t} [2/4]: Código de país 2[a] ISO [FNA: ${t}0040]`});else{const g=l.replace(/^\//,"").split("/"),v=g[0].trim();if(_a.test(v)||a.push({severity:"error",segment:t,field:"country",message:`Código de país "${v}" no es válido. Debe ser código ISO de 2 letras mayúsculas`,rule:`${t} [2/4]: Código de país 2[a] ISO [FNA: ${t}0040]`,expected:"Ej: US, CO, EC, DE, CN",found:v}),g.length>=2){const S=g[1].trim().split(/\/(TE|FX|EM)\//),T=S[0].trim();if(!T||T===""?a.push({severity:"error",segment:t,field:"postalCode",message:`Código postal del ${s} está vacío. Si no se conoce, usar "00000"`,rule:`${t} [2/4]: Código postal hasta 9[t]. Regla de relleno: si no existe, usar "00000" [FNA: ${t}0045]`,suggestion:'Usar "00000" en lugar de dejar vacío'}):T.length>9&&a.push({severity:"error",segment:t,field:"postalCode",message:`Código postal del ${s} excede 9 caracteres (tiene ${T.length})`,rule:`${t} [2/4]: Código postal hasta 9[t] [FNA: ${t}0045]`,found:T}),S.length>=3){const b=S[1],k=S[2];dn.test(b)||a.push({severity:"warning",segment:t,field:"contact",message:`Identificador de contacto "${b}" no reconocido. Usar TE (teléfono), FX (fax) o EM (email)`,rule:`${t} [2/4]: Identificador de contacto 3[a] [FNA: ${t}0050]`,expected:"TE, FX o EM",found:b}),k&&k.length>25&&a.push({severity:"warning",segment:t,field:"contact",message:"Número de contacto excede 25 caracteres (hasta 70 permitido con ACAS)",rule:`${t} [2/4]: Contacto hasta 25[t] (ACAS: 70[t]) [FNA: ${t}0055]`,found:k.substring(0,30)+"..."})}}else a.push({severity:"error",segment:t,field:"postalCode",message:`Falta código postal del ${s}. Si no se conoce, usar "00000"`,rule:`${t} [2/4]: Código postal obligatorio. Regla de relleno: usar "00000" si no existe [FNA: ${t}0045]`,suggestion:"Agregar /CC/00000 después del código de país"})}l&&l.replace(/^\//,"").split("/")[0].trim()==="CN"&&t==="CNE"&&(!l.includes("/TE/")&&!l.includes("/FX/")&&!l.includes("/EM/")&&a.push({severity:"warning",segment:t,field:"contact",message:"CHINA: El consignatario en China DEBE incluir teléfono válido (/TE/). Aduanas de China lo exige para ACAS/PLACI.",rule:"CNE China: Teléfono obligatorio para Risk Assessment",suggestion:"Agregar /TE/número después del código postal"}),a.push({severity:"info",segment:t,message:'CHINA: Si el consignatario es particular (sin empresa), usar PASSPORT + número o "9999CN" como identificador en OCI.',rule:"OCI China: Regla para particulares CN",suggestion:"Agregar línea OCI: /CN/CNE/T/9999CN o /CN/CNE/P/PASSPORT_NUMBER"}))}function Nn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"AGT",message:"Segmento AGT está vacío. Es OBLIGATORIO.",rule:"AGT: Segmento requerido [FNA: AGT0010]"});return}if(!n.startsWith("AGT")){r.push({severity:"error",segment:"AGT",message:'Segmento debe comenzar con "AGT"',rule:"AGT: Tag obligatorio"});return}const o=n.match(/AGT\/\/(\d+)/);if(o){const c=o[1];c.length<7&&r.push({severity:"warning",segment:"AGT",field:"iataCode",message:`Código IATA del agente tiene ${c.length} dígitos. Se esperan 7`,rule:"AGT: Código IATA 7[n] [FNA: AGT0020]",found:c})}else r.push({severity:"error",segment:"AGT",field:"iataCode",message:"Falta código IATA del agente",rule:"AGT: Código IATA 7 dígitos obligatorio [FNA: AGT0020]",suggestion:"Formato: AGT//{IATA_CODE}/{CASS_CODE}"});const s=n.match(/AGT\/\/\d+\/(\d+)/);if(s){const c=s[1];c.length!==4&&r.push({severity:"warning",segment:"AGT",field:"cassCode",message:`Código CASS del agente debe ser exactamente 4 dígitos. Encontrado: ${c.length} dígito(s)`,rule:"AGT: Código CASS 4[n] [FNA: AGT0025]",expected:"4 dígitos (ej: 0001)",found:c})}else o&&r.push({severity:"warning",segment:"AGT",field:"cassCode",message:"Falta código CASS del agente (4 dígitos después del código IATA)",rule:"AGT: Formato AGT//IATA/CASS [FNA: AGT0025]",suggestion:"Agregar código CASS de 4 dígitos: AGT//{IATA}/{CASS}"});const i=n.split(`
`);if(i.length<2)r.push({severity:"error",segment:"AGT",field:"name",message:"Falta nombre del agente (línea 2 del segmento AGT)",rule:"AGT: Nombre obligatorio, hasta 35[t] [FNA: AGT0035]"});else{const c=i[1].replace(/^\//,"").trim();c.length>35&&r.push({severity:"warning",segment:"AGT",field:"name",message:`Nombre del agente excede 35 caracteres (${c.length})`,rule:"AGT: Nombre hasta 35[t]",found:c.substring(0,40)+"..."})}if(i.length<3)r.push({severity:"warning",segment:"AGT",field:"city",message:"Falta ciudad del agente (línea 3 del segmento AGT)",rule:"AGT: Ciudad hasta 17[t]"});else{const c=i[2].replace(/^\//,"").trim();c.length>17&&r.push({severity:"error",segment:"AGT",field:"city",message:`Ciudad del agente excede 17 caracteres (tiene ${c.length})`,rule:"AGT: Ciudad hasta a[1-17]",found:c.substring(0,20)+"..."})}}function Cn(t,r,a){const n=a.content;if(!n||n.trim()==="")return;if(!n.startsWith("SSR/")){r.push({severity:"error",segment:"SSR",message:'Segmento debe comenzar con "SSR/"',rule:"SSR: Tag obligatorio"});return}const o=n.replace("SSR/","").split(`
/`);o.length>3&&r.push({severity:"warning",segment:"SSR",message:`SSR tiene ${o.length} líneas. Máximo recomendado: 3`,rule:"SSR: Máximo 3 líneas de 65 chars"}),o.forEach((s,i)=>{s.length>65&&r.push({severity:"error",segment:"SSR",field:`line${i+1}`,line:i+1,message:`Línea ${i+1} de SSR excede 65 caracteres (tiene ${s.length})`,rule:"SSR: Cada línea máximo 65[t]",found:s.substring(0,70)+"..."})})}function Da(t,r,a,n){var v,f,S,T,b,k,C,A;const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"CVD",message:"Segmento CVD está vacío. Es OBLIGATORIO.",rule:"CVD: Segmento requerido [FNA: CVD0010]"});return}if(!o.startsWith("CVD/")){r.push({severity:"error",segment:"CVD",message:'Segmento debe comenzar con "CVD/"',rule:"CVD: Tag obligatorio"});return}const s=o.replace("CVD/","").split("/"),i=s.length>=2&&s[1].trim()!=="";let c,d,p,m,u;i?(c=(s[0]||"").trim(),d=(s[1]||"").trim(),p=(v=s[2])==null?void 0:v.trim(),m=(f=s[3])==null?void 0:f.trim(),u=(S=s[4])==null?void 0:S.trim()):(c=(s[0]||"").trim(),d=(s[2]||"").trim(),p=(T=s[3])==null?void 0:T.trim(),m=(b=s[4])==null?void 0:b.trim(),u=(k=s[5])==null?void 0:k.trim()),nn.test(c)||r.push({severity:"error",segment:"CVD",field:"currency",message:`Código de moneda "${c}" no es válido (debe ser 3 letras ISO)`,rule:"CVD [12]: Código de moneda 3[a] [FNA: CVD0015]",expected:"Ej: USD, EUR, COP",found:c}),d&&!gn.includes(d)&&r.push({severity:"error",segment:"CVD",field:"wtOt",message:`Código de cargo "${d}" no es válido`,rule:"CVD: P/C debe ser PP, CC, PC o CP [FNA: CVD0020/CVD0025]",expected:"PP (Prepaid), CC (Collect), PC (Weight Prepaid/Other Collect), CP (Weight Collect/Other Prepaid)",found:d}),p!==void 0&&p!==""&&p!=="NVD"&&(p.length>12&&r.push({severity:"error",segment:"CVD",field:"declaredCarriage",message:"Valor para transporte excede 12 caracteres",rule:"CVD [16]: Valor para transporte hasta 12[m] (o NVD) [FNA: CVD0035]",found:p}),!ft.test(p)&&p!=="0"&&r.push({severity:"warning",segment:"CVD",field:"declaredCarriage",message:`Valor para transporte "${p}" no es numérico ni NVD`,rule:"CVD [16]: Hasta 12[m] o NVD [FNA: CVD0035]",found:p,suggestion:"Usar NVD (No Value Declared) o un valor numérico"})),m!==void 0&&m!==""&&m!=="NCV"&&m.length>12&&r.push({severity:"error",segment:"CVD",field:"declaredCustoms",message:"Valor para aduanas excede 12 caracteres",rule:"CVD [17]: Valor para aduanas hasta 12[m] (o NCV) [FNA: CVD0040]",found:m}),u!==void 0&&u!==""?u!=="XXX"&&u.length>3&&r.push({severity:"warning",segment:"CVD",field:"insurance",message:`Valor de seguro "${u}" excede 3 caracteres. Normalmente se usa XXX (sin seguro declarado)`,rule:"CVD: Seguro a[3] — normalmente XXX [FNA: CVD0045]",found:u,suggestion:"Usar XXX si no se declara seguro"}):r.push({severity:"info",segment:"CVD",field:"insurance",message:"Falta campo de seguro. Normalmente se coloca XXX (sin valor declarado para seguro).",rule:"CVD: Formato completo CVD/CUR/PC/NVD/NCV/XXX",suggestion:"Agregar /XXX al final del CVD"});const g=(((C=n.segments.find(N=>N.code==="AWB"))==null?void 0:C.content)||"").match(/[A-Z]{3}([A-Z]{3})/);if(g){const N=g[1],w={DAC:"Bangladesh",CGP:"Bangladesh (Chittagong)",CMB:"Sri Lanka"};w[N]&&s.length>=5&&((A=s[4])==null?void 0:A.trim())==="NCV"&&r.push({severity:"warning",segment:"CVD",field:"declaredCustoms",message:`Destino ${N} (${w[N]}) puede requerir valor numérico en lugar de NCV. Usar "0" si no hay valor`,rule:"CVD [17]: Excepción para Bangladesh/Sri Lanka: exigen valor numérico",suggestion:"Reemplazar NCV por 0 o valor real"})}}function wn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"RTD",message:"Segmento RTD está vacío. Es OBLIGATORIO.",rule:"RTD: Segmento requerido"});return}const o=n.split(`
`).filter(s=>s.trim());o.length>12&&r.push({severity:"error",segment:"RTD",message:`RTD tiene ${o.length} líneas. Máximo permitido por IATA: 12`,rule:"RTD: Máximo 12 líneas en esta sección",found:`${o.length} líneas`,expected:"Máximo 12 líneas"}),o.forEach((s,i)=>{if(!s.startsWith("RTD/")){r.push({severity:"warning",segment:"RTD",line:i+1,lineContent:s,message:`Línea ${i+1} no comienza con "RTD/"`,rule:"RTD: Cada línea debe comenzar con RTD/"});return}const c=s.replace("RTD/","").split("/");if(c[0]){const u=parseInt(c[0]);(isNaN(u)||u<1)&&r.push({severity:"warning",segment:"RTD",field:"lineNumber",line:i+1,message:`Número de línea RTD inválido: "${c[0]}"`,rule:"RTD: Número de línea hasta 2[n]"})}const d=c.find(u=>u.startsWith("P"));if(d){const u=d.substring(1);St.test(u)||r.push({severity:"error",segment:"RTD",field:"pieces",line:i+1,message:`Número de piezas "${u}" no es numérico`,rule:"RTD: Piezas P{n}",found:u})}const p=c.find(u=>u.startsWith("K"));if(p){const u=p.substring(1);ft.test(u)||r.push({severity:"error",segment:"RTD",field:"weight",line:i+1,message:`Peso "${u}" no tiene formato numérico válido`,rule:"RTD: Peso K{n.n}",found:u})}const m=c.find(u=>u.startsWith("C")&&u.length<=3);if(m){const u=m.substring(1),l=["Q","N","M","C","B","R","S","U","E"];u.length>0&&!l.includes(u)&&!St.test(u)&&r.push({severity:"warning",segment:"RTD",field:"rateClass",line:i+1,message:`Clase de tarifa "${u}" no es estándar`,rule:"RTD: Rate class C{code} - C, M, N, Q, B",found:u,expected:"C (Commodity), N (Normal), M (Minimum), Q (Quantity), B (Basic)"})}})}function yn(t,r,a,n){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"NG",message:"Segmento NG está vacío. Es OBLIGATORIO.",rule:"NG: Descripción de mercancía requerida"});return}const s=o.match(/\/(NG|NC)\/(.*)/);if(!s){r.push({severity:"warning",segment:"NG",message:"Formato NG no estándar. Esperado: /NG/descripción",rule:"RTD [22I]: Descripción de mercancía 20[t] por línea",found:o.substring(0,30)});return}const i=s[2];if(i.length>20&&r.push({severity:"warning",segment:"NG",field:"description",message:`Descripción de mercancía excede 20 caracteres por línea (tiene ${i.length})`,rule:"RTD [22I]: Descripción 20[t] por línea, máximo 11 líneas",found:i.substring(0,25)+"..."}),i.length===0&&r.push({severity:"error",segment:"NG",field:"description",message:"Descripción de mercancía está vacía",rule:"NG: Descripción obligatoria"}),i.length>0){const c=i.toUpperCase().trim(),d=Lr.some(u=>c===u||c===u+"S"),p=!d&&Lr.some(u=>c.includes(u)&&c.length<=u.length+5);d?r.push({severity:"warning",segment:"NG",field:"description",message:`⚠️ ACAS ALERTA: Descripción "${i}" es demasiado vaga. Descripciones genéricas causan HOLDS en Risk Assessment (ACAS/PLACI). Sección 6 del manual lista ${Lr.length}+ términos prohibidos.`,rule:"ACAS Sección 6: Descripciones vagas causan retención en screening [FNA: NG-VAGUE]",found:i,suggestion:'Usar descripción específica del producto. Ej: "AUTOMOTIVE BRAKE PADS" en vez de "PARTS", "COTTON TEXTILE GARMENTS" en vez de "GOODS", "LITHIUM ION LAPTOP BATTERIES" en vez de "BATTERIES"'}):p&&r.push({severity:"info",segment:"NG",field:"description",message:`Descripción "${i}" podría ser considerada vaga. Verifique que sea lo suficientemente específica para ACAS/PLACI.`,rule:"ACAS Sección 6: Revisión de descripciones potencialmente vagas [FNA: NG-VAGUE]",found:i,suggestion:"Considere agregar más detalle al producto: material, uso, forma, etc."});const m=Mn.filter(u=>c.includes(u));m.length>0&&r.push({severity:"info",segment:"NG",field:"description",message:`Descripción contiene término(s) de escrutinio DG: ${m.join(", ")}. Asegúrese de que el SPH y segmentos DG sean consistentes.`,rule:"DG Scrutiny: Términos que activan revisión adicional de mercancías peligrosas",found:i,suggestion:m.includes("LITHIUM")||m.includes("BATTERY")||m.includes("BATTERIES")?"Si contiene baterías de litio, verificar SPH (ELI/ELM/RLI/RLM) y declaración DG según IATA DGR Sección II.":"Verificar que SPH y documentación DG reflejen correctamente el contenido declarado."}),s[1]==="NC"&&!(n!=null&&n.isConsolidation)&&r.push({severity:"warning",segment:"NG",field:"type",message:"Tipo NC (Consolidation goods) detectado en envío DIRECTO. Usar /NG/ en lugar de /NC/.",rule:"NG vs NC: NG = General Goods (directos), NC = Consolidation [FNA: NG0010]",suggestion:"Para envíos directos usar /NG/DESCRIPCION"})}}function An(t,r,a,n){const o=a.content;if(!o||o.trim()===""){n!=null&&n.requiresHTS&&r.push({severity:"error",segment:"NH",message:"Código HS (Harmonized System) es OBLIGATORIO para esta aerolínea",rule:"NH: Código HS obligatorio según política de aerolínea",suggestion:"Agregar al menos un código HS de 6-10 dígitos"});return}o.split(`
`).filter(i=>i.trim()).forEach((i,c)=>{const d=i.match(/\/(\d+)\/NH\/(\d+)/);if(!d){r.push({severity:"warning",segment:"NH",line:c+1,lineContent:i,message:`Línea NH con formato inválido: "${i}"`,rule:"NH: Formato /lineNum/NH/codigo",suggestion:"Ej: /2/NH/060311"});return}const p=d[2];p.length<6&&r.push({severity:"error",segment:"NH",field:"hsCode",line:c+1,message:`Código HS "${p}" tiene menos de 6 dígitos. Mínimo 6 dígitos obligatorio para USA, UAE, UE y China`,rule:"NH: Código HS 6 a 10[n] - Mínimo 6 dígitos",found:p,suggestion:"Completar a mínimo 6 dígitos"}),p.length>10&&r.push({severity:"error",segment:"NH",field:"hsCode",line:c+1,message:`Código HS "${p}" excede 10 dígitos`,rule:"NH: Código HS máximo 10[n]",found:p}),St.test(p)||r.push({severity:"error",segment:"NH",field:"hsCode",line:c+1,message:`Código HS "${p}" contiene caracteres no numéricos`,rule:"NH: Solo dígitos permitidos",found:p})})}function Sn(t,r,a){const n=a.content;if(!n||n.trim()==="")return;const o=n.match(/\/(\d+)\/NV\/MC([\d.]+)/);if(!o){r.push({severity:"warning",segment:"NV",message:"Formato NV no estándar. Esperado: /lineNum/NV/MC{volumen}",rule:"NV: Volumen en metros cúbicos con prefijo MC",found:n.substring(0,30),suggestion:"Ej: /4/NV/MC0.50"});return}const s=parseFloat(o[2]);(isNaN(s)||s<0)&&r.push({severity:"error",segment:"NV",field:"volume",message:`Volumen "${o[2]}" no es un número válido`,rule:"NV: Volumen numérico con decimales",found:o[2]})}function En(t,r,a){const n=a.content;if(!n||n.trim()==="")return;const o=n.match(/\/(\d+)\/NS\/(\d+)/);if(!o){r.push({severity:"warning",segment:"NS",message:"Formato NS no estándar. Esperado: /lineNum/NS/{piezas}",rule:"NS: SLAC hasta 5[n]",found:n.substring(0,30)});return}const s=o[2];s.length>5&&r.push({severity:"warning",segment:"NS",field:"slac",message:`SLAC "${s}" excede 5 dígitos`,rule:"NS: Hasta 5[n]",found:s})}function Tn(t,r,a){const n=a.content;if(!n||n.trim()==="")return;n.split(`
`).filter(s=>s.trim()).forEach((s,i)=>{const c=s.match(/OTH\/([PC])\/([A-Z]{2,3})\/([\d.]+)/);if(!c){s.startsWith("OTH/")||r.push({severity:"warning",segment:"OTH",line:i+1,message:"Línea OTH con formato inválido",rule:"OTH: Formato OTH/P_o_C/Código/Monto [FNA: OTH0010]",found:s.substring(0,40)});return}const d=c[1];d!=="P"&&d!=="C"&&r.push({severity:"error",segment:"OTH",field:"prepaidOrCollect",line:i+1,message:`Indicador debe ser P (Prepaid) o C (Collect): "${d}"`,rule:"OTH: P=Prepaid, C=Collect [FNA: OTH0015]",found:d})})}function In(t,r,a,n){const o=n.content;if(!o||o.trim()==="")return;o.startsWith(t+"/")||a.push({severity:"warning",segment:t,message:`Segmento debe comenzar con "${t}/"`,rule:`${t}: Tag obligatorio`,found:o.substring(0,10)});const s=o.replace(`${t}/`,""),i=/WT[\d.]/.test(s),c=/OC[\d.]/.test(s),d=/CT[\d.]/.test(s);i||a.push({severity:"error",segment:t,field:"WT",message:`Falta identificador WT (Weight Charge) en ${t}. Spec: WT n[1-12]`,rule:`${t}: WT (peso) obligatorio [FNA: ${t}0020]`,suggestion:`Agregar WT seguido del monto. Ej: ${t}/WT3194.24/OC778.00/CT3972.24`}),c||a.push({severity:"warning",segment:t,field:"OC",message:`Falta identificador OC (Other Charges) en ${t}. Si no hay cargos adicionales, usar OC0`,rule:`${t}: OC (otros cargos) recomendado`,suggestion:"Agregar OC0 si no hay cargos adicionales de aerolínea"}),d||a.push({severity:"error",segment:t,field:"CT",message:`Falta identificador CT (Cargo Total) en ${t}. Spec: CT n[1-12]`,rule:`${t}: CT (total) obligatorio [FNA: ${t}0045]`,suggestion:"Agregar CT seguido del total. Ej: CT3972.24"});const p=s.match(/WT([\d.]+)/);p&&!ft.test(p[1])&&a.push({severity:"error",segment:t,field:"WT",message:`Monto WT "${p[1]}" no es numérico válido`,rule:`${t}: WT n[1-12]`,found:p[1]});const m=s.match(/OC([\d.]+)/);m&&!ft.test(m[1])&&a.push({severity:"warning",segment:t,field:"OC",message:`Monto OC "${m[1]}" no es numérico válido`,rule:`${t}: OC n[1-12]`,found:m[1]});const u=s.match(/CT([\d.]+)/);u&&!ft.test(u[1])&&a.push({severity:"error",segment:t,field:"CT",message:`Monto CT "${u[1]}" no es numérico válido`,rule:`${t}: CT n[1-12]`,found:u[1]})}function kn(t,r,a){const n=a.content;if(!n||n.trim()==="")return;if(!n.startsWith("CER/")){r.push({severity:"warning",segment:"CER",message:'Segmento debe comenzar con "CER/"',rule:"CER: Tag obligatorio"});return}const o=n.replace("CER/","").trim();o.length>20&&r.push({severity:"warning",segment:"CER",field:"signature",message:`Firma excede 20 caracteres (tiene ${o.length})`,rule:"CER: Firma hasta 20[t]",found:o.substring(0,25)+"..."})}function On(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"ISU",message:"Segmento ISU está vacío. Es OBLIGATORIO.",rule:"ISU: Segmento requerido [FNA: ISU0010]"});return}if(!n.startsWith("ISU/")){r.push({severity:"error",segment:"ISU",message:'Segmento debe comenzar con "ISU/"',rule:"ISU: Tag obligatorio [FNA: ISU0010]"});return}const o=n.replace("ISU/","").split("/");if(o[0]){const s=o[0].trim();sn.test(s)||r.push({severity:"error",segment:"ISU",field:"date",message:`Fecha "${s}" no tiene formato DDMMMYY`,rule:"ISU: Fecha DDMMMYY (7 chars) [FNA: ISU0015/ISU0020/ISU0025]",expected:"Ej: 24JAN26",found:s})}else r.push({severity:"error",segment:"ISU",field:"date",message:"Falta fecha de emisión",rule:"ISU: Fecha obligatoria [FNA: ISU0015]"});if(o.length>=2){const s=o[1].trim();s.length>17&&r.push({severity:"warning",segment:"ISU",field:"place",message:`Lugar de emisión excede 17 caracteres (tiene ${s.length})`,rule:"ISU: Lugar hasta 17[t] [FNA: ISU0030]",found:s})}else r.push({severity:"error",segment:"ISU",field:"place",message:"Falta lugar de emisión",rule:"ISU: Lugar obligatorio [FNA: ISU0030]"});if(o.length>=3){const s=o[2].trim();s.length>20&&r.push({severity:"warning",segment:"ISU",field:"signature",message:"Firma excede 20 caracteres",rule:"ISU: Firma hasta 20[t] [FNA: ISU0035]",found:s.substring(0,25)})}}function Fn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"REF",message:"Segmento REF está vacío. Es OBLIGATORIO.",rule:"REF: Referencia del agente requerida [FNA: REF0010]"});return}if(!n.startsWith("REF")){r.push({severity:"error",segment:"REF",message:'Segmento debe comenzar con "REF"',rule:"REF: Tag obligatorio"});return}const o=n.replace(/^REF\/?/,"").trim();o.length>30&&r.push({severity:"warning",segment:"REF",field:"agentRef",message:`Referencia excede 30 caracteres (tiene ${o.length})`,rule:"REF: Referencia hasta 30[t]",found:o.substring(0,35)+"..."})}function Rn(t,r,a,n){const o=a.content;if(!o||o.trim()===""){r.push({severity:"error",segment:"SPH",message:"Segmento SPH está vacío. Es OBLIGATORIO.",rule:"SPH: Al menos un código de manejo especial requerido"});return}if(!o.startsWith("SPH/")){r.push({severity:"error",segment:"SPH",message:'Segmento debe comenzar con "SPH/"',rule:"SPH: Tag obligatorio"});return}const i=o.replace("SPH/","").trim().split("/").filter(m=>m.trim());i.forEach((m,u)=>{const l=m.trim();cn.test(l)||r.push({severity:"error",segment:"SPH",field:`code${u+1}`,message:`Código SPH "${l}" no es válido. Debe ser exactamente 3 letras mayúsculas`,rule:"SPH: Códigos SPL 3[a]",expected:"Ej: EAP, PER, EAW",found:l})}),i.length>9&&r.push({severity:"error",segment:"SPH",message:`SPH tiene ${i.length} códigos. Máximo permitido: 9`,rule:"SPH: Máximo 9 códigos",found:`${i.length} códigos`}),i.some(m=>un.includes(m.trim()))||r.push({severity:"error",segment:"SPH",message:"Falta código e-AWB obligatorio: EAW (sin bolsa de documentos) o EAP (con bolsa de documentos)",rule:"SPH: Mandatorios e-AWB: EAW o EAP",suggestion:"Agregar EAP (con bolsa) o EAW (sin bolsa)"});const d=i.some(m=>m.trim()==="EAW"),p=i.some(m=>m.trim()==="EAP");d&&p&&r.push({severity:"warning",segment:"SPH",message:"Se encontraron EAW y EAP simultáneamente. Usar solo uno: EAW (sin bolsa) o EAP (con bolsa)",rule:"SPH: EAW y EAP son mutuamente excluyentes",suggestion:"Remover uno de los dos códigos"})}function Ba(t,r,a){const n=a.content;if(!n||n.trim()==="")return;n.split(`
`).filter(s=>s.trim()).forEach((s,i)=>{const d=(s.startsWith("OCI")?s.replace("OCI",""):s).split("/").filter(l=>l!=="");if(d.length<4){r.push({severity:"warning",segment:"OCI",line:i+1,lineContent:s,message:"Línea OCI incompleta. Esperado: /País/Identificador/TipoControl/Información",rule:"OCI: 4 campos obligatorios (País, Party, Type, Value) [FNA: OCI0010]",found:s.substring(0,40)});return}const p=d[0].trim();p&&!_a.test(p)&&r.push({severity:"error",segment:"OCI",field:"country",line:i+1,message:`Código de país OCI "${p}" no es válido (debe ser 2 letras ISO)`,rule:"OCI: País 2[a] [FNA: OCI0015]",found:p});const m=d[1].trim();m&&!pn.includes(m)&&r.push({severity:"warning",segment:"OCI",field:"party",line:i+1,message:`Identificador de información "${m}" no es estándar`,rule:"OCI: Identificador de información 3[a] (CNE, SHP, AGT) [FNA: OCI0020]",expected:"CNE, SHP, AGT, NFY",found:m});const u=d[2].trim();if(u&&u.length>2&&!mn.includes(u)&&r.push({severity:"warning",segment:"OCI",field:"type",line:i+1,message:`Identificador de control "${u}" no es estándar`,rule:"OCI: Identificador de control 1-2[a] (T, RA, CT, etc.) [FNA: OCI0025]",found:u}),d.length>=4){const l=d[3].trim();l.length>35&&r.push({severity:"warning",segment:"OCI",field:"value",line:i+1,message:`Información OCI excede 35 caracteres (tiene ${l.length})`,rule:"OCI: Información hasta 35[m] [FNA: OCI0030]",found:l.substring(0,40)+"..."})}p==="CN"&&r.push({severity:"info",segment:"OCI",line:i+1,message:'CHINA: Si la entidad no tiene código fiscal, usar "9999CN" como identificador (OCI /CN/CNE/T/9999CN).',rule:"OCI China: Usar 9999CN para entidades sin código",suggestion:"Si no tiene Tax ID, usar 9999CN"}),p==="US"&&r.push({severity:"info",segment:"OCI",line:i+1,message:"USA: La aduana de EE.UU. requiere Tax ID (EIN/SSN) del consignatario final en OCI.",rule:"OCI USA: Tax ID obligatorio para customs clearance",suggestion:"Verificar que el valor sea un EIN o SSN válido"})})}function Ln(t,r,a){const n=a.content;if(!n||n.trim()==="")return;n.startsWith("NFY")||r.push({severity:"warning",segment:"NFY",message:'Segmento debe comenzar con "NFY"',rule:"NFY: Tag obligatorio"});const o=n.split(`
`).slice(1);if(o.length>0){const s=o[0];if(s){const i=s.replace(/^\//,"").trim();i.length>35&&r.push({severity:"warning",segment:"NFY",field:"name",message:"Nombre de notificación excede 35 caracteres",rule:"NFY: Nombre hasta 35[t]",found:i.substring(0,40)})}}}function Pn(t,r,a){const n=[],o=t.content.split(`
`).filter(p=>p.trim()),s=t.code;switch(s){case"MBI":_n(o,n,t);break;case"HBS":Dn(o,n,t);break;case"SHP":sr("SHP",o,n,t);break;case"CNE":sr("CNE",o,n,t);break;case"OCI":Ba(o,n,t);break;case"HTS":Bn(o,n,t);break;case"TXT":Hn(o,n,t);break;case"CVD":Da(o,n,t,r);break}["FHL","FTR"].includes(s)||o.forEach((p,m)=>{Ma(p,s,m+1,n)});const i=n.filter(p=>p.severity==="error").length,c=n.filter(p=>p.severity==="warning").length,d=n.filter(p=>p.severity==="info").length;return{segment:s,segmentName:t.name,isValid:i===0,issues:n,errorCount:i,warningCount:c,infoCount:d,lines:o}}function _n(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"MBI",message:"Segmento MBI está vacío. Es OBLIGATORIO en FHL.",rule:"MBI: Información del Master AWB requerida"});return}const o=n.match(/(\d{3})-(\d{8})([A-Z]{3})([A-Z]{3})\/T(\d{1,4})([KL])([\d.]+)?/),s=o?null:n.match(/(\d{3})-(\d{8})([A-Z]{3})([A-Z]{3})\/T(\d{1,4})/);if(!o&&!s){const i=n.match(/(\d{3})-(\d{8})/);if(!i)r.push({severity:"error",segment:"MBI",field:"awbNumber",message:"Número AWB no encontrado en formato correcto (999-12345678)",rule:"MBI: AWB = prefijo(3n) + guión + serial(8n)",suggestion:"Formato: MBI/992-56984125BOGMIA/T10"});else{const c=i[2],d=c.substring(0,7),p=parseInt(c[7]),m=parseInt(d)%7;p!==m&&r.push({severity:"error",segment:"MBI",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido en MBI. Serial "${c}" → mod 7 = ${m}, check es ${p}`,rule:"MBI: El 8vo dígito del serial es check digit Mod-7",expected:`${d}${m}`,found:c}),n.match(/\d{8}([A-Z]{3})([A-Z]{3})/)||r.push({severity:"error",segment:"MBI",field:"originDestination",message:"Falta Origen(3a) + Destino(3a) después del serial AWB",rule:"MBI: a[3]a[3] = Origen + Destino IATA",suggestion:"Ej: MBI/992-56984125BOGMIA/T10"}),n.includes("/T")||r.push({severity:"warning",segment:"MBI",field:"pieces",message:"Falta indicador de piezas /T{n} en MBI",rule:"MBI: Piezas an[1]n[1-4] obligatorio"})}}else if(s){const i=s[2],c=i.substring(0,7),d=parseInt(i[7]),p=parseInt(c)%7;d!==p&&r.push({severity:"error",segment:"MBI",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido. Serial "${i}" → mod 7 = ${p}, check es ${d}`,rule:"MBI: Mod-7 check digit",expected:`${c}${p}`,found:i}),r.push({severity:"warning",segment:"MBI",field:"weight",message:"Falta indicador de peso K{n} o L{n} después de las piezas en MBI. Spec: a[1]n[1-7]",rule:"MBI: Peso obligatorio (K=kilos, L=libras)",suggestion:"Formato completo: MBI/992-56984125BOGMIA/T10K1500.0"})}else{const i=o[2],c=i.substring(0,7),d=parseInt(i[7]),p=parseInt(c)%7;d!==p&&r.push({severity:"error",segment:"MBI",field:"awbCheckDigit",message:`Dígito de control Mod-7 inválido. Serial "${i}" → mod 7 = ${p}, check es ${d}`,rule:"MBI: Mod-7 check digit",expected:`${c}${p}`,found:i});const m=o[7];m&&(!ft.test(m)||parseFloat(m)<=0)&&r.push({severity:"error",segment:"MBI",field:"weight",message:`Peso MBI "${m}" inválido (debe ser número > 0)`,rule:"MBI: Peso n[1-7] con decimales",found:m})}}function Dn(t,r,a){var d;const n=a.content;if(!n||n.trim()===""){r.push({severity:"error",segment:"HBS",message:"Segmento HBS está vacío. Es OBLIGATORIO en FHL.",rule:"HBS: Resumen de guía hija requerido"});return}if(!n.includes("/")){r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:"Falta número HAWB en el segmento HBS",rule:"HBS: Número HAWB obligatorio"});return}const o=n.replace(/^HBS\/?/,"").split("/").filter(p=>p!=="");if(o.length>=1){const p=o[0].trim();p.length===0?r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:"Número HAWB está vacío",rule:"HBS: Número HAWB obligatorio (max 12 alfanuméricos)"}):p.length>12&&r.push({severity:"error",segment:"HBS",field:"hawbNumber",message:`Número HAWB "${p}" excede 12 caracteres (tiene ${p.length})`,rule:"HBS: HAWB máximo 12 caracteres alfanuméricos",found:p})}if(o.length>=2){const p=o[1].trim();(p.length!==6||!an.test(p))&&r.push({severity:"error",segment:"HBS",field:"originDestination",message:`Origen/Destino "${p}" inválido. Debe ser 6 letras (3 origen + 3 destino)`,rule:"HBS: OOO+DDD = 6 letras IATA",expected:"Ej: BOGMIA, UIOLHR",found:p})}else r.push({severity:"error",segment:"HBS",field:"originDestination",message:"Falta Origen/Destino del House",rule:"HBS: OOO+DDD obligatorio"});if(o.length>=3){const p=o[2].trim();let m;/^[PT]/i.test(p)?m=p.substring(1):m=p,(!St.test(m)||parseInt(m)<=0)&&r.push({severity:"error",segment:"HBS",field:"pieces",message:`Piezas "${p}" inválidas (debe ser número > 0)`,rule:"HBS: Piezas numéricas > 0",found:p})}else r.push({severity:"error",segment:"HBS",field:"pieces",message:"Faltan piezas en HBS",rule:"HBS: Piezas obligatorias"});if(o.length>=4){const p=o[3].trim();if(/^[KL]/i.test(p)){const m=p.substring(1);(!ft.test(m)||parseFloat(m)<=0)&&r.push({severity:"error",segment:"HBS",field:"weight",message:`Peso "${m}" inválido (debe ser número > 0)`,rule:"HBS: Peso numérico > 0",found:m})}else r.push({severity:"error",segment:"HBS",field:"weight",message:`Peso "${p}" no tiene indicador de unidad (K=kg, L=lb)`,rule:"HBS: Indicador de peso K o L obligatorio",found:p,expected:"Ej: K13.0, L28.6"})}else r.push({severity:"error",segment:"HBS",field:"weight",message:"Falta peso en HBS",rule:"HBS: Peso obligatorio"});if(o.length>=5){const p=o[4].trim();St.test(p)?p.length>4&&r.push({severity:"warning",segment:"HBS",field:"slac",message:`SLAC "${p}" excede 4 dígitos (máximo n[1-4])`,rule:"HBS: SLAC hasta 4 dígitos numéricos",found:p}):r.push({severity:"info",segment:"HBS",field:"slac",message:"No se detectó SLAC (Shipper Load And Count) en HBS. Aduanas puede requerirlo (n[1-4]).",rule:"HBS: SLAC recomendado (n[1-4])",suggestion:"Agregar cantidad SLAC después del peso en la línea HBS"})}else r.push({severity:"info",segment:"HBS",field:"slac",message:"No se detectó SLAC (Shipper Load And Count) en HBS. Aduanas puede requerirlo (n[1-4]).",rule:"HBS: SLAC recomendado (n[1-4])",suggestion:"Agregar cantidad SLAC después del peso en la línea HBS"});const s=o.length>=5&&St.test((d=o[4])==null?void 0:d.trim())?5:4,c=o.slice(s).join("/").trim();c?c.length>20&&r.push({severity:"warning",segment:"HBS",field:"description",message:`Descripción "${c}" es larga (${c.length} chars). En HBS se recomienda breve; detalles van en TXT.`,rule:"HBS: Descripción breve recomendada",found:c}):r.push({severity:"info",segment:"HBS",field:"description",message:"No se detectó descripción de mercancía en HBS. Aduanas puede requerir descripción.",rule:"HBS: Descripción recomendada para customs",suggestion:"Agregar descripción breve de la mercancía al final de la línea HBS"})}function Bn(t,r,a){const n=a.content;if(!n||n.trim()==="")return;n.split(`
`).filter(s=>s.trim()).forEach((s,i)=>{const c=s.match(/\/(\d+)/);c&&c[1].length<6&&r.push({severity:"warning",segment:"HTS",field:"code",line:i+1,message:`Código HTS "${c[1]}" tiene menos de 6 dígitos`,rule:"HTS: Código HTS mínimo 6 dígitos",found:c[1]})})}function Hn(t,r,a){const n=a.content;if(!n||n.trim()===""){r.push({severity:"warning",segment:"TXT",message:"Segmento TXT está vacío. Si se incluye, debe contener descripción de mercancía.",rule:"TXT: Contenido obligatorio si segmento habilitado"});return}n.split(`
`).filter(s=>s.trim()).forEach((s,i)=>{const c=s.replace(/^TXT\/?/,"").replace(/^\//,"");c.length>65&&r.push({severity:"error",segment:"TXT",line:i+1,lineContent:s.substring(0,70),message:`Línea TXT excede 65 caracteres (tiene ${c.length}). Dividir en múltiples líneas.`,rule:"TXT: Máximo 65 caracteres por línea (an[1-65])",found:c.substring(0,40)+"..."}),c.trim()===""&&r.push({severity:"warning",segment:"TXT",line:i+1,message:"Línea TXT vacía después del tag",rule:"TXT: Contenido mínimo 1 carácter (an[1-65])"})})}const Lr=["CONSOLIDATION","CONSOLIDATED","PARTS","GOODS","GENERAL","VARIOUS","MISC","MISCELLANEOUS","SAMPLES","PERSONAL EFFECTS","MERCHANDISE","CARGO","ITEMS","STUFF","THINGS","SPARE PARTS","MACHINE PARTS","AUTO PARTS","AUTO","AUTOMOBILES","EQUIPMENT","INDUSTRIAL EQUIPMENT","ELECTRONICS","ELECTRONIC GOODS","CONSUMER GOODS","GENERAL MERCHANDISE","HOUSEHOLD GOODS","GIFTS","NOVELTY ITEMS","MACHINERY","MACHINES","TOOLS","ACCESSORIES","HARDWARE","SOFTWARE","CHEMICALS","MATERIALS","DOCUMENTS","DOCS","DOX","FOODSTUFF","FOOD","MEAT","FISH","SNACKS","CLOTHING","GARMENTS","APPAREL","WEARING APPAREL","FAK","SAID TO CONTAIN","AS PER INVOICE","AS PER ATTACHED","REFER TO ATTACHED","AS ORDERED","ANIMALS","APPLIANCES","CLEANING PRODUCTS","CRAFTS","HANDICRAFTS","FLOORING","IRON AND STEEL","METAL","LEATHER ARTICLES","MEDICAL SUPPLIES","BIOLOGICALS","MEDICATION","PHARMACEUTICALS","OIL","ONLINE RETAILER","ONLINE RETAILER SHIPMENT","PACKAGING","BOXES","CARTONS","PAPER","PLANTS","FLOWERS","CUTTINGS","PLASTIC GOODS","INDUSTRIAL PLASTICS","POWDER","RUBBER ARTICLES","SCRAP","SPORTING GOODS","STATIONERY","DIDACTIC ARTICLES","STEEL","SUPPLEMENTS","SUPPLIES","PROMOTIONAL ITEMS","TEXTILES","TILES","TOILETRIES","BATHROOM PRODUCTS","SANITARY GOODS","TOYS","GAMES","VEHICLES","WIRES","WOOD","BAZAAR GOODS","CAPS"],Mn=["LITHIUM","BATTERY","BATTERIES","POWDER","LIQUID","AEROSOL","MAGNETIC","GAS","RADIOACTIVE","VACCINE","DUAL USE","AMMUNITION","WEAPON","EXPLOSIVE"];function $n(t,r,a){var s,i;const n=[],o=r.map(c=>c.code);if(t.type==="FWB"){const c=["AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","ISU","SPH"];if(c.forEach(f=>{o.includes(f)||n.push({severity:"error",segment:"GLOBAL",message:`Falta segmento OBLIGATORIO: ${f}`,rule:`FWB: Segmento ${f} es requerido por IATA [FNA: ${f}0010]`,suggestion:`Habilitar el segmento ${f}`})}),r.forEach(f=>{f.content.trim()===""&&c.includes(f.code)&&n.push({severity:"error",segment:f.code,message:`Segmento ${f.code} (${f.name}) está habilitado pero vacío. Es obligatorio.`,rule:`${f.code}: Contenido obligatorio [FNA: ${f.code}0010]`})}),r.find(f=>f.code==="AWB")&&t.awbNumber){const f=t.awbNumber.replace(/-/g,"").replace(/\s/g,"");f.length!==11&&n.push({severity:"error",segment:"GLOBAL",field:"awbNumber",message:`Número AWB "${t.awbNumber}" no tiene 11 dígitos (3 prefijo + 8 serial)`,rule:"AWB IATA: 11 dígitos (3 airline prefix + 8 serial) [FNA: AWB0020]",found:f,expected:"11 dígitos"})}const p=((s=r.find(f=>f.code==="AWB"))==null?void 0:s.content)||"",m=((i=r.find(f=>f.code==="RTG"))==null?void 0:i.content)||"",u=p.match(/[A-Z]{3}([A-Z]{3})\/T/);if(u&&m){const f=u[1],S=m.replace("RTG","").split("/").filter(T=>T.trim());if(S.length>0){const b=S[S.length-1].trim().substring(0,3);b&&nr.test(b)&&b!==f&&n.push({severity:"error",segment:"GLOBAL",field:"rtg_awb_mismatch",message:`Destino AWB "${f}" no coincide con último punto RTG "${b}"`,rule:"RTG: El último destino del RTG debe coincidir con el destino del AWB [FNA: AWB9040]",found:`AWB dest: ${f}, RTG último: ${b}`,suggestion:"Corregir el RTG para que termine en el destino del AWB"})}}const l=Un(r),g=Pr(l);if(g){const f=Ha(g,l,r,t);n.push(...f)}if(!!t.isConsolidation||!!t.hawbNumber||r.some(f=>{var S;return(S=f.content)==null?void 0:S.includes("/NC/")})){const f=r.find(S=>S.code==="NG");f&&f.content.includes("/NG/")&&n.push({severity:"error",segment:"NG",message:"FWB master de consolidación debería usar /NC/ (Nature-Consolidation) en vez de /NG/ (Nature-General)",rule:"RTD: /NC para consolidaciones, /NG para directos (§9.5.3)",suggestion:'Cambiar /NG/ por /NC/ y agregar "CONSOLIDATION AS PER ATTACHED MANIFEST"'})}}if(t.type==="FHL"){["MBI","HBS"].forEach(u=>{o.includes(u)||n.push({severity:"error",segment:"GLOBAL",message:`Falta segmento OBLIGATORIO para FHL: ${u}`,rule:`FHL: Segmento ${u} es requerido`})});const d=r.find(u=>u.code==="MBI"),p=r.filter(u=>u.code==="HBS");if(d&&p.length>1){const u=d.content.match(/\/T(\d+)/),l=d.content.match(/[KL]([\d.]+)/),g=u?parseInt(u[1]):0,v=l?parseFloat(l[1]):0;let f=0,S=0;for(const T of p){const b=T.content.match(/[PT](\d+)/),k=T.content.match(/[KL]([\d.]+)/);b&&(f+=parseInt(b[1])),k&&(S+=parseFloat(k[1]))}if(g>0&&f>0&&g!==f&&n.push({severity:"error",segment:"GLOBAL",field:"crossValidation_pieces",message:`Total piezas MBI (${g}) ≠ suma piezas HBS (${f})`,rule:"FHL §9.5.3: Suma de piezas de todos los HBS debe = total del master MBI [FNA: AWB9070]",expected:`${g} piezas`,found:`${f} piezas (${p.length} houses)`}),v>0&&S>0){const T=Math.abs(v-S),b=v*.02;T>b&&n.push({severity:"error",segment:"GLOBAL",field:"crossValidation_weight",message:`Peso MBI (${v} kg) difiere de suma HBS (${S.toFixed(1)} kg) por ${T.toFixed(1)} kg (> 2% tolerancia)`,rule:"FHL §9.5.3: Suma peso HBS ≈ total MBI (tolerancia ±2%) [FNA: AWB9070]",expected:`${v} kg ± ${b.toFixed(1)}`,found:`${S.toFixed(1)} kg`})}}const m=r.filter(u=>u.code==="HBS");for(const u of m){const l=u.content.match(/[A-Z]{3}([A-Z]{3})/);if(l){const g=l[1],v=Pr(g);if(v){const f=Ha(v,g,r,t);n.push(...f)}}}}return n}function Un(t){const r=t.find(n=>n.code==="AWB");if(!r)return"";const a=r.content.match(/[A-Z]{3}([A-Z]{3})\/T/);return a?a[1]:""}function Pr(t){return{CAI:"EG",HRG:"EG",SSH:"EG",LXR:"EG",ALY:"EG",CGK:"ID",DPS:"ID",SUB:"ID",JOG:"ID",BPN:"ID",UPG:"ID",DXB:"AE",AUH:"AE",SHJ:"AE",RKT:"AE",DAC:"BD",CGP:"BD",ZYL:"BD",CMB:"LK",HRI:"LK",CMN:"MA",RBA:"MA",RAK:"MA",FEZ:"MA",TNG:"MA",IST:"TR",SAW:"TR",ESB:"TR",ADB:"TR",AYT:"TR",AMM:"JO",AQJ:"JO",NBO:"KE",MBA:"KE",JFK:"US",LAX:"US",ORD:"US",MIA:"US",ATL:"US",DFW:"US",SFO:"US",EWR:"US",IAD:"US",IAH:"US",BOS:"US",SEA:"US",MSP:"US",DTW:"US",PHL:"US",CLT:"US",DEN:"US",PHX:"US",MCO:"US",FLL:"US",TPA:"US",SAN:"US",CVG:"US",MEM:"US",SDF:"US",ANC:"US",HNL:"US",YYZ:"CA",YVR:"CA",YUL:"CA",YOW:"CA",YEG:"CA",YYC:"CA",YWG:"CA",YHZ:"CA",FRA:"DE",MUC:"DE",HAM:"DE",CGN:"DE",DUS:"DE",BER:"DE",CDG:"FR",ORY:"FR",NCE:"FR",LYS:"FR",AMS:"NL",RTM:"NL",BRU:"BE",LGG:"BE",MAD:"ES",BCN:"ES",ZAZ:"ES",FCO:"IT",MXP:"IT",LIN:"IT",LIS:"PT",OPO:"PT",VIE:"AT",ZRH:"CH",GVA:"CH",CPH:"DK",OSL:"NO",ARN:"SE",HEL:"FI",WAW:"PL",PRG:"CZ",BUD:"HU",OTP:"RO",ATH:"GR",SOF:"BG",ZAG:"HR",DUB:"IE",LUX:"LU",LHR:"GB",LGW:"GB",MAN:"GB",STN:"GB",EDI:"GB",BHX:"GB",EMA:"GB",BFS:"GB",PVG:"CN",PEK:"CN",CAN:"CN",SZX:"CN",CTU:"CN",HKG:"HK",XIY:"CN",WUH:"CN",NKG:"CN",TSN:"CN",CKG:"CN",JED:"SA",RUH:"SA",DMM:"SA",SIN:"SG",KUL:"MY",BKK:"TH",ICN:"KR",NRT:"JP",HND:"JP",KIX:"JP",DEL:"IN",BOM:"IN",MAA:"IN",BLR:"IN",GRU:"BR",VCP:"BR",GIG:"BR",MEX:"MX",GDL:"MX",SYD:"AU",MEL:"AU",BNE:"AU",PER:"AU",AKL:"NZ",CHC:"NZ",JNB:"ZA",CPT:"ZA",LOS:"NG",ABV:"NG",TLV:"IL",ISB:"PK",KHI:"PK",LHE:"PK",BEY:"LB",DOH:"QA",BAH:"BH",MCT:"OM",KWI:"KW",BOG:"CO",MDE:"CO",CLO:"CO",CTG:"CO",BAQ:"CO",UIO:"EC",GYE:"EC"}[t]||""}const ir=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"];function Ha(t,r,a,n){var f,S,T,b,k,C,A,N;const o=[],s=n.fullMessage||"",i=((f=a.find(w=>w.code==="OCI"))==null?void 0:f.content)||"",c=((S=a.find(w=>w.code==="CVD"))==null?void 0:S.content)||"",d=((T=a.find(w=>w.code==="CNE"))==null?void 0:T.content)||"";(b=a.find(w=>w.code==="SPH"))!=null&&b.content;const p=((k=a.find(w=>w.code==="RTD"))==null?void 0:k.content)||"",m=((C=a.find(w=>w.code==="NH"))==null?void 0:C.content)||"",u=a.filter(w=>w.code==="HBS");if(t==="EG"){if(/OCI\/EG\/IMP\/M\/\d{19}/.test(i)||/OCI\/EG\/IMP\/M\/\d{19}/.test(s)){const M=i.match(/OCI\/EG\/IMP\/M\/(\S+)/)||s.match(/OCI\/EG\/IMP\/M\/(\S+)/);if(M){const B=M[1];/^\d{19}$/.test(B)||o.push({severity:"error",segment:"OCI",field:"ACID",message:`EGIPTO: ACID "${B}" formato inválido. Debe ser exactamente 19 dígitos numéricos.`,rule:"OCI §5.4: ACID = 19 dígitos sin letras ni prefijo [FNA: OCI-EG-002]",found:B,expected:"19 dígitos numéricos (ej: 1234567890123456789)"})}}else{const M=!!n.hawbNumber||a.some(B=>{var ne;return(ne=B.content)==null?void 0:ne.includes("/NC/")});(n.type==="FHL"||!M)&&o.push({severity:"error",segment:"OCI",field:"ACID",message:`EGIPTO: Falta ACID Number (19 dígitos) obligatorio para destino ${r}. Sin ACID válido la carga será RECHAZADA.`,rule:"OCI §5.4: OCI/EG/IMP/M/<19 dígitos> obligatorio para Egipto [FNA: OCI-EG-001]",suggestion:"Agregar: OCI/EG/IMP/M/1234567890123456789 (19 dígitos del portal Nafeza)"})}/OCI\/EG\/CNE\/T\//.test(i)||/OCI\/EG\/CNE\/T\//.test(s)||o.push({severity:"error",segment:"OCI",field:"enterpriseCode_CNE",message:`EGIPTO: Falta Enterprise Code del Consignee para destino ${r}`,rule:"OCI §5.4: OCI/EG/CNE/T/<enterprise_code> obligatorio [FNA: OCI-EG-004]",suggestion:"Agregar: OCI/EG/CNE/T/<Enterprise Code del consignee registrado en Nafeza>"}),/OCI\/EG\/SHP\/T\//.test(i)||/OCI\/EG\/SHP\/T\//.test(s)||o.push({severity:"error",segment:"OCI",field:"enterpriseCode_SHP",message:`EGIPTO: Falta Enterprise Code del Shipper para destino ${r} (obligatorio desde enero 2026)`,rule:"OCI §5.4: OCI/EG/SHP/T/<enterprise_code> obligatorio [FNA: OCI-EG-005]",suggestion:"Agregar: OCI/EG/SHP/T/<Enterprise Code del shipper>"});const y=!!n.hawbNumber||a.some(M=>{var B;return(B=M.content)==null?void 0:B.includes("/NC/")});n.type==="FWB"&&y&&/OCI\/EG\/IMP\/M\//.test(i)&&o.push({severity:"error",segment:"OCI",field:"ACID_master",message:"EGIPTO: ACID Number NO debe ir en FWB master de consolidación. Debe ir en cada FHL (house).",rule:"OCI §5.4: En consolidaciones ACID va a nivel house (FHL), no master [FNA: OCI-EG-007]",suggestion:"Mover OCI/EG/IMP/M/... al FHL de cada house"})}if(t==="ID"){const w=/OCI\/ID\/CNE\/T\/(TIN|NPWP)\d{16}/.test(i)||/OCI\/ID\/CNE\/T\/(TIN|NPWP)\d{16}/.test(s),O=/OCI\/ID\/CNE\/T\/NIB\d{13}/.test(i)||/OCI\/ID\/CNE\/T\/NIB\d{13}/.test(s);!w&&!O&&o.push({severity:"error",segment:"OCI",field:"NPWP",message:`INDONESIA: Falta NPWP/TIN (16 dígitos) o NIB (13 dígitos) del consignee para destino ${r}`,rule:"OCI §5.5: OCI/ID/CNE/T/TIN<16 dígitos> obligatorio para Indonesia [FNA: OCI-ID-001]",suggestion:"Agregar: OCI/ID/CNE/T/TIN0123451234512345 (16 dígitos sin separadores)"}),(/OCI\/ID\/T\/TN\/\d{2}\.\d{3}/.test(i)||/OCI\/ID\/T\/TN\/\d{2}\.\d{3}/.test(s))&&o.push({severity:"error",segment:"OCI",field:"NPWP_format",message:"INDONESIA: Formato NPWP obsoleto detectado (con puntos/guiones). Usar 16 dígitos sin separadores con prefijo TIN o NPWP.",rule:"OCI §5.5: Formato 2026 = TIN + 16 dígitos [FNA: OCI-ID-002]",suggestion:"Cambiar a: OCI/ID/CNE/T/TIN<16 dígitos sin separadores>"})}if(t==="AE"){const w=/\/NH\/\d{6}/.test(p)||/\/NH\/\d{6}/.test(m)||/\/NH\/\d{6}/.test(s),O=u.some(y=>/\/T\d{6}/.test(y.content));!w&&!O&&o.push({severity:"error",segment:"GLOBAL",field:"HS_UAE",message:`UAE PLACI: Falta HS Code (mínimo 6 dígitos) obligatorio para destino ${r}. Sin HS Code: DNL (Do Not Load).`,rule:"PLACI §5.6: HS Code 6+ dígitos obligatorio desde 29/Feb/2024 para UAE",suggestion:"Agregar código HS en RTD: /NH/060311 (6 dígitos mínimo)"});const D=d.match(/(?:\/NM|\/NAM\/|^CNE\n\/)(.*)/);if(D){const y=D[1].replace(/^\//,"").trim().toUpperCase();["TBD","TBC","UNKNOWN","N/A","NA","NONE","TO ORDER","TO BE ADVISED"].some(B=>y===B||y.startsWith(B))&&o.push({severity:"error",segment:"CNE",field:"name_UAE",message:`UAE PLACI: Nombre consignee "${y}" no aceptado. Debe ser nombre del destinatario REAL (no placeholder).`,rule:"PLACI §5.6.3: Nombre debe ser del ultimate consignee real",found:y,suggestion:"Usar nombre completo legal de la empresa o persona"})}}if(t==="BD"&&(/OCI\/BD\/(CNE|NFY)\/T\/BIN\d{9}-\d{4}/.test(i)||/OCI\/BD\/(CNE|NFY)\/T\/BIN\d{9}-\d{4}/.test(s)||o.push({severity:"error",segment:"OCI",field:"BIN",message:`BANGLADESH: Falta BIN (Business Identification Number) del consignee para destino ${r}`,rule:"OCI §5.7.2: OCI/BD/CNE/T/BIN<9 dígitos>-<4 dígitos> obligatorio",suggestion:"Agregar: OCI/BD/CNE/T/BIN123456789-0001"}),c.includes("NCV")&&o.push({severity:"error",segment:"CVD",field:"DCV_BD",message:`BANGLADESH: NCV (No Customs Value) NO es aceptado para destino ${r}. Debe declarar valor numérico.`,rule:"CVD §5.7.1: Valor aduanero obligatorio. Si no hay valor, usar 0 [FNA: CVD0040]",found:"NCV",suggestion:"Reemplazar NCV por 0 o el valor real de la mercancía"})),t==="LK"&&c.includes("NCV")&&o.push({severity:"error",segment:"CVD",field:"DCV_LK",message:`SRI LANKA: NCV NO es aceptado para destino ${r}. Declarar valor numérico obligatorio.`,rule:"CVD §5.12: Valor aduanero obligatorio desde 1/Ago/2023. Usar 0 si no hay valor.",found:"NCV",suggestion:"Reemplazar NCV por 0 o el valor real"}),t==="MA"&&(/OCI\/MA\/CNE\/T\//.test(i)||/OCI\/MA\/CNE\/T\//.test(s)||o.push({severity:"error",segment:"OCI",field:"tradeRegister_MA",message:`MARRUECOS: Falta Trade Register Number del consignee para destino ${r}`,rule:"OCI §5.9.1: OCI/MA/CNE/T/<trade_register> obligatorio. Para no-corporativo usar 15 ceros.",suggestion:"Agregar: OCI/MA/CNE/T/0XX0XXXX o OCI/MA/CNE/T/000000000000000 (si no es empresa)"}),/\/NH\/\d{4}/.test(p)||/\/NH\/\d{4}/.test(m)||/\/NH\/\d{4}/.test(s)||o.push({severity:"error",segment:"GLOBAL",field:"HS_MA",message:`MARRUECOS: Falta HS Code (mínimo 4 dígitos) obligatorio para destino ${r}`,rule:"HS §5.9.2: Código HS 4+ dígitos obligatorio para Marruecos",suggestion:"Agregar código HS en RTD /NH"})),t==="TR"&&(/\/NH\/\d{6}/.test(p)||/\/NH\/\d{6}/.test(m)||/\/NH\/\d{6}/.test(s)||o.push({severity:"error",segment:"GLOBAL",field:"HS_TR",message:`TURQUÍA: Falta HS Code obligatorio para destino ${r}`,rule:"HS §5.10: Código HS obligatorio en RTD /NH para Turquía",suggestion:"Agregar código HS en RTD /NH"})),t==="JO"&&(/\/TE\//.test(d)||/\/CT.*TE/.test(d)||o.push({severity:"error",segment:"CNE",field:"phone_JO",message:`JORDANIA: Falta teléfono del consignee obligatorio para destino ${r}`,rule:"CNE §5.11: Teléfono del consignee obligatorio para Jordania [FNA: CNE0055]",suggestion:"Agregar /TE/00962XXXXXXXXX después del código postal en CNE"})),t==="KE"&&(/\/NH\/\d{6}/.test(p)||/\/NH\/\d{6}/.test(m)||/\/NH\/\d{6}/.test(s)||o.push({severity:"error",segment:"GLOBAL",field:"HS_KE",message:`KENIA: Falta HS Code obligatorio para destino ${r}`,rule:"HS §5.13: Código HS obligatorio para Kenia",suggestion:"Agregar código HS en RTD /NH"}),/\/TE\//.test(d)||/\/CT.*TE/.test(d)||o.push({severity:"warning",segment:"CNE",field:"phone_KE",message:`KENIA: Se recomienda teléfono del consignee para destino ${r}`,rule:"CNE §5.13: Teléfono recomendado para Kenia"})),t==="US"){d.split(`
`).some(E=>/\/[A-Z][A-Z\s]*\/[A-Z]{2}\s*$/.test(E.trim()))||o.push({severity:"error",segment:"CNE",field:"state_US",message:"USA: Falta State/Province code (2 letras USPS) obligatorio para el consignee en destino USA",rule:"CNE §3.5: State code 2[a] obligatorio para USA [FNA: CNE9035]",suggestion:"Agregar código de estado (ej: CA, NY, TX, FL) en la línea de ciudad: /CILOS ANGELES/CA"});const y=(d.match(/\/(\d{1,9}(-\d{1,4})?)/g)||[]).map(E=>E.replace("/","").trim()).filter(E=>E.length>=1),M=y.some(E=>/^\d{5}(-\d{4})?$/.test(E)),B=y.find(E=>/^\d+(-\d+)?$/.test(E));if(y.length===0)o.push({severity:"error",segment:"CNE",field:"zip_US",message:"USA: Falta ZIP Code obligatorio para el consignee en destino USA. Sin ZIP válido el envío será RECHAZADO por CBP.",rule:"CNE §3.5: ZIP Code (5 dígitos nnnnn o ZIP+4 nnnnn-nnnn) obligatorio para USA [FNA: CNE9045]",suggestion:"Agregar ZIP Code: exactamente 5 dígitos (ej: 33126) o ZIP+4 con guión (ej: 33126-1234)"});else if(!M&&B){const E=B;/^\d{1,4}$/.test(E)?o.push({severity:"error",segment:"CNE",field:"zip_US",message:`USA: ZIP Code "${E}" es INVÁLIDO. Tiene solo ${E.length} dígito(s). El ZIP Code de USA DEBE tener exactamente 5 dígitos.`,rule:"CNE §3.5: ZIP Code USA = exactamente 5[n] (nnnnn) o 9[n] con guión (nnnnn-nnnn) [FNA: CNE0045]",found:E,expected:"Formato: 12345 (5 dígitos) o 12345-1234 (ZIP+4)",suggestion:`Corregir "${E}" a un ZIP Code válido de 5 dígitos. Ejemplo: si destino es Miami usar 33126`}):/^\d{6,9}$/.test(E)&&!E.includes("-")?o.push({severity:"warning",segment:"CNE",field:"zip_format_US",message:`USA: ZIP Code "${E}" tiene ${E.length} dígitos. Si es ZIP+4, debe tener guión: ${E.slice(0,5)}-${E.slice(5)}`,rule:'CNE §3.5: ZIP+4 formato = nnnnn-nnnn (con guión). El guión SÍ está permitido por IATA en campos tipo "t" [FNA: CNE0045]',found:E,expected:`${E.slice(0,5)}-${E.slice(5)}`,suggestion:`Agregar guión: ${E.slice(0,5)}-${E.slice(5)}`}):/^\d+-\d+$/.test(E)&&!/^\d{5}-\d{4}$/.test(E)?(E.split("-"),o.push({severity:"warning",segment:"CNE",field:"zip_format_US",message:`USA: ZIP Code "${E}" tiene formato incorrecto. Formato ZIP+4 correcto: nnnnn-nnnn (5 dígitos, guión, 4 dígitos).`,rule:"CNE §3.5: ZIP+4 = 5 dígitos + guión + 4 dígitos [FNA: CNE0045]",found:E,expected:"Formato: 12345-1234",suggestion:"Verificar que la primera parte tenga 5 dígitos y la segunda 4 dígitos"})):o.push({severity:"warning",segment:"CNE",field:"zip_format_US",message:`USA: ZIP Code "${E}" puede no ser válido. Formato estándar USPS: 5 dígitos o ZIP+4 (con guión).`,rule:"CNE §3.5: ZIP Code formato USPS estándar [FNA: CNE9046]",found:E,expected:"Formato: 12345 o 12345-1234",suggestion:"Verificar que el ZIP Code corresponda a una dirección real en USA"})}if(/OCI\/US\/CNE\/T\/(TIN|EIN|SSN|ITIN)/.test(i)||/OCI\/US\/CNE\/T\/(TIN|EIN|SSN|ITIN)/.test(s)||/OCI\/US\/T\/ID\//.test(i)||o.push({severity:"warning",segment:"OCI",field:"TIN_US",message:`USA: Se recomienda TIN/EIN del consignee para destino ${r}. El Tax ID mejora el procesamiento de aduanas CBP.`,rule:"OCI §5.1: OCI/US/CNE/T/TIN<número> o EIN recomendado para USA [FNA: OCI-US-001]",suggestion:"Agregar: OCI/US/CNE/T/TIN123456789 (9 dígitos sin guiones) o OCI/US/CNE/T/EIN123456789"}),n.type==="FHL")for(const E of u){const G=E.content.match(/[A-Z]{3}([A-Z]{3})/);if((G?Pr(G[1]):"")==="US"&&!(/\/S\d+/.test(E.content)||/\/K[\d.]+\/\d+\//.test(E.content))){const ye=E.content.match(/HBS\/([^\/]+)/);o.push({severity:"error",segment:"HBS",field:"SLAC_US",message:`USA ACAS: Falta SLAC en house ${ye?ye[1]:"?"} con destino USA. Obligatorio para consolidaciones.`,rule:"HBS §9.5.3: SLAC (Shipper Load And Count) obligatorio para houses con destino USA",suggestion:"Agregar /S<piezas> en la línea HBS"})}}/\/NH\/\d{6}/.test(p)||/\/NH\/\d{6}/.test(m)||/\/NH\/\d{6}/.test(s)||o.push({severity:"warning",segment:"GLOBAL",field:"HS_US",message:`USA: HS Code recomendado (6+ dígitos) para destino ${r}. Mejora procesamiento ACAS.`,rule:"ACAS §5.1: HS Code recomendado para USA",suggestion:"Agregar código HS en RTD /NH o OCI/US/T/HS/<hscode>"})}if(t==="CA"){d.split(`
`).some(B=>/\/[A-Z][A-Z\s]*\/[A-Z]{2}\s*$/.test(B.trim()))||o.push({severity:"error",segment:"CNE",field:"province_CA",message:"CANADÁ: Falta Province code (2 letras) obligatorio para el consignee. Sin Province el envío será RECHAZADO por CBSA.",rule:"CNE §3.5: Province code 2[a] obligatorio para Canadá [FNA: CNE9135]",suggestion:"Agregar código de provincia (ej: ON, QC, BC, AB) en línea ciudad"});const D=d.match(/[A-Z]\d[A-Z]\s?\d[A-Z]\d/g)||[];if(d.match(/[A-Z0-9]{3,7}/g),!(D.length>0)){const B=((N=(A=d.match(/\/CA\/([^\/\n]+)/))==null?void 0:A[1])==null?void 0:N.trim())||"";B&&B.length>0?/^\d+$/.test(B)?o.push({severity:"error",segment:"CNE",field:"postal_CA",message:`CANADÁ: Código postal "${B}" es INVÁLIDO. Canadá usa formato alfanumérico A1A 1A1, NO numérico como USA.`,rule:"CNE §3.5: Postal Code Canadá = A1A 1A1 (letra-número-letra espacio número-letra-número) [FNA: CNE0045]",found:B,expected:"Formato: A1A 1A1 (ej: M5V 2H1)",suggestion:"El código postal canadiense alterna letras y números. Ejemplo: M5V 2H1, V6B 5K3"}):/^[A-Z]{2,}/.test(B)||/\d{4,}/.test(B)?o.push({severity:"error",segment:"CNE",field:"postal_CA",message:`CANADÁ: Código postal "${B}" tiene formato incorrecto. Debe alternar letra-número-letra número-letra-número.`,rule:"CNE §3.5: Postal Code Canadá = A1A 1A1 exactamente [FNA: CNE9145]",found:B,expected:"Formato: A1A 1A1 (ej: M5V 2H1)",suggestion:"Verificar que el código postal siga el patrón canadiense: M5V 2H1"}):o.push({severity:"error",segment:"CNE",field:"postal_CA",message:`CANADÁ: Código postal "${B}" no tiene formato válido canadiense. Formato requerido: A1A 1A1.`,rule:"CNE §3.5: Postal Code formato A1A 1A1 obligatorio para Canadá [FNA: CNE9145]",found:B,expected:"Formato: A1A 1A1 (ej: M5V 2H1)",suggestion:"El código postal canadiense tiene 6 caracteres: Letra-Número-Letra Número-Letra-Número"}):o.push({severity:"error",segment:"CNE",field:"postal_CA",message:"CANADÁ: Falta Postal Code obligatorio para el consignee. Sin código postal válido el envío será RECHAZADO por CBSA.",rule:"CNE §3.5: Postal Code formato A1A 1A1 obligatorio para Canadá [FNA: CNE9145]",suggestion:"Agregar código postal en formato canadiense: A1A 1A1 (ej: M5V 2H1, V6B 5K3)"})}/OCI\/CA\/CNE\/T\/(BN|GST|TIN)/.test(i)||/OCI\/CA\/CNE\/T\/(BN|GST|TIN)/.test(s)||/OCI\/CA\/T\/ID\//.test(i)||o.push({severity:"warning",segment:"OCI",field:"BN_CA",message:`CANADÁ: Se recomienda Business Number (BN) del consignee para destino ${r}. Mejora procesamiento CBSA.`,rule:"OCI §5.14: OCI/CA/CNE/T/BN<número> recomendado para Canadá [FNA: OCI-CA-001]",suggestion:"Agregar: OCI/CA/CNE/T/BN123456789RC0001 (15 caracteres formato CRA)"})}if(ir.includes(t)){if(!(/OCI\/(EU|[A-Z]{2})\/T\/EI\//.test(i)||/OCI\/(EU|[A-Z]{2})\/T\/EI\//.test(s)||/OCI\/(EU|[A-Z]{2})\/CNE\/T\//.test(i)))o.push({severity:"error",segment:"OCI",field:"EORI_EU",message:`EU ICS2: Falta EORI Number OBLIGATORIO para destino ${r} (${t}). Sin EORI válido la carga puede ser RECHAZADA en aduana EU.`,rule:"OCI §5.2: OCI/EU/T/EI/<EORI> OBLIGATORIO para cumplimiento ICS2 [FNA: OCI-EU-001]",suggestion:`Agregar: OCI/EU/T/EI/${t}XXXXXXXXXXXXX (EORI del consignee - prefijo país + hasta 15 caracteres)`});else{const D=i.match(/OCI\/(?:EU|[A-Z]{2})\/T\/EI\/([A-Z0-9]+)/)||s.match(/OCI\/(?:EU|[A-Z]{2})\/T\/EI\/([A-Z0-9]+)/);if(D){const y=D[1];(y.length<5||y.length>17)&&o.push({severity:"warning",segment:"OCI",field:"EORI_format_EU",message:`EU: EORI "${y}" tiene formato inusual (${y.length} caracteres). Formato estándar: código país (2 letras) + 3-15 caracteres.`,rule:"OCI §5.2: EORI formato = CC + hasta 15 chars alfanuméricos",found:y,expected:"Formato: DE123456789 o NL123456789001 (país + 3-15 chars)"});const M=y.substring(0,2);!ir.includes(M)&&M!=="EU"&&o.push({severity:"warning",segment:"OCI",field:"EORI_country_EU",message:`EU: EORI "${y}" no comienza con código de país EU válido. Verificar que el EORI corresponda al país de destino.`,rule:"OCI §5.2: EORI debe comenzar con código ISO del país EU registrado",found:M,expected:`Código país EU (ej: ${t}, DE, NL, FR)`})}}d.includes("/PO")||/\/\d{4,5}/.test(d)||o.push({severity:"error",segment:"CNE",field:"postal_EU",message:`EU ICS2: Falta código postal del consignee obligatorio para destino ${r} (${t}). Sin código postal el envío puede ser RECHAZADO.`,rule:"CNE: Código postal obligatorio para destinos EU [FNA: CNE9245]",suggestion:"Agregar código postal del país de destino en el segmento CNE"})}if(t==="GB"){if(!(/OCI\/GB\/T\/EI\/GB/.test(i)||/OCI\/GB\/T\/EI\/GB/.test(s)||/OCI\/GB\/CNE\/T\//.test(i)))o.push({severity:"error",segment:"OCI",field:"EORI_GB",message:`UK: Falta EORI Number OBLIGATORIO para destino ${r}. Sin EORI válido la carga puede ser RECHAZADA por HMRC.`,rule:"OCI §5.16: OCI/GB/T/EI/GB<alphanumeric> obligatorio para UK post-Brexit [FNA: OCI-GB-001]",suggestion:"Agregar: OCI/GB/T/EI/GB123456789000 (GB + hasta 12 caracteres alfanuméricos)"});else{const D=i.match(/OCI\/GB\/T\/EI\/(GB[A-Z0-9]+)/)||s.match(/OCI\/GB\/T\/EI\/(GB[A-Z0-9]+)/);if(D){const y=D[1];(y.length<11||y.length>17)&&o.push({severity:"warning",segment:"OCI",field:"EORI_format_GB",message:`UK: EORI "${y}" tiene formato inusual (${y.length} caracteres). Formato estándar UK: GB + 9-15 caracteres.`,rule:"OCI §5.16: EORI UK formato = GB + 9-15 chars alfanuméricos",found:y,expected:"Formato: GB123456789 o GB123456789000"})}}d.includes("/PO")||/[A-Z]{1,2}\d{1,2}\s?\d[A-Z]{2}/.test(d)||o.push({severity:"error",segment:"CNE",field:"postal_GB",message:`UK: Falta código postal del consignee obligatorio para destino ${r}. Sin postal code el envío puede ser RECHAZADO.`,rule:"CNE: Código postal obligatorio para UK [FNA: CNE9345]",suggestion:"Agregar código postal UK: formato XX1 1XX (ej: SW1A 1AA, M1 1AE)"})}if(t==="CN"&&(/OCI\/CN\/CNE\/T\//.test(i)||/OCI\/CN\/CNE\/T\//.test(s)||/OCI\/CN\/T\/SM\//.test(i)||/OCI\/CN\/T\/SM\//.test(s)||o.push({severity:"error",segment:"OCI",field:"USCI_CN",message:`CHINA: Falta Enterprise Code (USCI) del consignee para destino ${r}. Obligatorio para CAAC.`,rule:"OCI §5.3: Enterprise Code 18 chars [A-Z0-9] obligatorio para China",suggestion:"Agregar: OCI/CN/CNE/T/<18 chars USCI> o OCI/CN/CNE/T/9999CN (si no tiene código)"}),/\/TE\//.test(d)||/\/CT.*TE/.test(d)||o.push({severity:"error",segment:"CNE",field:"phone_CN",message:`CHINA: Falta teléfono del consignee obligatorio para destino ${r}. CAAC lo exige para Risk Assessment.`,rule:"CNE §5.3: Teléfono del consignee obligatorio para China [FNA: CNE0055]",suggestion:"Agregar /TE/86XXXXXXXXX en el segmento CNE"})),t==="SA"&&(n.hawbNumber||a.some(O=>{var D;return(D=O.content)==null?void 0:D.includes("/NC/")})||n.type==="FHL")&&o.push({severity:"info",segment:"GLOBAL",message:`ARABIA SAUDITA: El Freight Forwarder debe estar registrado como Authorized Freight Agent en portal ZATCA para consolidaciones a ${r}.`,rule:"ZATCA §5.8: Registro en ZATCA obligatorio para FF con consolidaciones a SA",suggestion:"Verificar registro ZATCA del FF y agregar número de registro en CNE Account Number"}),t==="JP"){const O=d.match(/(\d{3}-\d{4})/)!==null,D=d.match(/\/(\d{3,7})/);if(!O)if(D){const y=D[1];/^\d{7}$/.test(y)?o.push({severity:"warning",segment:"CNE",field:"zip_JP",message:`JAPÓN: ZIP Code "${y}" debería tener formato nnn-nnnn (con guión). Formato: ${y.slice(0,3)}-${y.slice(3)}`,rule:"CNE §3.5: ZIP Code Japón = nnn-nnnn (7 dígitos con guión) [FNA: CNE0045]",found:y,expected:`${y.slice(0,3)}-${y.slice(3)}`,suggestion:"Agregar guión después del tercer dígito"}):y.length<7&&o.push({severity:"error",segment:"CNE",field:"zip_JP",message:`JAPÓN: ZIP Code "${y}" es INVÁLIDO. Japón usa 7 dígitos formato nnn-nnnn.`,rule:"CNE §3.5: ZIP Code Japón = exactamente 7 dígitos [FNA: CNE0045]",found:y,expected:"Formato: 100-0001",suggestion:"Verificar el código postal japonés correcto"})}else o.push({severity:"error",segment:"CNE",field:"zip_JP",message:"JAPÓN: Falta ZIP Code obligatorio para el consignee. Requerido por AMS-JP (NACCS).",rule:"CNE §3.5: ZIP Code formato nnn-nnnn obligatorio para Japón [FNA: CNE0045]",suggestion:"Agregar código postal japonés: formato nnn-nnnn (ej: 100-0001)"})}if(t==="DE"){const w=d.match(/\/(\d{5})(?:\/|$|\s)/),O=d.match(/\/(\d{1,6})(?:\/|$|\s)/);if(!w)if(O){const D=O[1];D.length!==5&&o.push({severity:"error",segment:"CNE",field:"plz_DE",message:`ALEMANIA: PLZ "${D}" es INVÁLIDO. Alemania usa exactamente 5 dígitos.`,rule:"CNE §3.5: PLZ Alemania = exactamente 5[n] dígitos [FNA: CNE0045]",found:`${D.length} dígitos`,expected:"5 dígitos (ej: 60313)",suggestion:"El código postal alemán tiene exactamente 5 dígitos"})}else o.push({severity:"error",segment:"CNE",field:"plz_DE",message:"ALEMANIA: Falta PLZ (Postleitzahl) obligatorio para el consignee. Sin PLZ el envío será RECHAZADO.",rule:"CNE §3.5: PLZ obligatorio para Alemania [FNA: CNE0045]",suggestion:"Agregar código postal alemán: 5 dígitos (ej: 60313 Frankfurt)"})}if(t==="AU"&&(["NSW","VIC","QLD","WA","SA","TAS","NT","ACT"].some(M=>d.includes(`/${M}`)||d.includes(`/${M}/`))||o.push({severity:"error",segment:"CNE",field:"state_AU",message:"AUSTRALIA: Falta State/Territory code obligatorio para el consignee.",rule:"CNE §3.5: State code 2-3[a] obligatorio para Australia [FNA: CNE0035]",suggestion:"Agregar código: NSW, VIC, QLD, WA, SA, TAS, NT o ACT"}),d.match(/\/(\d{4})(?:\/|$|\s)/)||o.push({severity:"error",segment:"CNE",field:"postal_AU",message:"AUSTRALIA: Falta Postal Code obligatorio para el consignee. Australia usa 4 dígitos.",rule:"CNE §3.5: Postal Code Australia = 4[n] dígitos [FNA: CNE0045]",suggestion:"Agregar código postal australiano: 4 dígitos (ej: 2000 Sydney, 3000 Melbourne)"}),/OCI\/AU\/CNE\/T\/ABN/.test(i)||/OCI\/AU\/T\/ID\//.test(i)||o.push({severity:"warning",segment:"OCI",field:"ABN_AU",message:`AUSTRALIA: Se recomienda ABN (Australian Business Number) del consignee para destino ${r}.`,rule:"OCI §5.16: OCI/AU/CNE/T/ABN<11 dígitos> recomendado",suggestion:"Agregar: OCI/AU/CNE/T/ABN53004085616 (11 dígitos sin espacios)"})),t==="IN"){const w=/OCI\/IN\/CNE\/T\/IEC/.test(i)||/OCI\/IN\/T\/ID\//.test(i),O=/OCI\/IN\/CNE\/T\/GST/.test(i);!w&&!O&&o.push({severity:"error",segment:"OCI",field:"IEC_IN",message:`INDIA: Falta IEC (Importer-Exporter Code) o GSTIN del consignee para destino ${r}. Obligatorio para aduanas India.`,rule:"OCI §5.16: IEC (10 chars) o GSTIN (15 chars) obligatorio para India [FNA: OCI-IN-001]",suggestion:"Agregar: OCI/IN/CNE/T/IEC0505012345 (10 chars) o OCI/IN/CNE/T/GST22AAAAA0000A1Z5 (15 chars)"}),d.match(/\/(\d{6})(?:\/|$|\s)/)||o.push({severity:"error",segment:"CNE",field:"postal_IN",message:"INDIA: Falta PIN Code obligatorio para el consignee. India usa 6 dígitos.",rule:"CNE §3.5: PIN Code India = 6[n] dígitos [FNA: CNE0045]",suggestion:"Agregar código postal indio: 6 dígitos (ej: 110001 Delhi, 400001 Mumbai)"})}if(t==="MX"&&(/OCI\/MX\/CNE\/T\/RFC/.test(i)||/OCI\/MX\/T\/ID\//.test(i)||o.push({severity:"warning",segment:"OCI",field:"RFC_MX",message:`MÉXICO: Se recomienda RFC (Registro Federal de Contribuyentes) del consignee para destino ${r}.`,rule:"OCI §5.16: RFC 12-13 chars recomendado para México",suggestion:"Agregar: OCI/MX/CNE/T/RFCXAXX010101000 (12-13 caracteres)"}),d.match(/\/(\d{5})(?:\/|$|\s)/)||o.push({severity:"error",segment:"CNE",field:"postal_MX",message:"MÉXICO: Falta Código Postal obligatorio para el consignee. México usa 5 dígitos.",rule:"CNE §3.5: Código Postal México = 5[n] dígitos [FNA: CNE0045]",suggestion:"Agregar código postal mexicano: 5 dígitos (ej: 06600 Ciudad de México)"})),t==="BR"){const w=/OCI\/BR\/CNE\/T\/CNPJ/.test(i)||/OCI\/BR\/T\/ID\//.test(i),O=/OCI\/BR\/CNE\/T\/CPF/.test(i);!w&&!O&&o.push({severity:"warning",segment:"OCI",field:"CNPJ_BR",message:`BRASIL: Se recomienda CNPJ (empresa) o CPF (persona física) del consignee para destino ${r}.`,rule:"OCI §5.16: CNPJ 14 dígitos o CPF 11 dígitos recomendado para Brasil",suggestion:"Agregar: OCI/BR/CNE/T/CNPJ12345678000195 (sin puntos/guiones) o OCI/BR/CNE/T/CPF12345678909"}),d.match(/(\d{5}-?\d{3})/)||o.push({severity:"error",segment:"CNE",field:"cep_BR",message:"BRASIL: Falta CEP obligatorio para el consignee. Brasil usa 8 dígitos (nnnnn-nnn).",rule:"CNE §3.5: CEP Brasil = 8 dígitos formato nnnnn-nnn [FNA: CNE0045]",suggestion:"Agregar CEP: 8 dígitos (ej: 01310-100 São Paulo)"})}t==="KR"&&(/OCI\/KR\/CNE\/T\/P/.test(i)||/OCI\/KR\/T\/ID\//.test(i)||o.push({severity:"warning",segment:"OCI",field:"PC_KR",message:`COREA DEL SUR: Se recomienda P/C Number (Customs ID) del consignee para destino ${r}.`,rule:"OCI §5.16: P/C Number recomendado para Corea del Sur",suggestion:"Agregar: OCI/KR/CNE/T/P<número de customs ID>"}),d.match(/\/(\d{5})(?:\/|$|\s)/)||o.push({severity:"error",segment:"CNE",field:"postal_KR",message:"COREA DEL SUR: Falta Postal Code obligatorio. Corea del Sur usa 5 dígitos.",rule:"CNE §3.5: Postal Code Corea = 5[n] dígitos [FNA: CNE0045]",suggestion:"Agregar código postal coreano: 5 dígitos (ej: 06236 Seoul)"}));const l=/OCI\/[A-Z]{2}\/CNE\/T\//.test(i)||/OCI\/[A-Z]{2}\/T\/EI\//.test(i)||/OCI\/[A-Z]{2}\/T\/ID\//.test(i)||/OCI\/[A-Z]{2}\/T\/SM\//.test(i)||/OCI\/[A-Z]{2}\/T\/TN\//.test(i)||/OCI\/[A-Z]{2}\/IMP\//.test(i),v=["US","CA","CN","EG","ID","BD","MA",...ir,"GB"].includes(t);return l||(v?o.push({severity:"error",segment:"OCI",field:"consignee_id_general",message:`Falta número de identificación tributaria/fiscal del consignatario para destino ${r} (${t}). Este país REQUIERE identificación del importador.`,rule:`OCI: Identificador del consignee obligatorio para ${t} [FNA: OCI-GEN-001]`,suggestion:Gn(t)}):o.push({severity:"warning",segment:"OCI",field:"consignee_id_recommended",message:`Se recomienda incluir número de identificación tributaria del consignatario para destino ${r}. Mejora el procesamiento aduanero.`,rule:"OCI: Identificador del consignee recomendado para agilizar aduanas",suggestion:"Agregar OCI con identificador fiscal: NIT, TIN, EORI, VAT, etc. según país de destino"})),o}function Gn(t){const r={US:"Agregar: OCI/US/CNE/T/TIN123456789 (Tax ID 9 dígitos) o OCI/US/CNE/T/EIN123456789",CA:"Agregar: OCI/CA/CNE/T/BN123456789RC0001 (Business Number 15 caracteres)",CN:"Agregar: OCI/CN/CNE/T/<USCI 18 caracteres> o OCI/CN/CNE/T/9999CN (si no tiene)",EG:"Agregar: OCI/EG/CNE/T/<Enterprise Code> (registro Nafeza)",ID:"Agregar: OCI/ID/CNE/T/TIN<16 dígitos> (NPWP sin separadores)",BD:"Agregar: OCI/BD/CNE/T/BIN<9 dígitos>-<4 dígitos>",MA:"Agregar: OCI/MA/CNE/T/<Trade Register Number>",GB:"Agregar: OCI/GB/T/EI/GB<hasta 15 caracteres> (EORI UK)",DE:"Agregar: OCI/EU/T/EI/DE<hasta 15 caracteres> (EORI Alemania)",FR:"Agregar: OCI/EU/T/EI/FR<hasta 15 caracteres> (EORI Francia)",NL:"Agregar: OCI/EU/T/EI/NL<hasta 15 caracteres> (EORI Países Bajos)",ES:"Agregar: OCI/EU/T/EI/ES<hasta 15 caracteres> (EORI España)",IT:"Agregar: OCI/EU/T/EI/IT<hasta 15 caracteres> (EORI Italia)",BE:"Agregar: OCI/EU/T/EI/BE<hasta 15 caracteres> (EORI Bélgica)",AT:"Agregar: OCI/EU/T/EI/AT<hasta 15 caracteres> (EORI Austria)"};return ir.includes(t)&&!r[t]?`Agregar: OCI/EU/T/EI/${t}<hasta 15 caracteres> (EORI)`:r[t]||"Agregar identificador fiscal del consignatario según regulación del país de destino"}function Wn(t){const r=[];return t.split(`
`).forEach((n,o)=>{n.startsWith("UNB+")||n.startsWith("UNH+")||n.startsWith("UNT+")||n.startsWith("UNZ+")||n.match(/^Q[KDPU]\s/)||n.startsWith(".")||n.length>Rr&&r.push({severity:"warning",segment:"GLOBAL",line:o+1,lineContent:n.substring(0,75)+"...",message:`Línea ${o+1} excede ${Rr} caracteres (tiene ${n.length})`,rule:`IATA: Máximo ${Rr} caracteres por línea`,found:`${n.length} caracteres`})}),r}function Ma(t,r,a,n){const o=[];for(let s=0;s<t.length;s++){const i=t[s],c=i.charCodeAt(0);if(!(c>=65&&c<=90||c>=48&&c<=57||i===" "||i==="."||i==="-"||i==="/"||i==="+"||i==="'"||i==="("||i===")"||i===":"||i===","||i===`
`||i==="\r")){if(c>=97&&c<=122){o.push(`"${i}" (minúscula en posición ${s+1})`);continue}(c>127||c<32&&c!==10&&c!==13)&&o.push(`"${i}" (código ${c} en posición ${s+1})`)}}o.length>0&&n.push({severity:"warning",segment:r,line:a,lineContent:t.substring(0,50),message:`Caracteres no permitidos encontrados: ${o.slice(0,3).join(", ")}${o.length>3?` y ${o.length-3} más`:""}`,rule:"IATA: Solo A-Z mayúsculas, 0-9, punto (.) y guion (-) permitidos",suggestion:"Convertir a mayúsculas y remover caracteres especiales"})}function zn(t,r,a){if(a===0)return 0;let n=100;return n-=t*15,n-=r*3,Math.max(0,Math.min(100,n))}class $a{constructor(r){this.credentials=r}updateCredentials(r){this.credentials={...this.credentials,...r}}isConfigured(){return!!(this.credentials.endpoint&&this.credentials.username&&this.credentials.password)}getAuthHeader(){const r=`${this.credentials.username}:${this.credentials.password}`;return`Basic ${btoa(r)}`}parseDescartesXml(r){const a={};try{const o=new DOMParser().parseFromString(r,"text/xml"),s=o.querySelector("parsererror");if(s)return console.warn("Error parseando XML de Descartes:",s.textContent),a;const i=p=>{const m=o.querySelector(p);return(m==null?void 0:m.textContent)||void 0};a.host=i("host"),a.service=i("service"),a.created=i("created"),a.version=i("version"),a.status=i("status"),a.tid=i("tid"),a.error=i("error"),a.errorShort=i("errorShort"),a.errorDetail=i("errorDetail"),a.unhandledException=i("unhandledException");const c=i("bytesReceived");c&&(a.bytesReceived=parseInt(c,10));const d=i("retryAfter");d&&(a.retryAfter=parseInt(d,10))}catch(n){console.error("Error parseando respuesta Descartes:",n)}return a}isSuccessResponse(r){return r.error||r.errorShort||r.errorDetail||r.unhandledException?!1:!!(r.status||r.tid)}async sendMessage(r,a,n){const o=new Date().toISOString();if(!this.isConfigured())return{success:!1,messageType:a,reference:n,error:"Servicio no configurado. Falta endpoint, usuario o contraseña.",timestamp:o};try{let s;this.credentials.proxyUrl?(console.log(`🔄 Usando proxy: ${this.credentials.proxyUrl}`),s=await fetch(this.credentials.proxyUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({descartesEndpoint:this.credentials.endpoint,username:this.credentials.username,password:this.credentials.password,message:r,messageType:a,reference:n})})):s=await fetch(this.credentials.endpoint,{method:"POST",headers:{"Content-Type":"application/x-CARGO-IMP",Authorization:this.getAuthHeader()},body:r});const i=await s.text(),c=this.parseDescartesXml(i);if(s.ok&&this.isSuccessResponse(c))return{success:!0,messageType:a,reference:n,httpStatus:s.status,responseMessage:c.status||"OK",responseRaw:i,requestBody:r,descartesResponse:c,timestamp:o};{let p="";return c.error?p=c.error:c.errorShort?p=c.errorShort:c.errorDetail?p=c.errorDetail:c.unhandledException?p=`Exception: ${c.unhandledException}`:s.ok?p="Error desconocido en respuesta":p=`HTTP ${s.status}: ${s.statusText}`,{success:!1,messageType:a,reference:n,httpStatus:s.status,responseMessage:i,responseRaw:i,requestBody:r,descartesResponse:c,error:p,timestamp:o}}}catch(s){return{success:!1,messageType:a,reference:n,requestBody:r,error:s instanceof Error?s.message:"Error de conexión desconocido",timestamp:o}}}async sendBundle(r,a,n=[],o=[]){const s=[];let i=0,c=0;console.log(`📤 Transmitiendo FWB ${a} a Descartes...`);const d=await this.sendMessage(r,"FWB",a);if(d.success?(i++,console.log(`✅ FWB ${a} transmitido exitosamente`)):(c++,console.error(`❌ Error transmitiendo FWB ${a}:`,d.error)),d.success&&n.length>0)for(let l=0;l<n.length;l++){const g=n[l],v=o[l]||`HAWB-${l+1}`;console.log(`📤 Transmitiendo FHL ${v} (${l+1}/${n.length})...`);const f=await this.sendMessage(g,"FHL",v);s.push(f),f.success?(i++,console.log(`✅ FHL ${v} transmitido exitosamente`)):(c++,console.error(`❌ Error transmitiendo FHL ${v}:`,f.error)),l<n.length-1&&await this.delay(100)}const p=1+n.length,m=c===0;let u;return m?u=`✅ Transmisión exitosa: FWB${n.length>0?` + ${n.length} FHL`:""} enviados a Descartes`:i===0?u="❌ Error en transmisión: No se pudo enviar ningún mensaje":u=`⚠️ Transmisión parcial: ${i}/${p} mensajes enviados (${c} fallidos)`,{allSuccess:m,fwbResult:d,fhlResults:s,summary:u,totalSent:p,totalSuccess:i,totalFailed:c}}delay(r){return new Promise(a=>setTimeout(a,r))}}/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qn=(...t)=>t.filter((r,a,n)=>!!r&&r.trim()!==""&&n.indexOf(r)===a).join(" ").trim();/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=({color:t="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:n,children:o,iconNode:s,class:i="",...c})=>gt("svg",{...jn,width:String(r),height:r,stroke:t,"stroke-width":n?Number(a)*24/Number(r):a,class:["lucide",i].join(" "),...c},[...s.map(([d,p])=>gt(d,p)),...Pt(o)]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=(t,r)=>{const a=({class:n="",children:o,...s})=>gt(Xn,{...s,iconNode:r,class:qn(`lucide-${Vn(t)}`,n)},o);return a.displayName=`${t}`,a};/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=q("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=q("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=q("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=q("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=q("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=q("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=q("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=q("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=q("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=q("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=q("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=q("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=q("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=q("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=q("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=q("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=q("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=q("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=q("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=q("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=q("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=q("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-preact v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=q("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);let pt={...Bt};function Qn(){pt={...Bt}}const Ct=({title:t,icon:r,children:a,defaultOpen:n=!1,badge:o})=>{const[s,i]=_(n);return e("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[e("button",{onClick:()=>i(!s),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 transition-colors",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"text-purple-600",children:r}),e("span",{className:"font-semibold text-slate-700",children:t}),o&&e("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full",children:o})]}),s?e(Pe,{size:18,className:"text-slate-400"}):e(ue,{size:18,className:"text-slate-400"})]}),s&&e("div",{className:"p-4 bg-white border-t border-slate-100",children:a})]})},es=({isOpen:t,onClose:r,onConfigChange:a,onSaveConfig:n})=>{var ce,be,ye,P,W,re,Q,L,xe,Se,je,Ue,$,de,Xe,X,Vt,qt;const[o,s]=_(()=>({...pt})),[i,c]=_(null),[d,p]=_(""),[m,u]=_([]),[l,g]=_(""),[v,f]=_("AGT"),[S,T]=_("RA"),[b,k]=_(null),[C,A]=_(()=>Oa()),[N,w]=_(()=>ar()),O=ie(x=>{Ko(x),A(x),a&&setTimeout(()=>a(pt),0)},[a]),D=ie(x=>{Yo(x),w(ar()),a&&setTimeout(()=>a(pt),0)},[a]);st(()=>{t&&(s({...pt,cargoImp:{...pt.cargoImp,airlinePolicies:{...ut}}}),A(Oa()),w(ar()),c(null))},[t]);const y=ie((x,z)=>{s(V=>{const ge={...V,[x]:z};return pt=ge,ge}),c(null),a&&setTimeout(()=>{a(pt)},0)},[a]),M=()=>{if(d&&d.length===3&&m.length>0){const x={...o.sphByAirline,[d]:m};y("sphByAirline",x),p(""),u([])}},B=x=>{if(x==="DEFAULT")return;const z={...o.sphByAirline};delete z[x],y("sphByAirline",z)},ne=()=>{if(l&&l.length===2){const x={...o.ociByOriginCountry,[l]:[{countryCode:l,infoIdentifier:v,controlInfo:S}]};y("ociByOriginCountry",x),g(""),f("AGT"),T("RA")}},Z=(x,z,V)=>{const ge=o.ociByOriginCountry[x]||[];if(ge.some(we=>we.infoIdentifier===z&&we.controlInfo===V))return;const Y={...o.ociByOriginCountry,[x]:[...ge,{countryCode:x,infoIdentifier:z,controlInfo:V}]};y("ociByOriginCountry",Y)},E=(x,z)=>{const V=o.ociByOriginCountry[x]||[];if(V.length<=1)return;const ge={...o.ociByOriginCountry,[x]:V.filter((Y,we)=>we!==z)};y("ociByOriginCountry",ge)},G=x=>{if(x==="DEFAULT")return;const z={...o.ociByOriginCountry};delete z[x],y("ociByOriginCountry",z)};return t?e("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[e("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),e("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b border-purple-300 bg-purple-600 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"bg-white/30 p-2 rounded-lg",children:e(Br,{size:22,className:"text-white"})}),e("div",{children:[e("h2",{className:"font-bold text-lg text-white",children:"Configuración del Conector"}),e("p",{className:"text-sm text-purple-200",children:"Lógicas de negocio dinámicas por aerolínea y país"})]})]}),e("button",{onClick:r,className:"hover:bg-white/20 p-2 rounded-lg transition-colors",children:e(De,{size:20,className:"text-white"})})]}),e("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[i&&e("div",{className:`flex items-center gap-2 p-3 rounded-lg ${i.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[i.type==="success"?e(K,{size:18}):e(le,{size:18}),e("span",{className:"text-sm font-medium",children:i.text})]}),e("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e("div",{className:"flex items-start gap-3",children:[e(Re,{className:"text-purple-600 mt-0.5 flex-shrink-0",size:18}),e("div",{className:"text-sm text-purple-800",children:[e("p",{className:"font-semibold mb-1",children:"📋 Aclaración: Campo accountNumber vs NIT/RUC"}),e("p",{className:"text-purple-700",children:["El campo ",e("code",{className:"bg-purple-100 px-1 rounded",children:"accountNumber"})," en Shipper/Consignee es un",e("strong",{children:" código de cuenta asignado por la aerolínea"}),", NO el NIT/RUC del cliente."]})]})]})}),e(Ct,{title:"Formato de Mensaje (Descartes)",icon:e(Nt,{size:18}),badge:C?"Type B":"EDIFACT",defaultOpen:!0,children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:["Selecciona el formato de envelope para los mensajes EDI. ",e("strong",{children:"Type B"})," es requerido para envío directo a Descartes."]}),e("div",{className:"grid grid-cols-2 gap-4",children:[e("button",{onClick:()=>O(!1),className:`p-4 rounded-lg border-2 text-left transition-all ${C?"border-slate-200 bg-white hover:border-slate-300":"border-purple-500 bg-purple-50"}`,children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${C?"border-slate-300":"border-purple-500"}`,children:!C&&e("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})}),e("span",{className:`font-semibold ${C?"text-slate-700":"text-purple-700"}`,children:"EDIFACT (UNB/UNZ)"})]}),e("p",{className:"text-xs text-slate-500",children:"Envelope EDIFACT estándar con segmentos UNB, UNH, UNT, UNZ"}),e("div",{className:"mt-2 text-xs font-mono bg-slate-100 p-2 rounded text-slate-600",children:["UNB+IATA:1+SENDER...",e("br",{}),"FWB/17",e("br",{}),"...",e("br",{}),"'UNT+3+...'UNZ+1+...'"]})]}),e("button",{onClick:()=>O(!0),className:`p-4 rounded-lg border-2 text-left transition-all ${C?"border-sky-500 bg-sky-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${C?"border-sky-500":"border-slate-300"}`,children:C&&e("div",{className:"w-2 h-2 bg-sky-500 rounded-full"})}),e("span",{className:`font-semibold ${C?"text-sky-700":"text-slate-700"}`,children:"Type B (Descartes)"})]}),e("p",{className:"text-xs text-slate-500",children:"Formato IATA Type B para envío a Descartes GLN"}),e("div",{className:"mt-2 text-xs font-mono bg-slate-100 p-2 rounded text-slate-600",children:["QK ",N.recipientAddress||"DSGUNXA",e("br",{}),".",N.senderPrefix||"DSGTPXA",N.includeTimestamp?" DDHHmm":""," ",N.originAddress||"TDVAGT03OPERFLOR/BOG1",e("br",{}),"FWB/17",e("br",{}),"..."]}),e("p",{className:"text-xs text-slate-400 mt-1",children:"DSGUNXA = Descartes Universal Header (enruta automáticamente)"})]})]}),C&&e("div",{className:"mt-4 p-4 bg-sky-50 border border-sky-200 rounded-lg space-y-3",children:[e("p",{className:"text-sm font-semibold text-sky-800 flex items-center gap-2",children:[e(Nt,{size:16})," Configuración Type B"]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Recipient Address (Descartes)"}),e("input",{type:"text",value:N.recipientAddress||"DSGUNXA",onChange:x=>D({recipientAddress:x.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"DSGUNXA"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"DSGUNXA = Descartes Universal Header (enruta automáticamente a la aerolínea)"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Sender Prefix (Línea 2)"}),e("input",{type:"text",value:N.senderPrefix||"DSGTPXA",onChange:x=>D({senderPrefix:x.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"DSGTPXA"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"Prefijo fijo de Descartes para la línea del sender"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Origin Address (Tu identificador)"}),e("input",{type:"text",value:N.originAddress||"TDVAGT03OPERFLOR/BOG1",onChange:x=>D({originAddress:x.target.value}),className:"w-full border border-sky-300 rounded px-3 py-2 text-sm font-mono bg-white",placeholder:"TDVAGT03OPERFLOR/BOG1"}),e("p",{className:"text-xs text-sky-600 mt-1",children:"Tu identificador de agente (proporcionado por Descartes)"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Timestamp en línea origen"}),e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>D({includeTimestamp:!1}),className:`px-3 py-1.5 rounded text-sm transition-colors ${N.includeTimestamp?"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100":"bg-sky-600 text-white"}`,children:"Sin timestamp"}),e("button",{onClick:()=>D({includeTimestamp:!0}),className:`px-3 py-1.5 rounded text-sm transition-colors ${N.includeTimestamp?"bg-sky-600 text-white":"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100"}`,children:"Con timestamp (DDHHmm)"})]}),e("p",{className:"text-xs text-sky-600 mt-1",children:N.includeTimestamp?"Ej: .DSGTPXA 031545 TDVAGT03OPERFLOR/BOG1":"Ej: .DSGTPXA TDVAGT03OPERFLOR/BOG1"})]}),e("div",{children:[e("label",{className:"text-xs text-sky-700 font-medium block mb-1",children:"Prioridad"}),e("div",{className:"flex gap-2",children:["QK","QD","QP","QU"].map(x=>e("button",{onClick:()=>D({defaultPriority:x}),className:`px-3 py-1.5 rounded text-sm font-mono transition-colors ${N.defaultPriority===x?"bg-sky-600 text-white":"bg-white border border-sky-300 text-sky-700 hover:bg-sky-100"}`,children:x},x))}),e("p",{className:"text-xs text-sky-600 mt-1",children:"QK=Normal, QD=Deferred, QP=Priority, QU=Urgent"})]})]})]})}),e(Ct,{title:"Special Handling Codes (SPH) por Aerolínea",icon:e(at,{size:18}),badge:`${Object.keys(o.sphByAirline).length} aerolíneas`,defaultOpen:!1,children:e("div",{className:"space-y-3",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Define qué códigos SPH se agregan automáticamente según el prefijo AWB (primeros 3 dígitos)."}),e("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Object.entries(o.sphByAirline).map(([x,z])=>e("div",{className:`flex items-center justify-between p-3 rounded-lg border ${x==="DEFAULT"?"bg-purple-50 border-purple-200":"bg-slate-50 border-slate-200"}`,children:[e("div",{className:"flex items-center gap-3",children:[e("span",{className:"font-mono font-bold text-slate-700 w-12",children:x}),e("span",{className:"text-slate-400",children:"→"}),e("div",{className:"flex flex-wrap gap-1",children:z.map(V=>e("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-medium",children:V},V))})]}),x!=="DEFAULT"&&e("button",{onClick:()=>B(x),className:"text-red-500 hover:bg-red-100 p-1.5 rounded transition-colors",children:e(Hr,{size:14})}),x==="DEFAULT"&&e("span",{className:"text-xs text-amber-600 font-medium",children:"Por defecto"})]},x))}),e("div",{className:"flex items-end gap-2 pt-4 border-t border-slate-200",children:[e("div",{className:"flex-shrink-0",children:[e("label",{className:"text-xs text-slate-500 font-medium block mb-1",children:"Prefijo AWB"}),e("input",{type:"text",value:d,onChange:x=>p(x.target.value.toUpperCase().slice(0,3)),placeholder:"075",className:"w-20 border border-slate-300 rounded px-2 py-1.5 text-sm font-mono",maxLength:3})]}),e("div",{className:"flex-1",children:[e("label",{className:"text-xs text-slate-500 font-medium block mb-1",children:"Códigos SPH (seleccione)"}),e("div",{className:"flex flex-wrap gap-1 border border-slate-300 rounded p-2 bg-white max-h-20 overflow-y-auto",children:Object.values(tr).map(x=>e("button",{onClick:()=>{m.includes(x.code)?u(z=>z.filter(V=>V!==x.code)):u(z=>[...z,x.code])},className:`text-xs px-2 py-0.5 rounded-full transition-colors ${m.includes(x.code)?"bg-purple-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,title:x.description,children:x.code},x.code))})]}),e("button",{onClick:M,disabled:!d||d.length!==3||m.length===0,className:"flex-shrink-0 bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(pr,{size:14})," Agregar"]})]}),e("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"📋 Prefijos AWB comunes:"}),e("div",{className:"grid grid-cols-4 gap-2 text-xs text-slate-500",children:[e("span",{children:[e("strong",{children:"075"})," = Iberia"]}),e("span",{children:[e("strong",{children:"145"})," = LATAM"]}),e("span",{children:[e("strong",{children:"985"})," = LATAM Cargo"]}),e("span",{children:[e("strong",{children:"074"})," = KLM"]}),e("span",{children:[e("strong",{children:"057"})," = Air France"]}),e("span",{children:[e("strong",{children:"020"})," = Lufthansa"]}),e("span",{children:[e("strong",{children:"205"})," = Emirates"]}),e("span",{children:[e("strong",{children:"176"})," = Emirates (alt)"]}),e("span",{children:[e("strong",{children:"235"})," = Turkish"]}),e("span",{children:[e("strong",{children:"157"})," = Qatar"]}),e("span",{children:[e("strong",{children:"045"})," = Avianca"]}),e("span",{children:[e("strong",{children:"369"})," = Atlas/Ethiopian"]}),e("span",{children:[e("strong",{children:"992"})," = DHL Aviation"]}),e("span",{children:[e("strong",{children:"999"})," = Polar/DHL"]}),e("span",{children:[e("strong",{children:"155"})," = ABX Air"]})]})]})]})}),e(Ct,{title:"OCI (Aduanas/Seguridad) por País de Origen",icon:e(Yn,{size:18}),badge:`${Object.keys(o.ociByOriginCountry).length} países`,children:e("div",{className:"space-y-3",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Define qué información OCI se agrega automáticamente según el país de origen del envío."}),e("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:Object.entries(o.ociByOriginCountry).map(([x,z])=>e("div",{className:`p-3 rounded-lg border ${x==="DEFAULT"?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"font-mono font-bold text-slate-700 bg-white px-2 py-1 rounded border",children:x}),x==="DEFAULT"&&e("span",{className:"text-xs text-amber-600 font-medium",children:"Por defecto"})]}),e("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>k(b===x?null:x),className:"text-purple-500 hover:bg-purple-100 p-1 rounded transition-colors text-xs",children:b===x?"Cerrar":"+ Agregar OCI"}),x!=="DEFAULT"&&e("button",{onClick:()=>G(x),className:"text-red-500 hover:bg-red-100 p-1 rounded transition-colors",children:e(Hr,{size:14})})]})]}),e("div",{className:"space-y-1",children:z.map((V,ge)=>e("div",{className:"text-xs text-slate-600 flex items-center gap-2 bg-white p-1.5 rounded",children:[e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded font-medium",children:V.infoIdentifier}),e("span",{children:"→"}),e("span",{className:"bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-medium",children:V.controlInfo}),z.length>1&&e("button",{onClick:()=>E(x,ge),className:"ml-auto text-red-400 hover:text-red-600",children:e(De,{size:12})})]},ge))}),b===x&&e("div",{className:"mt-3 pt-3 border-t border-dashed border-slate-300",children:[e("p",{className:"text-xs text-slate-500 mb-2",children:["Agregar nuevo OCI a ",x,":"]}),e("div",{className:"flex flex-wrap gap-2 items-center",children:[e("select",{value:v,onChange:V=>f(V.target.value),className:"border border-slate-300 rounded px-2 py-1 text-sm",children:[e("option",{value:"AGT",children:"AGT - Agent"}),e("option",{value:"CNE",children:"CNE - Consignee"}),e("option",{value:"SHP",children:"SHP - Shipper"}),e("option",{value:"FFW",children:"FFW - Freight Forwarder"})]}),e("select",{value:S,onChange:V=>T(V.target.value),className:"border border-slate-300 rounded px-2 py-1 text-sm",children:Object.entries(ua).map(([V,ge])=>e("option",{value:ge.short,children:[ge.short," - ",ge.description]},V))}),e("button",{onClick:()=>{Z(x,v,S),k(null)},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:e(pr,{size:14})})]})]})]},x))}),e("div",{className:"pt-4 border-t border-slate-200",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Agregar nuevo país:"}),e("div",{className:"flex flex-wrap items-center gap-2",children:[e("input",{type:"text",value:l,onChange:x=>g(x.target.value.toUpperCase().slice(0,2)),placeholder:"CO",className:"w-16 border border-slate-300 rounded px-2 py-1.5 text-sm font-mono",maxLength:2}),e("select",{value:v,onChange:x=>f(x.target.value),className:"border border-slate-300 rounded px-2 py-1.5 text-sm",children:[e("option",{value:"AGT",children:"AGT - Agent"}),e("option",{value:"CNE",children:"CNE - Consignee"}),e("option",{value:"SHP",children:"SHP - Shipper"}),e("option",{value:"FFW",children:"FFW - Freight Forwarder"})]}),e("select",{value:S,onChange:x=>T(x.target.value),className:"border border-slate-300 rounded px-2 py-1.5 text-sm",children:Object.entries(ua).map(([x,z])=>e("option",{value:z.short,children:[z.short," - ",z.description]},x))}),e("button",{onClick:ne,disabled:!l||l.length!==2,className:"bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(pr,{size:14})," Agregar País"]})]})]}),e("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[e("p",{className:"text-xs font-semibold text-slate-600 mb-2",children:"📋 Códigos de país ISO comunes:"}),e("div",{className:"grid grid-cols-4 gap-2 text-xs text-slate-500",children:[e("span",{children:[e("strong",{children:"CO"})," = Colombia"]}),e("span",{children:[e("strong",{children:"EC"})," = Ecuador"]}),e("span",{children:[e("strong",{children:"PE"})," = Perú"]}),e("span",{children:[e("strong",{children:"PA"})," = Panamá"]}),e("span",{children:[e("strong",{children:"MX"})," = México"]}),e("span",{children:[e("strong",{children:"CL"})," = Chile"]}),e("span",{children:[e("strong",{children:"AR"})," = Argentina"]}),e("span",{children:[e("strong",{children:"BR"})," = Brasil"]})]})]})]})}),e(Ct,{title:"Opciones de Envío",icon:e(ct,{size:18}),children:e("div",{className:"space-y-4",children:[e("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-green-800",children:"Incluir NIT/RUC del Importer"}),e("p",{className:"text-xs text-green-600",children:"Envía el NIT del consignee/importador como OCI (AGT/T/NIT)"}),e("p",{className:"text-xs text-green-500 mt-1 italic",children:"✅ Este es el default - Solo se envía si el importer tiene taxId"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:o.includeConsigneeTIN??!0,onChange:x=>y("includeConsigneeTIN",x.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-slate-700",children:"Incluir NIT/RUC del Shipper"}),e("p",{className:"text-xs text-slate-500",children:"Envía también el NIT del shipper/exportador (opcional)"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:o.includeShipperTIN,onChange:x=>y("includeShipperTIN",x.target.checked),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-slate-700",children:"Generar CSL automático"}),e("p",{className:"text-xs text-slate-500",children:"Crear Consolidation List para envíos con houses"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:o.messageConfig.autoGenerateCSL,onChange:x=>y("messageConfig",{...o.messageConfig,autoGenerateCSL:x.target.checked}),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})}),e(Ct,{title:"OCI Seguridad (RA/ED/SM/SD/SN)",icon:e(ct,{size:18}),badge:(ce=o.securityOci)!=null&&ce.enabled?"Activo":"Inactivo",children:e("div",{className:"space-y-4",children:[e("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e("div",{className:"flex items-start gap-2",children:[e(Re,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),e("div",{className:"text-xs text-blue-700",children:[e("p",{className:"font-medium mb-1",children:"Información de Seguridad OCI"}),e("p",{children:"Algunos destinos/aerolíneas requieren información de seguridad adicional para documentar quién, cómo y cuándo se aseguró el envío. Active esta opción solo si la aerolínea lo requiere."})]})]})}),e("div",{className:"flex items-center justify-between p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e("div",{children:[e("p",{className:"font-medium text-amber-800",children:"Incluir OCI de Seguridad"}),e("p",{className:"text-xs text-amber-600",children:"Enviar RA, ED, SM, SD, SN en el mensaje"})]}),e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:((be=o.securityOci)==null?void 0:be.enabled)||!1,onChange:x=>y("securityOci",{...o.securityOci,enabled:x.target.checked}),className:"sr-only peer"}),e("div",{className:"w-11 h-6 bg-slate-300 peer-focus:ring-2 peer-focus:ring-amber-300 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"})]})]}),((ye=o.securityOci)==null?void 0:ye.enabled)&&e("div",{className:"space-y-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"RA"}),"Número de Agente Regulado"]}),e("input",{type:"text",value:((P=o.securityOci)==null?void 0:P.regulatedAgentNumber)||"",onChange:x=>y("securityOci",{...o.securityOci,regulatedAgentNumber:x.target.value}),placeholder:"Ej: 00100-01",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:35}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Número de certificado del agente regulado de Colombia"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"ED"}),"Fecha Expiración Certificado"]}),e("input",{type:"text",value:((W=o.securityOci)==null?void 0:W.expiryDate)||"",onChange:x=>y("securityOci",{...o.securityOci,expiryDate:x.target.value.toUpperCase().replace(/[^0-9]/g,"").substring(0,4)}),placeholder:"MMYY (Ej: 1225 = Dic 2025)",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:4}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Formato MMYY - Mes y año de expiración del certificado"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-green-100 text-green-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SM"}),"Método de Screening"]}),e("select",{value:((re=o.securityOci)==null?void 0:re.screeningMethod)||"",onChange:x=>y("securityOci",{...o.securityOci,screeningMethod:x.target.value}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",children:[e("option",{value:"",children:"-- Seleccionar método --"}),e("option",{value:"XRY",children:"XRY - Rayos X"}),e("option",{value:"EDS",children:"EDS - Sistema de Detección de Explosivos"}),e("option",{value:"ETD",children:"ETD - Detección de Trazas de Explosivos"}),e("option",{value:"VCK",children:"VCK - Verificación Visual"}),e("option",{value:"PHS",children:"PHS - Inspección Física"}),e("option",{value:"EDD",children:"EDD - Perros Detectores de Explosivos"})]}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Método utilizado para inspeccionar la carga"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SD"}),"Fecha/Hora de Screening"]}),e("input",{type:"text",value:((Q=o.securityOci)==null?void 0:Q.screeningDate)||"",onChange:x=>y("securityOci",{...o.securityOci,screeningDate:x.target.value.toUpperCase().substring(0,13)}),placeholder:"DDMMMYYHHmm (Ej: 24DEC252359)",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono",maxLength:13}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Formato DDMMMYYHHmm - Fecha y hora local del screening"})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:[e("span",{className:"bg-pink-100 text-pink-700 px-1.5 py-0.5 rounded text-xs font-bold mr-2",children:"SN"}),"Nombre del Responsable"]}),e("input",{type:"text",value:((L=o.securityOci)==null?void 0:L.screenerName)||"",onChange:x=>y("securityOci",{...o.securityOci,screenerName:x.target.value.toUpperCase().substring(0,35)}),placeholder:"Ej: JORGE GAMBOA",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm uppercase",maxLength:35}),e("p",{className:"text-xs text-slate-500 mt-1",children:"Nombre de la persona que realizó el screening"})]}),e("div",{className:"mt-4 p-3 bg-slate-800 rounded-lg",children:[e("p",{className:"text-xs text-slate-400 mb-2 font-medium",children:"Vista previa del OCI de seguridad:"}),e("pre",{className:"text-xs text-green-400 font-mono overflow-x-auto",children:`[
${(xe=o.securityOci)!=null&&xe.regulatedAgentNumber?`  { "isoCountryCode": "CO", "informationIdentifier": "AGT", "additionalControlInformation": "RA", "supplementaryControlInformation": "${o.securityOci.regulatedAgentNumber}" },
`:""}${(Se=o.securityOci)!=null&&Se.expiryDate?`  { "additionalControlInformation": "ED", "supplementaryControlInformation": "${o.securityOci.expiryDate}" },
`:""}${(je=o.securityOci)!=null&&je.screeningMethod?`  { "additionalControlInformation": "SM", "supplementaryControlInformation": "${o.securityOci.screeningMethod}" },
`:""}${(Ue=o.securityOci)!=null&&Ue.screeningDate?`  { "additionalControlInformation": "SD", "supplementaryControlInformation": "${o.securityOci.screeningDate}" },
`:""}${($=o.securityOci)!=null&&$.screenerName?`  { "additionalControlInformation": "SN", "supplementaryControlInformation": "${o.securityOci.screenerName}" }
`:""}]`})]})]})]})}),e(Ct,{title:"CARGO-IMP (EDI) Configuración",icon:e(dt,{size:18}),badge:"Formato EDI",defaultOpen:!0,children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-slate-500 mb-4",children:"Configura las versiones de mensaje y opciones para el formato CARGO-IMP (IATA CIMP EDI)."}),e("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e("p",{className:"text-xs font-bold text-emerald-700 uppercase tracking-wide mb-3",children:"⚙️ Configuración Global"}),e("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e("div",{children:[e("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Versión FWB"}),e("select",{value:((de=o.cargoImp)==null?void 0:de.fwbVersion)||"FWB/16",onChange:x=>y("cargoImp",{...o.cargoImp,fwbVersion:x.currentTarget.value}),className:"w-full border border-emerald-300 rounded px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-emerald-400",children:[e("option",{value:"FWB/16",children:"FWB/16 (Estándar)"}),e("option",{value:"FWB/17",children:"FWB/17 (Extendido)"})]})]}),e("div",{children:[e("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Versión FHL"}),e("select",{value:((Xe=o.cargoImp)==null?void 0:Xe.fhlVersion)||"FHL/4",onChange:x=>y("cargoImp",{...o.cargoImp,fhlVersion:x.currentTarget.value}),className:"w-full border border-emerald-300 rounded px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-emerald-400",children:[e("option",{value:"FHL/4",children:"FHL/4 (Actual)"}),e("option",{value:"FHL/2",children:"FHL/2 (Legacy)"})]})]}),e("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cargoImpUNB",checked:((X=o.cargoImp)==null?void 0:X.includeUNB_UNZ)||!1,onChange:x=>y("cargoImp",{...o.cargoImp,includeUNB_UNZ:x.currentTarget.checked}),className:"w-4 h-4 rounded border-emerald-300 text-emerald-600 focus:ring-emerald-400"}),e("label",{htmlFor:"cargoImpUNB",className:"text-xs text-slate-700",children:["Incluir UNB/UNZ",e("br",{}),e("span",{className:"text-[10px] text-slate-400",children:"(EDIFACT wrapper)"})]})]}),e("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cargoImpEORI",checked:((Vt=o.cargoImp)==null?void 0:Vt.ociWithEori)||!1,onChange:x=>y("cargoImp",{...o.cargoImp,ociWithEori:x.currentTarget.checked}),className:"w-4 h-4 rounded border-emerald-300 text-emerald-600 focus:ring-emerald-400"}),e("label",{htmlFor:"cargoImpEORI",className:"text-xs text-slate-700",children:["EORI en OCI",e("br",{}),e("span",{className:"text-[10px] text-slate-400",children:"(Requerido UE)"})]})]})]})]}),e("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e("p",{className:"text-xs font-bold text-purple-700 uppercase tracking-wide mb-3",children:"📦 Códigos SPH por defecto"}),e("div",{className:"flex flex-wrap gap-2",children:["EAP","ECC","PER","SPX","DGR","ICE","VAL","AVI","HEA"].map(x=>{var z;return e("label",{className:"flex items-center gap-1.5 bg-white px-2 py-1 rounded border border-purple-200 cursor-pointer hover:bg-purple-100",children:[e("input",{type:"checkbox",checked:(((z=o.cargoImp)==null?void 0:z.defaultSphCodes)||[]).includes(x),onChange:V=>{var we;const ge=((we=o.cargoImp)==null?void 0:we.defaultSphCodes)||[],Y=V.currentTarget.checked?[...ge,x]:ge.filter(Ze=>Ze!==x);y("cargoImp",{...o.cargoImp,defaultSphCodes:Y})},className:"w-3 h-3 rounded border-purple-300 text-purple-600"}),e("span",{className:"text-xs font-mono text-purple-700",children:x})]},x)})})]}),e("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"✈️ Políticas por Aerolínea (Pre-configuradas)"}),e("button",{onClick:()=>{y("cargoImp",{...o.cargoImp,airlinePolicies:{...ut}})},className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-1 rounded hover:bg-indigo-200",title:"Actualiza 992=DHL, 999=Polar Air, etc.",children:"🔄 Sincronizar predefinidas"})]}),e("p",{className:"text-xs text-slate-500 mb-3",children:"Haz clic en una aerolínea para expandir y editar. Los segmentos son clickeables para activar/desactivar."}),e("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:Object.entries({...ut,...((qt=o.cargoImp)==null?void 0:qt.airlinePolicies)||{}}).sort(([x],[z])=>x==="DEFAULT"?1:z==="DEFAULT"?-1:x.localeCompare(z)).map(([x,z])=>{let V=[...z.enabledSegments||[]];const ge=z.disabledSegments||[];if(V.includes("NH")){if(!V.includes("NV")&&!ge.includes("NV")){const H=V.indexOf("NH");V=[...V.slice(0,H+1),"NV",...V.slice(H+1)]}if(!V.includes("NS")&&!ge.includes("NS")){const H=V.indexOf("NV");if(H>=0)V=[...V.slice(0,H+1),"NS",...V.slice(H+1)];else{const ee=V.indexOf("NH");V=[...V.slice(0,ee+1),"NS",...V.slice(ee+1)]}}}const Y={...z,enabledSegments:V},we=Object.keys(tt),Ze=Math.floor((Y.policy||20)/10);return e("details",{className:"group bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e("summary",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-slate-50",children:[e("div",{className:"flex items-center gap-3 flex-wrap",children:[e("span",{className:"font-mono font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded w-12 text-center",children:x}),e("span",{className:"text-xs text-slate-600",children:Y.name||x}),e("span",{className:`text-[10px] px-2 py-0.5 rounded ${Ze===7?"bg-orange-100 text-orange-700":Ze===5?"bg-purple-100 text-purple-700":Ze===4?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:["Caso ",Ze]}),e("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded",children:Y.fwbVersion||"FWB/16"}),e("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded",children:Y.fhlVersion||"FHL/4"})]}),e("div",{className:"flex items-center gap-2",children:[e(ue,{size:14,className:"text-slate-400 group-open:rotate-90 transition-transform"}),x!=="DEFAULT"&&e("button",{onClick:H=>{var ae;H.preventDefault(),H.stopPropagation();const ee={...(ae=o.cargoImp)==null?void 0:ae.airlinePolicies};delete ee[x],y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"text-red-500 hover:text-red-700 p-1",children:e(Hr,{size:14})})]})]}),e("div",{className:"px-3 pb-3 border-t border-slate-100 pt-3 space-y-3",children:[e("div",{className:"p-2 bg-amber-50 rounded border border-amber-200",children:[e("label",{className:"text-[10px] text-amber-700 font-bold block mb-1",children:"🔧 Política de Caso"}),e("select",{value:Y.policy||20,onChange:H=>{var br;const ee=parseInt(H.currentTarget.value),ae=Object.keys(tt),ke=Object.keys(Le),Ge=["FWB","AWB","RTG","SHP","CNE","AGT","CVD","ISU","FTR"],Be=ke;let pe=[...Ge],Oe=[],Ke=!0,$e=!1;switch(Math.floor(ee/10)){case 2:pe=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],Oe=ae.filter(We=>!pe.includes(We));break;case 4:pe=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","ACC","CVD","RTD","NG","NH","NV","NS","OTH","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],Oe=ae.filter(We=>!pe.includes(We));break;case 5:pe=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","REF","SPH","OCI","FTR"],Oe=ae.filter(We=>!pe.includes(We));break;case 7:pe=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","SSR","NFY","ACC","CVD","RTD","NG","NH","NV","NS","PPD","COL","CER","ISU","REF","SPH","OCI","FTR"],Oe=ae.filter(We=>!pe.includes(We)),$e=!0;break;case 8:pe=["FWB","AWB","FLT","RTG","SHP","CNE","AGT","CVD","RTD","NG","NH","NV","NS","PPD","COL","ISU","SPH","OCI","FTR"],Oe=ae.filter(We=>!pe.includes(We));break}const Ye={...((br=o.cargoImp)==null?void 0:br.airlinePolicies)||{},[x]:{...Y,policy:ee,enabledSegments:pe,disabledSegments:Oe,enabledFhlSegments:Be,disabledFhlSegments:[],includeUnbUnz:Ke,fhlAlwaysWithHeader:$e}};y("cargoImp",{...o.cargoImp,airlinePolicies:Ye}),console.log(`[ConfigPanel] Caso cambiado a ${ee} para ${x}, segmentos FWB: ${pe.length} habilitados`)},className:"w-full border border-amber-300 rounded px-2 py-1 text-xs bg-white",children:[e("optgroup",{label:"📦 Consolidados",children:[e("option",{value:20,children:"Caso 2: FWB + FHL individuales"}),e("option",{value:40,children:"Caso 4: FWB_NEW + FHL individuales"}),e("option",{value:50,children:"Caso 5: FWB_NEW + FHL concatenados"}),e("option",{value:70,children:"Caso 7: DHL/ABX (FHL con header)"}),e("option",{value:80,children:"Caso 8: Todas FHL en 1 mensaje"})]}),e("optgroup",{label:"📄 Directos",children:[e("option",{value:21,children:"Caso 2: FWB directo"}),e("option",{value:41,children:"Caso 4: FWB_NEW directo"}),e("option",{value:71,children:"Caso 7: DHL/ABX directo"})]})]})]}),e("div",{className:"grid grid-cols-4 gap-2",children:[e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"FWB"}),e("select",{value:Y.fwbVersion||"FWB/16",onChange:H=>{var ae;const ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,fwbVersion:H.currentTarget.value}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"w-full border border-slate-300 rounded px-1 py-1 text-xs",children:[e("option",{value:"FWB/16",children:"FWB/16"}),e("option",{value:"FWB/17",children:"FWB/17"}),e("option",{value:"FWB/9",children:"FWB/9"})]})]}),e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"FHL"}),e("select",{value:Y.fhlVersion||"FHL/4",onChange:H=>{var ae;const ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,fhlVersion:H.currentTarget.value}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"w-full border border-slate-300 rounded px-1 py-1 text-xs",children:[e("option",{value:"FHL/4",children:"FHL/4"}),e("option",{value:"FHL/2",children:"FHL/2"})]})]}),e("label",{className:"flex items-center gap-1 text-[10px] p-1 bg-slate-100 rounded",children:[e("input",{type:"checkbox",checked:Y.includeUnbUnz!==!1,onChange:H=>{var ae;const ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,includeUnbUnz:H.currentTarget.checked}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"w-3 h-3"}),"UNB/UNZ"]}),e("label",{className:"flex items-center gap-1 text-[10px] p-1 bg-slate-100 rounded",children:[e("input",{type:"checkbox",checked:Y.ociFormat==="withPrefix",onChange:H=>{var ae;const ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,ociFormat:H.currentTarget.checked?"withPrefix":"withoutPrefix"}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"w-3 h-3"}),"EORI"]})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-[10px] font-bold text-slate-700",children:"📋 Segmentos (click para toggle):"}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>{var ee;const H={...((ee=o.cargoImp)==null?void 0:ee.airlinePolicies)||{},[x]:{...Y,enabledSegments:[...we],disabledSegments:[]}};y("cargoImp",{...o.cargoImp,airlinePolicies:H})},className:"text-[9px] text-green-600 hover:underline",children:"Todos"}),e("button",{onClick:()=>{var ae;const H=["FWB","AWB","SHP","CNE","CVD","ISU","FTR"],ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,enabledSegments:H,disabledSegments:we.filter(ke=>!H.includes(ke))}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"text-[9px] text-amber-600 hover:underline",children:"Mínimos"})]})]}),e("div",{className:"grid grid-cols-8 gap-1",children:we.map(H=>{var ae;const ee=(Y.enabledSegments||[]).includes(H);return e("button",{onClick:()=>{var Ke;const ke=Y.enabledSegments||we,Ge=Y.disabledSegments||[];let Be,pe;ee?(Be=ke.filter($e=>$e!==H),pe=[...Ge,H]):(Be=[...ke,H],pe=Ge.filter($e=>$e!==H));const Oe={...((Ke=o.cargoImp)==null?void 0:Ke.airlinePolicies)||{},[x]:{...Y,enabledSegments:Be,disabledSegments:pe}};y("cargoImp",{...o.cargoImp,airlinePolicies:Oe}),jo(x,{enabledSegments:Be,disabledSegments:pe})},className:`p-1 rounded text-[9px] font-mono font-bold text-center transition-all ${ee?"bg-green-100 text-green-700 border border-green-300 hover:bg-green-200":"bg-red-50 text-red-400 border border-red-200 line-through hover:bg-red-100"}`,title:((ae=tt[H])==null?void 0:ae.name)||H,children:H},H)})}),e("p",{className:"text-[9px] text-slate-400 mt-1",children:["✓ ",(Y.enabledSegments||[]).length," activos | ✗ ",(Y.disabledSegments||[]).length," deshabilitados"]})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-[10px] font-bold text-blue-700",children:"📦 Segmentos FHL (Houses - click para toggle):"}),e("div",{className:"flex gap-2",children:[e("button",{onClick:()=>{var ae;const H=Object.keys(Le),ee={...((ae=o.cargoImp)==null?void 0:ae.airlinePolicies)||{},[x]:{...Y,enabledFhlSegments:[...H],disabledFhlSegments:[]}};y("cargoImp",{...o.cargoImp,airlinePolicies:ee})},className:"text-[9px] text-blue-600 hover:underline",children:"Todos"}),e("button",{onClick:()=>{var ke;const H=["FHL","MBI","HBS","SHP","CNE","CVD"],ee=Object.keys(Le),ae={...((ke=o.cargoImp)==null?void 0:ke.airlinePolicies)||{},[x]:{...Y,enabledFhlSegments:H,disabledFhlSegments:ee.filter(Ge=>!H.includes(Ge))}};y("cargoImp",{...o.cargoImp,airlinePolicies:ae})},className:"text-[9px] text-amber-600 hover:underline",children:"Mínimos"})]})]}),e("div",{className:"grid grid-cols-5 gap-1",children:Object.keys(Le).map(H=>{var Ge;const ee=Object.keys(Le),ke=(Y.enabledFhlSegments||ee).includes(H);return e("button",{onClick:()=>{var jt;const Be=Y.enabledFhlSegments||ee,pe=Y.disabledFhlSegments||[];let Oe,Ke;ke?(Oe=Be.filter(Ye=>Ye!==H),Ke=[...pe,H]):(Oe=[...Be,H],Ke=pe.filter(Ye=>Ye!==H));const $e={...((jt=o.cargoImp)==null?void 0:jt.airlinePolicies)||{},[x]:{...Y,enabledFhlSegments:Oe,disabledFhlSegments:Ke}};y("cargoImp",{...o.cargoImp,airlinePolicies:$e})},className:`p-1 rounded text-[9px] font-mono font-bold text-center transition-all ${ke?"bg-blue-100 text-blue-700 border border-blue-300 hover:bg-blue-200":"bg-red-50 text-red-400 border border-red-200 line-through hover:bg-red-100"}`,title:((Ge=Le[H])==null?void 0:Ge.name)||H,children:H},H)})}),e("p",{className:"text-[9px] text-blue-400 mt-1",children:["✓ ",(Y.enabledFhlSegments||Object.keys(Le)).length," FHL activos"]})]}),Y.notes&&e("div",{className:"bg-amber-50 border border-amber-200 rounded p-2",children:e("p",{className:"text-[10px] text-amber-700",children:[e(Re,{size:10,className:"inline mr-1"}),Y.notes]})})]})]},x)})}),e("div",{className:"mt-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[e("p",{className:"text-xs font-semibold text-emerald-700 mb-2",children:"+ Agregar política de aerolínea"}),e("div",{className:"flex items-end gap-2 flex-wrap",children:[e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"Prefijo AWB"}),e("input",{type:"text",maxLength:3,placeholder:"Ej: 075",value:d,onChange:x=>p(x.currentTarget.value.replace(/\D/g,"").slice(0,3)),className:"w-16 border border-emerald-300 rounded px-2 py-1 text-xs font-mono"})]}),e("div",{children:[e("label",{className:"text-[10px] text-slate-500 block mb-0.5",children:"Nombre"}),e("input",{type:"text",placeholder:"Ej: DHL",id:"newPolicyName",className:"w-24 border border-emerald-300 rounded px-2 py-1 text-xs"})]}),e("button",{onClick:()=>{var x;if(d&&d.length===3){const z=document.getElementById("newPolicyName"),V=Object.keys(tt),ge={...((x=o.cargoImp)==null?void 0:x.airlinePolicies)||{},[d]:{awbPrefix:d,name:(z==null?void 0:z.value)||`Aerolínea ${d}`,policy:21,fwbVersion:"FWB/16",fhlVersion:"FHL/4",includeUnbUnz:!0,ociFormat:"withPrefix",enabledSegments:V,disabledSegments:[],defaultSphCodes:["EAP"]}};y("cargoImp",{...o.cargoImp,airlinePolicies:ge}),p(""),z&&(z.value="")}},disabled:!d||d.length!==3,className:"bg-emerald-600 text-white px-3 py-1 rounded text-xs font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[e(pr,{size:12})," Agregar"]})]})]})]}),e("details",{className:"mt-4",children:[e("summary",{className:"cursor-pointer text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2 py-2 font-medium",children:[e(ue,{size:14})," Ver referencia de segmentos FWB/FHL"]}),e("div",{className:"mt-2 p-3 bg-slate-100 rounded-lg",children:e("div",{className:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("p",{className:"text-xs font-bold text-purple-700 mb-2",children:["Segmentos FWB (",Object.keys(tt).length,")"]}),e("div",{className:"flex flex-wrap gap-1",children:Object.keys(tt).map(x=>e("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded font-mono",children:x},x))})]}),e("div",{children:[e("p",{className:"text-xs font-bold text-blue-700 mb-2",children:["Segmentos FHL (",Object.keys(Le).length,")"]}),e("div",{className:"flex flex-wrap gap-1",children:Object.keys(Le).map(x=>e("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-mono",children:x},x))})]})]})})]})]})}),e(Ct,{title:"Configuración de Red",icon:e(lr,{size:18}),children:e("div",{className:"grid grid-cols-2 gap-4",children:[e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Timeout (ms)"}),e("input",{type:"number",value:o.messageConfig.sendTimeoutMs,onChange:x=>y("messageConfig",{...o.messageConfig,sendTimeoutMs:parseInt(x.target.value)||3e4}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",min:5e3,max:12e4,step:1e3})]}),e("div",{children:[e("label",{className:"text-sm font-medium text-slate-700 block mb-1",children:"Reintentos máximos"}),e("input",{type:"number",value:o.messageConfig.maxRetries,onChange:x=>y("messageConfig",{...o.messageConfig,maxRetries:parseInt(x.target.value)||3}),className:"w-full border border-slate-300 rounded px-3 py-2 text-sm",min:0,max:10})]})]})})]}),e("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50 flex items-center justify-between",children:[e("p",{className:"text-xs text-slate-500",children:'Los cambios se aplican inmediatamente. Use "Guardar" para persistir en su sistema.'}),e("div",{className:"flex items-center gap-3",children:[e("button",{onClick:r,className:"bg-slate-200 text-slate-700 px-6 py-2 rounded-lg text-sm font-medium hover:bg-slate-300 flex items-center gap-2",children:"Cerrar"}),n&&e("button",{onClick:()=>{n(o),c({type:"success",text:"✓ Configuración emitida para guardar"})},className:"bg-emerald-600 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-emerald-700 flex items-center gap-2",children:[e(K,{size:16})," Guardar"]})]})]})]})]}):null},ts={FWB:e(It,{size:14}),FHL:e(It,{size:14}),AWB:e(Fe,{size:14}),MBI:e(Fe,{size:14}),FLT:e(at,{size:14}),RTG:e(zt,{size:14}),SHP:e(Me,{size:14}),CNE:e(Me,{size:14}),AGT:e(lt,{size:14}),SSR:e(Re,{size:14}),ACC:e(rt,{size:14}),CVD:e(rt,{size:14}),RTD:e(cr,{size:14}),NG:e(kt,{size:14}),NH:e(kt,{size:14}),NV:e(cr,{size:14}),NS:e(Fe,{size:14}),HBS:e(Fe,{size:14}),HTS:e(kt,{size:14}),OTH:e(rt,{size:14}),PPD:e(rt,{size:14}),COL:e(rt,{size:14}),CER:e(ct,{size:14}),ISU:e(lr,{size:14}),REF:e(Ie,{size:14}),SPH:e(ct,{size:14}),OCI:e(ct,{size:14}),NFY:e(Me,{size:14}),TXT:e(Ie,{size:14}),FTR:e(It,{size:14})},rs={FWB:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},FHL:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},FTR:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-700"},AWB:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},MBI:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},HBS:{bg:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},FLT:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700"},RTG:{bg:"bg-sky-50",border:"border-sky-300",text:"text-sky-700"},SHP:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700"},CNE:{bg:"bg-emerald-50",border:"border-emerald-300",text:"text-emerald-700"},AGT:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700"},NFY:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700"},CVD:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},RTD:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},OTH:{bg:"bg-orange-50",border:"border-orange-300",text:"text-orange-700"},PPD:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700"},COL:{bg:"bg-red-50",border:"border-red-300",text:"text-red-700"},ACC:{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700"},NG:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},NH:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},NV:{bg:"bg-cyan-50",border:"border-cyan-300",text:"text-cyan-700"},NS:{bg:"bg-teal-50",border:"border-teal-300",text:"text-teal-700"},HTS:{bg:"bg-indigo-50",border:"border-indigo-300",text:"text-indigo-700"},SSR:{bg:"bg-rose-50",border:"border-rose-300",text:"text-rose-700"},SPH:{bg:"bg-fuchsia-50",border:"border-fuchsia-300",text:"text-fuchsia-700"},OCI:{bg:"bg-violet-50",border:"border-violet-300",text:"text-violet-700"},CER:{bg:"bg-pink-50",border:"border-pink-300",text:"text-pink-700"},ISU:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700"},REF:{bg:"bg-blue-50",border:"border-blue-300",text:"text-blue-700"},TXT:{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-700"}},as=({segment:t,onEdit:r,onToggle:a,readOnly:n=!1,cardSize:o="normal"})=>{var A,N;const[s,i]=_(!1),c=t.originalContent||t.content,[d,p]=_(c),[m,u]=_(o==="expanded"),l=t.originalContent&&t.originalContent.length>t.content.length,g=t.currentLength>t.maxLength||t.originalContent&&t.originalContent.length>t.maxLength;st(()=>{p(t.originalContent||t.content)},[t.content,t.originalContent]);const v=rs[t.code]||{bg:"bg-gray-50",border:"border-gray-300",text:"text-gray-700"},f=ts[t.code]||e(Ie,{size:14}),S=()=>{r&&r(t.code,d),i(!1)},T=()=>{p(t.content),i(!1)},b=()=>{navigator.clipboard.writeText(t.content)},k=t.currentLength>t.maxLength,C=Math.min(100,t.currentLength/t.maxLength*100);return t.enabled?e("div",{className:`
      rounded-lg border-2 ${v.border} ${v.bg}
      transition-all duration-200 hover:shadow-md
      ${t.errors.length>0?"ring-2 ring-red-400":""}
      ${g?"ring-2 ring-orange-500 border-orange-400":""}
    `,children:[g&&e("div",{className:"bg-orange-500 text-white px-3 py-1.5 text-xs font-medium flex items-center gap-2 rounded-t-md",children:[e(le,{size:14,className:"flex-shrink-0"}),e("span",{children:["⚠️ EXCEDE LÍMITE: ",((A=t.originalContent)==null?void 0:A.length)||t.currentLength," / ",t.maxLength," caracteres (",(((N=t.originalContent)==null?void 0:N.length)||t.currentLength)-t.maxLength," de más)"]}),!n&&t.editable&&e("button",{onClick:w=>{w.stopPropagation(),i(!0),u(!0)},className:"ml-auto px-2 py-0.5 bg-white/20 hover:bg-white/30 rounded text-[10px] flex items-center gap-1",children:[e(vt,{size:10})," Editar para corregir"]})]}),e("div",{className:`
          flex items-center gap-2 p-2 cursor-pointer
          ${o==="compact"?"py-1":""}
        `,onClick:()=>!s&&u(!m),children:[e("div",{className:v.text,children:f}),e("span",{className:`font-mono font-bold ${v.text} text-sm`,children:t.code}),e("span",{className:`text-[10px] ${v.text} opacity-70 truncate flex-1`,children:t.name}),e("div",{className:"flex items-center gap-1",children:[e("div",{className:`
              text-[9px] font-mono px-1.5 py-0.5 rounded
              ${k?"bg-red-100 text-red-700":"bg-white/50 text-slate-500"}
            `,title:`${t.currentLength} / ${t.maxLength} caracteres`,children:[t.currentLength,"/",t.maxLength]}),e("div",{className:"w-8 h-1 bg-white/50 rounded-full overflow-hidden",children:e("div",{className:`h-full transition-all ${k?"bg-red-500":"bg-green-500"}`,style:{width:`${C}%`}})})]}),!n&&t.editable&&!s&&e("button",{onClick:w=>{w.stopPropagation(),i(!0),u(!0)},className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Editar segmento",children:e(vt,{size:12,className:v.text})}),e("button",{onClick:w=>{w.stopPropagation(),b()},className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Copiar contenido",children:e(_e,{size:12,className:v.text})}),a&&!t.required&&e("button",{onClick:w=>{w.stopPropagation(),a(t.code,!1)},className:"p-1 hover:bg-red-100 rounded transition-colors text-red-400 hover:text-red-600",title:"Deshabilitar segmento",children:e(Dr,{size:12})}),m?e(Pe,{size:14,className:v.text}):e(ue,{size:14,className:v.text})]}),t.errors.length>0&&e("div",{className:"px-2 pb-1",children:t.errors.map((w,O)=>e("div",{className:"flex items-center gap-1 text-[10px] text-red-600",children:[e(le,{size:10}),e("span",{children:w})]},O))}),m&&e("div",{className:"border-t border-white/50 p-2",children:[s?e("div",{className:"space-y-2",children:[e("textarea",{value:d,onChange:w=>p(w.target.value),className:`
                  w-full font-mono text-xs p-2 rounded border
                  ${d.length>t.maxLength?"border-red-300 bg-red-50":"border-slate-300 bg-white"}
                  focus:outline-none focus:ring-2 focus:ring-purple-400
                  resize-none
                `,rows:Math.min(10,Math.max(3,c.split(`
`).length+1)),spellcheck:!1}),e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex flex-col gap-0.5",children:[e("span",{className:`text-[10px] ${d.length>t.maxLength?"text-red-600 font-semibold":"text-slate-500"}`,children:[d.length," / ",t.maxLength," caracteres",d.length>t.maxLength&&e("span",{className:"ml-1 text-red-600",children:["(⚠️ ",d.length-t.maxLength," de más - ¡Debe reducir!)"]})]}),l&&e("span",{className:"text-[9px] text-orange-600",children:"ℹ️ Mostrando texto original completo para edición"})]}),e("div",{className:"flex gap-1",children:[e("button",{onClick:T,className:"px-2 py-1 text-xs bg-slate-200 hover:bg-slate-300 rounded flex items-center gap-1",children:[e(De,{size:12})," Cancelar"]}),e("button",{onClick:S,className:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded flex items-center gap-1",children:[e(Ga,{size:12})," Guardar"]})]})]})]}):e("pre",{className:`
              font-mono text-[11px] whitespace-pre-wrap break-all
              ${v.text} opacity-90 leading-relaxed
            `,children:t.content||e("span",{className:"italic text-slate-400",children:"Sin contenido"})}),t.fields.length>0&&!s&&e("div",{className:"mt-2 pt-2 border-t border-white/30",children:[e("div",{className:"text-[9px] text-slate-500 mb-1 uppercase tracking-wide font-semibold",children:"Campos:"}),e("div",{className:"flex flex-wrap gap-1",children:t.fields.map((w,O)=>{var D;return e("div",{className:"text-[10px] bg-white/60 px-1.5 py-0.5 rounded border border-white/80",title:`${w.name}: máx ${w.maxLength} chars${w.required?" (requerido)":""}`,children:[e("span",{className:"font-medium text-slate-600",children:[w.name,":"]})," ",e("span",{className:`font-mono ${w.modified?"text-purple-600 font-bold":"text-slate-700"}`,children:w.value||"-"}),e("span",{className:"text-slate-400 ml-1",children:["(",((D=w.value)==null?void 0:D.length)||0,"/",w.maxLength,")"]})]},O)})})]})]})]}):e("div",{className:"relative group",children:[e("div",{className:`
          p-2 rounded-lg border-2 border-dashed border-slate-200 bg-slate-50/50
          opacity-60 hover:opacity-80
          transition-all duration-200 ${a?"cursor-pointer hover:border-green-400 hover:bg-green-50/30":"cursor-not-allowed"}
        `,onClick:()=>a&&a(t.code,!0),children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:"text-slate-400",children:f}),e("span",{className:"font-mono text-xs font-bold text-slate-400",children:t.code}),e("span",{className:"text-[10px] text-slate-400 truncate flex-1",children:t.name}),a?e("button",{onClick:w=>{w.stopPropagation(),a(t.code,!0)},className:"p-1 hover:bg-green-100 rounded transition-colors text-green-600",title:"Habilitar segmento",children:e(Tt,{size:12})}):e(Dr,{size:12,className:"text-slate-400"})]}),o!=="compact"&&e("div",{className:"mt-1 text-[10px] text-slate-400 italic flex items-center justify-between",children:[e("span",{children:"Deshabilitado por política de aerolínea"}),a&&e("span",{className:"text-green-600 font-medium",children:"Clic para habilitar →"})]})]}),e("div",{className:"absolute hidden group-hover:block bottom-full left-0 mb-1 p-2 bg-slate-800 text-white text-xs rounded shadow-lg z-50 w-56",children:a?"Clic para HABILITAR este segmento y ver sus datos":"Este segmento no se incluye según la política configurada para esta aerolínea."})]})},Va=({message:t,policy:r,onSegmentChange:a,onRegenerate:n,onToggleSegment:o,showDisabled:s=!0,readOnly:i=!1,cardSize:c="normal"})=>{const[d,p]=_(t.segments),[m,u]=_(!1),[l,g]=_(!1);st(()=>{p(t.segments)},[t]);const v=ie((A,N)=>{p(w=>w.map(O=>O.code===A?{...O,content:N,currentLength:N.length}:O)),a&&a(A,N)},[a]),f=()=>{n&&n(d)},S=()=>{navigator.clipboard.writeText(t.fullMessage),g(!0),setTimeout(()=>g(!1),2e3)},T=s?d:d.filter(A=>A.enabled),b=d.filter(A=>A.enabled).length,k=d.filter(A=>!A.enabled).length,C=d.reduce((A,N)=>A+N.errors.length,0);return e("div",{className:"space-y-4",children:[e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:`
              px-3 py-1.5 rounded-lg font-bold text-sm
              ${t.type==="FWB"?"bg-purple-600 text-white":"bg-sky-600 text-white"}
            `,children:[t.type,"/",t.version.split("/")[1]]}),e("span",{className:"font-mono text-sm text-slate-600",children:t.awbNumber}),t.hawbNumber&&e("span",{className:"font-mono text-xs text-slate-400",children:["→ ",t.hawbNumber]})]}),e("div",{className:`flex items-center gap-1 text-xs ${t.isValid?"text-green-600":"text-red-600"}`,children:[t.isValid?e(K,{size:14}):e(le,{size:14}),t.isValid?"Válido":`${C} error${C!==1?"es":""}`]})]}),e("div",{className:"flex items-center gap-2",children:[e("div",{className:"text-xs text-slate-500 space-x-2",children:[e("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:[b," activos"]}),k>0&&e("span",{className:"bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full",children:[k," inactivos"]})]}),e("button",{onClick:()=>u(!m),className:"px-3 py-1.5 text-xs bg-slate-100 hover:bg-slate-200 rounded-lg flex items-center gap-1",children:[m?e(Dr,{size:12}):e(Tt,{size:12}),m?"Ocultar":"Ver mensaje"]}),e("button",{onClick:S,className:`
              px-3 py-1.5 text-xs rounded-lg flex items-center gap-1
              ${l?"bg-green-500 text-white":"bg-purple-600 hover:bg-purple-700 text-white"}
            `,children:[e(_e,{size:12}),l?"¡Copiado!":"Copiar todo"]})]})]}),r&&e("div",{className:"flex items-center gap-2 text-xs text-slate-500 bg-slate-50 rounded-lg p-2",children:[e(Re,{size:12}),e("span",{children:["Política: ",e("strong",{children:r.name})," (",r.awbPrefix,")"]}),e("span",{className:"text-slate-300",children:"|"}),e("span",{children:["Versión: ",r.fwbVersion]}),e("span",{className:"text-slate-300",children:"|"}),e("span",{children:["SPH: ",r.defaultSphCodes.join(", ")]}),r.notes&&e(se,{children:[e("span",{className:"text-slate-300",children:"|"}),e("span",{className:"italic",children:r.notes})]})]}),m&&e("div",{className:"bg-slate-900 rounded-lg p-4 overflow-x-auto",children:e("pre",{className:"font-mono text-xs text-green-400 whitespace-pre-wrap",children:t.fullMessage})}),e("div",{className:`
        grid gap-2
        ${c==="compact"?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6":""}
        ${c==="normal"?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":""}
        ${c==="expanded"?"grid-cols-1 md:grid-cols-2":""}
      `,children:T.map(A=>e(as,{segment:A,onEdit:v,onToggle:o,readOnly:i,cardSize:c},`${A.code}-${A.order}`))}),!i&&n&&e("div",{className:"flex justify-end pt-2",children:e("button",{onClick:f,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:[e(Ga,{size:16}),"Regenerar mensaje"]})}),e("div",{className:"border-t border-slate-200 pt-4",children:[e("div",{className:"text-xs text-slate-500 mb-2 font-semibold",children:"Leyenda de segmentos:"}),e("div",{className:"flex flex-wrap gap-2 text-[10px]",children:[e("span",{className:"bg-purple-50 border border-purple-300 text-purple-700 px-2 py-0.5 rounded",children:"AWB/Carga"}),e("span",{className:"bg-sky-50 border border-sky-300 text-sky-700 px-2 py-0.5 rounded",children:"Vuelo/Ruta"}),e("span",{className:"bg-green-50 border border-green-300 text-green-700 px-2 py-0.5 rounded",children:"Partes"}),e("span",{className:"bg-amber-50 border border-amber-300 text-amber-700 px-2 py-0.5 rounded",children:"Cargos"}),e("span",{className:"bg-indigo-50 border border-indigo-300 text-indigo-700 px-2 py-0.5 rounded",children:"Mercancía"}),e("span",{className:"bg-fuchsia-50 border border-fuchsia-300 text-fuchsia-700 px-2 py-0.5 rounded",children:"Manejo/Seguridad"}),e("span",{className:"bg-slate-50 border-2 border-dashed border-slate-300 text-slate-400 px-2 py-0.5 rounded",children:"Deshabilitado"})]})]})]})},os={FWB:e(It,{size:13}),FHL:e(It,{size:13}),AWB:e(Fe,{size:13}),MBI:e(Fe,{size:13}),FLT:e(at,{size:13}),RTG:e(zt,{size:13}),SHP:e(Me,{size:13}),CNE:e(Me,{size:13}),AGT:e(lt,{size:13}),SSR:e(Re,{size:13}),CVD:e(rt,{size:13}),RTD:e(cr,{size:13}),NG:e(kt,{size:13}),NH:e(kt,{size:13}),NV:e(cr,{size:13}),NS:e(Fe,{size:13}),HBS:e(Fe,{size:13}),HTS:e(kt,{size:13}),OTH:e(rt,{size:13}),PPD:e(rt,{size:13}),COL:e(rt,{size:13}),CER:e(ct,{size:13}),ISU:e(lr,{size:13}),REF:e(Ie,{size:13}),SPH:e(ct,{size:13}),OCI:e(ct,{size:13}),NFY:e(Me,{size:13}),FTR:e(It,{size:13}),GLOBAL:e(za,{size:13})},qa=({issue:t,compact:r=!1})=>{const[a,n]=_(!1),s={error:{icon:e(Te,{size:14,className:"text-red-500 flex-shrink-0"}),bg:"bg-red-50",border:"border-red-200",text:"text-red-700",badge:"bg-red-100 text-red-700",label:"ERROR"},warning:{icon:e(le,{size:14,className:"text-amber-500 flex-shrink-0"}),bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",badge:"bg-amber-100 text-amber-700",label:"ADVERTENCIA"},info:{icon:e(Re,{size:14,className:"text-blue-500 flex-shrink-0"}),bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",badge:"bg-blue-100 text-blue-700",label:"INFO"}}[t.severity];return e("div",{className:`${s.bg} ${s.border} border rounded-md p-2 text-xs`,children:[e("div",{className:"flex items-start gap-2 cursor-pointer",onClick:()=>!r&&n(!a),children:[s.icon,e("div",{className:"flex-1 min-w-0",children:[e("div",{className:`${s.text} font-medium leading-tight`,children:t.message}),t.field&&e("span",{className:"text-slate-500 text-[10px]",children:["Campo: ",t.field]})]}),!r&&(t.rule||t.suggestion||t.expected||t.found)&&e("button",{className:"text-slate-400 hover:text-slate-600 flex-shrink-0",children:a?e(Pe,{size:12}):e(ue,{size:12})})]}),a&&!r&&e("div",{className:"mt-2 pt-2 border-t border-white/50 space-y-1.5 pl-6",children:[t.rule&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-slate-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Regla:"}),e("span",{className:"text-slate-600 text-[10px] font-mono",children:t.rule})]}),t.found&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-red-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Tiene:"}),e("code",{className:"text-red-600 text-[10px] bg-red-100 px-1 rounded font-mono break-all",children:t.found})]}),t.expected&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-green-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Espera:"}),e("code",{className:"text-green-600 text-[10px] bg-green-100 px-1 rounded font-mono break-all",children:t.expected})]}),t.suggestion&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-blue-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Tip:"}),e("span",{className:"text-blue-600 text-[10px] italic",children:t.suggestion})]}),t.lineContent&&e("div",{className:"flex items-start gap-1.5",children:[e("span",{className:"text-slate-500 font-medium text-[10px] uppercase w-16 flex-shrink-0",children:"Línea:"}),e("code",{className:"text-slate-600 text-[10px] bg-slate-100 px-1 rounded font-mono break-all",children:t.lineContent})]})]})]})},ns=({result:t,compact:r,onSelect:a})=>{const[n,o]=_(!t.isValid),s=os[t.segment]||e(Ie,{size:13}),c=t.errorCount>0?{bg:"bg-red-50",border:"border-red-300",text:"text-red-700",ringColor:"ring-red-400"}:t.warningCount>0?{bg:"bg-amber-50",border:"border-amber-300",text:"text-amber-700",ringColor:"ring-amber-400"}:{bg:"bg-green-50",border:"border-green-300",text:"text-green-700",ringColor:"ring-green-400"};return e("div",{className:`
      rounded-lg border ${c.border} ${c.bg} 
      ${t.errorCount>0?"ring-1 "+c.ringColor:""} 
      transition-all duration-200
    `,children:[e("button",{type:"button",onClick:()=>{o(!n),a&&a()},className:"w-full p-2 flex items-center gap-2 hover:bg-black/5 transition-colors rounded-lg",children:[e("div",{className:c.text,children:s}),e("span",{className:`font-mono font-bold text-xs ${c.text}`,children:t.segment}),e("span",{className:"text-[10px] text-slate-500 truncate flex-1 text-left",children:t.segmentName}),e("div",{className:"flex items-center gap-1",children:[t.errorCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-red-100 text-red-700 rounded-full",children:[t.errorCount," err"]}),t.warningCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-amber-100 text-amber-700 rounded-full",children:[t.warningCount," warn"]}),t.isValid&&t.warningCount===0&&e(K,{size:14,className:"text-green-500"})]}),n?e(Pe,{size:14,className:"text-slate-400"}):e(ue,{size:14,className:"text-slate-400"})]}),n&&t.issues.length>0&&e("div",{className:"px-2 pb-2 space-y-1",children:t.issues.map((d,p)=>e(qa,{issue:d,compact:r},p))}),n&&t.isValid&&t.warningCount===0&&e("div",{className:"px-3 pb-2 text-[10px] text-green-600 flex items-center gap-1",children:[e(K,{size:12}),"Segmento válido - Sin errores ni advertencias"]})]})},ja=({score:t,size:r="md"})=>{const a=()=>t>=90?"text-green-600":t>=70?"text-amber-600":"text-red-600";return e("div",{className:`${r==="sm"?"w-10 h-10 text-sm":"w-14 h-14 text-lg"} ${t>=90?"bg-green-100":t>=70?"bg-amber-100":"bg-red-100"} rounded-full flex items-center justify-center ${a()} font-bold`,children:t})},Xa=({message:t,policy:r,defaultCollapsed:a=!1,compact:n=!1,onSegmentSelect:o,onValidationChange:s})=>{const[i,c]=_(!a),[d,p]=_("all"),[m,u]=_(!1),l=ze(()=>Et(t,r),[t,r]);ze(()=>{s&&s({canSend:l.canSend,errorCount:l.totalErrors,warningCount:l.totalWarnings,score:l.score})},[l.canSend,l.totalErrors,l.totalWarnings,l.score]);const g=ze(()=>d==="all"&&!m?l.segmentResults:l.segmentResults.filter(b=>m?b.errorCount>0||b.warningCount>0:!0).map(b=>d==="all"?b:{...b,issues:b.issues.filter(k=>k.severity===d)}).filter(b=>b.issues.length>0||!m&&d==="all"),[l,d,m]),f=l.totalErrors>0?"red":l.totalWarnings>0?"amber":"green",T={red:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",headerBg:"bg-red-100",icon:e(Kn,{size:20,className:"text-red-500"})},amber:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",headerBg:"bg-amber-100",icon:e(le,{size:20,className:"text-amber-500"})},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",headerBg:"bg-green-100",icon:e(K,{size:20,className:"text-green-500"})}}[f];return e("div",{className:`${T.bg} ${T.border} border rounded-lg mb-4 overflow-hidden`,children:[e("button",{type:"button",onClick:()=>c(!i),className:`w-full p-3 flex items-center justify-between hover:bg-black/5 transition-colors ${T.headerBg}`,children:[e("div",{className:"flex items-center gap-3",children:[T.icon,e("div",{className:"flex flex-col items-start",children:[e("span",{className:`font-bold text-sm ${T.text}`,children:["Validación CARGO-IMP ",t.type,t.hawbNumber&&e("span",{className:"font-normal text-slate-500 ml-1 text-xs",children:["(HAWB: ",t.hawbNumber,")"]})]}),e("span",{className:"text-xs text-slate-500",children:l.summary})]})]}),e("div",{className:"flex items-center gap-2",children:[l.totalErrors>0&&e("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-red-500 text-white rounded-full",children:[l.totalErrors," error",l.totalErrors>1?"es":""]}),l.totalWarnings>0&&e("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-amber-500 text-white rounded-full",children:[l.totalWarnings," warn",l.totalWarnings>1?"s":""]}),e(ja,{score:l.score,size:"sm"}),i?e(Pe,{size:16,className:"text-slate-400"}):e(ue,{size:16,className:"text-slate-400"})]})]}),i&&e("div",{className:"p-3 space-y-3",children:[l.totalErrors>0&&e("div",{className:"bg-amber-100 border border-amber-300 rounded-lg p-3 flex items-center gap-3",children:[e(le,{size:18,className:"text-amber-600 flex-shrink-0"}),e("div",{children:[e("p",{className:"text-sm font-bold text-amber-800",children:["⚠️ Mensaje con ",l.totalErrors," error(es) de validación"]}),e("p",{className:"text-xs text-amber-600 mt-0.5",children:"La aerolínea podría rechazar el mensaje. Revise cada segmento marcado en rojo. Al transmitir se le pedirá confirmación."})]})]}),l.totalErrors===0&&l.totalWarnings>0&&e("div",{className:"bg-amber-100 border border-amber-300 rounded-lg p-2.5 flex items-center gap-3",children:[e(le,{size:16,className:"text-amber-600 flex-shrink-0"}),e("div",{children:[e("p",{className:"text-xs font-bold text-amber-800",children:"⚠️ Mensaje válido con advertencias"}),e("p",{className:"text-[10px] text-amber-600",children:["Puede enviarse, pero revise las ",l.totalWarnings," advertencia(s) para mejor calidad."]})]})]}),l.totalErrors===0&&l.totalWarnings===0&&e("div",{className:"bg-green-100 border border-green-300 rounded-lg p-2.5 flex items-center gap-3",children:[e(K,{size:16,className:"text-green-600 flex-shrink-0"}),e("p",{className:"text-xs font-bold text-green-800",children:"✅ Mensaje válido. Listo para enviar."})]}),e("div",{className:"flex items-center gap-2 flex-wrap",children:[e("span",{className:"text-[10px] text-slate-500 uppercase font-semibold",children:"Filtrar:"}),["all","error","warning","info"].map(b=>e("button",{onClick:()=>p(b),className:`
                  px-2 py-0.5 text-[10px] rounded-full transition-colors
                  ${d===b?b==="error"?"bg-red-500 text-white":b==="warning"?"bg-amber-500 text-white":b==="info"?"bg-blue-500 text-white":"bg-slate-700 text-white":"bg-slate-200 text-slate-600 hover:bg-slate-300"}
                `,children:b==="all"?"Todos":b==="error"?`Errores (${l.totalErrors})`:b==="warning"?`Warnings (${l.totalWarnings})`:`Info (${l.totalInfo})`},b)),e("label",{className:"flex items-center gap-1 text-[10px] text-slate-500 ml-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:m,onChange:()=>u(!m),className:"rounded border-slate-300 text-purple-600 w-3 h-3"}),"Solo con problemas"]})]}),e("div",{className:"flex flex-wrap gap-1",children:[l.segmentResults.map(b=>e("div",{className:`
                  px-1.5 py-0.5 rounded text-[9px] font-mono font-bold cursor-pointer
                  transition-colors hover:ring-1 hover:ring-purple-400
                  ${b.errorCount>0?"bg-red-200 text-red-800":b.warningCount>0?"bg-amber-200 text-amber-800":"bg-green-200 text-green-800"}
                `,title:`${b.segment}: ${b.errorCount} error(es), ${b.warningCount} warning(s)`,onClick:()=>o&&o(b.segment),children:[b.segment,b.errorCount>0&&` ×${b.errorCount}`]},b.segment)),(()=>{const b=l.allIssues.filter(A=>A.segment==="GLOBAL"),k=b.filter(A=>A.severity==="error").length,C=b.filter(A=>A.severity==="warning").length;return b.length===0?null:e("div",{className:`
                    px-1.5 py-0.5 rounded text-[9px] font-mono font-bold cursor-pointer
                    transition-colors hover:ring-1 hover:ring-purple-400
                    ${k>0?"bg-red-200 text-red-800":C>0?"bg-amber-200 text-amber-800":"bg-blue-200 text-blue-800"}
                  `,title:`GLOBAL: ${k} error(es), ${C} warning(s)`,children:["GLOBAL",k>0&&` ×${k}`]})})()]}),l.allIssues.filter(b=>b.segment==="GLOBAL").length>0&&e("div",{className:`p-2 rounded-lg border ${l.allIssues.filter(b=>b.segment==="GLOBAL"&&b.severity==="error").length>0?"bg-red-50 border-red-300":"bg-amber-50 border-amber-300"}`,children:[e("div",{className:"text-[10px] font-semibold uppercase mb-1.5 flex items-center gap-1 text-slate-700",children:[e(za,{size:12})," Validaciones Globales (",l.allIssues.filter(b=>b.segment==="GLOBAL").length,")"]}),e("div",{className:"space-y-1",children:l.allIssues.filter(b=>b.segment==="GLOBAL").map((b,k)=>e(qa,{issue:b,compact:n},`global-${k}`))})]}),e("div",{className:"space-y-2",children:g.map(b=>e(ns,{result:b,compact:n,onSelect:()=>o&&o(b.segment)},b.segment))}),e("div",{className:"border-t border-slate-200 pt-2 flex items-center justify-between",children:[e("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[e("span",{children:["Segmentos analizados: ",e("strong",{children:l.segmentResults.length})]}),e("span",{children:["Líneas totales: ",e("strong",{children:t.fullMessage.split(`
`).length})]}),e("span",{children:["Caracteres: ",e("strong",{children:t.fullMessage.length})]})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-[10px] text-slate-500",children:"Calidad:"}),e(ja,{score:l.score,size:"sm"})]})]})]})]})},Za=To(({house:t,index:r,isExpanded:a,onToggle:n,onUpdate:o,masterOrigin:s,masterDestination:i,isReadOnly:c})=>{const d=ie(g=>{var f,S,T,b,k,C,A,N;const v=`shipper${g.charAt(0).toUpperCase()+g.slice(1)}`;return t[v]!==void 0&&t[v]!==""?t[v]:g==="name"?t.shipperName||((f=t.shipper)==null?void 0:f.name)||"":g==="taxId"?((S=t.shipper)==null?void 0:S.taxId)||"":g==="address"?((b=(T=t.shipper)==null?void 0:T.address)==null?void 0:b.street)||"":g==="city"?((C=(k=t.shipper)==null?void 0:k.address)==null?void 0:C.place)||"":g==="country"&&((N=(A=t.shipper)==null?void 0:A.address)==null?void 0:N.countryCode)||""},[t]),p=ie(g=>{var f,S,T,b,k,C,A,N;const v=`consignee${g.charAt(0).toUpperCase()+g.slice(1)}`;return t[v]!==void 0&&t[v]!==""?t[v]:g==="name"?t.consigneeName||((f=t.consignee)==null?void 0:f.name)||"":g==="taxId"?((S=t.consignee)==null?void 0:S.taxId)||"":g==="address"?((b=(T=t.consignee)==null?void 0:T.address)==null?void 0:b.street)||"":g==="city"?((C=(k=t.consignee)==null?void 0:k.address)==null?void 0:C.place)||"":g==="country"&&((N=(A=t.consignee)==null?void 0:A.address)==null?void 0:N.countryCode)||""},[t]),m=ie((g,v)=>{const f={...t,[g]:v};o(r,f)},[t,r,o]),u=ie((g,v)=>{const f={...t},S=`shipper${g.charAt(0).toUpperCase()+g.slice(1)}`;f[S]=v,f.shipper||(f.shipper={name:"",address:{street:"",place:"",countryCode:"",postalCode:""}}),g==="name"?(f.shipper.name=v,f.shipperName=v):g==="taxId"?f.shipper.taxId=v:g==="address"?f.shipper.address.street=v:g==="city"?f.shipper.address.place=v:g==="country"&&(f.shipper.address.countryCode=v),o(r,f)},[t,r,o]),l=ie((g,v)=>{const f={...t},S=`consignee${g.charAt(0).toUpperCase()+g.slice(1)}`;f[S]=v,f.consignee||(f.consignee={name:"",address:{street:"",place:"",countryCode:"",postalCode:""}}),g==="name"?(f.consignee.name=v,f.consigneeName=v):g==="taxId"?f.consignee.taxId=v:g==="address"?f.consignee.address.street=v:g==="city"?f.consignee.address.place=v:g==="country"&&(f.consignee.address.countryCode=v),o(r,f)},[t,r,o]);return e("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:[e("button",{type:"button",onClick:()=>n(r),className:"w-full bg-slate-50 px-3 py-2 border-b border-slate-200 flex items-center justify-between hover:bg-slate-100 transition-colors",children:[e("div",{className:"flex items-center gap-3",children:[e("span",{className:"bg-sky-100 text-sky-700 w-6 h-6 rounded-full text-xs font-bold flex items-center justify-center",children:r+1}),e("span",{className:"font-mono font-bold text-slate-800 text-sm",children:t.hawbNumber||"Sin HAWB"}),e("span",{className:"text-slate-400 text-xs",children:"|"}),e("span",{className:"text-xs text-slate-600 truncate max-w-[150px]",title:String(d("name")||""),children:[String(d("name")||"?")," → ",String(p("name")||"?")]})]}),e("div",{className:"flex items-center gap-4",children:[e("div",{className:"text-right",children:[e("span",{className:"text-sm font-semibold text-slate-700",children:[t.pieces," pcs"]}),e("span",{className:"text-slate-400 mx-1",children:"/"}),e("span",{className:"text-sm font-semibold text-slate-700",children:[t.weight," kg"]})]}),a?e(Pe,{size:16,className:"text-slate-400"}):e(ue,{size:16,className:"text-slate-400"})]})]}),a&&e("div",{className:"p-3 space-y-3 animate-in slide-in-from-top-1 duration-150",children:[e("div",{className:"grid grid-cols-5 gap-2",children:[e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-0.5",children:"HAWB *"}),e("input",{type:"text",value:t.hawbNumber||"",onChange:g=>m("hawbNumber",g.target.value),readOnly:c,maxLength:12,className:"text-sm border border-purple-200 rounded px-2 py-1 focus:ring-1 focus:ring-purple-400 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Origen"}),e("input",{type:"text",value:t.origin||s,onChange:g=>m("origin",g.target.value),readOnly:c,maxLength:3,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Destino"}),e("input",{type:"text",value:t.destination||i,onChange:g=>m("destination",g.target.value),readOnly:c,maxLength:3,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Piezas *"}),e("input",{type:"number",value:t.pieces,onChange:g=>m("pieces",parseInt(g.target.value)||0),readOnly:c,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Peso *"}),e("input",{type:"number",step:"0.01",value:t.weight,onChange:g=>m("weight",parseFloat(g.target.value)||0),readOnly:c,className:"text-sm border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-cyan-600 uppercase font-bold mb-0.5",children:"Vol. M³ (NV)"}),e("input",{type:"number",step:"0.01",value:t.volumeCubicMeters||"",onChange:g=>m("volumeCubicMeters",parseFloat(g.target.value)||0),readOnly:c,placeholder:"0.00",className:"text-sm border border-cyan-200 rounded px-2 py-1 focus:ring-1 outline-none bg-cyan-50/30"})]})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"bg-sky-50/50 border border-sky-100 rounded p-2",children:[e("div",{className:"text-[10px] font-bold text-sky-600 mb-1 flex items-center gap-1",children:[e(lt,{size:10})," SHIPPER"]}),e("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[e("input",{placeholder:"Nombre *",value:d("name"),onChange:g=>u("name",g.target.value),readOnly:c,className:"col-span-2 px-1.5 py-1 border border-sky-200 rounded text-xs"}),e("input",{placeholder:"NIT/Tax ID",value:d("taxId"),onChange:g=>u("taxId",g.target.value),readOnly:c,className:"px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Dirección",value:d("address"),onChange:g=>u("address",g.target.value),readOnly:c,className:"col-span-3 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Ciudad",value:d("city"),onChange:g=>u("city",g.target.value),readOnly:c,className:"col-span-2 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"País",value:d("country"),onChange:g=>u("country",g.target.value),readOnly:c,maxLength:2,className:"px-1.5 py-1 border rounded text-xs"})]})]}),e("div",{className:"bg-purple-50/50 border border-purple-100 rounded p-2",children:[e("div",{className:"text-[10px] font-bold text-purple-600 mb-1 flex items-center gap-1",children:[e(Me,{size:10})," CONSIGNEE"]}),e("div",{className:"grid grid-cols-3 gap-1 text-xs",children:[e("input",{placeholder:"Nombre *",value:p("name"),onChange:g=>l("name",g.target.value),readOnly:c,className:"col-span-2 px-1.5 py-1 border border-purple-200 rounded text-xs"}),e("input",{placeholder:"NIT/Tax ID",value:p("taxId"),onChange:g=>l("taxId",g.target.value),readOnly:c,className:"px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Dirección",value:p("address"),onChange:g=>l("address",g.target.value),readOnly:c,className:"col-span-3 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"Ciudad",value:p("city"),onChange:g=>l("city",g.target.value),readOnly:c,className:"col-span-2 px-1.5 py-1 border rounded text-xs"}),e("input",{placeholder:"País",value:p("country"),onChange:g=>l("country",g.target.value),readOnly:c,maxLength:2,className:"px-1.5 py-1 border rounded text-xs"})]})]})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-0.5",children:"Nature of Goods *"}),e("input",{type:"text",value:t.natureOfGoods||"",onChange:g=>m("natureOfGoods",g.target.value),readOnly:c,maxLength:500,className:"text-xs border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-400 uppercase font-bold mb-0.5",children:"Common Name"}),e("input",{type:"text",value:t.commonName||"",onChange:g=>m("commonName",g.target.value),readOnly:c,maxLength:500,className:"text-xs border border-slate-200 rounded px-2 py-1 focus:ring-1 outline-none"})]})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-0.5 flex items-center gap-1",children:[e(xt,{size:10})," HTS Codes (Arancelarios)"]}),e("div",{className:"flex flex-wrap gap-1 min-h-[28px] p-1.5 bg-purple-50 border border-purple-200 rounded",children:[(t.htsCodes||[]).length>0&&t.htsCodes.map((g,v)=>e("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-mono",children:[g,!c&&e("button",{onClick:()=>{const f=t.htsCodes.filter((S,T)=>T!==v);m("htsCodes",f)},className:"hover:text-red-600",children:e(De,{size:10})})]},v)),!c&&e("input",{type:"text",placeholder:(t.htsCodes||[]).length>0?"+ Agregar HTS":"Escribe código HTS y presiona Enter",className:"flex-1 min-w-[120px] px-1 py-0.5 text-xs border-0 bg-transparent outline-none placeholder:text-purple-400 placeholder:italic",onKeyDown:g=>{if(g.key==="Enter"&&g.currentTarget.value.trim()){const v=g.currentTarget.value.trim().replace(/\D/g,""),f=t.htsCodes||[];v&&!f.includes(v)&&m("htsCodes",[...f,v]),g.currentTarget.value=""}}}),c&&(t.htsCodes||[]).length===0&&e("span",{className:"text-xs text-purple-400 italic",children:"Sin códigos HTS"})]})]})]})]})},(t,r)=>t.house===r.house&&t.isExpanded===r.isExpanded&&t.isReadOnly===r.isReadOnly&&t.index===r.index);Za.displayName="HouseRow";const ss=({title:t,children:r,defaultOpen:a=!1})=>{const[n,o]=_(a);return e("div",{className:"border border-slate-100 rounded overflow-hidden mt-2",children:[e("button",{onClick:()=>o(!n),className:"w-full flex items-center justify-between px-2 py-1.5 bg-slate-50 hover:bg-slate-100 text-xs text-slate-600",children:[e("span",{className:"flex items-center gap-1",children:[n?e(Pe,{size:12}):e(ue,{size:12}),t]}),e("span",{className:"text-[10px] text-slate-400 bg-slate-200 px-1 rounded",children:"opcional"})]}),n&&e("div",{className:"p-2 bg-white border-t border-slate-100",children:r})]})},is=t=>typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t)),J=({label:t,value:r,onChange:a,readOnly:n=!1,maxLength:o,placeholder:s,className:i="",type:c="text",required:d=!1})=>{const p=(r==null?void 0:r.toString())||"",m=o&&p.length>o,u=d&&!p.trim(),l=d?u||m?"border-red-300 bg-red-50":"border-purple-300 focus:ring-purple-300":m?"border-red-300 bg-red-50":"border-slate-200 focus:ring-slate-200",g=d?"text-slate-600":"text-slate-400";return e("div",{className:`flex flex-col ${i}`,children:[e("div",{className:"flex justify-between items-center mb-0.5",children:[e("label",{className:`text-[10px] uppercase font-bold flex items-center gap-1 ${g}`,children:[t,d&&e("span",{className:"text-purple-500",children:"*"}),!d&&e("span",{className:"text-[9px] text-slate-300 font-normal normal-case",children:"(opt)"})]}),o&&!n&&e("span",{className:`text-[9px] ${m?"text-red-500 font-bold":"text-slate-400"}`,children:[p.length,"/",o]})]}),n?e("div",{className:`text-sm font-medium py-1.5 border-b min-h-[32px] flex items-center px-2 rounded ${d?"border-slate-200 bg-slate-50":"border-slate-100 bg-slate-50/50"} text-slate-700`,children:p||e("span",{className:"text-slate-400 italic text-xs",children:"-"})}):e("input",{type:c,value:p,onChange:v=>a==null?void 0:a(v.target.value),className:`text-sm border ${l} rounded px-2 py-1.5 focus:ring-1 outline-none transition-all h-[34px]`,placeholder:s})]})},Ka=({title:t,icon:r,party:a,onUpdate:n,readOnly:o})=>{var i;const s=(c,d)=>{var p;if(c.includes(".")){const[m,u]=c.split(".");m==="address"?n({...a,address:{...a.address,[u]:d}}):m==="contact"&&n({...a,contact:{...a.contact,identifier:((p=a.contact)==null?void 0:p.identifier)||"TE",[u]:d}})}else n({...a,[c]:d})};return e("div",{className:"bg-white border border-slate-200 rounded-lg p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-2 mb-3 border-b border-slate-100 pb-2",children:[e("div",{className:"bg-purple-100 p-1 rounded text-purple-600",children:r}),e("h3",{className:"font-semibold text-slate-800 text-sm",children:t}),!o&&e("span",{className:"ml-auto text-[10px] bg-green-100 text-green-600 px-1.5 py-0.5 rounded flex items-center gap-1",children:e(vt,{size:10})})]}),e("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1.5 text-xs",children:[e(J,{label:"Nombre *",value:a.name,onChange:c=>s("name",c),readOnly:o,maxLength:35,required:!0}),e(J,{label:"Nombre 2",value:a.name2||"",onChange:c=>s("name2",c),readOnly:o,maxLength:35}),e(J,{label:"NIT/Tax ID",value:a.taxId||"",onChange:c=>s("taxId",c),readOnly:o,maxLength:17}),e(J,{label:"No. Cuenta",value:a.accountNumber||"",onChange:c=>s("accountNumber",c),readOnly:o,maxLength:14}),e(J,{label:"Dirección 1 *",value:a.address.street,onChange:c=>s("address.street",c),readOnly:o,maxLength:35,required:!0}),e(J,{label:"Dirección 2",value:a.address.street2||"",onChange:c=>s("address.street2",c),readOnly:o,maxLength:35}),e(J,{label:"Ciudad *",value:a.address.place,onChange:c=>s("address.place",c),readOnly:o,maxLength:17,required:!0}),e(J,{label:"Estado",value:a.address.state||"",onChange:c=>s("address.state",c),readOnly:o,maxLength:9}),e(J,{label:"País (ISO) *",value:a.address.countryCode,onChange:c=>s("address.countryCode",c),readOnly:o,maxLength:2,required:!0}),e(J,{label:"Código Postal",value:a.address.postalCode,onChange:c=>s("address.postalCode",c),readOnly:o,maxLength:9}),e(J,{label:"Teléfono",value:((i=a.contact)==null?void 0:i.number)||"",onChange:c=>s("contact.number",c),readOnly:o,maxLength:25,className:"col-span-2"})]}),e(ss,{title:"Campos Adicionales",children:e("div",{className:"grid grid-cols-2 gap-x-2 gap-y-1.5 text-xs",children:[e(J,{label:"Email",value:a.email||"",onChange:c=>s("email",c),readOnly:o,maxLength:70}),e(J,{label:"Fax",value:a.fax||"",onChange:c=>s("fax",c),readOnly:o,maxLength:25})]})})]})},ls=({agent:t,onUpdate:r,readOnly:a})=>{const n=(o,s)=>{r({...t,[o]:s})};return e("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 border border-purple-200 rounded-lg p-4 shadow-sm",children:[e("div",{className:"flex items-center gap-2 mb-4 border-b border-purple-200 pb-2",children:[e("div",{className:"bg-purple-100 p-1.5 rounded text-purple-600",children:e(_r,{size:16})}),e("h3",{className:"font-bold text-purple-800",children:"Agente de Carga (IATA)"}),!a&&e("span",{className:"ml-auto text-xs bg-green-100 text-green-600 px-2 py-0.5 rounded flex items-center gap-1",children:[e(vt,{size:10})," Editable"]})]}),e("div",{className:"grid grid-cols-3 gap-3",children:[e(J,{label:"Nombre del Agente",value:t.name,onChange:o=>n("name",o),readOnly:a,maxLength:35,required:!0,className:"col-span-2"}),e(J,{label:"Código IATA",value:t.iataCode,onChange:o=>n("iataCode",o),readOnly:a,maxLength:7,required:!0}),e(J,{label:"Código CASS",value:t.cassCode||"",onChange:o=>n("cassCode",o),readOnly:a,maxLength:4}),e(J,{label:"Ciudad/Lugar",value:t.place,onChange:o=>n("place",o),readOnly:a,maxLength:17,required:!0}),e(J,{label:"Número de Cuenta",value:t.accountNumber||"",onChange:o=>n("accountNumber",o),readOnly:a,maxLength:14})]})]})},Ot=({icon:t,label:r,value:a,subvalue:n})=>e("div",{className:"rounded-lg border p-3 bg-purple-50/60 border-purple-200/70 text-purple-800",children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("span",{className:"text-purple-500",children:t}),e("span",{className:"text-xs uppercase font-bold text-purple-500",children:r})]}),e("div",{className:"text-lg font-bold text-purple-900",children:a}),n&&e("div",{className:"text-xs text-purple-400",children:n})]}),Ya=({isOpen:t,onClose:r,shipment:a,onSave:n,onCopySuccess:o,onSaveConfig:s,userRole:i})=>{var ro,ao,oo,no,so,io,lo,co,po,mo,go,uo,ho;const c=(i==null?void 0:i.toUpperCase())==="ADM"?"admin":"operator",[d,p]=_("summary"),[m,u]=_("fwb"),[l,g]=_(null),[v,f]=_(!1),[S,T]=_([]),[b,k]=_(!1),[C,A]=_(null),[N,w]=_("masterAndHouses"),[O,D]=_(null),[y,M]=_("shipper"),[B,ne]=_(!1),[Z,E]=_(()=>yt()),[G,ce]=_(0),be="CARGO_IMP",[ye,P]=_(new Set),W=da(null),re=da(!0),Q=(l==null?void 0:l.status)==="DRAFT",L=!Q,xe=ie(h=>{P(I=>{const F=new Set(I);return F.has(h)?F.delete(h):F.add(h),F})},[]),Se=ie(()=>{Vo(),Qn(),ce(0),r()},[r]),je=ie((h,I)=>{g(F=>{if(!F)return F;const R=[...F.houseBills];return R[h]=I,{...F,houseBills:R}})},[]);st(()=>(re.current=!0,()=>{re.current=!1,W.current!==null&&(window.clearTimeout(W.current),W.current=null)}),[]),st(()=>{a&&(g(is(a)),u("fwb"),p("summary"),T([]),A(null),w("masterAndHouses"),M("shipper"),P(new Set))},[a]);const Ue=ze(()=>{var h,I;if(!l)return{fwbMessage:null,fhlMessages:null,concatenatedFhl:null,policyInfo:null,error:null};try{const F=((h=l.awbNumber)==null?void 0:h.split("-")[0])||"000",R=Wt.getPolicyInfo(F);console.log(`[CARGO-IMP] Regenerando (v${G}) con política: ${R.airlineName}, segmentos habilitados: ${((I=R.policy.enabledSegments)==null?void 0:I.length)||0}`);const ve=l.hasHouses&&N==="masterAndHouses"?l:{...l,hasHouses:!1},Je=Wt.generateFWB(ve);let me=[],Ee="";return l.hasHouses&&l.houseBills.length>0&&(me=l.houseBills.map(ot=>Wt.generateFHL(l,ot)),Ee=Wt.generateConcatenatedFHL(l)),{fwbMessage:Je,fhlMessages:me.length>0?me:null,concatenatedFhl:Ee,policyInfo:R,error:null}}catch(F){return console.error("[CARGO-IMP Generation Error]",F),{fwbMessage:null,fhlMessages:null,concatenatedFhl:null,policyInfo:null,error:F.message||"Error generando EDI"}}},[l,be,G,N]),{fwbMessage:$,fhlMessages:de,concatenatedFhl:Xe,policyInfo:X,error:Vt}=Ue,qt=ie((h,I)=>{if(!(l!=null&&l.awbNumber))return;const F=l.awbNumber.split("-")[0]||"000",U=Object.keys(Le).includes(h);U?Zo(F,h,I):Xo(F,h,I),ce(ve=>ve+1),console.log(`[CARGO-IMP] Toggle segmento ${U?"FHL":"FWB"} ${h} -> ${I?"HABILITADO":"DESHABILITADO"} para ${F}`)},[l]),x=ie(()=>{if(!($!=null&&$.fullMessage))return;let h=$.fullMessage;l!=null&&l.hasHouses&&N==="masterAndHouses"&&Xe&&(h=$.fullMessage+`

`+Xe),Ye(h);const I={allSuccess:!0,summary:`✅ Mensaje EDI copiado al clipboard. FWB${l!=null&&l.hasHouses?` + ${l.houseBills.length} FHL`:""}.`,fwbMessage:$.fullMessage,fhlMessages:de==null?void 0:de.map(F=>F.fullMessage)};A(I),l&&o&&o(l.id,h)},[$,Xe,de,l,N,o]),[z,V]=_(!1),[ge,Y]=_(!1),[we,Ze]=_(!1),[H,ee]=_(0),[ae,ke]=_(!1),[Ge,Be]=_(!1),[pe,Oe]=_("validation");st(()=>{if($){const h=Et($,X==null?void 0:X.policy);Ze(h.totalErrors>0),ee(h.totalErrors)}else Ze(!1),ee(0)},[$,X==null?void 0:X.policy]);const Ke=ze(()=>{var h,I,F;return!!((h=l==null?void 0:l.descartesConfig)!=null&&h.endpoint&&((I=l==null?void 0:l.descartesConfig)!=null&&I.username)&&((F=l==null?void 0:l.descartesConfig)!=null&&F.password))},[l==null?void 0:l.descartesConfig]),$e=ie(async()=>{if(l!=null&&l.descartesConfig&&$!=null&&$.fullMessage){V(!0),Y(!1),A(null),D(null);try{const h=new $a({endpoint:l.descartesConfig.endpoint,username:l.descartesConfig.username,password:l.descartesConfig.password,proxyUrl:l.descartesConfig.proxyUrl}),I=l.awbNumber;let F;const R=$.fullMessage;let U=[],ve=[];l.hasHouses&&N==="masterAndHouses"&&de&&(U=de.map(me=>me.fullMessage),ve=l.houseBills.map(me=>me.hawbNumber)),F=await h.sendBundle(R,I,U,ve);const Je={allSuccess:F.allSuccess,summary:F.summary,fwbMessage:R,fhlMessages:U.length>0?U:void 0,transmissionResult:F};A(Je),Y(F.allSuccess),F.allSuccess&&o&&o(l.id,`TRANSMITTED (EDI): ${I}`)}catch(h){const I=h instanceof Error?h.message:"Error desconocido";A({allSuccess:!1,summary:`❌ Error de transmisión: ${I}`,fwbMessage:$==null?void 0:$.fullMessage})}finally{V(!1)}}},[$,de,l,N,o]),jt=ie(()=>{if(we){ke(!0);return}$e()},[we,$e]),Ye=ie(h=>{navigator.clipboard.writeText(h),f(!0),W.current!==null&&window.clearTimeout(W.current),W.current=window.setTimeout(()=>{re.current&&f(!1),W.current=null},2e3)},[]),{totalWeightCharge:br,totalOtherCharges:We,grandTotal:to}=ze(()=>{if(!l)return{totalWeightCharge:0,totalOtherCharges:0,grandTotal:0};const h=l.rates.reduce((F,R)=>F+R.total,0),I=l.otherCharges.reduce((F,R)=>F+R.amount,0);return{totalWeightCharge:h,totalOtherCharges:I,grandTotal:h+I}},[l]);if(!t||!l)return null;const Ts=[{id:"summary",icon:Tt,label:"Resumen",roles:["supervisor","admin","operator"]},{id:"json",icon:dt,label:"EDI",roles:["admin","operator"]},{id:"parties",icon:Jn,label:"Partes",roles:["admin","operator"]},{id:"cargo",icon:Fe,label:"Carga",roles:["admin","operator"]},{id:"financials",icon:Ua,label:"Cargos",roles:["admin","operator"]},{id:"security",icon:mr,label:"Seguridad",roles:["admin","operator"]},{id:"houses",icon:qe,label:l.hasHouses?`Houses (${l.houseBills.length})`:"Houses",roles:["admin","operator"]}].filter(h=>h.roles.includes(c));return e("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:[e("div",{className:"modal-content bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[88vh] flex flex-col overflow-hidden",children:[e("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-gradient-to-r from-slate-50 to-purple-50",children:[e("div",{className:"flex items-center gap-4",children:[e("div",{className:"bg-purple-600 p-2.5 rounded-lg text-white shadow-md",children:e(at,{size:22})}),e("div",{children:[e("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[Q?"Editor de Envío":"Visualización de Envío",Q&&e("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium flex items-center gap-1",children:[e(vt,{size:10})," MODO EDICIÓN"]}),!Q&&e("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full font-medium",children:"SOLO LECTURA"})]}),e("p",{className:"text-sm text-slate-500 font-mono",children:["AWB: ",e("span",{className:"font-bold text-slate-700",children:l.awbNumber})]})]})]}),e("div",{className:"flex items-center gap-3",children:[e("div",{className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 ${l.status==="DRAFT"?"bg-gray-100 text-gray-600":l.status==="TRANSMITTED"?"bg-amber-100 text-amber-700":l.status==="ACKNOWLEDGED"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l.status==="ACKNOWLEDGED"&&e(K,{size:12}),l.status==="REJECTED"&&e(le,{size:12}),l.status==="TRANSMITTED"&&e(lr,{size:12}),l.status]}),e("button",{onClick:()=>ne(!0),className:"text-slate-500 hover:text-purple-600 hover:bg-purple-50 p-2 rounded-lg transition-colors",title:"Configuración del Conector",children:e(Br,{size:20})}),e("button",{onClick:Se,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 p-2 rounded-lg transition-colors",children:e(De,{size:20})})]})]}),e("div",{className:"px-6 border-b border-slate-200 flex gap-1 bg-white overflow-x-auto flex-nowrap min-h-[46px]",children:Ts.map(h=>e("button",{onClick:()=>p(h.id),className:`py-3 px-4 text-xs font-semibold border-b-2 transition-all flex items-center gap-2 whitespace-nowrap flex-shrink-0 ${d===h.id?"border-purple-600 text-purple-700 bg-purple-50 rounded-t-lg":"border-transparent text-slate-600 hover:text-purple-600 hover:bg-slate-50"}`,children:[e(h.icon,{size:14}),h.label]},h.id))}),S.length>0&&e("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 text-red-700 font-bold mb-2",children:[e(le,{size:16})," Errores de Validación"]}),e("ul",{className:"text-sm text-red-600 list-disc list-inside",children:S.map((h,I)=>e("li",{children:h},I))})]}),e("div",{className:"flex-1 overflow-y-auto px-4 py-3 bg-slate-50/30",style:{maxHeight:"calc(90vh - 120px)"},children:[d==="summary"&&e("div",{className:"space-y-4",children:[e("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:[e(Ot,{icon:e(zt,{size:14}),label:"Origen",value:l.origin}),e(Ot,{icon:e(zt,{size:14}),label:"Destino",value:l.destination}),e(Ot,{icon:e(Fe,{size:14}),label:"Piezas",value:l.pieces}),e(Ot,{icon:e(Wa,{size:14}),label:"Peso",value:`${l.weight} ${l.weightUnit==="KILOGRAM"?"KG":"LB"}`}),e(Ot,{icon:e(Ua,{size:14}),label:"Total",value:`${l.currency} ${to.toFixed(2)}`}),e(Ot,{icon:e(at,{size:14}),label:"Vuelos",value:l.flights.length,subvalue:((ro=l.flights[0])==null?void 0:ro.flightNumber)||"Sin vuelo"})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-purple-600",children:[e(lt,{size:16})," ",e("span",{className:"font-bold text-sm",children:"SHIPPER (Exportador)"})]}),e("p",{className:"font-bold text-slate-800",children:l.shipper.name}),e("p",{className:"text-sm text-slate-500",children:l.shipper.address.street}),e("p",{className:"text-sm text-slate-500",children:[l.shipper.address.place,", ",l.shipper.address.countryCode]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-green-600",children:[e(Me,{size:16})," ",e("span",{className:"font-bold text-sm",children:"CONSIGNEE (Importador)"})]}),e("p",{className:"font-bold text-slate-800",children:l.consignee.name}),e("p",{className:"text-sm text-slate-500",children:l.consignee.address.street}),e("p",{className:"text-sm text-slate-500",children:[l.consignee.address.place,", ",l.consignee.address.countryCode]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-slate-600",children:[e(_r,{size:16})," ",e("span",{className:"font-bold text-sm",children:"AGENT (Agente IATA)"})]}),e("p",{className:"font-bold text-slate-800",children:l.agent.name}),e("p",{className:"text-sm text-slate-500",children:[e("span",{className:"font-semibold",children:"IATA:"})," ",l.agent.iataCode,l.agent.cassCode&&e("span",{className:"ml-2",children:[e("span",{className:"font-semibold",children:"CASS:"})," ",l.agent.cassCode]})]}),e("p",{className:"text-sm text-slate-500",children:l.agent.place})]})]}),e("div",{className:"bg-gradient-to-r from-purple-50 to-purple-50 border border-purple-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3 text-purple-700",children:[e(vt,{size:16})," ",e("span",{className:"font-bold text-sm",children:"FIRMA Y EJECUCIÓN"})]}),e("div",{className:"grid grid-cols-3 gap-4",children:[e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Firma Autorizada"}),e("p",{className:"font-bold text-lg text-purple-800",children:l.signature||"Sin firma"})]}),e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Fecha de Ejecución"}),e("p",{className:"font-bold text-lg text-purple-800",children:l.executionDate})]}),e("div",{children:[e("span",{className:"text-xs text-purple-500 uppercase",children:"Lugar de Ejecución"}),e("p",{className:"font-bold text-lg text-purple-800",children:l.executionPlace})]})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-3",children:"DESCRIPCIÓN DE MERCANCÍA"}),e("div",{className:"grid grid-cols-3 gap-4",children:[e(J,{label:"Descripción (Backend)",value:l.description,onChange:h=>g({...l,description:h}),readOnly:L,maxLength:500,className:"col-span-2"}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Tipo de Envío"}),e("div",{className:`text-sm font-medium py-2 px-3 rounded ${l.hasHouses?"bg-amber-50 border border-amber-200 text-amber-800":"bg-slate-50 border border-slate-200 text-slate-700"}`,children:l.hasHouses?e("span",{className:"flex items-center gap-2",children:[e(qe,{size:14}),"CONSOLIDADO (",l.houseBills.length," Hijas)"]}):e("span",{className:"flex items-center gap-2",children:[e(Fe,{size:14}),"DIRECTO ",l.flights.length>1&&`(${l.flights.length} Rutas)`]})})]})]}),l.hasHouses&&e("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e("p",{className:"text-xs text-amber-700 font-medium mb-2",children:[e(qe,{size:12,className:"inline mr-1"}),"Este envío consolidado transmitirá: 1 Master AWB (FWB) + 1 Lista de Consolidación (CSL) + ",l.houseBills.length," House Waybills (FHL)"]}),e("div",{className:"flex flex-wrap gap-2",children:l.houseBills.map((h,I)=>e("span",{className:"text-xs bg-white px-2 py-1 rounded border border-amber-200 text-amber-800 font-mono",children:h.hawbNumber},I))})]})]}),Q&&e("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between",children:[e("div",{children:[e("p",{className:"font-bold text-emerald-800",children:"📟 CARGO-IMP (EDI)"}),e("p",{className:"text-sm text-emerald-600",children:"Formato: FWB/16, FWB/17, FHL/4"}),l.hasHouses&&e("p",{className:"text-xs text-purple-500 mt-1",children:["Consolidado: Master + ",l.houseBills.length," House(s)"]}),!l.hasHouses&&l.flights.length>1&&e("p",{className:"text-xs text-purple-500 mt-1",children:["Directo con ",l.flights.length," rutas"]})]}),e("div",{className:"flex items-center gap-3",children:[e("div",{className:"flex flex-col items-end",children:[e("label",{className:"text-[10px] text-blue-600 uppercase font-bold mb-1",children:"Formato"}),e("div",{className:"text-sm border border-blue-300 rounded px-3 py-2 bg-blue-50 font-medium text-blue-700",children:"EDI (CARGO-IMP)"})]}),l.hasHouses&&e("div",{className:"flex flex-col items-end",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold mb-1",children:"Contenido"}),e("select",{value:N,onChange:h=>w(h.target.value),className:"text-sm border border-purple-300 rounded px-3 py-2 focus:ring-2 focus:ring-purple-500 outline-none bg-white",children:[e("option",{value:"masterAndHouses",children:`FWB + ${l.houseBills.length} FHL`}),e("option",{value:"masterOnly",children:"Solo FWB (Master)"})]})]}),Ke&&e("div",{className:"flex flex-col items-end gap-1",children:[we&&e("span",{className:"text-xs text-amber-600 font-semibold flex items-center gap-1",children:[e(le,{size:12})," ",H," error(es) detectado(s) — revise antes de enviar"]}),e("button",{onClick:()=>{Oe("validation"),Be(!0)},disabled:!($!=null&&$.fullMessage)||z,className:`${we?"bg-amber-500 hover:bg-amber-600":"bg-emerald-600 hover:bg-emerald-700"} disabled:bg-slate-400 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-bold transition-all shadow-lg hover:shadow-xl`,children:z?e(se,{children:[e(dr,{size:18,className:"animate-spin"})," Transmitiendo..."]}):ge?e(se,{children:[e(K,{size:18})," ¡Transmitido!"]}):e(se,{children:[e(gr,{size:18})," ",we?"Transmitir (con errores)":"Transmitir a Descartes"]})})]})]})]}),C&&e("div",{className:`mt-4 p-4 rounded-lg border-2 shadow-lg ${C.allSuccess?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-400 animate-pulse":"bg-gradient-to-r from-red-100 to-orange-100 border-red-400 animate-pulse"}`,style:{animationDuration:"2s"},children:[e("div",{className:"flex items-center gap-2 mb-2",children:[C.allSuccess?e(K,{size:24,className:"text-green-600 animate-bounce"}):e(le,{size:24,className:"text-red-600 animate-bounce"}),e("span",{className:`font-bold text-lg ${C.allSuccess?"text-green-700":"text-red-700"}`,children:C.transmissionResult?C.allSuccess?"✅ TRANSMITIDO":"❌ ERROR TRANSMISIÓN":C.allSuccess?"✅ EDI COPIADO":"❌ ERROR"})]}),e("div",{className:`text-base font-bold py-2 px-3 rounded-lg mb-3 ${C.allSuccess?"bg-green-200/70 text-green-800 border border-green-300":"bg-red-200/70 text-red-800 border border-red-300"}`,children:["📊 ",C.summary]}),C.transmissionResult&&e("div",{className:"mt-2 text-xs bg-white/70 p-3 rounded border border-slate-200 space-y-2",children:[e("div",{className:"text-[10px] text-slate-400 mb-2 flex items-center gap-1",children:[e(Re,{size:12}),e("span",{children:"Clic en cada mensaje para ver payload enviado y respuesta completa"})]}),e("div",{className:`p-2 rounded border cursor-pointer transition-all hover:shadow-md ${C.transmissionResult.fwbResult.success?"bg-green-50 border-green-200 hover:bg-green-100":"bg-red-50 border-red-200 hover:bg-red-100"}`,onClick:()=>D(O==="fwb"?null:"fwb"),children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-slate-400",children:O==="fwb"?e(Pe,{size:16}):e(ue,{size:16})}),e("span",{className:`text-lg ${C.transmissionResult.fwbResult.success?"text-green-600":"text-red-600"}`,children:C.transmissionResult.fwbResult.success?"✓":"✗"}),e("strong",{className:"text-sm",children:["FWB (",C.transmissionResult.fwbResult.reference,")"]}),e("span",{className:"ml-auto text-[10px] text-slate-400",children:C.transmissionResult.fwbResult.timestamp?new Date(C.transmissionResult.fwbResult.timestamp).toLocaleTimeString():""})]}),C.transmissionResult.fwbResult.descartesResponse&&e("div",{className:"ml-8 text-xs flex flex-wrap gap-3 mt-1",children:[C.transmissionResult.fwbResult.descartesResponse.tid&&e("span",{children:[e("span",{className:"text-slate-500",children:"TID:"})," ",e("span",{className:"font-mono text-blue-700",children:C.transmissionResult.fwbResult.descartesResponse.tid})]}),C.transmissionResult.fwbResult.descartesResponse.status&&e("span",{children:[e("span",{className:"text-slate-500",children:"Status:"})," ",e("span",{className:"text-green-700 font-medium",children:C.transmissionResult.fwbResult.descartesResponse.status})]}),C.transmissionResult.fwbResult.descartesResponse.error&&e("span",{className:"text-red-600",children:C.transmissionResult.fwbResult.descartesResponse.error})]}),C.transmissionResult.fwbResult.error&&!C.transmissionResult.fwbResult.descartesResponse&&e("p",{className:"ml-8 text-red-600",children:C.transmissionResult.fwbResult.error})]}),O==="fwb"&&e("div",{className:"ml-4 p-3 bg-slate-100 rounded border border-slate-300 space-y-3 animate-fadeIn",children:[e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(gr,{size:12})," Mensaje Enviado (Request)"]}),C.transmissionResult.fwbResult.requestBody&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(C.transmissionResult.fwbResult.requestBody||"")},children:[e(_e,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:C.transmissionResult.fwbResult.requestBody||"(No disponible)"})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Ie,{size:12})," Respuesta API (Response)"]}),C.transmissionResult.fwbResult.responseRaw&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:h=>{h.stopPropagation(),navigator.clipboard.writeText(C.transmissionResult.fwbResult.responseRaw||"")},children:[e(_e,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:C.transmissionResult.fwbResult.responseRaw||C.transmissionResult.fwbResult.responseMessage||"(No disponible)"})]}),C.transmissionResult.fwbResult.descartesResponse&&e("div",{children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[e(xt,{size:12})," Respuesta Parseada"]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-32 font-mono",children:JSON.stringify(C.transmissionResult.fwbResult.descartesResponse,null,2)})]})]}),C.transmissionResult.fhlResults.map((h,I)=>e("div",{children:[e("div",{className:`p-2 rounded border cursor-pointer transition-all hover:shadow-md ${h.success?"bg-green-50 border-green-200 hover:bg-green-100":"bg-red-50 border-red-200 hover:bg-red-100"}`,onClick:()=>D(O===I?null:I),children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-slate-400",children:O===I?e(Pe,{size:16}):e(ue,{size:16})}),e("span",{className:`text-lg ${h.success?"text-green-600":"text-red-600"}`,children:h.success?"✓":"✗"}),e("strong",{className:"text-sm",children:["FHL (",h.reference,")"]}),e("span",{className:"ml-auto text-[10px] text-slate-400",children:h.timestamp?new Date(h.timestamp).toLocaleTimeString():""})]}),h.descartesResponse&&e("div",{className:"ml-8 text-xs flex flex-wrap gap-3 mt-1",children:[h.descartesResponse.tid&&e("span",{children:[e("span",{className:"text-slate-500",children:"TID:"})," ",e("span",{className:"font-mono text-blue-700",children:h.descartesResponse.tid})]}),h.descartesResponse.status&&e("span",{children:[e("span",{className:"text-slate-500",children:"Status:"})," ",e("span",{className:"text-green-700 font-medium",children:h.descartesResponse.status})]}),h.descartesResponse.error&&e("span",{className:"text-red-600",children:h.descartesResponse.error})]}),h.error&&!h.descartesResponse&&e("p",{className:"ml-8 text-red-600",children:h.error})]}),O===I&&e("div",{className:"ml-4 mt-2 p-3 bg-slate-100 rounded border border-slate-300 space-y-3 animate-fadeIn",children:[e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(gr,{size:12})," Mensaje Enviado (Request)"]}),h.requestBody&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:F=>{F.stopPropagation(),navigator.clipboard.writeText(h.requestBody||"")},children:[e(_e,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:h.requestBody||"(No disponible)"})]}),e("div",{children:[e("div",{className:"flex items-center justify-between mb-1",children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1",children:[e(Ie,{size:12})," Respuesta API (Response)"]}),h.responseRaw&&e("button",{className:"text-[10px] px-2 py-0.5 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",onClick:F=>{F.stopPropagation(),navigator.clipboard.writeText(h.responseRaw||"")},children:[e(_e,{size:10})," Copiar"]})]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-40 whitespace-pre-wrap font-mono",children:h.responseRaw||h.responseMessage||"(No disponible)"})]}),h.descartesResponse&&e("div",{children:[e("span",{className:"font-semibold text-slate-700 flex items-center gap-1 mb-1",children:[e(xt,{size:12})," Respuesta Parseada"]}),e("pre",{className:"text-[10px] bg-white p-2 rounded border border-slate-200 overflow-x-auto max-h-32 font-mono",children:JSON.stringify(h.descartesResponse,null,2)})]})]})]},I)),e("div",{className:"pt-2 border-t border-slate-300 flex items-center justify-between",children:[e("span",{className:"text-slate-600",children:["📈 Total: ",e("strong",{children:[C.transmissionResult.totalSuccess,"/",C.transmissionResult.totalSent]})," exitosos"]}),C.transmissionResult.totalFailed>0&&e("span",{className:"text-red-600 font-medium",children:["⚠️ ",C.transmissionResult.totalFailed," fallidos"]})]})]}),!C.transmissionResult&&C.fwbMessage&&e("div",{className:"mt-2 text-xs font-mono bg-white/70 p-2 rounded border border-slate-200",children:e("p",{children:[e("strong",{children:"FWB:"})," Mensaje generado correctamente"]})}),!C.transmissionResult&&C.fhlMessages&&C.fhlMessages.length>0&&e("div",{className:"mt-1 text-xs font-mono bg-white/70 p-2 rounded border border-slate-200",children:e("p",{className:"font-bold mb-1",children:[e("strong",{children:"FHL:"})," ",C.fhlMessages.length," mensaje(s) FHL generado(s)"]})})]})]})]}),d==="parties"&&e("div",{className:"space-y-4",children:[e("div",{className:"grid grid-cols-2 gap-4",children:[e(Ka,{title:"SHIPPER (Exportador)",icon:e(lt,{size:16}),party:l.shipper,onUpdate:h=>g({...l,shipper:h}),readOnly:L}),e(Ka,{title:"CONSIGNEE (Importador)",icon:e(Me,{size:16}),party:l.consignee,onUpdate:h=>g({...l,consignee:h}),readOnly:L})]}),e(ls,{agent:l.agent,onUpdate:h=>g({...l,agent:h}),readOnly:L}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-3 flex items-center gap-2",children:[e(vt,{size:14})," FIRMA Y EJECUCIÓN DEL TRANSPORTISTA"]}),e("div",{className:"grid grid-cols-3 gap-4",children:[e(J,{label:"Firma Autorizada",value:l.signature,onChange:h=>g({...l,signature:h}),readOnly:L,maxLength:20,required:!0}),e(J,{label:"Fecha de Ejecución",value:l.executionDate,onChange:h=>g({...l,executionDate:h}),readOnly:L,type:"date",required:!0}),e(J,{label:"Lugar de Ejecución",value:l.executionPlace,onChange:h=>g({...l,executionPlace:h}),readOnly:L,maxLength:17,required:!0})]})]})]}),d==="cargo"&&e("div",{className:"space-y-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"DATOS PRINCIPALES AWB"}),e("div",{className:"grid grid-cols-5 gap-3",children:[e(J,{label:"AWB Number *",value:l.awbNumber,onChange:h=>g({...l,awbNumber:h}),readOnly:L,maxLength:12,required:!0}),e(J,{label:"Origen (IATA) *",value:l.origin,onChange:h=>g({...l,origin:h}),readOnly:L,maxLength:3,required:!0}),e(J,{label:"Destino (IATA) *",value:l.destination,onChange:h=>g({...l,destination:h}),readOnly:L,maxLength:3,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Pago *"}),e("select",{value:l.paymentMethod,onChange:h=>g({...l,paymentMethod:h.target.value}),disabled:L,className:"text-sm border border-slate-300 rounded px-2 py-1.5 focus:ring-2 focus:ring-purple-500 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})]}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Servicio"}),e("select",{value:l.serviceCode||"",onChange:h=>g({...l,serviceCode:h.target.value}),disabled:L,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"",children:"--"}),e("option",{value:"AIRPORT_TO_AIRPORT",children:"A-A"}),e("option",{value:"DOOR_TO_DOOR_SERVICE",children:"D-D"}),e("option",{value:"AIRPORT_TO_DOOR",children:"A-D"}),e("option",{value:"DOOR_TO_AIRPORT",children:"D-A"})]})]})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"PESO Y VOLUMEN"}),e("div",{className:"grid grid-cols-6 gap-3",children:[e(J,{label:"Piezas *",value:l.pieces,onChange:h=>g({...l,pieces:parseInt(h)||0}),readOnly:L,type:"number",required:!0}),e(J,{label:"Peso Total *",value:l.weight,onChange:h=>g({...l,weight:parseFloat(h)||0}),readOnly:L,type:"number",required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Unidad"}),e("select",{value:l.weightUnit,onChange:h=>g({...l,weightUnit:h.target.value}),disabled:L,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"KILOGRAM",children:"KG"}),e("option",{value:"POUND",children:"LB"})]})]}),e(J,{label:"Volumen",value:l.volume,onChange:h=>g({...l,volume:parseFloat(h)||0}),readOnly:L,type:"number"}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Vol Unit"}),e("select",{value:l.volumeUnit||"CUBIC_METRE",onChange:h=>g({...l,volumeUnit:h.target.value}),disabled:L,className:"text-sm border border-slate-200 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"CUBIC_METRE",children:"m³"}),e("option",{value:"CUBIC_CENTIMETRE",children:"cm³"}),e("option",{value:"CUBIC_FOOT",children:"ft³"})]})]}),e(J,{label:"SLAC",value:l.slac||"",onChange:h=>g({...l,slac:parseInt(h)||0}),readOnly:L,type:"number"})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2 flex items-center gap-2",children:[e(at,{size:14})," VUELOS / ROUTING"]}),l.flights.length===0?e("p",{className:"text-slate-500 italic text-sm",children:"Sin vuelos asignados"}):e("div",{className:"space-y-2",children:l.flights.map((h,I)=>e("div",{className:"grid grid-cols-4 gap-3 bg-slate-50 p-2 rounded-lg",children:[e(J,{label:"Vuelo",value:h.flightNumber,onChange:F=>{const R=[...l.flights];R[I]={...h,flightNumber:F},g({...l,flights:R})},readOnly:L}),e(J,{label:"Fecha",value:h.date,onChange:F=>{const R=[...l.flights];R[I]={...h,date:F},g({...l,flights:R})},readOnly:L,type:"date"}),e(J,{label:"Origen",value:h.origin,readOnly:!0}),e(J,{label:"Destino",value:h.destination,readOnly:!0})]},I))})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"DESCRIPCIÓN DE MERCANCÍA"}),e("div",{className:"grid grid-cols-2 gap-3",children:[e(J,{label:"Descripción *",value:l.description,onChange:h=>g({...l,description:h}),readOnly:L,maxLength:500,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"SPH Codes"}),e("div",{className:"text-sm bg-slate-50 px-2 py-1.5 rounded border border-slate-200 min-h-[32px] flex flex-wrap gap-1",children:l.specialHandlingCodes&&l.specialHandlingCodes.length>0?l.specialHandlingCodes.map(h=>e("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-xs",children:h},h)):e("span",{className:"text-slate-400 text-xs",children:"Ninguno"})})]})]})]})]}),d==="financials"&&e("div",{className:"space-y-4",children:[e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("h3",{className:"font-bold text-sm text-slate-700 mb-2",children:"CHARGE DECLARATIONS"}),e("div",{className:"grid grid-cols-4 gap-3",children:[e(J,{label:"Moneda (ISO) *",value:l.currency,onChange:h=>g({...l,currency:h}),readOnly:L,maxLength:3,required:!0}),e("div",{className:"flex flex-col",children:[e("label",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1",children:"Pago Weight *"}),e("select",{value:l.paymentMethod,onChange:h=>g({...l,paymentMethod:h.target.value}),disabled:L,className:"text-sm border border-slate-300 rounded px-2 py-1.5 outline-none bg-white disabled:bg-slate-50 h-[34px]",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})]}),e(J,{label:"Valor Declarado Carga",value:l.declaredValueCarriage||"",onChange:h=>g({...l,declaredValueCarriage:h}),readOnly:L}),e(J,{label:"Valor Declarado Aduana",value:l.declaredValueCustoms||"",onChange:h=>g({...l,declaredValueCustoms:h}),readOnly:L})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"font-bold text-sm text-slate-700",children:"RATE CHARGES"}),!L&&e("button",{onClick:()=>g({...l,rates:[...l.rates,{pieces:0,weight:0,rateClassCode:"QUANTITY_RATE",rateOrCharge:0,total:0,description:""}]}),className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200",children:"+ Añadir Rate"})]}),e("table",{className:"w-full text-xs",children:[e("thead",{className:"bg-slate-100",children:e("tr",{children:[e("th",{className:"text-left p-1.5 w-16",children:"Pzas"}),e("th",{className:"text-left p-1.5 w-20",children:"Peso"}),e("th",{className:"text-left p-1.5 w-24",children:"P.Cobr"}),e("th",{className:"text-left p-1.5 w-28",children:"Clase"}),e("th",{className:"text-left p-1.5 w-20",children:"Tarifa"}),e("th",{className:"text-left p-1.5 w-32",children:"Desc. Merc."}),e("th",{className:"text-right p-1.5 w-24",children:"Total"}),!L&&e("th",{className:"w-8"})]})}),e("tbody",{children:l.rates.map((h,I)=>e("tr",{className:"border-b",children:[e("td",{className:"p-1",children:e("input",{type:"number",value:h.pieces,onChange:F=>{const R=[...l.rates];R[I]={...h,pieces:parseInt(F.target.value)||0},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border border-slate-200 rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"number",value:h.weight,onChange:F=>{const R=[...l.rates],U=parseFloat(F.target.value)||0;R[I]={...h,weight:U,total:U*(h.rateOrCharge||0)},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border border-slate-200 rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"number",value:h.chargeableWeight||h.weight,onChange:F=>{const R=[...l.rates];R[I]={...h,chargeableWeight:parseFloat(F.target.value)||0},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border border-purple-200 rounded text-xs font-semibold text-purple-700 disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("select",{value:h.rateClassCode,onChange:F=>{const R=[...l.rates];R[I]={...h,rateClassCode:F.target.value},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"QUANTITY_RATE",children:"Q-Cantidad"}),e("option",{value:"MINIMUM_CHARGE",children:"M-Mínimo"}),e("option",{value:"NORMAL_RATE",children:"N-Normal"}),e("option",{value:"SPECIFIC_COMMODITY_RATE",children:"C-SCR"}),e("option",{value:"BASIC_CHARGE",children:"B-Básico"})]})}),e("td",{className:"p-1",children:e("input",{type:"number",step:"0.01",value:h.rateOrCharge,onChange:F=>{const R=[...l.rates],U=parseFloat(F.target.value)||0,ve=h.chargeableWeight||h.weight;R[I]={...h,rateOrCharge:U,total:ve*U},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50"})}),e("td",{className:"p-1",children:e("input",{type:"text",value:h.goodsDescriptionOverride||"",placeholder:"Auto",onChange:F=>{const R=[...l.rates];R[I]={...h,goodsDescriptionOverride:F.target.value||void 0},g({...l,rates:R})},disabled:L,className:"w-full px-1 py-0.5 border border-amber-200 rounded text-xs disabled:bg-slate-50 placeholder:text-slate-400",title:"Descripción de mercancía (ej: CONSOLIDATE FLOWERS). Deja vacío para usar valor automático."})}),e("td",{className:"p-1 text-right font-bold",children:[l.currency," ",h.total.toFixed(2)]}),!L&&e("td",{className:"p-1",children:e("button",{onClick:()=>{const F=l.rates.filter((R,U)=>U!==I);g({...l,rates:F})},className:"text-red-500 hover:text-red-700",children:e(De,{size:14})})})]},I))}),e("tfoot",{className:"bg-purple-50",children:e("tr",{children:[e("td",{colSpan:6,className:"p-1.5 text-right font-bold text-xs",children:"Total Weight:"}),e("td",{className:"p-1.5 text-right font-bold text-purple-700",children:[l.currency," ",br.toFixed(2)]}),!L&&e("td",{})]})})]}),e("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e("div",{className:"flex items-center justify-between mb-2",children:e("p",{className:"text-xs font-bold text-blue-800 flex items-center gap-1",children:[e(Ie,{size:12}),"GOODS DESCRIPTION - Preview por Rate (máx 25 chars/línea)"]})}),e("div",{className:"space-y-2",children:l.rates.map((h,I)=>{var me;const F=((me=l.awbNumber)==null?void 0:me.split("-")[0])||"";let R="",U="";h.goodsDescriptionOverride?(R=h.goodsDescriptionOverride.toUpperCase(),U="override-rate"):l.goodsDescriptionOverride?(R=l.goodsDescriptionOverride.toUpperCase(),U="override-master"):l.hasHouses?(R=`CONSOLIDATION AS PER
ATTACHED DOCUMENTS`,U="consolidado"):["145","985"].includes(F)?(R=l.commodityCode==="0609"||l.commodityCode==="609"?"CONSOLIDATE FLOWERS":"CUT FLOWERS",U="latam"):(R=Go(h.description||l.description,150)||"FRESH CUT FLOWERS",U="auto");const ve=R.split(`
`),Je=ve.some(Ee=>Ee.length>25);return e("div",{className:`p-2 rounded border ${Je?"bg-red-50 border-red-200":"bg-white border-blue-100"}`,children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e("span",{className:"text-[10px] font-bold text-slate-600",children:["Rate #",I+1]}),e("span",{className:`text-[10px] px-1 rounded ${U==="override-rate"?"bg-purple-100 text-purple-700":U==="override-master"?"bg-indigo-100 text-indigo-700":U==="consolidado"?"bg-amber-100 text-amber-700":U==="latam"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:[U==="override-rate"&&"✏️ Override Rate",U==="override-master"&&"✏️ Override Master",U==="consolidado"&&"📦 Consolidado",U==="latam"&&"✈️ LATAM",U==="auto"&&"🔄 Auto"]})]}),e("div",{className:"font-mono text-xs space-y-0.5",children:ve.map((Ee,ot)=>e("div",{className:"flex items-center gap-1",children:[e("span",{className:`px-1 rounded ${Ee.length>25?"bg-red-200 text-red-800":"bg-slate-100"}`,children:Ee||"(vacío)"}),e("span",{className:`text-[9px] ${Ee.length>25?"text-red-600 font-bold":"text-slate-400"}`,children:[Ee.length,"/25 ",Ee.length>25&&"⚠️"]})]},ot))})]},I)})}),e("p",{className:"text-[10px] text-blue-600 mt-2",children:'💡 Para editar: escribe en "Desc. Merc." de cada rate, o usa el Override Master arriba en "Descripción de Mercancía"'})]})]}),e("div",{className:"bg-white border border-slate-200 rounded-lg p-3",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"font-bold text-sm text-slate-700",children:"OTHER CHARGES"}),!L&&e("button",{onClick:()=>g({...l,otherCharges:[...l.otherCharges,{code:"AW",entitlement:"DueCarrier",paymentMethod:"Prepaid",amount:0}]}),className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded hover:bg-amber-200",children:"+ Añadir Cargo"})]}),e("table",{className:"w-full text-xs",children:[e("thead",{className:"bg-slate-100",children:e("tr",{children:[e("th",{className:"text-left p-1.5 w-24",children:"Código"}),e("th",{className:"text-left p-1.5 w-24",children:"Entitlement"}),e("th",{className:"text-left p-1.5 w-24",children:"Pago"}),e("th",{className:"text-right p-1.5 w-28",children:"Monto"}),!L&&e("th",{className:"w-8"})]})}),e("tbody",{children:l.otherCharges.map((h,I)=>e("tr",{className:"border-b",children:[e("td",{className:"p-1",children:e("select",{value:h.code,onChange:F=>{const R=[...l.otherCharges];R[I]={...h,code:F.target.value},g({...l,otherCharges:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs font-mono disabled:bg-slate-50",children:[e("option",{value:"AW",children:"AW-AWB Fee"}),e("option",{value:"FC",children:"FC-Fuel"}),e("option",{value:"SC",children:"SC-Security"}),e("option",{value:"MY",children:"MY-Customs"}),e("option",{value:"TX",children:"TX-Taxes"}),e("option",{value:"RA",children:"RA-DGR"}),e("option",{value:"CC",children:"CC-Collect Fee"}),e("option",{value:"IN",children:"IN-Insurance"})]})}),e("td",{className:"p-1",children:e("select",{value:h.entitlement,onChange:F=>{const R=[...l.otherCharges];R[I]={...h,entitlement:F.target.value},g({...l,otherCharges:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"DueCarrier",children:"Carrier"}),e("option",{value:"DueAgent",children:"Agent"})]})}),e("td",{className:"p-1",children:e("select",{value:h.paymentMethod,onChange:F=>{const R=[...l.otherCharges];R[I]={...h,paymentMethod:F.target.value},g({...l,otherCharges:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs disabled:bg-slate-50",children:[e("option",{value:"Prepaid",children:"Prepaid"}),e("option",{value:"Collect",children:"Collect"})]})}),e("td",{className:"p-1",children:e("input",{type:"number",step:"0.01",value:h.amount,onChange:F=>{const R=[...l.otherCharges];R[I]={...h,amount:parseFloat(F.target.value)||0},g({...l,otherCharges:R})},disabled:L,className:"w-full px-1 py-0.5 border rounded text-xs text-right disabled:bg-slate-50"})}),!L&&e("td",{className:"p-1",children:e("button",{onClick:()=>{const F=l.otherCharges.filter((R,U)=>U!==I);g({...l,otherCharges:F})},className:"text-red-500 hover:text-red-700",children:e(De,{size:14})})})]},I))}),e("tfoot",{className:"bg-amber-50",children:e("tr",{children:[e("td",{colSpan:3,className:"p-1.5 text-right font-bold text-xs",children:"Total Other:"}),e("td",{className:"p-1.5 text-right font-bold text-amber-700",children:[l.currency," ",We.toFixed(2)]}),!L&&e("td",{})]})})]})]}),e("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:e("div",{className:"flex justify-between items-center",children:[e("span",{className:"font-bold text-green-800",children:"GRAND TOTAL"}),e("span",{className:"font-bold text-green-800 text-xl",children:[l.currency," ",to.toFixed(2)]})]})})]}),d==="security"&&e("div",{className:"space-y-6",children:[e("div",{className:"bg-gradient-to-br from-purple-50 to-purple-50 border border-purple-200 rounded-lg p-4",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("div",{className:"flex items-center gap-2",children:[e(mr,{size:18,className:"text-purple-600"}),e("h3",{className:"font-bold text-purple-800",children:"Special Handling Codes (SPH)"})]}),e("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:["Default: ",Mt(Ht(l.awbNumber)).join(", ")]})]}),e("div",{className:"flex flex-wrap gap-2 mb-3",children:(l.specialHandlingCodes&&l.specialHandlingCodes.length>0?l.specialHandlingCodes:Mt(Ht(l.awbNumber))).map((h,I)=>{var F,R;return e("span",{className:"inline-flex items-center gap-1 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:[h,((F=tr[h])==null?void 0:F.description)&&e("span",{className:"text-purple-200 text-xs",children:["(",(R=tr[h])==null?void 0:R.description,")"]}),!L&&e("button",{onClick:()=>{const U=l.specialHandlingCodes&&l.specialHandlingCodes.length>0?l.specialHandlingCodes:Mt(Ht(l.awbNumber));g({...l,specialHandlingCodes:U.filter(ve=>ve!==h)})},className:"ml-1 hover:bg-purple-700 rounded-full p-0.5",children:e(De,{size:12})})]},I)})}),!L&&e("div",{className:"border-t border-purple-200 pt-3",children:[e("p",{className:"text-xs text-purple-600 mb-2 font-medium",children:"Agregar código adicional:"}),e("div",{className:"flex flex-wrap gap-2",children:Object.entries(tr).map(([h,I])=>{const F=l.specialHandlingCodes&&l.specialHandlingCodes.length>0?l.specialHandlingCodes:Mt(Ht(l.awbNumber)),R=F.includes(h);return e("button",{onClick:()=>{g(R?{...l,specialHandlingCodes:F.filter(U=>U!==h)}:{...l,specialHandlingCodes:[...F,h]})},className:`px-2 py-1 rounded text-xs font-medium transition-all ${R?"bg-purple-600 text-white":"bg-white border border-purple-300 text-purple-700 hover:bg-purple-100"}`,title:I.description,children:h},h)})})]}),e("p",{className:"text-xs text-purple-500 mt-3 italic",children:"💡 Si no envías SPH desde tu backend, se usarán los valores por defecto según la aerolínea."})]}),e("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 border border-amber-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3",children:[e(Ie,{size:18,className:"text-amber-600"}),e("h3",{className:"font-bold text-amber-800",children:"Special Service Request (SSR)"}),e("span",{className:"text-xs bg-amber-100 text-amber-600 px-2 py-0.5 rounded ml-auto",children:"Opcional"})]}),e("textarea",{value:l.specialServiceRequest||"",onChange:h=>g({...l,specialServiceRequest:h.target.value||void 0}),disabled:L,placeholder:"Ej: MUST BE KEPT ABOVE 5 DEGREES CELSIUS. / EN CLOSE POUCH WITH EXPORT DOCUMENTS",className:"w-full px-3 py-2 border border-amber-200 rounded-lg text-sm resize-none h-20 focus:ring-2 focus:ring-amber-300 outline-none disabled:bg-slate-50"}),e("p",{className:"text-xs text-amber-600 mt-2 italic",children:"💡 Instrucciones especiales de servicio que se envían a la aerolínea. Deja vacío si no se requiere."})]}),e("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4",children:[e("div",{className:"flex items-center gap-2 mb-3",children:[e(Re,{size:18,className:"text-amber-600"}),e("h3",{className:"font-bold text-amber-800",children:"OCI / Información de Seguridad y Aduanas"})]}),e("div",{className:"bg-white/70 rounded-lg p-3 border border-amber-200",children:[e("p",{className:"text-amber-700 text-sm mb-2 font-bold flex items-center gap-1",children:[e(Tt,{size:14})," Vista previa del OCI que se enviará:"]}),e("div",{className:"space-y-1 text-xs font-mono",children:[(Z.includeConsigneeTIN??!0)&&((ao=l.consignee)==null?void 0:ao.taxId)&&e("div",{className:"bg-green-100 text-green-800 p-2 rounded flex items-center gap-2",children:[e(K,{size:12,className:"text-green-600"}),e("span",{children:[e("strong",{children:[((no=(oo=l.consignee)==null?void 0:oo.address)==null?void 0:no.countryCode)||"US","/AGT/T/"]}),l.consignee.taxId]}),e("span",{className:"text-green-600 text-[10px] ml-auto",children:"← NIT Importer"})]}),(Z.includeConsigneeTIN??!0)&&!((so=l.consignee)!=null&&so.taxId)&&e("div",{className:"bg-slate-100 text-slate-500 p-2 rounded flex items-center gap-2 italic",children:[e(le,{size:12,className:"text-slate-400"}),e("span",{children:"Importer sin taxId - No se enviará OCI de TIN"})]}),Z.includeShipperTIN&&((io=l.shipper)==null?void 0:io.taxId)&&e("div",{className:"bg-purple-100 text-purple-800 p-2 rounded flex items-center gap-2",children:[e(K,{size:12,className:"text-purple-600"}),e("span",{children:[e("strong",{children:[((co=(lo=l.shipper)==null?void 0:lo.address)==null?void 0:co.countryCode)||"CO","/AGT/T/"]}),l.shipper.taxId]}),e("span",{className:"text-purple-600 text-[10px] ml-auto",children:"← NIT Shipper"})]}),((po=Z.securityOci)==null?void 0:po.enabled)&&e(se,{children:[Z.securityOci.regulatedAgentNumber&&e("div",{className:"bg-amber-100 text-amber-800 p-2 rounded flex items-center gap-2",children:[e("span",{children:[e("strong",{children:"CO/AGT/RA/"}),Z.securityOci.regulatedAgentNumber]}),e("span",{className:"text-amber-600 text-[10px] ml-auto",children:"← Agente Regulado"})]}),Z.securityOci.expiryDate&&e("div",{className:"bg-orange-100 text-orange-800 p-2 rounded",children:[e("strong",{children:"ED/"}),Z.securityOci.expiryDate]}),Z.securityOci.screeningMethod&&e("div",{className:"bg-blue-100 text-blue-800 p-2 rounded",children:[e("strong",{children:"SM/"}),Z.securityOci.screeningMethod]}),Z.securityOci.screeningDate&&e("div",{className:"bg-cyan-100 text-cyan-800 p-2 rounded",children:[e("strong",{children:"SD/"}),Z.securityOci.screeningDate]}),Z.securityOci.screenerName&&e("div",{className:"bg-pink-100 text-pink-800 p-2 rounded",children:[e("strong",{children:"SN/"}),Z.securityOci.screenerName]})]}),!(Z.includeConsigneeTIN??!0)&&!Z.includeShipperTIN&&!((mo=Z.securityOci)!=null&&mo.enabled)&&e("div",{className:"bg-slate-100 text-slate-500 p-2 rounded italic",children:"No hay OCI configurados. Activa opciones en el panel de Configuración."})]}),e("p",{className:"text-amber-500 text-[10px] mt-2 italic",children:["💡 Para modificar estos valores, ve al panel de ",e("strong",{children:"Configuración"})," (⚙️)"]})]})]})]}),d==="houses"&&e("div",{className:"space-y-2",children:[e("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-slate-50/95 backdrop-blur-sm py-2 -mt-2 -mx-2 px-2 z-10 border-b border-slate-200",children:[e("div",{className:"flex items-center gap-3",children:[e("h3",{className:"font-bold text-slate-700 text-sm",children:"House Waybills"}),e("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${l.hasHouses?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:l.hasHouses?`${l.houseBills.length} houses`:"Directo"})]}),l.hasHouses&&l.houseBills.length>0&&e("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>P(new Set(l.houseBills.map((h,I)=>I))),className:"text-[10px] text-purple-600 hover:text-purple-800 px-2 py-1 rounded hover:bg-purple-50",children:"Expandir todo"}),e("button",{onClick:()=>P(new Set),className:"text-[10px] text-slate-500 hover:text-slate-700 px-2 py-1 rounded hover:bg-slate-100",children:"Colapsar todo"})]})]}),l.hasHouses?e("div",{className:"space-y-1.5 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:l.houseBills.map((h,I)=>e(Za,{house:h,index:I,isExpanded:ye.has(I),onToggle:xe,onUpdate:je,masterOrigin:l.origin,masterDestination:l.destination,isReadOnly:L},h.id||I))}):e("div",{className:"text-center py-8 text-slate-400",children:[e(Fe,{size:32,className:"mx-auto mb-2 opacity-50"}),e("p",{className:"text-sm",children:"Envío directo - No tiene house waybills"})]}),l.hasHouses&&l.houseBills.length>0&&e("div",{className:"mt-3 pt-2 border-t border-slate-200 flex items-center justify-between text-xs text-slate-500",children:[e("span",{children:["Total: ",l.houseBills.reduce((h,I)=>h+I.pieces,0)," piezas, ",l.houseBills.reduce((h,I)=>h+I.weight,0).toFixed(2)," kg"]}),e("span",{className:"text-amber-600 font-medium",children:[ye.size," de ",l.houseBills.length," expandidos"]})]})]}),d==="json"&&e("div",{className:"h-full flex flex-col",children:[e("div",{className:"flex items-center justify-between mb-4",children:[e("div",{className:"bg-slate-100 p-1 rounded-lg inline-flex items-center shadow-inner",children:[e("button",{onClick:()=>u("fwb"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${m==="fwb"?"bg-white text-emerald-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(dt,{size:14}),"FWB/",((go=$==null?void 0:$.messageVersion)==null?void 0:go.split("/")[1])||"16"]}),l.hasHouses&&e("button",{onClick:()=>u("fhl"),className:`px-6 py-2 rounded-md text-sm font-bold transition-all duration-200 flex items-center gap-2 ${m==="fhl"?"bg-white text-emerald-700 shadow-sm ring-1 ring-black/5 transform scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e(qe,{size:14}),"FHL/4 (Houses)"]})]}),e("div",{className:"flex gap-2",children:e("button",{onClick:()=>{Ye(m==="fwb"?($==null?void 0:$.fullMessage)||"":Xe||"")},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors",children:[v?e(Zn,{size:14,className:"text-green-600"}):e(_e,{size:14}),v?"Copiado!":"Copiar EDI"]})})]}),Vt&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4 flex items-center gap-2 text-red-700",children:[e(le,{size:16})," Error generando EDI: ",Vt]}),e("div",{className:"mb-4 p-3 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg",children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(dt,{size:16,className:"text-emerald-600"}),e("span",{className:"font-bold text-emerald-800",children:"Vista EDI - IATA CARGO-IMP"}),e("span",{className:"text-xs bg-emerald-100 text-emerald-600 px-2 py-0.5 rounded",children:($==null?void 0:$.messageVersion)||"FWB/16"})]}),e("p",{className:"text-xs text-emerald-600",children:"Formato EDI legado IATA Cargo Interchange Message Procedures. Cada segmento se visualiza como una tarjeta editable con límites de caracteres."})]}),X&&e("div",{className:`mb-4 p-3 rounded-lg border ${X.isDefault?"bg-amber-50 border-amber-300":X.source==="custom"?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:[e("div",{className:"flex items-center justify-between mb-2",children:e("div",{className:"flex items-center gap-2",children:[e(at,{size:14,className:X.isDefault?"text-amber-600":"text-blue-600"}),e("span",{className:`font-bold text-sm ${X.isDefault?"text-amber-800":"text-blue-800"}`,children:X.airlineName}),e("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${X.source==="custom"?"bg-purple-200 text-purple-700":X.source==="configured"?"bg-blue-200 text-blue-700":"bg-amber-200 text-amber-700"}`,children:X.source==="custom"?"✏️ Personalizada":X.source==="configured"?"✓ Pre-configurada":"⚠️ DEFAULT"})]})}),e("div",{className:"flex flex-wrap gap-2 mb-2",children:[e("span",{className:"text-[10px] bg-white px-1.5 py-0.5 rounded border border-slate-200",children:[e("strong",{children:"FWB:"})," ",X.policy.fwbVersion]}),e("span",{className:"text-[10px] bg-white px-1.5 py-0.5 rounded border border-slate-200",children:[e("strong",{children:"FHL:"})," ",X.policy.fhlVersion]}),X.policy.includeUNB_UNZ&&e("span",{className:"text-[10px] bg-amber-100 text-amber-700 px-1.5 py-0.5 rounded",children:"UNB/UNZ"}),X.policy.ociWithEori&&e("span",{className:"text-[10px] bg-violet-100 text-violet-700 px-1.5 py-0.5 rounded",children:"EORI"}),X.policy.sphCodes&&X.policy.sphCodes.length>0&&e("span",{className:"text-[10px] bg-rose-100 text-rose-700 px-1.5 py-0.5 rounded",children:["SPH: ",X.policy.sphCodes.join(", ")]})]}),X.warnings.length>0&&e("div",{className:"mt-2 space-y-1",children:X.warnings.map((h,I)=>e("p",{className:"text-xs text-amber-700",children:h},I))}),X.isDefault&&e("button",{onClick:()=>ne(!0),className:"mt-2 text-xs text-amber-700 underline hover:text-amber-900 flex items-center gap-1",children:[e(Br,{size:12})," Configurar política para aerolínea ",(uo=l==null?void 0:l.awbNumber)==null?void 0:uo.split("-")[0]]})]}),e("div",{className:"flex-1 overflow-y-auto space-y-4",children:[m==="fwb"&&$&&e("details",{open:!0,className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:"px-4 py-2.5 bg-purple-50 border-b border-purple-200 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all",children:[e("span",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e(ue,{size:14,className:"text-purple-400 transition-transform group-open:rotate-90"}),e(Ie,{size:14}),"FWB/",((ho=$.messageVersion)==null?void 0:ho.split("/")[1])||"16"," (Master)",we&&e("span",{className:"text-xs bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full font-bold",children:[H," error",H>1?"es":""]})]}),e("button",{onClick:h=>{h.preventDefault(),Ye($.fullMessage||"")},className:"px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 rounded flex items-center gap-1 transition-colors",children:[e(_e,{size:12})," Copiar FWB"]})]}),e("div",{className:"p-2",children:[e(Xa,{message:$,policy:X==null?void 0:X.policy,defaultCollapsed:!0,onValidationChange:({canSend:h,errorCount:I})=>{Ze(I>0),ee(I)}}),e(Va,{message:$,onSegmentChange:(h,I)=>{console.log(`[CARGO-IMP] Editando segmento ${h}:`,I)},onToggleSegment:qt})]})]}),m==="fhl"&&l.hasHouses&&de&&de.length>0&&e("details",{open:!0,className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:"px-4 py-2.5 bg-sky-50 border-b border-sky-200 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all",children:[e("span",{className:"font-bold text-sky-800 flex items-center gap-2",children:[e(ue,{size:14,className:"text-sky-400 transition-transform group-open:rotate-90"}),e(qe,{size:14}),"FHL/4 (Houses) — ",de.length," mensaje",de.length>1?"s":""]}),e("button",{onClick:h=>{h.preventDefault(),Ye(Xe||"")},className:"px-2 py-1 text-xs bg-sky-100 hover:bg-sky-200 text-sky-700 rounded flex items-center gap-1 transition-colors",children:[e(_e,{size:12})," Copiar FHL"]})]}),e("div",{className:"p-2 space-y-4",children:de.map((h,I)=>{var F,R;return e("div",{children:[e("div",{className:"bg-sky-100 px-3 py-2 rounded-t-lg font-bold text-sky-800 flex items-center gap-2",children:[e(qe,{size:14}),"FHL #",I+1,": ",((R=(F=l.houseBills)==null?void 0:F[I])==null?void 0:R.hawbNumber)||`House ${I+1}`]}),e(Xa,{message:h,policy:X==null?void 0:X.policy,defaultCollapsed:!0,compact:!0}),e(Va,{message:h,onSegmentChange:(U,ve)=>{console.log(`[CARGO-IMP FHL ${I}] Editando segmento ${U}:`,ve)},onToggleSegment:qt})]},I)})})]})]}),m==="fwb"&&$&&e("details",{className:"mt-4",children:[e("summary",{className:"cursor-pointer text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2 py-2",children:[e(dt,{size:14})," Ver EDI Raw FWB (Formato plano)"]}),e("div",{className:"bg-slate-900 text-green-400 p-4 rounded-lg overflow-auto font-mono text-xs leading-relaxed max-h-64 mt-2",children:e("pre",{children:$.fullMessage})})]}),m==="fhl"&&Xe&&e("details",{className:"mt-4",children:[e("summary",{className:"cursor-pointer text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2 py-2",children:[e(dt,{size:14})," Ver EDI Raw FHL (Formato plano)"]}),e("div",{className:"bg-slate-900 text-green-400 p-4 rounded-lg overflow-auto font-mono text-xs leading-relaxed max-h-64 mt-2",children:e("pre",{children:Xe})})]})]})]}),e("div",{className:"px-3 py-2 border-t border-slate-100 flex justify-between items-center bg-white",children:[e("div",{className:"text-[10px] text-slate-400 truncate max-w-[200px]",children:(C==null?void 0:C.allSuccess)&&e("span",{className:"text-green-500",children:"EDI copiado al portapapeles"})}),e("div",{className:"flex gap-1.5",children:[e("button",{onClick:Se,className:"px-3 py-1.5 text-xs text-slate-500 hover:bg-slate-100 rounded transition-colors",children:"Cerrar"}),Q&&$&&e("button",{onClick:x,className:"px-4 py-1.5 text-xs bg-emerald-600 hover:bg-emerald-700 text-white rounded transition-colors flex items-center gap-1.5 font-semibold",children:[e(_e,{size:12})," Copiar EDI"]})]})]})]}),Ge&&$&&(()=>{const h=Et($,X==null?void 0:X.policy),I=(de||[]).map((oe,he)=>{var He,Ft;return{index:he,hawb:((Ft=(He=l==null?void 0:l.houseBills)==null?void 0:He[he])==null?void 0:Ft.hawbNumber)||`House #${he+1}`,result:Et(oe,X==null?void 0:X.policy)}}),F={FWB:"Header",AWB:"N° Guía",FLT:"Vuelo",RTG:"Ruta",SHP:"Exportador (Shipper)",CNE:"Consignatario (Consignee)",AGT:"Agente",SSR:"Serv. Especial",ACC:"Contabilidad",CVD:"Cargos",RTD:"Tarifas",NG:"Mercancía",NH:"Código HTS",NV:"Volumen",NS:"SLAC",OTH:"Otros Cargos",PPD:"Prepaid",COL:"Collect",CER:"Certificación",ISU:"Emisión",REF:"Referencia",SPH:"Manejo Especial",OCI:"Info Aduanas",NFY:"Notificar",FTR:"Footer",MBI:"Master Info",HBS:"Resumen House",HTS:"Arancelario",TXT:"Texto Libre"},R=h.allIssues.filter(oe=>oe.severity==="error"),U=h.allIssues.filter(oe=>oe.severity==="warning"),ve=I.reduce((oe,he)=>oe+he.result.totalErrors,0),Je=I.reduce((oe,he)=>oe+he.result.totalWarnings,0),me=R.length+ve,Ee=U.length+Je,ot=me===0&&Ee===0,Xt=I.filter(oe=>oe.result.totalErrors>0||oe.result.totalWarnings>0).length,bo=I.length-Xt;return e("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 overflow-hidden max-h-[85vh] flex flex-col",children:[e("div",{className:`px-6 py-4 flex items-center gap-3 ${ot?"bg-gradient-to-r from-emerald-500 to-green-500":me>0?"bg-gradient-to-r from-red-500 to-orange-500":"bg-gradient-to-r from-amber-400 to-orange-400"}`,children:[ot?e(K,{size:28,className:"text-white"}):me>0?e(le,{size:28,className:"text-white"}):e(Re,{size:28,className:"text-white"}),e("div",{children:[e("h3",{className:"text-white font-bold text-lg",children:ot?"Listo para enviar":"Revisión antes de enviar"}),e("p",{className:"text-white/80 text-xs",children:["AWB: ",l==null?void 0:l.awbNumber," — ",l!=null&&l.hasHouses?`Consolidado (${l.houseBills.length} houses)`:"Directo"]})]})]}),e("div",{className:"px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-3",children:[me>0&&e("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold bg-red-100 text-red-700",children:[e(le,{size:14})," ",me," Error",me>1?"es":""]}),Ee>0&&e("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold bg-amber-100 text-amber-700",children:[e(Re,{size:14})," ",Ee," Alerta",Ee>1?"s":""]}),ot&&e("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold bg-green-100 text-green-700",children:[e(K,{size:14})," Sin problemas detectados"]})]}),e("div",{className:"px-6 py-2 bg-white border-b border-slate-200 flex gap-1",children:[e("button",{onClick:()=>Oe("validation"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all flex items-center gap-2 ${pe==="validation"?"bg-purple-100 text-purple-700":"text-slate-500 hover:bg-slate-100"}`,children:[e(mr,{size:14}),"Validación",(me>0||Ee>0)&&e("span",{className:`text-xs px-1.5 rounded-full ${me>0?"bg-red-500 text-white":"bg-amber-400 text-white"}`,children:me+Ee})]}),e("button",{onClick:()=>Oe("preview"),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-all flex items-center gap-2 ${pe==="preview"?"bg-sky-100 text-sky-700":"text-slate-500 hover:bg-slate-100"}`,children:[e(dt,{size:14}),"Preview EDI",e("span",{className:"text-xs bg-slate-200 text-slate-600 px-1.5 rounded-full",children:1+((de==null?void 0:de.length)||0)})]})]}),e("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[pe==="validation"&&e(se,{children:[e("details",{open:!0,className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:`px-4 py-2.5 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all ${R.length>0?"bg-red-50":U.length>0?"bg-amber-50":"bg-green-50"}`,children:[e("span",{className:"font-bold text-sm flex items-center gap-2",children:[e(ue,{size:14,className:"text-slate-400 transition-transform group-open:rotate-90"}),e(Ie,{size:14,className:"text-purple-600"}),"Master (FWB)"]}),e("div",{className:"flex items-center gap-2",children:[R.length>0&&e("span",{className:"text-xs font-bold text-red-600",children:[R.length," error",R.length>1?"es":""]}),U.length>0&&e("span",{className:"text-xs font-bold text-amber-600",children:[U.length," alerta",U.length>1?"s":""]}),R.length===0&&U.length===0&&e("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[e(K,{size:12})," OK"]})]})]}),R.length>0||U.length>0?e("div",{className:"p-3 space-y-2 border-t border-slate-100",children:[...R,...U].map((oe,he)=>e("div",{className:`flex items-start gap-2 p-2 rounded-lg text-sm ${oe.severity==="error"?"bg-red-50 text-red-800":"bg-amber-50 text-amber-800"}`,children:[e("span",{className:"mt-0.5 flex-shrink-0",children:oe.severity==="error"?e(le,{size:14,className:"text-red-500"}):e(Re,{size:14,className:"text-amber-500"})}),e("div",{children:[e("span",{className:"font-bold text-xs bg-white/60 px-1.5 py-0.5 rounded mr-2",children:F[oe.segment]||oe.segment}),oe.message,oe.suggestion&&e("p",{className:"text-xs mt-0.5 opacity-70",children:["Sugerencia: ",oe.suggestion]})]})]},he))}):e("div",{className:"p-3 border-t border-slate-100 text-sm text-green-600 flex items-center gap-2",children:[e(K,{size:14})," Sin problemas en el Master FWB"]})]}),I.length>0&&e("details",{className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:`px-4 py-2.5 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all ${ve>0?"bg-red-50":Je>0?"bg-amber-50":"bg-green-50"}`,children:[e("span",{className:"font-bold text-sm flex items-center gap-2",children:[e(ue,{size:14,className:"text-slate-400 transition-transform group-open:rotate-90"}),e(qe,{size:14,className:"text-sky-600"}),"Houses (FHL) — ",I.length," mensaje",I.length>1?"s":""]}),e("div",{className:"flex items-center gap-2",children:[bo>0&&e("span",{className:"text-xs font-bold text-green-600",children:[bo," OK"]}),ve>0&&e("span",{className:"text-xs font-bold text-red-600",children:[Xt," con error",Xt>1?"es":""]}),ve===0&&Je>0&&e("span",{className:"text-xs font-bold text-amber-600",children:[Xt," con alerta",Xt>1?"s":""]}),ve===0&&Je===0&&e("span",{className:"text-xs font-bold text-green-600 flex items-center gap-1",children:[e(K,{size:12})," Todas OK"]})]})]}),e("div",{className:"p-3 space-y-2 border-t border-slate-100 max-h-[40vh] overflow-y-auto",children:I.map(oe=>{const he=oe.result.allIssues.filter(nt=>nt.severity==="error"),He=oe.result.allIssues.filter(nt=>nt.severity==="warning");return he.length>0||He.length>0?e("details",{className:"border border-slate-100 rounded-lg overflow-hidden group/house",children:[e("summary",{className:`px-3 py-1.5 text-sm font-bold flex items-center gap-2 cursor-pointer select-none hover:brightness-95 ${he.length>0?"bg-red-50 text-red-700":"bg-amber-50 text-amber-700"}`,children:[e(ue,{size:12,className:"text-slate-400 transition-transform group-open/house:rotate-90"}),e("span",{className:"font-mono",children:oe.hawb}),he.length>0&&e("span",{className:"text-xs",children:["(",he.length," error",he.length>1?"es":"",")"]}),He.length>0&&e("span",{className:"text-xs",children:["(",He.length," alerta",He.length>1?"s":"",")"]})]}),e("div",{className:"p-2 space-y-1 border-t border-slate-100",children:[...he,...He].map((nt,Is)=>e("div",{className:`flex items-start gap-2 p-1.5 rounded text-xs ${nt.severity==="error"?"text-red-700":"text-amber-700"}`,children:[e("span",{className:"mt-0.5 flex-shrink-0",children:nt.severity==="error"?e(le,{size:12}):e(Re,{size:12})}),e("div",{children:[e("span",{className:"font-bold bg-white/60 px-1 py-0.5 rounded mr-1",children:F[nt.segment]||nt.segment}),nt.message]})]},Is))})]},oe.index):e("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg text-sm text-green-700",children:[e(K,{size:14}),e("span",{className:"font-mono font-bold",children:oe.hawb}),e("span",{className:"text-xs",children:"— Sin problemas"})]},oe.index)})})]}),ot&&e("div",{className:"text-center py-4",children:[e(K,{size:48,className:"mx-auto text-green-400 mb-2"}),e("p",{className:"text-green-700 font-bold text-lg",children:"Todo en orden"}),e("p",{className:"text-slate-500 text-sm",children:"No se detectaron errores ni alertas en los mensajes EDI."})]})]}),pe==="preview"&&e("div",{className:"space-y-4",children:[e("details",{open:!0,className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:"px-4 py-2.5 bg-purple-50 border-b border-purple-200 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all",children:[e("span",{className:"font-bold text-purple-800 flex items-center gap-2",children:[e(ue,{size:14,className:"text-purple-400 transition-transform group-open:rotate-90"}),e(Ie,{size:14}),"FWB 16 (Master)"]}),e("button",{onClick:oe=>{oe.preventDefault(),navigator.clipboard.writeText($.fullMessage||"")},className:"px-2 py-1 text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 rounded flex items-center gap-1 transition-colors",children:[e(_e,{size:12})," Copiar"]})]}),e("div",{className:"bg-slate-900 text-green-400 p-4 overflow-x-auto font-mono text-xs leading-relaxed max-h-[40vh]",children:e("pre",{className:"whitespace-pre-wrap",children:$.fullMessage||"Sin contenido generado"})})]}),de&&de.length>0&&e("details",{className:"border border-slate-200 rounded-lg overflow-hidden group",children:[e("summary",{className:"px-4 py-2.5 bg-sky-50 border-b border-sky-200 flex items-center justify-between cursor-pointer select-none hover:brightness-95 transition-all",children:[e("span",{className:"font-bold text-sky-800 flex items-center gap-2",children:[e(ue,{size:14,className:"text-sky-400 transition-transform group-open:rotate-90"}),e(qe,{size:14}),"FHL (Houses) — ",de.length," mensaje",de.length>1?"s":""]}),e("button",{onClick:oe=>{oe.preventDefault();const he=de.map(He=>He.fullMessage).join(`

`);navigator.clipboard.writeText(he)},className:"px-2 py-1 text-xs bg-sky-100 hover:bg-sky-200 text-sky-700 rounded flex items-center gap-1 transition-colors",children:[e(_e,{size:12})," Copiar todos"]})]}),e("div",{className:"bg-slate-900 p-4 overflow-y-auto max-h-[40vh] space-y-4",children:de.map((oe,he)=>{var He,Ft;return e("div",{children:[e("div",{className:"text-sky-400 font-bold text-xs mb-1 flex items-center justify-between",children:[e("span",{children:["— FHL #",he+1,": ",((Ft=(He=l==null?void 0:l.houseBills)==null?void 0:He[he])==null?void 0:Ft.hawbNumber)||"House "+(he+1)," —"]}),e("button",{onClick:()=>navigator.clipboard.writeText(oe.fullMessage||""),className:"text-slate-500 hover:text-sky-400 transition-colors",children:e(_e,{size:10})})]}),e("pre",{className:"text-green-400 font-mono text-xs leading-relaxed whitespace-pre-wrap",children:oe.fullMessage||"Sin contenido"})]},he)})})]}),e("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-start gap-2 text-sm text-blue-700",children:[e(Re,{size:14,className:"mt-0.5 flex-shrink-0"}),e("div",{children:[e("span",{className:"font-bold",children:"Preview del mensaje EDI"})," — Este es el contenido exacto que será enviado a Descartes GLN. Revisa que la información sea correcta antes de transmitir."]})]})]})]}),e("div",{className:"px-6 py-4 bg-slate-50 flex justify-between items-center border-t border-slate-200",children:[e("button",{onClick:()=>Be(!1),className:"px-5 py-2.5 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-semibold transition-colors",children:"Volver"}),e("div",{className:"flex items-center gap-3",children:[me>0&&e("span",{className:"text-xs text-red-600 font-medium",children:["Enviar con ",me," error",me>1?"es":""]}),e("button",{onClick:()=>{Be(!1),jt()},disabled:z,className:`px-6 py-2.5 rounded-lg font-bold transition-all flex items-center gap-2 shadow-lg ${me>0?"bg-amber-500 hover:bg-amber-600 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"}`,children:[e(Nt,{size:16}),me>0?"Enviar de todas formas":"Enviar a Descartes"]})]})]})]})})})(),ae&&e("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e("div",{className:"bg-white rounded-2xl shadow-2xl border-2 border-amber-300 max-w-md mx-4 overflow-hidden animate-bounce-in",children:[e("div",{className:"bg-gradient-to-r from-amber-400 to-orange-400 px-6 py-4 flex items-center gap-3",children:[e(le,{size:28,className:"text-white"}),e("div",{children:[e("h3",{className:"text-white font-bold text-lg",children:"⚠️ Mensaje con Errores"}),e("p",{className:"text-amber-100 text-xs",children:"Validación IATA CARGO-IMP"})]})]}),e("div",{className:"px-6 py-5",children:[e("p",{className:"text-slate-700 mb-3",children:["El mensaje EDI tiene ",e("span",{className:"font-bold text-red-600",children:[H," error(es)"]})," de validación según las especificaciones IATA."]}),e("p",{className:"text-slate-600 text-sm mb-4",children:["La aerolínea podría ",e("strong",{children:"rechazar"})," el mensaje o generar un ",e("strong",{children:"HOLD"})," en el sistema de Risk Assessment (ACAS/PLACI)."]}),e("p",{className:"text-slate-800 font-semibold text-center text-base mb-2",children:"¿Está seguro que desea transmitir?"})]}),e("div",{className:"px-6 py-4 bg-slate-50 flex justify-end gap-3 border-t border-slate-200",children:[e("button",{onClick:()=>ke(!1),className:"px-5 py-2.5 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-semibold transition-colors",children:"Cancelar"}),e("button",{onClick:()=>{ke(!1),$e()},className:"px-5 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-bold transition-colors flex items-center gap-2 shadow-lg",children:[e(gr,{size:16})," Sí, Enviar de Todas Formas"]})]})]})}),e(es,{isOpen:B,onClose:()=>ne(!1),onConfigChange:h=>{E(h),ce(I=>I+1)},onSaveConfig:s})]})},cs=({status:t})=>{const r={DRAFT:{bg:"bg-gray-100",text:"text-gray-600",border:"border-gray-200",label:"Draft"},TRANSMITTED:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-200",label:"Pending"},ACKNOWLEDGED:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",label:"Confirmed"},REJECTED:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",label:"Rejected"}},a=r[t]||r.DRAFT;return e("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold ${a.bg} ${a.text} border ${a.border}`,children:[e(Ie,{size:10,className:"mr-1"}),a.label]})},Ja=({group:t})=>{const[r,a]=_(!1),n=t.errorCount>0;return e("div",{className:`rounded-lg border ${n?"border-red-200 bg-red-50/70":"border-amber-200 bg-amber-50/70"} overflow-hidden`,children:[e("button",{onClick:()=>a(!r),className:"w-full p-2.5 flex items-center gap-2 hover:bg-black/5 transition-colors text-left",children:[e("div",{className:`p-1.5 rounded-lg ${t.actorType==="consignee"?"bg-purple-100 text-purple-600":"bg-sky-100 text-sky-600"}`,children:t.actorType==="consignee"?e(Me,{size:12}):e(lt,{size:12})}),e("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-semibold text-slate-800 text-xs truncate",children:t.actorName}),e("div",{className:"text-[10px] text-slate-500",children:[t.hawbNumbers.length," house",t.hawbNumbers.length>1?"s":""]})]}),e("div",{className:"flex items-center gap-1",children:[t.errorCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-red-200 text-red-800 rounded-full",children:[t.errorCount," err"]}),t.warningCount>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-amber-200 text-amber-800 rounded-full",children:[t.warningCount," warn"]})]}),r?e(Pe,{size:12,className:"text-slate-400"}):e(ue,{size:12,className:"text-slate-400"})]}),r&&e("div",{className:"px-3 pb-2.5 space-y-1.5 border-t border-white/60",children:[e("div",{className:"text-[10px] text-slate-500 pt-1.5 pb-0.5 flex flex-wrap gap-1",children:[e("span",{className:"font-medium",children:"Houses:"}),t.hawbNumbers.map((o,s)=>e("span",{className:"font-mono bg-white/60 px-1 rounded text-[9px]",children:o},s))]}),t.uniqueIssues.map((o,s)=>e("div",{className:`flex items-start gap-1.5 text-[11px] rounded-md p-1.5 ${o.severity==="error"?"bg-red-100/60 text-red-700":"bg-amber-100/60 text-amber-700"}`,children:[o.severity==="error"?e(Te,{size:11,className:"flex-shrink-0 mt-0.5"}):e(le,{size:11,className:"flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-semibold",children:["[",o.segment,"]"]})," ",o.message,o.count>1&&e("span",{className:"text-[9px] opacity-70 ml-1",children:["(×",o.count," houses)"]}),o.suggestion&&e("div",{className:"text-[9px] opacity-70 mt-0.5",children:["💡 ",o.suggestion]})]})]},s))]})]})},ds=({entry:t,index:r,houseBills:a,forceExpand:n})=>{const[o,s]=_(!1);st(()=>{n!==void 0&&s(n)},[n]);const i=a==null?void 0:a.find(p=>p.hawbNumber===t.hawbNumber),c=t.validation.totalErrors>0,d=t.validation.totalWarnings>0;return e("div",{className:`rounded-lg border ${c?"border-red-200 bg-red-50":d?"border-amber-200 bg-amber-50":"border-green-200 bg-green-50"}`,children:[e("button",{onClick:()=>s(!o),className:"w-full p-2 flex items-center gap-2 hover:bg-black/5 transition-colors text-left",children:[e("span",{className:"bg-purple-100 text-purple-600 font-bold text-[10px] w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",children:r+1}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-mono text-xs text-slate-700 font-medium",children:t.hawbNumber}),i&&e("span",{className:"text-[10px] text-slate-400 ml-1.5",children:["→ ",i.consigneeName]})]}),e("div",{className:"flex items-center gap-1",children:[c&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-red-100 text-red-700 rounded-full",children:[t.validation.totalErrors," err"]}),d&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-amber-100 text-amber-700 rounded-full",children:[t.validation.totalWarnings," warn"]}),!c&&!d&&e(K,{size:12,className:"text-green-500"})]}),o?e(Pe,{size:12,className:"text-slate-400"}):e(ue,{size:12,className:"text-slate-400"})]}),o&&t.validation.allIssues.length>0&&e("div",{className:"px-2 pb-2 space-y-1 border-t border-white/50",children:[t.validation.allIssues.filter(p=>p.severity!=="info").map((p,m)=>e("div",{className:`rounded-md p-1.5 text-[11px] flex items-start gap-1.5 ${p.severity==="error"?"bg-red-100/50 text-red-700":"bg-amber-100/50 text-amber-700"}`,children:[p.severity==="error"?e(Te,{size:10,className:"flex-shrink-0 mt-0.5"}):e(le,{size:10,className:"flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-semibold",children:["[",p.segment,"]"]})," ",p.message,p.suggestion&&e("div",{className:"text-[9px] text-slate-400 mt-0.5",children:["💡 ",p.suggestion]})]})]},m)),t.validation.allIssues.filter(p=>p.severity!=="info").length===0&&e("div",{className:"text-[10px] text-green-600 flex items-center gap-1 px-1 py-1",children:[e(K,{size:10})," Solo información / Sin errores"]})]}),o&&t.validation.allIssues.length===0&&e("div",{className:"px-3 pb-2 text-[10px] text-green-600 flex items-center gap-1 border-t border-white/50 pt-1",children:[e(K,{size:10})," Sin errores ni advertencias"]})]})},ps=({isOpen:t,onClose:r,fwbMessage:a,fhlMessages:n,concatenatedFhl:o,validation:s,fhlValidations:i,houseBills:c})=>{const[d,p]=_("fwb"),[m,u]=_(!1),[l,g]=_(!1),[v,f]=_({}),S=ie(b=>{f(k=>({...k,[b]:!k[b]}))},[]),T=ie((b,k)=>{navigator.clipboard.writeText(b),k==="fwb"?(u(!0),setTimeout(()=>u(!1),2e3)):(g(!0),setTimeout(()=>g(!1),2e3))},[]);return t?e("div",{className:"fixed inset-0 z-[70] flex",children:[e("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),e("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-xl bg-white shadow-2xl flex flex-col animate-slideInRight",children:[e("div",{className:"flex items-center justify-between px-5 py-3 border-b border-slate-200 bg-slate-50",children:[e("div",{className:"flex items-center gap-2",children:[e(dt,{size:16,className:"text-purple-600"}),e("h3",{className:"font-bold text-slate-800 text-sm",children:"EDI Preview"}),e("span",{className:"text-[10px] text-slate-400 font-mono",children:"CARGO-IMP"})]}),e("button",{onClick:r,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors",children:e(De,{size:16,className:"text-slate-500"})})]}),e("div",{className:"flex border-b border-slate-200 px-5 bg-white",children:[e("button",{onClick:()=>p("fwb"),className:`px-3 py-2 text-xs font-semibold border-b-2 transition-colors ${d==="fwb"?"border-purple-600 text-purple-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"FWB/16"}),(n.length>0||o)&&e("button",{onClick:()=>p("fhl"),className:`px-3 py-2 text-xs font-semibold border-b-2 transition-colors ${d==="fhl"?"border-purple-600 text-purple-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["FHL (",n.length,")"]}),s&&e("button",{onClick:()=>p("resumen"),className:`px-3 py-2 text-xs font-semibold border-b-2 transition-colors flex items-center gap-1 ${d==="resumen"?"border-purple-600 text-purple-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:["Resumen",(()=>{const b=(s.totalErrors||0)+i.reduce((C,A)=>C+A.validation.totalErrors,0),k=(s.totalWarnings||0)+i.reduce((C,A)=>C+A.validation.totalWarnings,0);return b>0?e("span",{className:"bg-red-100 text-red-700 text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:b}):k>0?e("span",{className:"bg-amber-100 text-amber-700 text-[10px] font-bold px-1.5 py-0.5 rounded-full",children:k}):e(K,{size:10,className:"text-green-500"})})()]}),s&&e("button",{onClick:()=>p("detalle"),className:`px-3 py-2 text-xs font-semibold border-b-2 transition-colors flex items-center gap-1 ${d==="detalle"?"border-purple-600 text-purple-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:"Detalle"})]}),e("div",{className:"flex-1 overflow-y-auto",children:[d==="fwb"&&a&&e("div",{className:"p-4",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-[10px] text-slate-400 font-mono",children:["AWB: ",a.awbNumber]}),e("button",{onClick:()=>T(a.fullMessage,"fwb"),className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] font-semibold transition-colors ${m?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:m?e(se,{children:[e(K,{size:10})," Copiado"]}):e(se,{children:[e(xt,{size:10})," Copiar FWB"]})})]}),e("pre",{className:"bg-slate-900 text-green-400 p-3 rounded-lg text-[11px] font-mono whitespace-pre-wrap overflow-x-auto leading-relaxed border border-slate-700",children:a.fullMessage})]}),d==="fhl"&&e("div",{className:"p-4 space-y-2",children:o?e("div",{children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-[10px] text-slate-400 font-mono",children:"FHL Concatenado"}),e("button",{onClick:()=>T(o,"fhl"),className:`flex items-center gap-1 px-2 py-1 rounded text-[10px] font-semibold transition-colors ${l?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l?e(se,{children:[e(K,{size:10})," Copiado"]}):e(se,{children:[e(xt,{size:10})," Copiar"]})})]}),e("pre",{className:"bg-slate-900 text-cyan-400 p-3 rounded-lg text-[11px] font-mono whitespace-pre-wrap overflow-x-auto leading-relaxed border border-slate-700",children:o})]}):n.map((b,k)=>e("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[e("button",{onClick:()=>S(k),className:"w-full flex items-center justify-between px-3 py-2 bg-slate-50 hover:bg-slate-100 transition-colors text-left",children:[e("div",{className:"flex items-center gap-2",children:[e("span",{className:"bg-purple-100 text-purple-600 font-bold text-[10px] w-4 h-4 rounded-full flex items-center justify-center",children:k+1}),e("span",{className:"text-[10px] text-slate-600 font-mono font-medium",children:b.hawbNumber})]}),e("div",{className:"flex items-center gap-1.5",children:[e("button",{onClick:C=>{C.stopPropagation(),T(b.fullMessage,"fhl")},className:"flex items-center gap-1 px-2 py-0.5 rounded text-[10px] text-slate-400 hover:bg-slate-200 transition-colors",children:[e(xt,{size:9})," Copiar"]}),e(Pe,{size:12,className:`text-slate-400 transition-transform duration-200 ${v[k]?"rotate-180":""}`})]})]}),v[k]&&e("div",{className:"px-3 pb-3 pt-2",children:e("pre",{className:"bg-slate-900 text-cyan-400 p-2 rounded-lg text-[10px] font-mono whitespace-pre-wrap overflow-x-auto leading-relaxed border border-slate-700",children:b.fullMessage})})]},k))}),d==="resumen"&&s&&(()=>{const b=s.allIssues.filter(E=>E.severity==="error"),k=s.allIssues.filter(E=>E.severity==="warning"),C=new Map,A=new Map;let N=0,w=0,O=0,D=0;i.forEach(E=>{var W,re;const G=c==null?void 0:c.find(Q=>Q.hawbNumber===E.hawbNumber),ce=(G==null?void 0:G.shipperName)||((W=G==null?void 0:G.shipper)==null?void 0:W.name)||"Exportador Desconocido",be=(G==null?void 0:G.consigneeName)||((re=G==null?void 0:G.consignee)==null?void 0:re.name)||"Importador Desconocido",ye=E.validation.totalErrors>0,P=E.validation.totalWarnings>0;if(ye?O++:P||D++,N+=E.validation.totalErrors,w+=E.validation.totalWarnings,ye||P){C.has(be)||C.set(be,{actorName:be,actorType:"consignee",hawbNumbers:[],errorCount:0,warningCount:0,uniqueIssues:[]});const Q=C.get(be);Q.hawbNumbers.push(E.hawbNumber),Q.errorCount+=E.validation.totalErrors,Q.warningCount+=E.validation.totalWarnings,E.validation.allIssues.forEach(L=>{if(L.severity==="info")return;const xe=Q.uniqueIssues.find(Se=>Se.message===L.message&&Se.segment===L.segment);xe?xe.count++:Q.uniqueIssues.push({message:L.message,severity:L.severity,segment:L.segment,suggestion:L.suggestion,count:1})})}if(ye||P){A.has(ce)||A.set(ce,{actorName:ce,actorType:"shipper",hawbNumbers:[],errorCount:0,warningCount:0,uniqueIssues:[]});const Q=A.get(ce);Q.hawbNumbers.push(E.hawbNumber),Q.errorCount+=E.validation.totalErrors,Q.warningCount+=E.validation.totalWarnings,E.validation.allIssues.forEach(L=>{if(L.severity==="info")return;const xe=Q.uniqueIssues.find(Se=>Se.message===L.message&&Se.segment===L.segment);xe?xe.count++:Q.uniqueIssues.push({message:L.message,severity:L.severity,segment:L.segment,suggestion:L.suggestion,count:1})})}});const y=new Map;i.forEach(E=>{const G=new Set;E.validation.allIssues.forEach(ce=>{if(ce.severity==="info")return;const be=`${ce.segment}|${ce.message}`;G.has(be)||(G.add(be),y.has(be)||y.set(be,{message:ce.message,severity:ce.severity,segment:ce.segment,suggestion:ce.suggestion,count:0}),y.get(be).count++)})});const M=Array.from(y.values()).filter(E=>E.count>1).sort((E,G)=>E.severity==="error"&&G.severity!=="error"?-1:E.severity!=="error"&&G.severity==="error"?1:G.count-E.count),B=Array.from(C.values()).sort((E,G)=>G.errorCount-E.errorCount),ne=Array.from(A.values()).sort((E,G)=>G.errorCount-E.errorCount),Z=i.length;return e("div",{className:"p-4 space-y-4",children:[e("div",{className:`grid ${Z>0?"grid-cols-4":"grid-cols-2"} gap-2 text-center`,children:[e("div",{className:"bg-white rounded-lg border border-slate-200 p-2.5 shadow-sm",children:[e("div",{className:`text-xl font-bold ${s.score>=90?"text-green-600":s.score>=70?"text-amber-600":"text-red-600"}`,children:s.score}),e("div",{className:"text-[10px] text-slate-400",children:"Score FWB"})]}),e("div",{className:"bg-white rounded-lg border border-slate-200 p-2.5 shadow-sm",children:[e("div",{className:`text-xl font-bold ${b.length+N>0?"text-red-600":"text-green-600"}`,children:b.length+N}),e("div",{className:"text-[10px] text-slate-400",children:"Errores Total"})]}),Z>0&&e("div",{className:"bg-white rounded-lg border border-slate-200 p-2.5 shadow-sm",children:[e("div",{className:"text-xl font-bold text-green-600",children:D}),e("div",{className:"text-[10px] text-slate-400",children:"Houses OK"})]}),Z>0&&e("div",{className:"bg-white rounded-lg border border-slate-200 p-2.5 shadow-sm",children:[e("div",{className:`text-xl font-bold ${O>0?"text-red-600":"text-green-600"}`,children:O}),e("div",{className:"text-[10px] text-slate-400",children:"Houses con Error"})]})]}),b.length>0&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(Te,{size:14,className:"text-red-600"}),e("span",{className:"font-bold text-red-700 text-xs",children:["FWB — Errores Críticos (",b.length,")"]})]}),e("div",{className:"space-y-1",children:b.map((E,G)=>e("div",{className:"flex items-start gap-1.5 text-xs text-red-700 bg-red-100/50 rounded-md p-1.5",children:[e(Te,{size:11,className:"flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-semibold",children:["[",E.segment,"]"]})," ",E.message,E.suggestion&&e("div",{className:"text-[10px] text-red-500/70 mt-0.5",children:["💡 ",E.suggestion]})]})]},G))})]}),k.length>0&&b.length===0&&e("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-2.5 flex items-center gap-2",children:[e(le,{size:14,className:"text-amber-600"}),e("span",{className:"font-semibold text-amber-700 text-xs",children:["FWB — ",k.length," advertencia(s) menores"]}),e(K,{size:12,className:"text-amber-500 ml-auto"})]}),k.length>0&&b.length>0&&e("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-2 flex items-center gap-2",children:[e(le,{size:13,className:"text-amber-600"}),e("span",{className:"text-amber-700 text-[11px]",children:["+ ",k.length," advertencia(s) FWB"]})]}),b.length===0&&k.length===0&&e("div",{className:"bg-green-50 border border-green-200 rounded-lg p-2.5 flex items-center gap-2",children:[e(K,{size:14,className:"text-green-600"}),e("span",{className:"text-green-700 text-xs font-semibold",children:"FWB — Sin errores ni advertencias ✓"})]}),Z>0&&e(se,{children:[e("div",{className:"flex items-center gap-2 pt-1",children:[e("div",{className:"h-px flex-1 bg-slate-200"}),e("span",{className:"text-[10px] text-slate-400 font-semibold uppercase",children:["FHL — ",Z," House(s)"]}),e("div",{className:"h-px flex-1 bg-slate-200"})]}),M.length>0&&e("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(le,{size:14,className:"text-slate-600"}),e("span",{className:"font-bold text-slate-700 text-xs",children:"Problemas Recurrentes"}),e("span",{className:"text-[9px] text-slate-400",children:"(afectan múltiples houses)"})]}),e("div",{className:"space-y-1",children:M.slice(0,15).map((E,G)=>e("div",{className:`flex items-start gap-1.5 text-[11px] rounded-md p-1.5 ${E.severity==="error"?"bg-red-50 text-red-700 border border-red-100":"bg-amber-50 text-amber-700 border border-amber-100"}`,children:[E.severity==="error"?e(Te,{size:11,className:"flex-shrink-0 mt-0.5"}):e(le,{size:11,className:"flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-semibold",children:["[",E.segment,"]"]})," ",E.message,e("span",{className:"ml-1 px-1.5 py-0.5 rounded-full text-[9px] font-bold bg-white/80",children:[E.count,"/",Z," houses"]})]})]},G))})]}),B.length>0&&e("div",{children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(Me,{size:14,className:"text-purple-600"}),e("span",{className:"font-bold text-slate-700 text-xs uppercase tracking-wide",children:"Importadores con Problemas"}),e("span",{className:"text-[9px] text-slate-400",children:["(",B.length," importador",B.length>1?"es":"",")"]})]}),e("div",{className:"space-y-2",children:B.map((E,G)=>e(Ja,{group:E},G))})]}),ne.length>0&&e("div",{children:[e("div",{className:"flex items-center gap-2 mb-2",children:[e(lt,{size:14,className:"text-sky-600"}),e("span",{className:"font-bold text-slate-700 text-xs uppercase tracking-wide",children:"Exportadores con Problemas"}),e("span",{className:"text-[9px] text-slate-400",children:["(",ne.length," exportador",ne.length>1?"es":"",")"]})]}),e("div",{className:"space-y-2",children:ne.map((E,G)=>e(Ja,{group:E},G))})]}),N===0&&w===0&&e("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 flex items-center gap-2",children:[e(K,{size:16,className:"text-green-600"}),e("span",{className:"text-green-700 text-xs font-semibold",children:["Las ",Z," house(s) FHL pasan validación sin errores ✓"]})]})]}),e("div",{className:"bg-slate-50 rounded-lg p-2.5 flex items-center gap-2 border border-slate-200",children:[e(Ie,{size:12,className:"text-slate-400"}),e("span",{className:"text-[10px] text-slate-500",children:["Para ver cada error en detalle por segmento, consulte la pestaña ",e("button",{onClick:()=>p("detalle"),className:"font-semibold text-purple-600 hover:underline",children:"Detalle"}),"."]})]})]})})(),d==="detalle"&&(()=>{const b=i.filter(A=>A.validation.totalErrors>0).length,k=i.filter(A=>A.validation.totalErrors===0&&A.validation.totalWarnings>0).length,C=i.length-b-k;return e("div",{className:"p-4 space-y-3",children:[i.length>0&&e("div",{className:"flex items-center gap-2 flex-wrap text-[10px]",children:[e("span",{className:"text-slate-500 font-medium",children:[i.length," houses:"]}),b>0&&e("span",{className:"px-1.5 py-0.5 rounded-full bg-red-100 text-red-700 font-bold",children:[b," con errores"]}),k>0&&e("span",{className:"px-1.5 py-0.5 rounded-full bg-amber-100 text-amber-700 font-bold",children:[k," con alertas"]}),C>0&&e("span",{className:"px-1.5 py-0.5 rounded-full bg-green-100 text-green-700 font-bold",children:[C," limpios"]})]}),s&&e("details",{className:"group",open:!0,children:[e("summary",{className:"flex items-center gap-2 cursor-pointer select-none list-none rounded-lg p-2 hover:bg-slate-50 transition-colors",children:[e(ue,{size:14,className:"text-slate-400 transition-transform group-open:rotate-90 flex-shrink-0"}),e(Ie,{size:14,className:"text-purple-600"}),e("span",{className:"font-bold text-slate-700 text-xs",children:"FWB — Validación Detallada"}),e("div",{className:"flex items-center gap-1.5 ml-auto",children:[s.totalErrors>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-red-100 text-red-700 rounded-full",children:[s.totalErrors," err"]}),s.totalWarnings>0&&e("span",{className:"px-1.5 py-0.5 text-[9px] font-bold bg-amber-100 text-amber-700 rounded-full",children:[s.totalWarnings," warn"]}),s.totalErrors===0&&s.totalWarnings===0&&e(K,{size:12,className:"text-green-500"}),e("span",{className:`text-lg font-bold ${s.totalErrors>0?"text-red-600":s.totalWarnings>0?"text-amber-600":"text-green-600"}`,children:s.score})]})]}),e("div",{className:"pl-7 pt-1 pb-1",children:[e("div",{className:`rounded-lg p-2.5 mb-2 flex items-center justify-between ${s.totalErrors>0?"bg-red-50 border border-red-200":s.totalWarnings>0?"bg-amber-50 border border-amber-200":"bg-green-50 border border-green-200"}`,children:e("div",{className:`text-xs font-semibold ${s.totalErrors>0?"text-red-700":s.totalWarnings>0?"text-amber-700":"text-green-700"}`,children:s.summary})}),s.allIssues.length>0?e("div",{className:"space-y-1.5 mb-2",children:s.allIssues.map((A,N)=>e("div",{className:`rounded-lg p-2 text-xs flex items-start gap-1.5 ${A.severity==="error"?"bg-red-50 border border-red-100":A.severity==="warning"?"bg-amber-50 border border-amber-100":"bg-blue-50 border border-blue-100"}`,children:[A.severity==="error"?e(Te,{size:12,className:"text-red-500 flex-shrink-0 mt-0.5"}):A.severity==="warning"?e(le,{size:12,className:"text-amber-500 flex-shrink-0 mt-0.5"}):e(K,{size:12,className:"text-blue-500 flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("span",{className:"font-semibold text-slate-700",children:["[",A.segment,"]"]})," ",A.message,A.suggestion&&e("div",{className:"text-[10px] text-slate-400 mt-0.5",children:["💡 ",A.suggestion]}),A.found&&e("div",{className:"text-[10px] mt-0.5",children:[e("span",{className:"text-red-500 font-medium",children:"Tiene:"})," ",e("code",{className:"bg-red-100 px-1 rounded text-red-600 font-mono",children:A.found})]}),A.expected&&e("div",{className:"text-[10px]",children:[e("span",{className:"text-green-500 font-medium",children:"Espera:"})," ",e("code",{className:"bg-green-100 px-1 rounded text-green-600 font-mono",children:A.expected})]})]})]},N))}):e("div",{className:"text-center py-3 text-green-600",children:[e(K,{size:16,className:"mx-auto mb-1"}),e("div",{className:"text-xs font-semibold",children:"FWB sin errores"})]})]})]}),i.length>0&&(()=>{const[A,N]=_(void 0);return e("div",{children:[e("div",{className:"flex items-center gap-2 mb-2 pt-2 border-t border-slate-200",children:[e(Fe,{size:14,className:"text-cyan-600"}),e("span",{className:"font-bold text-slate-700 text-xs",children:["FHL — Detalle por House (",i.length,")"]}),e("div",{className:"flex items-center gap-1 ml-auto",children:[e("button",{onClick:()=>N(!0),className:"px-1.5 py-0.5 text-[9px] font-medium text-slate-500 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors",title:"Expandir todos",children:"Abrir todos"}),e("span",{className:"text-slate-300",children:"|"}),e("button",{onClick:()=>N(!1),className:"px-1.5 py-0.5 text-[9px] font-medium text-slate-500 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors",title:"Colapsar todos",children:"Cerrar todos"})]})]}),e("div",{className:"space-y-1.5 max-h-[500px] overflow-y-auto",children:i.map((w,O)=>e(ds,{entry:w,index:O,houseBills:c,forceExpand:A},O))})]})})(),i.length===0&&s&&s.totalErrors===0&&s.totalWarnings===0&&e("div",{className:"text-center py-6 text-green-600",children:[e(K,{size:24,className:"mx-auto mb-1"}),e("div",{className:"text-sm font-semibold",children:"Mensaje completamente válido"})]})]})})()]})]})]}):null},ms=({shipment:t,onOpenModal:r,onClose:a,mode:n="transmit",onTransmitSuccess:o,userRole:s})=>{var B,ne,Z,E,G,ce,be,ye;const[i,c]=_(!1),[d,p]=_(!1),[m,u]=_(null),[l,g]=_([]),[v,f]=_(!1),[S,T]=_(!1),[b,k]=_(t.hasHouses?"masterAndHouses":"masterOnly"),[C,A]=_(!1),N=ze(()=>{if(n!=="transmit")return null;try{const P=t.hasHouses&&b==="masterAndHouses",W=P?t:{...t,hasHouses:!1},re=Wt.generateMessageBundle(W),Q=Et(re.fwb,re.fwb.policy),L=P?re.fhls.map(xe=>({hawbNumber:xe.hawbNumber||"",validation:Et(xe,xe.policy)})):[];return{...re,fwbValidation:Q,fhlValidations:L}}catch(P){return console.error("Error generating EDI:",P),null}},[n,t,b]),w=ze(()=>{if(!N)return[];const P=[];return N.fwbValidation.allIssues.filter(W=>W.severity==="error").forEach(W=>P.push({source:"FWB",message:W.message,segment:W.segment,suggestion:W.suggestion})),b==="masterAndHouses"&&N.fhlValidations.forEach(W=>{W.validation.allIssues.filter(re=>re.severity==="error").forEach(re=>P.push({source:`FHL ${W.hawbNumber}`,message:re.message,segment:re.segment,suggestion:re.suggestion}))}),P},[N,b]),O=w.length>0,D=ie(()=>{var W,re,Q;const P=[];return(!t.awbNumber||t.awbNumber.length<11)&&P.push("AWB Number inválido (mínimo 11 caracteres)"),(!t.origin||t.origin.length!==3)&&P.push("Origen debe ser código IATA de 3 letras"),(!t.destination||t.destination.length!==3)&&P.push("Destino debe ser código IATA de 3 letras"),t.shipper.name||P.push("Nombre del Shipper es obligatorio"),t.consignee.name||P.push("Nombre del Consignee es obligatorio"),t.agent.name||P.push("Nombre del Agente es obligatorio"),t.agent.iataCode||P.push("Código IATA del Agente es obligatorio"),t.pieces<=0&&P.push("Piezas debe ser mayor a 0"),t.weight<=0&&P.push("Peso debe ser mayor a 0"),(!((W=t.descartesConfig)!=null&&W.endpoint)||!((re=t.descartesConfig)!=null&&re.username)||!((Q=t.descartesConfig)!=null&&Q.password))&&P.push("Configuración de Descartes incompleta"),P},[t]),y=ie(async(P=!1)=>{var re,Q;if(O&&!P){A(!0);return}const W=D();if(W.length>0&&!P){g(W),f(!0);return}if(g([]),f(!1),A(!1),!((re=N==null?void 0:N.fwb)!=null&&re.fullMessage)){g(["No se pudo generar el mensaje EDI."]);return}if(!t.descartesConfig){g(["Configuración de Descartes no disponible."]);return}p(!0),u(null);try{const L=new $a({endpoint:t.descartesConfig.endpoint,username:t.descartesConfig.username,password:t.descartesConfig.password,proxyUrl:t.descartesConfig.proxyUrl}),xe=N.fwb.fullMessage;let Se=[],je=[];b==="masterAndHouses"&&t.hasHouses&&N.fhls.length>0&&(Se=N.fhls.map($=>$.fullMessage),je=((Q=t.houseBills)==null?void 0:Q.map($=>$.hawbNumber))||[]);const Ue=await L.sendBundle(xe,t.awbNumber,Se,je);u(Ue),Ue.allSuccess&&o&&o(t.id,Ue.summary)}catch(L){const xe=L instanceof Error?L.message:"Error desconocido";g([`Error de transmisión: ${xe}`])}finally{p(!1)}},[D,N,t,o,b,O]),M=!!((B=t.descartesConfig)!=null&&B.endpoint&&((ne=t.descartesConfig)!=null&&ne.username)&&((Z=t.descartesConfig)!=null&&Z.password));return e("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[e("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:a}),e("div",{className:"relative z-10 w-full max-w-4xl max-h-[92vh] mx-4 bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[e("header",{className:"flex items-center justify-between px-5 py-3 border-b border-slate-200 bg-white flex-shrink-0",children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:"bg-purple-600 p-1.5 rounded-lg text-white",children:e(at,{size:16})}),e("h1",{className:"text-sm font-bold",style:{background:"linear-gradient(to right, #7c3aed, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"CARGO-IMP EDI Connector"})]}),e("div",{className:"flex items-center gap-3",children:[e("span",{className:"text-[10px] text-slate-400",children:["Authenticated: ",e("span",{className:"font-semibold text-green-600",children:"Connected"})]}),e("button",{onClick:a,className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors text-slate-400 hover:text-slate-600",title:"Cerrar",children:e(De,{size:16})})]})]}),e("div",{className:"flex-1 overflow-y-auto",children:e("div",{className:"px-5 py-4",children:[e("div",{className:"rounded-xl p-5 text-white shadow-lg mb-4",style:{background:"linear-gradient(to bottom right, #9333ea, #7c3aed, #6b21a8)"},children:e("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e("div",{children:[e("div",{className:"flex items-center gap-2 mb-1",children:[e(Fe,{size:14,className:"opacity-80"}),e("span",{className:"text-purple-200 text-[10px] font-medium uppercase tracking-wider",children:"Air Waybill"})]}),e("h2",{className:"text-2xl md:text-3xl font-bold font-mono tracking-wide",children:t.awbNumber}),e("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e(cs,{status:t.status}),t.hasHouses?e("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-sky-400/20 text-sky-100 border border-sky-400/30",children:[e(qe,{size:10,className:"mr-1"}),((E=t.houseBills)==null?void 0:E.length)||0," Houses"]}):e("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-white/20 text-white border border-white/30",children:[e(Fe,{size:10,className:"mr-1"}),"Directo"]}),n==="transmit"&&N&&e("button",{onClick:()=>c(!0),className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-green-400/20 text-green-100 border border-green-400/30 hover:bg-green-400/30 transition-colors cursor-pointer",children:[e(xt,{size:10,className:"mr-1"}),"Ver EDI",(()=>{var W;const P=N.fwbValidation.totalErrors+(((W=N.fhlValidations)==null?void 0:W.reduce((re,Q)=>re+Q.validation.totalErrors,0))||0);return P>0?e("span",{className:"ml-1 bg-red-500 text-white text-[9px] font-bold px-1 py-0.5 rounded-full",children:P}):e(K,{size:9,className:"ml-1 text-green-300"})})()]})]})]}),n==="transmit"?e("button",{onClick:()=>O?A(!0):y(!1),disabled:d||!M,className:`font-semibold px-5 py-2.5 rounded-lg shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center gap-2 text-sm flex-shrink-0 ${d?"bg-purple-200 text-purple-400 cursor-not-allowed":O?"bg-red-200 text-red-600 hover:bg-red-300 cursor-pointer":m!=null&&m.allSuccess?"bg-green-500 text-white hover:bg-green-600":M?"bg-white text-purple-700 hover:bg-purple-50":"bg-white/50 text-purple-300 cursor-not-allowed"}`,children:d?e(se,{children:[e(dr,{size:16,className:"animate-spin"}),e("span",{children:"Transmitiendo..."})]}):O?e(se,{children:[e(Te,{size:16}),e("span",{children:[w.length," Error(es)"]})]}):m!=null&&m.allSuccess?e(se,{children:[e(K,{size:16}),e("span",{children:"Transmitido"})]}):e(se,{children:[e(Nt,{size:16}),e("span",{children:"Transmitir"}),e(ue,{size:16})]})}):e("button",{onClick:r,className:"bg-white text-purple-700 hover:bg-purple-50 font-semibold px-5 py-2.5 rounded-lg shadow-lg transition-all transform hover:scale-105 active:scale-95 flex items-center gap-2 text-sm flex-shrink-0",children:[e(Nt,{size:16}),e("span",{children:t.status==="DRAFT"?"Revisar y Enviar":"Ver Detalles"}),e(ue,{size:16})]})]})}),n==="transmit"&&d&&e("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4 flex items-center gap-3 animate-pulse",children:[e(dr,{size:18,className:"text-purple-600 animate-spin"}),e("div",{children:[e("div",{className:"font-semibold text-purple-700 text-sm",children:"Transmitiendo a Descartes..."}),e("div",{className:"text-xs text-purple-500",children:"Enviando mensajes EDI"})]})]}),n==="transmit"&&l.length>0&&!d&&e("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"flex items-center gap-1.5",children:[e(le,{size:14,className:"text-red-600"}),e("span",{className:"font-bold text-red-700 text-xs",children:["Errores (",l.length,")"]})]}),e("button",{onClick:()=>{g([]),f(!1)},className:"text-red-400 hover:text-red-600 p-0.5",children:e(De,{size:14})})]}),e("div",{className:"space-y-1 max-h-[120px] overflow-y-auto",children:l.map((P,W)=>e("div",{className:"flex items-start gap-1.5 text-xs text-red-700",children:[e(Te,{size:11,className:"flex-shrink-0 mt-0.5"}),e("span",{children:P})]},W))}),v&&e("div",{className:"flex items-center gap-2 mt-3 pt-2 border-t border-red-200",children:[e("button",{onClick:()=>y(!0),className:"px-3 py-1 bg-amber-600 text-white text-xs font-semibold rounded-lg hover:bg-amber-700 transition-colors",children:"Transmitir de todas formas"}),e("button",{onClick:()=>{f(!1),g([])},className:"px-3 py-1 text-amber-600 text-xs font-semibold hover:bg-amber-50 rounded-lg transition-colors",children:"Cancelar"})]})]}),n==="transmit"&&m&&!d&&e("div",{className:`rounded-lg p-4 mb-4 border ${m.allSuccess?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"flex items-center gap-1.5",children:[m.allSuccess?e(K,{size:14,className:"text-green-600"}):e(Te,{size:14,className:"text-red-600"}),e("span",{className:`font-bold text-xs ${m.allSuccess?"text-green-700":"text-red-700"}`,children:m.summary})]}),e("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-0.5",children:e(De,{size:14})})]}),e("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e("div",{className:"bg-white/70 rounded p-1.5 text-center",children:[e("div",{className:"font-bold text-slate-700",children:m.totalSent}),e("div",{className:"text-[10px] text-slate-400",children:"Enviados"})]}),e("div",{className:"bg-white/70 rounded p-1.5 text-center",children:[e("div",{className:"font-bold text-green-600",children:m.totalSuccess}),e("div",{className:"text-[10px] text-slate-400",children:"Exitosos"})]}),e("div",{className:"bg-white/70 rounded p-1.5 text-center",children:[e("div",{className:"font-bold text-red-600",children:m.totalFailed}),e("div",{className:"text-[10px] text-slate-400",children:"Fallidos"})]})]}),e("div",{className:"mt-2 space-y-1 text-[10px]",children:[e("div",{className:`flex items-center gap-1.5 ${m.fwbResult.success?"text-green-600":"text-red-600"}`,children:[m.fwbResult.success?e(K,{size:10}):e(Te,{size:10}),e("span",{className:"font-mono",children:["FWB ",m.fwbResult.reference]}),((G=m.fwbResult.descartesResponse)==null?void 0:G.tid)&&e("span",{className:"text-slate-400 ml-1",children:["TID: ",m.fwbResult.descartesResponse.tid]}),m.fwbResult.error&&e("span",{className:"text-red-500 ml-1",children:m.fwbResult.error})]}),m.fhlResults.map((P,W)=>{var re;return e("div",{className:`flex items-center gap-1.5 ${P.success?"text-green-600":"text-red-600"}`,children:[P.success?e(K,{size:10}):e(Te,{size:10}),e("span",{className:"font-mono",children:["FHL ",P.reference]}),((re=P.descartesResponse)==null?void 0:re.tid)&&e("span",{className:"text-slate-400 ml-1",children:["TID: ",P.descartesResponse.tid]}),P.error&&e("span",{className:"text-red-500 ml-1",children:P.error})]},W)})]})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e("div",{className:"bg-white rounded-lg border border-slate-200 p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-1.5 mb-2 text-purple-600",children:[e(zt,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"Ruta"})]}),e("div",{className:"flex items-center justify-between",children:[e("div",{className:"text-center",children:[e("div",{className:"text-xl font-bold text-slate-900",children:t.origin}),e("div",{className:"text-[9px] text-slate-400 uppercase",children:"Origen"})]}),e("div",{className:"flex-1 mx-3 relative",children:[e("div",{className:"h-0.5 bg-gradient-to-r from-sky-300 to-purple-500 rounded-full"}),e(at,{size:14,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-purple-600 bg-white"})]}),e("div",{className:"text-center",children:[e("div",{className:"text-xl font-bold text-slate-900",children:t.destination}),e("div",{className:"text-[9px] text-slate-400 uppercase",children:"Destino"})]})]}),t.flights&&t.flights.length>0&&e("div",{className:"mt-2 pt-2 border-t border-slate-100 flex items-center gap-3 text-[10px] text-slate-500",children:[e("span",{className:"font-mono font-semibold",children:t.flights[0].flightNumber}),e("span",{children:t.flights[0].date}),t.flights.length>1&&e("span",{className:"text-purple-600 font-semibold",children:["+",t.flights.length-1," vuelos"]})]})]}),e("div",{className:"bg-white rounded-lg border border-slate-200 p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-1.5 mb-2 text-green-600",children:[e(Wa,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"Carga"})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"bg-slate-50 rounded-lg p-2 text-center",children:[e("div",{className:"text-lg font-bold text-slate-900",children:t.pieces}),e("div",{className:"text-[9px] text-slate-400 uppercase",children:"Piezas"})]}),e("div",{className:"bg-slate-50 rounded-lg p-2 text-center",children:[e("div",{className:"text-lg font-bold text-slate-900",children:t.weight}),e("div",{className:"text-[9px] text-slate-400 uppercase",children:t.weightUnit==="KILOGRAM"?"KG":"LB"})]})]})]})]}),e("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[e("div",{className:"bg-white rounded-lg border border-slate-200 p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-1.5 mb-1.5 text-sky-600",children:[e(lt,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"Shipper"})]}),e("div",{className:"text-slate-900 font-medium text-sm",children:t.shipper.name}),e("div",{className:"text-[11px] text-slate-500 mt-0.5",children:[t.shipper.address.place,", ",t.shipper.address.countryCode]})]}),e("div",{className:"bg-white rounded-lg border border-slate-200 p-3 shadow-sm",children:[e("div",{className:"flex items-center gap-1.5 mb-1.5 text-purple-600",children:[e(Me,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"Consignee"})]}),e("div",{className:"text-slate-900 font-medium text-sm",children:t.consignee.name}),e("div",{className:"text-[11px] text-slate-500 mt-0.5",children:[t.consignee.address.place,", ",t.consignee.address.countryCode]})]})]}),e("div",{className:"bg-white rounded-lg border border-slate-200 p-3 shadow-sm mb-3",children:[e("div",{className:"flex items-center gap-1.5 mb-1.5 text-amber-600",children:[e(_r,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"Agente"})]}),e("div",{className:"flex items-center justify-between",children:[e("div",{children:[e("div",{className:"text-slate-900 font-medium text-sm",children:t.agent.name}),e("div",{className:"text-[11px] text-slate-500",children:[t.agent.place,(ce=t.agent.address)!=null&&ce.countryCode?`, ${t.agent.address.countryCode}`:""]})]}),e("div",{className:"text-right",children:[e("div",{className:"text-[10px] text-slate-400",children:"IATA"}),e("div",{className:"font-mono font-bold text-slate-800 text-sm",children:t.agent.iataCode})]})]})]}),t.description&&e("div",{className:"bg-slate-50 rounded-lg px-3 py-2 text-center text-[11px] mb-3",children:[e("span",{className:"text-slate-500",children:"Descripción: "}),e("span",{className:"font-medium text-slate-700",children:t.description})]}),t.specialHandlingCodes&&t.specialHandlingCodes.length>0&&e("div",{className:"bg-purple-50 rounded-lg px-3 py-2 border border-purple-200 mb-3",children:[e("div",{className:"flex items-center gap-1.5 mb-1 text-purple-700",children:[e(mr,{size:12}),e("span",{className:"font-semibold text-[10px]",children:"SPH"})]}),e("div",{className:"flex flex-wrap gap-1",children:t.specialHandlingCodes.map(P=>e("span",{className:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded-full text-[10px] font-mono font-bold",children:P},P))})]}),t.hasHouses&&t.houseBills&&t.houseBills.length>0&&e("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm mb-3 overflow-hidden",children:[e("button",{onClick:()=>T(!S),className:"w-full flex items-center justify-between p-3 hover:bg-slate-50 transition-colors text-left",children:[e("div",{className:"flex items-center gap-1.5 text-purple-600",children:[e(qe,{size:13}),e("h3",{className:"font-semibold text-slate-800 text-xs",children:"House Waybills"}),e("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full font-medium ml-1",children:[t.houseBills.length," houses"]})]}),e(Pe,{size:14,className:`text-slate-400 transition-transform duration-200 ${S?"rotate-180":""}`})]}),S&&e("div",{className:"px-3 pb-3 border-t border-slate-100",children:e("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1.5 pt-2 max-h-[200px] overflow-y-auto",children:t.houseBills.map((P,W)=>e("div",{className:"flex items-center gap-1.5 bg-slate-50 rounded px-2 py-1.5 text-[10px]",children:[e("span",{className:"bg-purple-100 text-purple-600 font-bold w-4 h-4 rounded-full flex items-center justify-center text-[9px] flex-shrink-0",children:W+1}),e("div",{className:"flex-1 min-w-0",children:[e("div",{className:"font-mono font-medium text-slate-800 truncate",children:P.hawbNumber}),e("div",{className:"text-slate-400 truncate",children:[P.pieces,"pcs • ",P.weight,"kg"]})]})]},P.id||W))})})]})]})}),e("footer",{className:"border-t border-slate-200 px-5 py-3 flex-shrink-0 bg-slate-50",children:[n==="transmit"&&e("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-slate-100",children:[e("div",{className:"flex items-center gap-3",children:[t.hasHouses&&e("div",{className:"flex items-center gap-2",children:[e("label",{className:"text-[10px] text-purple-600 uppercase font-bold",children:"Contenido"}),e("select",{value:b,onChange:P=>k(P.target.value),className:"text-xs border border-purple-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-purple-500 outline-none bg-white font-medium",children:[e("option",{value:"masterAndHouses",children:`FWB + ${((be=t.houseBills)==null?void 0:be.length)||0} FHL`}),e("option",{value:"masterOnly",children:"Solo FWB (Master)"})]})]}),e("span",{className:"text-[10px] text-slate-400",children:b==="masterOnly"?"📦 Modo Directo — NG (Nature of Goods) como descripción":t.hasHouses?`📦 Consolidado — NC + ${((ye=t.houseBills)==null?void 0:ye.length)||0} houses`:"📦 Envío directo"})]}),N&&e("div",{className:"flex items-center gap-1.5",children:O?e("span",{className:"flex items-center gap-1 text-[10px] font-semibold text-red-600 bg-red-50 px-2 py-1 rounded-full border border-red-200",children:[e(Te,{size:11}),w.length," error(es) — Corregir antes de transmitir"]}):e("span",{className:"flex items-center gap-1 text-[10px] font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-full border border-green-200",children:[e(K,{size:11}),"Listo para transmitir"]})})]}),e("div",{className:"flex items-center justify-between",children:[e("div",{className:"text-[10px] text-slate-400",children:[e("span",{className:"font-semibold",children:t.status})," • ",b==="masterOnly"?"Directo":t.hasHouses?"Consolidado":"Directo",n==="transmit"&&N&&e("span",{children:[" • EDI: FWB/16",b==="masterAndHouses"&&N.fhls.length>0?` + ${N.fhls.length} FHL`:""]})]}),e("div",{className:"flex items-center gap-2",children:[n==="transmit"&&N&&e("button",{onClick:()=>c(!0),className:"px-3 py-1.5 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors text-xs font-medium flex items-center gap-1.5 border border-purple-200",children:[e(Tt,{size:12}),"Ver EDI"]}),n==="transmit"&&(s==null?void 0:s.toUpperCase())==="ADM"&&e("button",{onClick:r,className:"px-3 py-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-xs font-medium flex items-center gap-1.5 border border-slate-200",children:[e(Ie,{size:12}),"Editor Completo"]}),e("button",{onClick:a,className:"px-4 py-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg transition-colors text-xs font-medium",children:"Cancelar"}),n==="transmit"?e("button",{onClick:()=>y(!1),disabled:d||!M||O,title:O?"Corrija los errores de validación antes de transmitir":void 0,className:`px-4 py-1.5 rounded-lg transition-colors text-xs font-semibold flex items-center gap-1.5 shadow-sm ${d?"bg-purple-300 text-white cursor-not-allowed":O?"bg-red-100 text-red-400 cursor-not-allowed border border-red-200":m!=null&&m.allSuccess?"bg-green-600 hover:bg-green-700 text-white":M?"bg-purple-600 hover:bg-purple-700 text-white":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:d?e(se,{children:[e(dr,{size:12,className:"animate-spin"})," Transmitiendo..."]}):O?e(se,{children:[e(Te,{size:12})," Errores pendientes"]}):m!=null&&m.allSuccess?e(se,{children:[e(K,{size:12})," Transmitido"]}):e(se,{children:[e(Nt,{size:12})," Transmitir"]})}):e("button",{onClick:r,className:"px-4 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-xs font-semibold flex items-center gap-1.5 shadow-sm",children:[e(Nt,{size:12}),t.status==="DRAFT"?"Revisar y Enviar":"Ver Detalles"]})]})]}),e("div",{className:"text-center mt-2 pt-2 border-t border-slate-100",children:e("p",{className:"text-[9px] text-slate-300",children:["Powered by ",e("span",{className:"font-semibold text-slate-400",children:"Avatar Cargo"})]})})]})]}),C&&O&&e("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[e("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>A(!1)}),e("div",{className:"relative z-10 w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl overflow-hidden animate-slideInRight",children:[e("div",{className:"flex items-center justify-between px-5 py-3 bg-red-50 border-b border-red-200",children:[e("div",{className:"flex items-center gap-2",children:[e("div",{className:"bg-red-600 p-1.5 rounded-lg text-white",children:e(Te,{size:16})}),e("div",{children:[e("h3",{className:"font-bold text-red-800 text-sm",children:"Errores que Bloquean la Transmisión"}),e("p",{className:"text-[10px] text-red-600",children:"Corrija estos errores en el sistema antes de poder transmitir"})]})]}),e("button",{onClick:()=>A(!1),className:"p-1.5 hover:bg-red-100 rounded-lg transition-colors",children:e(De,{size:16,className:"text-red-400"})})]}),e("div",{className:"p-4 max-h-[50vh] overflow-y-auto space-y-1.5",children:w.map((P,W)=>e("div",{className:"flex items-start gap-2 bg-red-50 border border-red-100 rounded-lg p-2.5 text-xs",children:[e(Te,{size:12,className:"text-red-500 flex-shrink-0 mt-0.5"}),e("div",{className:"flex-1 min-w-0",children:[e("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-red-200 text-red-800",children:P.source}),e("span",{className:"text-[10px] font-semibold text-slate-600",children:["[",P.segment,"]"]})]}),e("div",{className:"text-red-700",children:P.message}),P.suggestion&&e("div",{className:"text-[10px] text-red-500/70 mt-0.5",children:["💡 ",P.suggestion]})]})]},W))}),e("div",{className:"px-5 py-3 bg-slate-50 border-t border-slate-200 flex items-center justify-between",children:[e("div",{className:"text-[10px] text-slate-500",children:[w.length," error(es) deben corregirse en el sistema origen"]}),e("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>{A(!1),c(!0)},className:"px-3 py-1.5 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors text-xs font-medium flex items-center gap-1.5 border border-purple-200",children:[e(Tt,{size:12}),"Ver Detalle EDI"]}),e("button",{onClick:()=>A(!1),className:"px-4 py-1.5 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors text-xs font-semibold",children:"Entendido"})]})]})]})]}),n==="transmit"&&e(ps,{isOpen:i,onClose:()=>c(!1),fwbMessage:(N==null?void 0:N.fwb)||null,fhlMessages:(N==null?void 0:N.fhls)||[],concatenatedFhl:N==null?void 0:N.concatenatedFhl,validation:(N==null?void 0:N.fwbValidation)||null,fhlValidations:(N==null?void 0:N.fhlValidations)||[],houseBills:t.houseBills})]})},Mr=[{id:"uat-consolidado-20251217-001",status:"DRAFT",awbNumber:"145-11223344",origin:"BOG",destination:"MIA",pieces:75,weight:1275,weightUnit:"KILOGRAM",volume:7.5,volumeUnit:"CUBIC_METRE",dimensions:[{pieces:75,length:100,width:40,height:25,unit:"CENTIMETRE"}],description:"CONSOLIDATE FLOWERS",commodityCode:"0609",currency:"USD",paymentMethod:"Collect",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:75,weight:1275,chargeableWeight:1350,rateClassCode:"Q",rateOrCharge:1.1,total:1485,description:"CONSOLIDATE FLOWERS",commodityCode:"0609"}],otherCharges:[],oci:[{countryCode:"US",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["EAP","PER"],hasHouses:!0,houseBills:[{id:"h1",hawbNumber:"HAWB20251217A",pieces:25,weight:425,shipperName:"FINCA LAS ROSAS SAS",consigneeName:"BLOOM MIAMI LLC",natureOfGoods:"ROSES RED",commonName:"RED ROSES"},{id:"h2",hawbNumber:"HAWB20251217B",pieces:25,weight:425,shipperName:"FLORES DEL CAMPO LTDA",consigneeName:"SUNNY FLOWERS INC",natureOfGoods:"CARNATIONS",commonName:"CARNATIONS"},{id:"h3",hawbNumber:"HAWB20251217C",pieces:25,weight:425,shipperName:"ORQUIDEAS COLOMBIA SAS",consigneeName:"ORCHID WORLD USA",natureOfGoods:"ORCHIDS",commonName:"ORCHIDS"}],shipper:{name:"CONSOLIDADORA FLORES COLOMBIA SAS",address:{street:"CRA 7 NO 140-20 PISO 3",place:"BOGOTA",countryCode:"CO",postalCode:"110121"}},consignee:{name:"USA FLOWER DISTRIBUTORS LLC",address:{street:"8000 NW 36TH STREET SUITE 200",place:"DORAL",state:"FL",countryCode:"US",postalCode:"33166"}},flights:[{flightNumber:"LA4567",date:"2025-12-18",origin:"BOG",destination:"MIA",carrierCode:"LA"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]},{id:"uat-directo-20251217-002",status:"DRAFT",awbNumber:"145-55667788",origin:"BOG",destination:"MIA",pieces:25,weight:425,weightUnit:"KILOGRAM",volume:2.5,volumeUnit:"CUBIC_METRE",dimensions:[{pieces:25,length:100,width:40,height:25,unit:"CENTIMETRE"}],description:"CUT FLOWERS",commodityCode:"0603",currency:"USD",paymentMethod:"Collect",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:25,weight:425,chargeableWeight:450,rateClassCode:"Q",rateOrCharge:1.1,total:495,description:"CUT FLOWERS",commodityCode:"0603"}],otherCharges:[],oci:[{countryCode:"US",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["EAP","PER"],hasHouses:!1,houseBills:[],shipper:{name:"FLORES DIRECTAS DE COLOMBIA SAS",address:{street:"CRA 7 NO 140-20 PISO 3",place:"BOGOTA",countryCode:"CO",postalCode:"110121"}},consignee:{name:"DIRECT FLOWERS USA INC",address:{street:"8000 NW 36TH STREET SUITE 100",place:"DORAL",state:"FL",countryCode:"US",postalCode:"33166"}},flights:[{flightNumber:"LA4567",date:"2025-12-18",origin:"BOG",destination:"MIA",carrierCode:"LA"},{flightNumber:"AA1234",date:"2025-12-18",origin:"MIA",destination:"JFK",carrierCode:"AA"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]},{id:"uat-iberia-20251217-003",status:"DRAFT",awbNumber:"075-99887766",origin:"BOG",destination:"MAD",pieces:30,weight:510,weightUnit:"KILOGRAM",volume:3,volumeUnit:"CUBIC_METRE",dimensions:[],description:"FRESH FLOWERS",commodityCode:"0603",currency:"USD",paymentMethod:"Prepaid",routing:{senderAddress:"REUFFW90AVTOPF/BOG01",recipientAddress:"USCAIR01LUXXSXS"},agent:{name:"AVTOPF CARGO SAS",iataCode:"1234567",cassCode:"0016",place:"BOGOTA"},executionDate:"2025-12-17",executionPlace:"BOGOTA",signature:"AVTOPF",rates:[{pieces:30,weight:510,chargeableWeight:540,rateClassCode:"Q",rateOrCharge:1.5,total:810,description:"FRESH FLOWERS",commodityCode:"0603"}],otherCharges:[{code:"MY",entitlement:"DueCarrier",amount:25,paymentMethod:"Prepaid"},{code:"AW",entitlement:"DueAgent",amount:15,paymentMethod:"Prepaid"}],oci:[{countryCode:"ES",infoIdentifier:"ISS",controlInfo:"REGULATED_AGENT",supplementaryControlInfo:"RA-CO-01234-567"}],specialHandlingCodes:["ECC","EAP","PER"],hasHouses:!1,houseBills:[],shipper:{name:"EXPORTADORA FLORES IBERIA SAS",address:{street:"CALLE 100 NO 20-30",place:"BOGOTA",countryCode:"CO",postalCode:"110111"}},consignee:{name:"FLORES MADRID SL",address:{street:"CALLE GRAN VIA 123",place:"MADRID",countryCode:"ES",postalCode:"28013"}},flights:[{flightNumber:"IB6524",date:"2025-12-18",origin:"BOG",destination:"MAD",carrierCode:"IB"}],descartesConfig:{endpoint:"https://wwwtest.myvan.descartes.com/HttpUpload/SimpleUploadHandler.aspx",username:"jgamboa3@gln.com",password:"Avatar4570!",enabled:!0},logs:[]}],gs=`
/* Reset básico para Shadow DOM del Portal */
:host {
  /* No usar all: initial para evitar perder estilos de Tailwind en prod */
  display: block !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 2147483647 !important;
  pointer-events: none !important;
  /* Forzar nuevo stacking context */
  isolation: isolate !important;
  contain: layout style !important;
}

:host([data-visible="true"]) {
  pointer-events: auto !important;
}

/* Contenedor raíz del portal */
#cargo-imp-portal-mount {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 2147483647 !important;
  pointer-events: none !important;
}

#cargo-imp-portal-mount:has(.modal-overlay),
#cargo-imp-portal-mount:has(.fixed) {
  pointer-events: auto !important;
}

*, *::before, *::after {
  box-sizing: border-box;
}

/* ===================================================== */
/* ESTILOS CRÍTICOS PARA PRODUCCIÓN                     */
/* Aseguran layout correcto independiente de Tailwind   */
/* ===================================================== */

/* Flexbox container para la vista fullscreen */
.fixed.inset-0.flex.flex-col {
  display: flex !important;
  flex-direction: column !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Flex-1 para contenido scrolleable */
.flex-1 {
  flex: 1 1 0% !important;
}

/* Flex-shrink-0 para header/footer */
.flex-shrink-0 {
  flex-shrink: 0 !important;
}

/* Overflow para scrolling */
.overflow-y-auto {
  overflow-y: auto !important;
}

.overflow-hidden {
  overflow: hidden !important;
}

/* Footer siempre visible al fondo */
footer.flex-shrink-0 {
  flex-shrink: 0 !important;
  margin-top: auto !important;
}

/* Header siempre arriba */
header.flex-shrink-0 {
  flex-shrink: 0 !important;
}

/* Modal overlay */
.modal-overlay {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background-color: rgba(0, 0, 0, 0.5) !important;
  z-index: 50 !important;
}

/* Modal content */
.modal-content {
  display: flex !important;
  flex-direction: column !important;
  background-color: white !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
  max-height: 88vh !important;
  overflow: hidden !important;
}

/* Grids básicos */
.grid {
  display: grid !important;
}

.grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
.grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
.grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)) !important; }
.grid-cols-5 { grid-template-columns: repeat(5, minmax(0, 1fr)) !important; }
.grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)) !important; }

/* Gap */
.gap-1 { gap: 0.25rem !important; }
.gap-2 { gap: 0.5rem !important; }
.gap-3 { gap: 0.75rem !important; }
.gap-4 { gap: 1rem !important; }
.gap-6 { gap: 1.5rem !important; }

/* Padding y margin críticos */
.p-4 { padding: 1rem !important; }
.p-6 { padding: 1.5rem !important; }
.px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
.px-6 { padding-left: 1.5rem !important; padding-right: 1.5rem !important; }
.py-2 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
.py-3 { padding-top: 0.75rem !important; padding-bottom: 0.75rem !important; }
.py-4 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
.py-6 { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
.mb-4 { margin-bottom: 1rem !important; }
.mb-6 { margin-bottom: 1.5rem !important; }

/* Colores de fondo críticos */
.bg-white { background-color: #ffffff !important; }
.bg-gray-50 { background-color: #f9fafb !important; }
.bg-slate-50 { background-color: #f8fafc !important; }
.bg-purple-50 { background-color: #faf5ff !important; }
.bg-purple-600 { background-color: #9333ea !important; }
.bg-purple-700 { background-color: #7c3aed !important; }

/* Colores de texto críticos */
.text-white { color: #ffffff !important; }
.text-slate-500 { color: #64748b !important; }
.text-slate-600 { color: #475569 !important; }
.text-slate-700 { color: #334155 !important; }
.text-slate-800 { color: #1e293b !important; }
.text-slate-900 { color: #0f172a !important; }
.text-purple-600 { color: #9333ea !important; }
.text-purple-700 { color: #7c3aed !important; }

/* Bordes */
.border { border-width: 1px !important; border-style: solid !important; }
.border-t { border-top-width: 1px !important; border-top-style: solid !important; }
.border-b { border-bottom-width: 1px !important; border-bottom-style: solid !important; }
.border-slate-100 { border-color: #f1f5f9 !important; }
.border-slate-200 { border-color: #e2e8f0 !important; }
.border-slate-300 { border-color: #cbd5e1 !important; }

/* Rounded */
.rounded { border-radius: 0.25rem !important; }
.rounded-lg { border-radius: 0.5rem !important; }
.rounded-xl { border-radius: 0.75rem !important; }
.rounded-2xl { border-radius: 1rem !important; }
.rounded-full { border-radius: 9999px !important; }

/* Shadow */
.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important; }
.shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important; }
.shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important; }
.shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important; }

/* CRÍTICO: Gradientes de fondo para vista CompactAwbView */
.bg-gradient-to-br {
  background-image: linear-gradient(to bottom right, var(--tw-gradient-stops)) !important;
}
.bg-gradient-to-r {
  background-image: linear-gradient(to right, var(--tw-gradient-stops)) !important;
}
.from-slate-100 { --tw-gradient-from: #f1f5f9 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(241, 245, 249, 0)) !important; }
.via-purple-50 { --tw-gradient-stops: var(--tw-gradient-from), #faf5ff, var(--tw-gradient-to, rgba(250, 245, 255, 0)) !important; }
.to-indigo-100 { --tw-gradient-to: #e0e7ff !important; }
.from-purple-600 { --tw-gradient-from: #9333ea !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(147, 51, 234, 0)) !important; }
.to-indigo-600 { --tw-gradient-to: #4f46e5 !important; }
.from-purple-700 { --tw-gradient-from: #7c3aed !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(124, 58, 237, 0)) !important; }
.via-purple-800 { --tw-gradient-stops: var(--tw-gradient-from), #6b21a8, var(--tw-gradient-to, rgba(107, 33, 168, 0)) !important; }
.to-indigo-900 { --tw-gradient-to: #312e81 !important; }
.from-sky-300 { --tw-gradient-from: #7dd3fc !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(125, 211, 252, 0)) !important; }
.to-purple-500 { --tw-gradient-to: #a855f7 !important; }
.from-sky-400 { --tw-gradient-from: #38bdf8 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(56, 189, 248, 0)) !important; }
.from-purple-400 { --tw-gradient-from: #c084fc !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(192, 132, 252, 0)) !important; }
.to-purple-600 { --tw-gradient-to: #9333ea !important; }

/* CRÍTICO: Gradientes para header del modal de pre-transmisión */
.from-emerald-500 { --tw-gradient-from: #10b981 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(16, 185, 129, 0)) !important; }
.to-green-500 { --tw-gradient-to: #22c55e !important; }
.from-red-500 { --tw-gradient-from: #ef4444 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(239, 68, 68, 0)) !important; }
.to-orange-500 { --tw-gradient-to: #f97316 !important; }
.from-amber-400 { --tw-gradient-from: #fbbf24 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(251, 191, 36, 0)) !important; }
.to-orange-400 { --tw-gradient-to: #fb923c !important; }

/* Backdrop blur */
.backdrop-blur-sm { backdrop-filter: blur(4px) !important; -webkit-backdrop-filter: blur(4px) !important; }

/* Opacidad de fondo blanco */
.bg-white/80 { background-color: rgba(255, 255, 255, 0.8) !important; }
.bg-white/20 { background-color: rgba(255, 255, 255, 0.2) !important; }

/* Colores adicionales de fondo */
.bg-indigo-100 { background-color: #e0e7ff !important; }
.bg-sky-400/20 { background-color: rgba(56, 189, 248, 0.2) !important; }

/* Sticky positioning */
.sticky { position: sticky !important; }
.top-0 { top: 0 !important; }
.z-10 { z-index: 10 !important; }

/* Colores de texto adicionales */
.text-purple-200 { color: #e9d5ff !important; }
.text-sky-100 { color: #e0f2fe !important; }
.text-green-600 { color: #16a34a !important; }
.text-sky-600 { color: #0284c7 !important; }
.text-amber-700 { color: #b45309 !important; }
.text-red-700 { color: #b91c1c !important; }
.text-indigo-600 { color: #4f46e5 !important; }

/* Bordes adicionales */
.border-sky-400/30 { border-color: rgba(56, 189, 248, 0.3) !important; }
.border-white/30 { border-color: rgba(255, 255, 255, 0.3) !important; }

/* Colores de fondo para estados */
.bg-gray-100 { background-color: #f3f4f6 !important; }
.text-gray-600 { color: #4b5563 !important; }
.bg-amber-100 { background-color: #fef3c7 !important; }
.bg-green-100 { background-color: #dcfce7 !important; }
.text-green-700 { color: #15803d !important; }
.bg-red-100 { background-color: #fee2e2 !important; }

/* Overflow */
.overflow-auto { overflow: auto !important; }

/* Flexbox helpers */
.flex { display: flex !important; }
.flex-col { flex-direction: column !important; }
.flex-row { flex-direction: row !important; }
.items-center { align-items: center !important; }
.justify-between { justify-content: space-between !important; }
.justify-center { justify-content: center !important; }

/* Tamaños de texto */
.text-xs { font-size: 0.75rem !important; line-height: 1rem !important; }
.text-sm { font-size: 0.875rem !important; line-height: 1.25rem !important; }
.text-base { font-size: 1rem !important; line-height: 1.5rem !important; }
.text-lg { font-size: 1.125rem !important; line-height: 1.75rem !important; }
.text-xl { font-size: 1.25rem !important; line-height: 1.75rem !important; }
.text-2xl { font-size: 1.5rem !important; line-height: 2rem !important; }
.text-3xl { font-size: 1.875rem !important; line-height: 2.25rem !important; }
.text-4xl { font-size: 2.25rem !important; line-height: 2.5rem !important; }

/* Font weights */
.font-medium { font-weight: 500 !important; }
.font-semibold { font-weight: 600 !important; }
.font-bold { font-weight: 700 !important; }

/* Max widths */
.max-w-6xl { max-width: 72rem !important; }
.max-w-7xl { max-width: 80rem !important; }
.mx-auto { margin-left: auto !important; margin-right: auto !important; }

/* Z-index */
.z-50 { z-index: 50 !important; }

/* Inset-0 */
.inset-0 {
  top: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  left: 0 !important;
}

/* Width/Height */
.w-full { width: 100% !important; }
.h-16 { height: 4rem !important; }

/* ===================================================== */
/* CRÍTICO: Estilos para SummaryCards y Pre-Transmit    */
/* Agregados para garantizar consistencia dev/prod       */
/* ===================================================== */

/* SummaryCard - Púrpura uniforme con opacidad */
.bg-purple-50\\/60 { background-color: rgba(250, 245, 255, 0.6) !important; }
.border-purple-200\\/70 { border-color: rgba(233, 213, 255, 0.7) !important; }
.text-purple-400 { color: #c084fc !important; }
.text-purple-500 { color: #a855f7 !important; }
.text-purple-800 { color: #6b21a8 !important; }
.text-purple-900 { color: #581c87 !important; }
.border-purple-200 { border-color: #e9d5ff !important; }

/* Pre-transmit modal - z-index alto */
.z-\\[99999\\] { z-index: 99999 !important; }

/* Scroll container para houses */
.max-h-\\[40vh\\] { max-height: 40vh !important; }

/* Colores de validación */
.bg-red-50 { background-color: #fef2f2 !important; }
.bg-amber-50 { background-color: #fffbeb !important; }
.bg-green-50 { background-color: #f0fdf4 !important; }
.text-red-600 { color: #dc2626 !important; }
.text-amber-600 { color: #d97706 !important; }
.text-green-600 { color: #16a34a !important; }
.text-red-800 { color: #991b1b !important; }
.text-amber-800 { color: #92400e !important; }
.text-green-800 { color: #166534 !important; }

/* Details/Summary collapsible - group-open:rotate-90 */
.group\\/house { /* marker for group */ }
details.group > summary .group-open\\:rotate-90,
.group[open] .group-open\\:rotate-90 { rotate: 90deg !important; }
.group\\/house[open] .group-open\\/house\\:rotate-90 { rotate: 90deg !important; }

/* Hide default summary marker/triangle */
summary.list-none::-webkit-details-marker { display: none !important; }
summary.list-none::marker { display: none !important; content: "" !important; }
.list-none { list-style-type: none !important; }

/* Hover brightness para summary */
.hover\\:brightness-95:hover { filter: brightness(0.95) !important; }

/* User select none */
.select-none { 
  -webkit-user-select: none !important; 
  user-select: none !important; 
}

/* Responsive grids para SummaryCards */
@media (min-width: 768px) {
  .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
  .md\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)) !important; }
}
@media (min-width: 1024px) {
  .lg\\:grid-cols-6 { grid-template-columns: repeat(6, minmax(0, 1fr)) !important; }
}

/* Backdrop blur para overlay */
.backdrop-blur-sm { 
  backdrop-filter: blur(4px) !important; 
  -webkit-backdrop-filter: blur(4px) !important; 
}

/* Black overlay con opacidad */
.bg-black\\/50 { background-color: rgba(0, 0, 0, 0.5) !important; }

/* Rounded 2xl para modal */
.rounded-2xl { border-radius: 1rem !important; }

/* Max widths para modal */
.max-w-2xl { max-width: 42rem !important; }
.max-w-lg { max-width: 32rem !important; }

/* Shadow 2xl para modal */
.shadow-2xl { 
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important; 
}

/* Space-y para vertical spacing */
.space-y-2 > * + * { margin-top: 0.5rem !important; }
.space-y-3 > * + * { margin-top: 0.75rem !important; }
.space-y-4 > * + * { margin-top: 1rem !important; }

/* Transition-transform para íconos */
.transition-transform { 
  transition-property: transform, rotate !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* Transition-all para animaciones */
.transition-all {
  transition-property: all !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* Cursor pointer */
.cursor-pointer { cursor: pointer !important; }

/* Border-t para separadores */
.border-t { 
  border-top-width: 1px !important; 
  border-top-style: solid !important; 
}
.border-slate-100 { border-color: #f1f5f9 !important; }

/* Flex gap */
.gap-1 { gap: 0.25rem !important; }
.gap-1\\.5 { gap: 0.375rem !important; }
.gap-2 { gap: 0.5rem !important; }

/* Font mono para HAWB numbers */
.font-mono { 
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace !important; 
}

/* ===================================================== */
/* FALLBACKS PARA FullScreenAwbView — Resumen/Detalle,  */
/* Blocking Errors Modal y SendMode Selector             */
/* Estas clases se usan en las tabs de validación,      */
/* el modal de errores bloqueantes y el pie de página    */
/* ===================================================== */

/* Z-index arbitrarios para modales internos */
.z-\\[70\\] { z-index: 70 !important; }
.z-\\[80\\] { z-index: 80 !important; }

/* Backgrounds con opacidad */
.bg-black\\/40 { background-color: rgba(0, 0, 0, 0.4) !important; }
.bg-red-100\\/50 { background-color: rgba(254, 226, 226, 0.5) !important; }
.bg-white\\/60 { background-color: rgba(255, 255, 255, 0.6) !important; }
.bg-white\\/70 { background-color: rgba(255, 255, 255, 0.7) !important; }

/* Fondos sólidos */
.bg-red-500 { background-color: #ef4444 !important; }
.bg-red-600 { background-color: #dc2626 !important; }
.bg-red-200 { background-color: #fecaca !important; }
.bg-amber-200 { background-color: #fde68a !important; }
.bg-amber-600 { background-color: #d97706 !important; }
.bg-green-400\\/20 { background-color: rgba(74, 222, 128, 0.2) !important; }
.bg-purple-100 { background-color: #f3e8ff !important; }

/* Bordes con opacidad */
.border-white\\/50 { border-color: rgba(255, 255, 255, 0.5) !important; }
.border-white\\/60 { border-color: rgba(255, 255, 255, 0.6) !important; }
.border-green-200 { border-color: #bbf7d0 !important; }
.border-green-400\\/30 { border-color: rgba(74, 222, 128, 0.3) !important; }
.border-red-100 { border-color: #fee2e2 !important; }
.border-red-200 { border-color: #fecaca !important; }
.border-amber-200 { border-color: #fde68a !important; }
.border-purple-300 { border-color: #d8b4fe !important; }
.border-slate-700 { border-color: #334155 !important; }

/* Max height/width arbitrarios */
.max-h-\\[120px\\] { max-height: 120px !important; }
.max-h-\\[200px\\] { max-height: 200px !important; }
.max-h-\\[500px\\] { max-height: 500px !important; }
.max-h-\\[50vh\\] { max-height: 50vh !important; }
.max-h-\\[92vh\\] { max-height: 92vh !important; }
.max-w-xl { max-width: 36rem !important; }
.max-w-4xl { max-width: 56rem !important; }

/* Tamaños de texto arbitrarios */
.text-\\[9px\\] { font-size: 9px !important; line-height: 1.2 !important; }
.text-\\[10px\\] { font-size: 10px !important; line-height: 1.2 !important; }
.text-\\[11px\\] { font-size: 11px !important; line-height: 1.3 !important; }

/* Colores de texto con opacidad */
.text-red-500\\/70 { color: rgba(239, 68, 68, 0.7) !important; }

/* Colores de texto sólidos */
.text-green-100 { color: #dcfce7 !important; }
.text-green-300 { color: #86efac !important; }
.text-green-400 { color: #4ade80 !important; }
.text-green-500 { color: #22c55e !important; }
.text-cyan-400 { color: #22d3ee !important; }
.text-cyan-600 { color: #0891b2 !important; }
.text-blue-500 { color: #3b82f6 !important; }
.text-red-400 { color: #f87171 !important; }
.text-red-800 { color: #991b1b !important; }
.text-amber-500 { color: #f59e0b !important; }

/* Space-y */
.space-y-1 > * + * { margin-top: 0.25rem !important; }
.space-y-1\\.5 > * + * { margin-top: 0.375rem !important; }

/* Transforms y transiciones */
.active\\:scale-95:active { transform: scale(0.95) !important; }
.hover\\:scale-105:hover { transform: scale(1.05) !important; }
.transition-colors { 
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke !important;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important;
  transition-duration: 150ms !important;
}

/* Hover backgrounds */
.hover\\:bg-green-400\\/30:hover { background-color: rgba(74, 222, 128, 0.3) !important; }
.hover\\:bg-amber-50:hover { background-color: #fffbeb !important; }
.hover\\:bg-red-100:hover { background-color: #fee2e2 !important; }
.hover\\:text-red-600:hover { color: #dc2626 !important; }
.hover\\:bg-black\\/5:hover { background-color: rgba(0, 0, 0, 0.05) !important; }

/* Focus ring */
.focus\\:ring-2:focus { 
  --tw-ring-offset-shadow: var(--tw-ring-inset, ) 0 0 0 var(--tw-ring-offset-width, 0px) var(--tw-ring-offset-color, #fff) !important;
  --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(2px + var(--tw-ring-offset-width, 0px)) var(--tw-ring-color, #3b82f6) !important;
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;
}
.focus\\:ring-purple-500:focus { --tw-ring-color: #a855f7 !important; }

/* Animaciones */
.animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite !important; }
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
.animate-spin { animation: spin 1s linear infinite !important; }
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Tipografía y layout */
.leading-relaxed { line-height: 1.625 !important; }
.h-0\\.5 { height: 0.125rem !important; }
.h-px { height: 1px !important; }
.min-w-0 { min-width: 0 !important; }
.items-start { align-items: flex-start !important; }
.flex-wrap { flex-wrap: wrap !important; }
.inline-flex { display: inline-flex !important; }
.whitespace-pre-wrap { white-space: pre-wrap !important; }
.truncate { overflow: hidden !important; text-overflow: ellipsis !important; white-space: nowrap !important; }
.outline-none { outline: 2px solid transparent !important; outline-offset: 2px !important; }
.uppercase { text-transform: uppercase !important; }
.opacity-70 { opacity: 0.7 !important; }
.opacity-80 { opacity: 0.8 !important; }

/* Spacing granular */
.p-0\\.5 { padding: 0.125rem !important; }
.p-1\\.5 { padding: 0.375rem !important; }
.p-2\\.5 { padding: 0.625rem !important; }
.p-5 { padding: 1.25rem !important; }
.pb-0\\.5 { padding-bottom: 0.125rem !important; }
.pb-2 { padding-bottom: 0.5rem !important; }
.pb-2\\.5 { padding-bottom: 0.625rem !important; }
.pb-3 { padding-bottom: 0.75rem !important; }
.pt-1 { padding-top: 0.25rem !important; }
.pt-1\\.5 { padding-top: 0.375rem !important; }
.pt-2 { padding-top: 0.5rem !important; }
.px-1 { padding-left: 0.25rem !important; padding-right: 0.25rem !important; }
.px-1\\.5 { padding-left: 0.375rem !important; padding-right: 0.375rem !important; }
.px-2\\.5 { padding-left: 0.625rem !important; padding-right: 0.625rem !important; }
.px-5 { padding-left: 1.25rem !important; padding-right: 1.25rem !important; }
.py-0\\.5 { padding-top: 0.125rem !important; padding-bottom: 0.125rem !important; }
.py-1 { padding-top: 0.25rem !important; padding-bottom: 0.25rem !important; }
.py-1\\.5 { padding-top: 0.375rem !important; padding-bottom: 0.375rem !important; }
.py-2\\.5 { padding-top: 0.625rem !important; padding-bottom: 0.625rem !important; }

/* Margins granulares */
.mb-0\\.5 { margin-bottom: 0.125rem !important; }
.mb-1 { margin-bottom: 0.25rem !important; }
.mb-1\\.5 { margin-bottom: 0.375rem !important; }
.mb-3 { margin-bottom: 0.75rem !important; }
.ml-1 { margin-left: 0.25rem !important; }
.ml-1\\.5 { margin-left: 0.375rem !important; }
.mr-1 { margin-right: 0.25rem !important; }
.mt-0\\.5 { margin-top: 0.125rem !important; }
.mt-2 { margin-top: 0.5rem !important; }
.mt-3 { margin-top: 0.75rem !important; }
.mx-3 { margin-left: 0.75rem !important; margin-right: 0.75rem !important; }
.mx-4 { margin-left: 1rem !important; margin-right: 1rem !important; }

/* Translate para centrado absoluto */
.-translate-x-1\\/2 { transform: translateX(-50%) !important; }
.-translate-y-1\\/2 { transform: translateY(-50%) !important; }
.left-1\\/2 { left: 50% !important; }
.top-1\\/2 { top: 50% !important; }

/* Hover utilities adicionales */
.hover\\:underline:hover { text-decoration: underline !important; }
.hover\\:text-slate-600:hover { color: #475569 !important; }
.hover\\:text-slate-700:hover { color: #334155 !important; }
.hover\\:bg-slate-100:hover { background-color: #f1f5f9 !important; }
.hover\\:bg-slate-200:hover { background-color: #e2e8f0 !important; }
.hover\\:bg-slate-50:hover { background-color: #f8fafc !important; }
.hover\\:bg-purple-50:hover { background-color: #faf5ff !important; }
.hover\\:bg-purple-700:hover { background-color: #7c3aed !important; }
.hover\\:bg-slate-700:hover { background-color: #334155 !important; }
.hover\\:bg-amber-700:hover { background-color: #b45309 !important; }

/* Responsive: md */
@media (min-width: 768px) {
  .md\\:flex-row { flex-direction: row !important; }
  .md\\:items-center { align-items: center !important; }
  .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
  .md\\:text-3xl { font-size: 1.875rem !important; line-height: 2.25rem !important; }
}

/* Responsive: lg */
@media (min-width: 1024px) {
  .lg\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)) !important; }
}

/* Text alignment */
.text-center { text-align: center !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }

/* Tracking */
.tracking-wide { letter-spacing: 0.025em !important; }
.tracking-wider { letter-spacing: 0.05em !important; }

/* Misc positional */
.absolute { position: absolute !important; }
.relative { position: relative !important; }
.right-0 { right: 0 !important; }
.bottom-0 { bottom: 0 !important; }
.transform { /* noop, activador */ }
.w-4 { width: 1rem !important; }
.w-5 { width: 1.25rem !important; }
.h-4 { height: 1rem !important; }
.h-5 { height: 1.25rem !important; }

/* ===================================================== */
/* FALLBACKS COMPLETOS — Clases faltantes detectadas     */
/* Garantizan consistencia CSS entre dev local y prod    */
/* ===================================================== */

/* ------- PADDING CRÍTICO (afecta badges y tarjetas) ------- */
.p-1 { padding: 0.25rem !important; }
.p-2 { padding: 0.5rem !important; }
.p-3 { padding: 0.75rem !important; }
.px-2 { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
.px-3 { padding-left: 0.75rem !important; padding-right: 0.75rem !important; }
.pt-3 { padding-top: 0.75rem !important; }
.pr-2 { padding-right: 0.5rem !important; }
.pl-3 { padding-left: 0.75rem !important; }
.pl-7 { padding-left: 1.75rem !important; }
.py-5 { padding-top: 1.25rem !important; padding-bottom: 1.25rem !important; }
.py-8 { padding-top: 2rem !important; padding-bottom: 2rem !important; }

/* ------- MARGIN ------- */
.mb-2 { margin-bottom: 0.5rem !important; }
.mt-1 { margin-top: 0.25rem !important; }
.mt-4 { margin-top: 1rem !important; }
.ml-2 { margin-left: 0.5rem !important; }
.ml-4 { margin-left: 1rem !important; }
.ml-8 { margin-left: 2rem !important; }
.ml-auto { margin-left: auto !important; }
.mx-1 { margin-left: 0.25rem !important; margin-right: 0.25rem !important; }
.mx-6 { margin-left: 1.5rem !important; margin-right: 1.5rem !important; }
.-mt-2 { margin-top: -0.5rem !important; }
.-mx-2 { margin-left: -0.5rem !important; margin-right: -0.5rem !important; }

/* ------- FONDOS SÓLIDOS ------- */
.bg-slate-100 { background-color: #f1f5f9 !important; }
.bg-slate-200 { background-color: #e2e8f0 !important; }
.bg-slate-900 { background-color: #0f172a !important; }
.bg-purple-200 { background-color: #e9d5ff !important; }
.bg-purple-300 { background-color: #d8b4fe !important; }
.bg-green-500 { background-color: #22c55e !important; }
.bg-green-600 { background-color: #16a34a !important; }
.bg-red-300 { background-color: #fca5a5 !important; }
.bg-sky-50 { background-color: #f0f9ff !important; }
.bg-sky-100 { background-color: #e0f2fe !important; }
.bg-blue-50 { background-color: #eff6ff !important; }
.bg-blue-100 { background-color: #dbeafe !important; }
.bg-emerald-50 { background-color: #ecfdf5 !important; }
.bg-emerald-100 { background-color: #d1fae5 !important; }
.bg-emerald-600 { background-color: #059669 !important; }
.bg-orange-100 { background-color: #ffedd5 !important; }
.bg-cyan-100 { background-color: #cffafe !important; }
.bg-pink-100 { background-color: #fce7f3 !important; }
.bg-amber-500 { background-color: #f59e0b !important; }
.bg-slate-600 { background-color: #475569 !important; }
.bg-transparent { background-color: transparent !important; }

/* ------- FONDOS CON OPACIDAD ------- */
.bg-red-50\\/70 { background-color: rgba(254, 242, 242, 0.7) !important; }
.bg-amber-50\\/70 { background-color: rgba(255, 251, 235, 0.7) !important; }
.bg-red-100\\/60 { background-color: rgba(254, 226, 226, 0.6) !important; }
.bg-amber-100\\/60 { background-color: rgba(254, 243, 199, 0.6) !important; }
.bg-amber-100\\/50 { background-color: rgba(254, 243, 199, 0.5) !important; }
.bg-white\\/50 { background-color: rgba(255, 255, 255, 0.5) !important; }
.bg-purple-50\\/50 { background-color: rgba(250, 245, 255, 0.5) !important; }
.bg-green-50\\/50 { background-color: rgba(240, 253, 244, 0.5) !important; }
.bg-amber-50\\/50 { background-color: rgba(255, 251, 235, 0.5) !important; }
.bg-red-50\\/50 { background-color: rgba(254, 242, 242, 0.5) !important; }
.bg-slate-50\\/50 { background-color: rgba(248, 250, 252, 0.5) !important; }
.bg-slate-50\\/30 { background-color: rgba(248, 250, 252, 0.3) !important; }
.bg-slate-50\\/95 { background-color: rgba(248, 250, 252, 0.95) !important; }
.bg-sky-50\\/50 { background-color: rgba(240, 249, 255, 0.5) !important; }
.bg-cyan-50\\/30 { background-color: rgba(236, 254, 255, 0.3) !important; }
.bg-green-200\\/70 { background-color: rgba(187, 247, 208, 0.7) !important; }
.bg-red-200\\/70 { background-color: rgba(254, 202, 202, 0.7) !important; }

/* ------- COLORES DE TEXTO ------- */
.text-slate-300 { color: #cbd5e1 !important; }
.text-slate-400 { color: #94a3b8 !important; }
.text-purple-300 { color: #d8b4fe !important; }
.text-red-500 { color: #ef4444 !important; }
.text-blue-600 { color: #2563eb !important; }
.text-blue-700 { color: #1d4ed8 !important; }
.text-blue-800 { color: #1e40af !important; }
.text-blue-100 { color: #dbeafe !important; }
.text-emerald-600 { color: #059669 !important; }
.text-emerald-700 { color: #047857 !important; }
.text-emerald-800 { color: #065f46 !important; }
.text-sky-700 { color: #0369a1 !important; }
.text-sky-800 { color: #075985 !important; }
.text-sky-400 { color: #38bdf8 !important; }
.text-indigo-700 { color: #4338ca !important; }
.text-orange-800 { color: #9a3412 !important; }
.text-cyan-800 { color: #155e75 !important; }
.text-pink-800 { color: #9d174d !important; }
.text-white\\/80 { color: rgba(255, 255, 255, 0.8) !important; }
.text-amber-100 { color: #fef3c7 !important; }

/* ------- BORDES ------- */
.border-gray-200 { border-color: #e5e7eb !important; }
.border-transparent { border-color: transparent !important; }
.border-purple-600 { border-color: #9333ea !important; }
.border-purple-100 { border-color: #f3e8ff !important; }
.border-sky-100 { border-color: #e0f2fe !important; }
.border-sky-200 { border-color: #bae6fd !important; }
.border-cyan-200 { border-color: #a5f3fc !important; }
.border-blue-100 { border-color: #dbeafe !important; }
.border-blue-200 { border-color: #bfdbfe !important; }
.border-blue-300 { border-color: #93c5fd !important; }
.border-amber-100 { border-color: #fef3c7 !important; }
.border-amber-300 { border-color: #fcd34d !important; }
.border-emerald-200 { border-color: #a7f3d0 !important; }
.border-green-300 { border-color: #86efac !important; }
.border-green-400 { border-color: #4ade80 !important; }
.border-red-300 { border-color: #fca5a5 !important; }
.border-red-400 { border-color: #f87171 !important; }
.border-0 { border-width: 0 !important; border-style: none !important; }
.border-2 { border-width: 2px !important; border-style: solid !important; }
.border-b-2 { border-bottom-width: 2px !important; border-bottom-style: solid !important; }
.border-l-2 { border-left-width: 2px !important; border-left-style: solid !important; }

/* ------- ROUNDED VARIANTES ------- */
.rounded-md { border-radius: 0.375rem !important; }
.rounded-t-lg { border-top-left-radius: 0.5rem !important; border-top-right-radius: 0.5rem !important; }

/* ------- HOVER STATES ------- */
.hover\\:bg-red-300:hover { background-color: #fca5a5 !important; }
.hover\\:bg-green-600:hover { background-color: #16a34a !important; }
.hover\\:bg-green-700:hover { background-color: #15803d !important; }
.hover\\:bg-green-100:hover { background-color: #dcfce7 !important; }
.hover\\:bg-red-200:hover { background-color: #fecaca !important; }
.hover\\:bg-purple-100:hover { background-color: #f3e8ff !important; }
.hover\\:bg-purple-200:hover { background-color: #e9d5ff !important; }
.hover\\:bg-amber-200:hover { background-color: #fde68a !important; }
.hover\\:bg-amber-600:hover { background-color: #d97706 !important; }
.hover\\:bg-sky-200:hover { background-color: #bae6fd !important; }
.hover\\:bg-blue-200:hover { background-color: #bfdbfe !important; }
.hover\\:bg-slate-300:hover { background-color: #cbd5e1 !important; }
.hover\\:bg-slate-200\\/50:hover { background-color: rgba(226, 232, 240, 0.5) !important; }
.hover\\:bg-white\\/30:hover { background-color: rgba(255, 255, 255, 0.3) !important; }
.hover\\:bg-emerald-700:hover { background-color: #047857 !important; }
.hover\\:text-purple-600:hover { color: #9333ea !important; }
.hover\\:text-purple-800:hover { color: #6b21a8 !important; }
.hover\\:text-slate-800:hover { color: #1e293b !important; }
.hover\\:text-amber-900:hover { color: #78350f !important; }
.hover\\:opacity-90:hover { opacity: 0.9 !important; }
.hover\\:shadow-md:hover { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06) !important; }
.hover\\:shadow-xl:hover { box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04) !important; }
.hover\\:border-blue-300:hover { border-color: #93c5fd !important; }

/* ------- FOCUS / DISABLED / PLACEHOLDER ------- */
.cursor-not-allowed { cursor: not-allowed !important; }
.focus\\:ring-1:focus {
  --tw-ring-offset-shadow: var(--tw-ring-inset, ) 0 0 0 var(--tw-ring-offset-width, 0px) var(--tw-ring-offset-color, #fff) !important;
  --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(1px + var(--tw-ring-offset-width, 0px)) var(--tw-ring-color, #a855f7) !important;
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;
}
.focus\\:ring-purple-300:focus { --tw-ring-color: #d8b4fe !important; }
.focus\\:ring-purple-400:focus { --tw-ring-color: #c084fc !important; }
.focus\\:ring-slate-200:focus { --tw-ring-color: #e2e8f0 !important; }
.focus\\:ring-amber-300:focus { --tw-ring-color: #fcd34d !important; }
.focus\\:ring-blue-500:focus { --tw-ring-color: #3b82f6 !important; }
.disabled\\:bg-slate-50:disabled { background-color: #f8fafc !important; }
.disabled\\:bg-slate-400:disabled { background-color: #94a3b8 !important; }
.placeholder\\:text-purple-400::placeholder { color: #c084fc !important; }
.placeholder\\:italic::placeholder { font-style: italic !important; }
.placeholder\\:text-slate-400::placeholder { color: #94a3b8 !important; }

/* ------- TIPOGRAFÍA Y DECORACIONES ------- */
.italic { font-style: italic !important; }
.normal-case { text-transform: none !important; }
.underline { text-decoration-line: underline !important; }
.opacity-50 { opacity: 0.5 !important; }
.resize-none { resize: none !important; }
.whitespace-nowrap { white-space: nowrap !important; }
.overflow-x-auto { overflow-x: auto !important; }

/* ------- TRANSFORMS Y TRANSICIONES ------- */
.rotate-180 { rotate: 180deg !important; }
.duration-200 { transition-duration: 200ms !important; }
.duration-150 { transition-duration: 150ms !important; }
.scale-105 { transform: scale(1.05) !important; }

/* ------- SHADOW & RING ------- */
.shadow-inner { box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05) !important; }
.ring-1 {
  --tw-ring-offset-shadow: var(--tw-ring-inset, ) 0 0 0 var(--tw-ring-offset-width, 0px) var(--tw-ring-offset-color, #fff) !important;
  --tw-ring-shadow: var(--tw-ring-inset, ) 0 0 0 calc(1px + var(--tw-ring-offset-width, 0px)) var(--tw-ring-color, rgba(0,0,0,0.05)) !important;
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;
}
.ring-black\\/5 { --tw-ring-color: rgba(0, 0, 0, 0.05) !important; }

/* ------- ANIMACIONES ------- */
@keyframes bounce {
  0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8, 0, 1, 1); }
  50% { transform: translateY(0); animation-timing-function: cubic-bezier(0, 0, 0.2, 1); }
}
.animate-bounce { animation: bounce 1s infinite !important; }

/* ------- SIZING ------- */
.w-6 { width: 1.5rem !important; }
.h-6 { height: 1.5rem !important; }
.h-full { height: 100% !important; }
.h-20 { height: 5rem !important; }
.max-w-md { max-width: 28rem !important; }
.max-w-\\[150px\\] { max-width: 150px !important; }
.max-w-\\[200px\\] { max-width: 200px !important; }
.max-h-\\[85vh\\] { max-height: 85vh !important; }
.max-h-\\[400px\\] { max-height: 400px !important; }
.max-h-64 { max-height: 16rem !important; }
.max-h-96 { max-height: 24rem !important; }
.max-h-40 { max-height: 10rem !important; }
.max-h-32 { max-height: 8rem !important; }
.min-h-\\[28px\\] { min-height: 28px !important; }
.min-h-\\[32px\\] { min-height: 32px !important; }
.min-h-\\[46px\\] { min-height: 46px !important; }
.min-w-\\[120px\\] { min-width: 120px !important; }
.h-\\[34px\\] { height: 34px !important; }

/* ------- GRID HELPERS ------- */
.col-span-2 { grid-column: span 2 / span 2 !important; }
.col-span-3 { grid-column: span 3 / span 3 !important; }
.gap-x-2 { column-gap: 0.5rem !important; }
.gap-y-1\\.5 { row-gap: 0.375rem !important; }

/* ------- GRADIENTES ADICIONALES ------- */
.from-slate-50 { --tw-gradient-from: #f8fafc !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(248, 250, 252, 0)) !important; }
.to-purple-50 { --tw-gradient-to: #faf5ff !important; }
.from-purple-50 { --tw-gradient-from: #faf5ff !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(250, 245, 255, 0)) !important; }
.to-fuchsia-50 { --tw-gradient-to: #fdf4ff !important; }
.from-amber-50 { --tw-gradient-from: #fffbeb !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(255, 251, 235, 0)) !important; }
.to-yellow-50 { --tw-gradient-to: #fefce8 !important; }
.to-orange-50 { --tw-gradient-to: #fff7ed !important; }
.from-green-50 { --tw-gradient-from: #f0fdf4 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(240, 253, 244, 0)) !important; }
.to-emerald-50 { --tw-gradient-to: #ecfdf5 !important; }
.from-emerald-50 { --tw-gradient-from: #ecfdf5 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(236, 253, 245, 0)) !important; }
.to-teal-50 { --tw-gradient-to: #f0fdfa !important; }
.from-green-100 { --tw-gradient-from: #dcfce7 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(220, 252, 231, 0)) !important; }
.to-emerald-100 { --tw-gradient-to: #d1fae5 !important; }
.from-red-100 { --tw-gradient-from: #fee2e2 !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(254, 226, 226, 0)) !important; }
.to-orange-100 { --tw-gradient-to: #ffedd5 !important; }
.from-blue-600 { --tw-gradient-from: #2563eb !important; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(37, 99, 235, 0)) !important; }
.to-blue-700 { --tw-gradient-to: #1d4ed8 !important; }

/* ------- DISPLAY, POSITION, FLEX ------- */
.fixed { position: fixed !important; }
.flex-nowrap { flex-wrap: nowrap !important; }
.list-disc { list-style-type: disc !important; }
.list-inside { list-style-position: inside !important; }

/* ------- GROUP-HOVER / TRANSLATE ------- */
.group:hover .group-hover\\:translate-x-1 { transform: translateX(0.25rem) !important; }
.group:hover .group-hover\\:text-blue-600 { color: #2563eb !important; }

/* ===================================================== */
/* FALLBACKS FINALES — Últimas 25 clases detectadas      */
/* ===================================================== */

/* Animations */
@keyframes bounceIn { 0% { transform: scale(0.3); opacity: 0; } 50% { transform: scale(1.05); } 70% { transform: scale(0.9); } 100% { transform: scale(1); opacity: 1; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.animate-bounce-in { animation: bounceIn 0.5s ease-out !important; }
.animate-fadeIn { animation: fadeIn 0.3s ease-out !important; }
.animate-in { animation: fadeIn 0.2s ease-out !important; }
.animate-slideInRight { animation: slideInRight 0.3s ease-out forwards !important; }
.slide-in-from-top-1 { animation: fadeIn 0.2s ease-out !important; }

/* Rose / Violet (used in some OCI/validation variants) */
.bg-rose-100 { background-color: #ffe4e6 !important; }
.text-rose-700 { color: #be123c !important; }
.bg-violet-100 { background-color: #ede9fe !important; }
.text-violet-700 { color: #6d28d9 !important; }

/* Custom scrollbar */
.custom-scrollbar::-webkit-scrollbar { width: 6px !important; height: 6px !important; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent !important; }
.custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(148, 163, 184, 0.5) !important; border-radius: 3px !important; }
.custom-scrollbar::-webkit-scrollbar-thumb:hover { background-color: rgba(148, 163, 184, 0.8) !important; }

/* Font weight / Flex alignment */
.font-normal { font-weight: 400 !important; }
.items-end { align-items: flex-end !important; }

/* Spacing */
.mr-2 { margin-right: 0.5rem !important; }
.pb-1 { padding-bottom: 0.25rem !important; }
.space-y-6 > * + * { margin-top: 1.5rem !important; }
.space-y-0\\.5 > * + * { margin-top: 0.125rem !important; }

/* Max height */
.max-h-\\[88vh\\] { max-height: 88vh !important; }

/* Widths */
.w-8 { width: 2rem !important; }
.w-16 { width: 4rem !important; }
.w-20 { width: 5rem !important; }
.w-24 { width: 6rem !important; }
.w-28 { width: 7rem !important; }
.w-32 { width: 8rem !important; }

/* Hover: text */
.hover\\:text-red-700:hover { color: #b91c1c !important; }
.hover\\:text-sky-400:hover { color: #38bdf8 !important; }
`+`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial;--tw-content:""}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-800:oklch(44.4% .177 26.899);--color-red-900:oklch(39.6% .141 25.723);--color-orange-50:oklch(98% .016 73.684);--color-orange-100:oklch(95.4% .038 75.164);--color-orange-200:oklch(90.1% .076 70.697);--color-orange-300:oklch(83.7% .128 66.29);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-orange-800:oklch(47% .157 37.304);--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-200:oklch(92.4% .12 95.746);--color-amber-300:oklch(87.9% .169 91.605);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-amber-800:oklch(47.3% .137 46.201);--color-amber-900:oklch(41.4% .112 45.904);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-200:oklch(94.5% .129 101.54);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-200:oklch(92.5% .084 155.995);--color-green-300:oklch(87.1% .15 154.449);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-green-900:oklch(39.3% .095 152.535);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-100:oklch(95% .052 163.051);--color-emerald-200:oklch(90.5% .093 164.15);--color-emerald-300:oklch(84.5% .143 164.978);--color-emerald-400:oklch(76.5% .177 163.223);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-600:oklch(59.6% .145 163.225);--color-emerald-700:oklch(50.8% .118 165.612);--color-emerald-800:oklch(43.2% .095 166.913);--color-teal-50:oklch(98.4% .014 180.72);--color-teal-300:oklch(85.5% .138 181.071);--color-teal-700:oklch(51.1% .096 186.391);--color-cyan-50:oklch(98.4% .019 200.873);--color-cyan-100:oklch(95.6% .045 203.388);--color-cyan-200:oklch(91.7% .08 205.041);--color-cyan-300:oklch(86.5% .127 207.078);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-600:oklch(60.9% .126 221.723);--color-cyan-700:oklch(52% .105 223.128);--color-cyan-800:oklch(45% .085 224.283);--color-sky-50:oklch(97.7% .013 236.62);--color-sky-100:oklch(95.1% .026 236.824);--color-sky-200:oklch(90.1% .058 230.902);--color-sky-300:oklch(82.8% .111 230.318);--color-sky-400:oklch(74.6% .16 232.661);--color-sky-500:oklch(68.5% .169 237.323);--color-sky-600:oklch(58.8% .158 241.966);--color-sky-700:oklch(50% .134 242.749);--color-sky-800:oklch(44.3% .11 240.79);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-blue-900:oklch(37.9% .146 265.522);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-200:oklch(87% .065 274.039);--color-indigo-300:oklch(78.5% .115 274.713);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-indigo-800:oklch(39.8% .195 277.366);--color-indigo-900:oklch(35.9% .144 278.697);--color-violet-50:oklch(96.9% .016 293.756);--color-violet-100:oklch(94.3% .029 294.588);--color-violet-300:oklch(81.1% .111 293.571);--color-violet-700:oklch(49.1% .27 292.581);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-purple-800:oklch(43.8% .218 303.724);--color-purple-900:oklch(38.1% .176 304.987);--color-fuchsia-50:oklch(97.7% .017 320.058);--color-fuchsia-100:oklch(95.2% .037 318.852);--color-fuchsia-300:oklch(83.3% .145 321.434);--color-fuchsia-400:oklch(74% .238 322.16);--color-fuchsia-500:oklch(66.7% .295 322.15);--color-fuchsia-600:oklch(59.1% .293 322.896);--color-fuchsia-700:oklch(51.8% .253 323.949);--color-pink-50:oklch(97.1% .014 343.198);--color-pink-100:oklch(94.8% .028 342.258);--color-pink-300:oklch(82.3% .12 346.018);--color-pink-700:oklch(52.5% .223 3.958);--color-pink-800:oklch(45.9% .187 3.815);--color-rose-50:oklch(96.9% .015 12.422);--color-rose-100:oklch(94.1% .03 12.58);--color-rose-300:oklch(81% .117 11.638);--color-rose-700:oklch(51.4% .222 16.935);--color-slate-50:oklch(98.4% .003 247.858);--color-slate-100:oklch(96.8% .007 247.896);--color-slate-200:oklch(92.9% .013 255.508);--color-slate-300:oklch(86.9% .022 252.894);--color-slate-400:oklch(70.4% .04 256.788);--color-slate-500:oklch(55.4% .046 257.417);--color-slate-600:oklch(44.6% .043 257.281);--color-slate-700:oklch(37.2% .044 257.287);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--container-lg:32rem;--container-xl:36rem;--container-2xl:42rem;--container-3xl:48rem;--container-4xl:56rem;--container-6xl:72rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--tracking-wide:.025em;--tracking-wider:.05em;--leading-tight:1.25;--leading-relaxed:1.625;--leading-loose:2;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--animate-bounce:bounce 1s infinite;--blur-sm:8px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){-webkit-appearance:button;-moz-appearance:button;appearance:button}::file-selector-button{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.top-1{top:calc(var(--spacing)*1)}.top-1\\/2{top:50%}.right-0{right:calc(var(--spacing)*0)}.right-1{right:calc(var(--spacing)*1)}.right-2{right:calc(var(--spacing)*2)}.right-4{right:calc(var(--spacing)*4)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-1{bottom:calc(var(--spacing)*1)}.bottom-2{bottom:calc(var(--spacing)*2)}.bottom-full{bottom:100%}.left-0{left:calc(var(--spacing)*0)}.left-1{left:calc(var(--spacing)*1)}.left-1\\/2{left:50%}.left-3{left:calc(var(--spacing)*3)}.isolate{isolation:isolate}.z-10{z-index:10}.z-50{z-index:50}.z-\\[70\\]{z-index:70}.z-\\[80\\]{z-index:80}.z-\\[9999\\]{z-index:9999}.z-\\[99999\\]{z-index:99999}.col-span-2{grid-column:span 2/span 2}.col-span-3{grid-column:span 3/span 3}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.-mx-2{margin-inline:calc(var(--spacing)*-2)}.mx-1{margin-inline:calc(var(--spacing)*1)}.mx-3{margin-inline:calc(var(--spacing)*3)}.mx-4{margin-inline:calc(var(--spacing)*4)}.mx-6{margin-inline:calc(var(--spacing)*6)}.mx-auto{margin-inline:auto}.-mt-2{margin-top:calc(var(--spacing)*-2)}.mt-0{margin-top:calc(var(--spacing)*0)}.mt-0\\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mb-0{margin-bottom:calc(var(--spacing)*0)}.mb-0\\.5{margin-bottom:calc(var(--spacing)*.5)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-1\\.5{margin-bottom:calc(var(--spacing)*1.5)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.ml-0{margin-left:calc(var(--spacing)*0)}.ml-0\\.5{margin-left:calc(var(--spacing)*.5)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-1\\.5{margin-left:calc(var(--spacing)*1.5)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-6{margin-left:calc(var(--spacing)*6)}.ml-8{margin-left:calc(var(--spacing)*8)}.ml-auto{margin-left:auto}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-flex{display:inline-flex}.table{display:table}.h-0{height:calc(var(--spacing)*0)}.h-0\\.5{height:calc(var(--spacing)*.5)}.h-1{height:calc(var(--spacing)*1)}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-10{height:calc(var(--spacing)*10)}.h-14{height:calc(var(--spacing)*14)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-\\[34px\\]{height:34px}.h-full{height:100%}.h-px{height:1px}.max-h-20{max-height:calc(var(--spacing)*20)}.max-h-32{max-height:calc(var(--spacing)*32)}.max-h-40{max-height:calc(var(--spacing)*40)}.max-h-48{max-height:calc(var(--spacing)*48)}.max-h-60{max-height:calc(var(--spacing)*60)}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-96{max-height:calc(var(--spacing)*96)}.max-h-\\[40vh\\]{max-height:40vh}.max-h-\\[50vh\\]{max-height:50vh}.max-h-\\[85vh\\]{max-height:85vh}.max-h-\\[88vh\\]{max-height:88vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[92vh\\]{max-height:92vh}.max-h-\\[120px\\]{max-height:120px}.max-h-\\[200px\\]{max-height:200px}.max-h-\\[400px\\]{max-height:400px}.max-h-\\[500px\\]{max-height:500px}.min-h-\\[28px\\]{min-height:28px}.min-h-\\[32px\\]{min-height:32px}.min-h-\\[46px\\]{min-height:46px}.min-h-screen{min-height:100vh}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-11{width:calc(var(--spacing)*11)}.w-12{width:calc(var(--spacing)*12)}.w-14{width:calc(var(--spacing)*14)}.w-16{width:calc(var(--spacing)*16)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-56{width:calc(var(--spacing)*56)}.w-64{width:calc(var(--spacing)*64)}.w-full{width:100%}.w-px{width:1px}.max-w-2xl{max-width:var(--container-2xl)}.max-w-3xl{max-width:var(--container-3xl)}.max-w-4xl{max-width:var(--container-4xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-\\[80px\\]{max-width:80px}.max-w-\\[120px\\]{max-width:120px}.max-w-\\[150px\\]{max-width:150px}.max-w-\\[200px\\]{max-width:200px}.max-w-lg{max-width:var(--container-lg)}.max-w-md{max-width:var(--container-md)}.max-w-xl{max-width:var(--container-xl)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\\[60px\\]{min-width:60px}.min-w-\\[80px\\]{min-width:80px}.min-w-\\[120px\\]{min-width:120px}.flex-1{flex:1}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1\\/2{--tw-translate-y: 50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-105{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.rotate-45{rotate:45deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-bounce{animation:var(--animate-bounce)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-help{cursor:help}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-none{resize:none}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.list-none{list-style-type:none}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row{flex-direction:row}.flex-nowrap{flex-wrap:nowrap}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-6{gap:calc(var(--spacing)*6)}:where(.space-y-0>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*0)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*0)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-0\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-1\\.5>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1.5)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1.5)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}.gap-x-2{column-gap:calc(var(--spacing)*2)}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}.gap-y-1{row-gap:calc(var(--spacing)*1)}.gap-y-1\\.5{row-gap:calc(var(--spacing)*1.5)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.rounded-t-md{border-top-left-radius:var(--radius-md);border-top-right-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-l-2{border-left-style:var(--tw-border-style);border-left-width:2px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-amber-100{border-color:var(--color-amber-100)}.border-amber-200{border-color:var(--color-amber-200)}.border-amber-300{border-color:var(--color-amber-300)}.border-blue-100{border-color:var(--color-blue-100)}.border-blue-200{border-color:var(--color-blue-200)}.border-blue-300{border-color:var(--color-blue-300)}.border-cyan-200{border-color:var(--color-cyan-200)}.border-cyan-300{border-color:var(--color-cyan-300)}.border-emerald-200{border-color:var(--color-emerald-200)}.border-emerald-300{border-color:var(--color-emerald-300)}.border-fuchsia-300{border-color:var(--color-fuchsia-300)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-green-200{border-color:var(--color-green-200)}.border-green-300{border-color:var(--color-green-300)}.border-green-400{border-color:var(--color-green-400)}.border-green-400\\/30{border-color:#05df724d}@supports (color:color-mix(in lab,red,red)){.border-green-400\\/30{border-color:color-mix(in oklab,var(--color-green-400)30%,transparent)}}.border-indigo-200{border-color:var(--color-indigo-200)}.border-indigo-300{border-color:var(--color-indigo-300)}.border-indigo-600{border-color:var(--color-indigo-600)}.border-orange-300{border-color:var(--color-orange-300)}.border-orange-400{border-color:var(--color-orange-400)}.border-pink-300{border-color:var(--color-pink-300)}.border-purple-100{border-color:var(--color-purple-100)}.border-purple-200{border-color:var(--color-purple-200)}.border-purple-200\\/70{border-color:#e9d5ffb3}@supports (color:color-mix(in lab,red,red)){.border-purple-200\\/70{border-color:color-mix(in oklab,var(--color-purple-200)70%,transparent)}}.border-purple-300{border-color:var(--color-purple-300)}.border-purple-400{border-color:var(--color-purple-400)}.border-purple-400\\/30{border-color:#c07eff4d}@supports (color:color-mix(in lab,red,red)){.border-purple-400\\/30{border-color:color-mix(in oklab,var(--color-purple-400)30%,transparent)}}.border-purple-500{border-color:var(--color-purple-500)}.border-purple-600{border-color:var(--color-purple-600)}.border-red-100{border-color:var(--color-red-100)}.border-red-200{border-color:var(--color-red-200)}.border-red-300{border-color:var(--color-red-300)}.border-red-400{border-color:var(--color-red-400)}.border-rose-300{border-color:var(--color-rose-300)}.border-sky-100{border-color:var(--color-sky-100)}.border-sky-200{border-color:var(--color-sky-200)}.border-sky-300{border-color:var(--color-sky-300)}.border-sky-400{border-color:var(--color-sky-400)}.border-sky-400\\/30{border-color:#00bcfe4d}@supports (color:color-mix(in lab,red,red)){.border-sky-400\\/30{border-color:color-mix(in oklab,var(--color-sky-400)30%,transparent)}}.border-sky-500{border-color:var(--color-sky-500)}.border-slate-100{border-color:var(--color-slate-100)}.border-slate-200{border-color:var(--color-slate-200)}.border-slate-300{border-color:var(--color-slate-300)}.border-slate-700{border-color:var(--color-slate-700)}.border-teal-300{border-color:var(--color-teal-300)}.border-transparent{border-color:#0000}.border-violet-300{border-color:var(--color-violet-300)}.border-white{border-color:var(--color-white)}.border-white\\/30{border-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.border-white\\/30{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.border-white\\/50{border-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.border-white\\/50{border-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.border-white\\/60{border-color:#fff9}@supports (color:color-mix(in lab,red,red)){.border-white\\/60{border-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.border-white\\/80{border-color:#fffc}@supports (color:color-mix(in lab,red,red)){.border-white\\/80{border-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-50\\/50{background-color:#fffbeb80}@supports (color:color-mix(in lab,red,red)){.bg-amber-50\\/50{background-color:color-mix(in oklab,var(--color-amber-50)50%,transparent)}}.bg-amber-50\\/70{background-color:#fffbebb3}@supports (color:color-mix(in lab,red,red)){.bg-amber-50\\/70{background-color:color-mix(in oklab,var(--color-amber-50)70%,transparent)}}.bg-amber-100{background-color:var(--color-amber-100)}.bg-amber-100\\/50{background-color:#fef3c680}@supports (color:color-mix(in lab,red,red)){.bg-amber-100\\/50{background-color:color-mix(in oklab,var(--color-amber-100)50%,transparent)}}.bg-amber-100\\/60{background-color:#fef3c699}@supports (color:color-mix(in lab,red,red)){.bg-amber-100\\/60{background-color:color-mix(in oklab,var(--color-amber-100)60%,transparent)}}.bg-amber-200{background-color:var(--color-amber-200)}.bg-amber-400{background-color:var(--color-amber-400)}.bg-amber-500{background-color:var(--color-amber-500)}.bg-amber-600{background-color:var(--color-amber-600)}.bg-black{background-color:var(--color-black)}.bg-black\\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-200{background-color:var(--color-blue-200)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-600{background-color:var(--color-blue-600)}.bg-cyan-50{background-color:var(--color-cyan-50)}.bg-cyan-50\\/30{background-color:#ecfeff4d}@supports (color:color-mix(in lab,red,red)){.bg-cyan-50\\/30{background-color:color-mix(in oklab,var(--color-cyan-50)30%,transparent)}}.bg-cyan-100{background-color:var(--color-cyan-100)}.bg-cyan-500{background-color:var(--color-cyan-500)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-emerald-100{background-color:var(--color-emerald-100)}.bg-emerald-600{background-color:var(--color-emerald-600)}.bg-fuchsia-50{background-color:var(--color-fuchsia-50)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-50\\/50{background-color:#f0fdf480}@supports (color:color-mix(in lab,red,red)){.bg-green-50\\/50{background-color:color-mix(in oklab,var(--color-green-50)50%,transparent)}}.bg-green-100{background-color:var(--color-green-100)}.bg-green-200{background-color:var(--color-green-200)}.bg-green-200\\/70{background-color:#b9f8cfb3}@supports (color:color-mix(in lab,red,red)){.bg-green-200\\/70{background-color:color-mix(in oklab,var(--color-green-200)70%,transparent)}}.bg-green-400{background-color:var(--color-green-400)}.bg-green-400\\/20{background-color:#05df7233}@supports (color:color-mix(in lab,red,red)){.bg-green-400\\/20{background-color:color-mix(in oklab,var(--color-green-400)20%,transparent)}}.bg-green-500{background-color:var(--color-green-500)}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-orange-50{background-color:var(--color-orange-50)}.bg-orange-100{background-color:var(--color-orange-100)}.bg-orange-500{background-color:var(--color-orange-500)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-pink-50{background-color:var(--color-pink-50)}.bg-pink-100{background-color:var(--color-pink-100)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-50\\/50{background-color:#faf5ff80}@supports (color:color-mix(in lab,red,red)){.bg-purple-50\\/50{background-color:color-mix(in oklab,var(--color-purple-50)50%,transparent)}}.bg-purple-50\\/60{background-color:#faf5ff99}@supports (color:color-mix(in lab,red,red)){.bg-purple-50\\/60{background-color:color-mix(in oklab,var(--color-purple-50)60%,transparent)}}.bg-purple-100{background-color:var(--color-purple-100)}.bg-purple-200{background-color:var(--color-purple-200)}.bg-purple-300{background-color:var(--color-purple-300)}.bg-purple-400{background-color:var(--color-purple-400)}.bg-purple-400\\/20{background-color:#c07eff33}@supports (color:color-mix(in lab,red,red)){.bg-purple-400\\/20{background-color:color-mix(in oklab,var(--color-purple-400)20%,transparent)}}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-600{background-color:var(--color-purple-600)}.bg-purple-700{background-color:var(--color-purple-700)}.bg-purple-800{background-color:var(--color-purple-800)}.bg-red-50{background-color:var(--color-red-50)}.bg-red-50\\/50{background-color:#fef2f280}@supports (color:color-mix(in lab,red,red)){.bg-red-50\\/50{background-color:color-mix(in oklab,var(--color-red-50)50%,transparent)}}.bg-red-50\\/70{background-color:#fef2f2b3}@supports (color:color-mix(in lab,red,red)){.bg-red-50\\/70{background-color:color-mix(in oklab,var(--color-red-50)70%,transparent)}}.bg-red-100{background-color:var(--color-red-100)}.bg-red-100\\/50{background-color:#ffe2e280}@supports (color:color-mix(in lab,red,red)){.bg-red-100\\/50{background-color:color-mix(in oklab,var(--color-red-100)50%,transparent)}}.bg-red-100\\/60{background-color:#ffe2e299}@supports (color:color-mix(in lab,red,red)){.bg-red-100\\/60{background-color:color-mix(in oklab,var(--color-red-100)60%,transparent)}}.bg-red-200{background-color:var(--color-red-200)}.bg-red-200\\/70{background-color:#ffcacab3}@supports (color:color-mix(in lab,red,red)){.bg-red-200\\/70{background-color:color-mix(in oklab,var(--color-red-200)70%,transparent)}}.bg-red-300{background-color:var(--color-red-300)}.bg-red-400{background-color:var(--color-red-400)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-600{background-color:var(--color-red-600)}.bg-rose-50{background-color:var(--color-rose-50)}.bg-rose-100{background-color:var(--color-rose-100)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-sky-50\\/50{background-color:#f0f9ff80}@supports (color:color-mix(in lab,red,red)){.bg-sky-50\\/50{background-color:color-mix(in oklab,var(--color-sky-50)50%,transparent)}}.bg-sky-100{background-color:var(--color-sky-100)}.bg-sky-400{background-color:var(--color-sky-400)}.bg-sky-400\\/20{background-color:#00bcfe33}@supports (color:color-mix(in lab,red,red)){.bg-sky-400\\/20{background-color:color-mix(in oklab,var(--color-sky-400)20%,transparent)}}.bg-sky-500{background-color:var(--color-sky-500)}.bg-sky-600{background-color:var(--color-sky-600)}.bg-slate-50{background-color:var(--color-slate-50)}.bg-slate-50\\/30{background-color:#f8fafc4d}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/30{background-color:color-mix(in oklab,var(--color-slate-50)30%,transparent)}}.bg-slate-50\\/50{background-color:#f8fafc80}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/50{background-color:color-mix(in oklab,var(--color-slate-50)50%,transparent)}}.bg-slate-50\\/95{background-color:#f8fafcf2}@supports (color:color-mix(in lab,red,red)){.bg-slate-50\\/95{background-color:color-mix(in oklab,var(--color-slate-50)95%,transparent)}}.bg-slate-100{background-color:var(--color-slate-100)}.bg-slate-200{background-color:var(--color-slate-200)}.bg-slate-300{background-color:var(--color-slate-300)}.bg-slate-600{background-color:var(--color-slate-600)}.bg-slate-700{background-color:var(--color-slate-700)}.bg-slate-800{background-color:var(--color-slate-800)}.bg-slate-900{background-color:var(--color-slate-900)}.bg-teal-50{background-color:var(--color-teal-50)}.bg-transparent{background-color:#0000}.bg-violet-50{background-color:var(--color-violet-50)}.bg-violet-100{background-color:var(--color-violet-100)}.bg-white{background-color:var(--color-white)}.bg-white\\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-white\\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\\/50{background-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.bg-white\\/50{background-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.bg-white\\/60{background-color:#fff9}@supports (color:color-mix(in lab,red,red)){.bg-white\\/60{background-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.bg-white\\/70{background-color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/70{background-color:color-mix(in oklab,var(--color-white)70%,transparent)}}.bg-white\\/80{background-color:#fffc}@supports (color:color-mix(in lab,red,red)){.bg-white\\/80{background-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.from-amber-50{--tw-gradient-from:var(--color-amber-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-amber-400{--tw-gradient-from:var(--color-amber-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-50{--tw-gradient-from:var(--color-blue-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-600{--tw-gradient-from:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-emerald-50{--tw-gradient-from:var(--color-emerald-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-emerald-500{--tw-gradient-from:var(--color-emerald-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-50{--tw-gradient-from:var(--color-green-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-100{--tw-gradient-from:var(--color-green-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-50{--tw-gradient-from:var(--color-purple-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-400{--tw-gradient-from:var(--color-purple-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-600{--tw-gradient-from:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-700{--tw-gradient-from:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-100{--tw-gradient-from:var(--color-red-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-500{--tw-gradient-from:var(--color-red-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-sky-300{--tw-gradient-from:var(--color-sky-300);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-sky-400{--tw-gradient-from:var(--color-sky-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-50{--tw-gradient-from:var(--color-slate-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-100{--tw-gradient-from:var(--color-slate-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-800{--tw-gradient-from:var(--color-slate-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.via-purple-50{--tw-gradient-via:var(--color-purple-50);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-700{--tw-gradient-via:var(--color-purple-700);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-800{--tw-gradient-via:var(--color-purple-800);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-blue-700{--tw-gradient-to:var(--color-blue-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-50{--tw-gradient-to:var(--color-emerald-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-100{--tw-gradient-to:var(--color-emerald-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-fuchsia-50{--tw-gradient-to:var(--color-fuchsia-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-500{--tw-gradient-to:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-50{--tw-gradient-to:var(--color-indigo-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-100{--tw-gradient-to:var(--color-indigo-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-600{--tw-gradient-to:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-900{--tw-gradient-to:var(--color-indigo-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-50{--tw-gradient-to:var(--color-orange-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-100{--tw-gradient-to:var(--color-orange-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-400{--tw-gradient-to:var(--color-orange-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-500{--tw-gradient-to:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-pink-50{--tw-gradient-to:var(--color-pink-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-50{--tw-gradient-to:var(--color-purple-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-600{--tw-gradient-to:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-800{--tw-gradient-to:var(--color-purple-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-slate-700{--tw-gradient-to:var(--color-slate-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-teal-50{--tw-gradient-to:var(--color-teal-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-yellow-50{--tw-gradient-to:var(--color-yellow-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-0{padding:calc(var(--spacing)*0)}.p-0\\.5{padding:calc(var(--spacing)*.5)}.p-1{padding:calc(var(--spacing)*1)}.p-1\\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-2\\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-2\\.5{padding-inline:calc(var(--spacing)*2.5)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-5{padding-block:calc(var(--spacing)*5)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.pt-1{padding-top:calc(var(--spacing)*1)}.pt-1\\.5{padding-top:calc(var(--spacing)*1.5)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-4{padding-right:calc(var(--spacing)*4)}.pb-0{padding-bottom:calc(var(--spacing)*0)}.pb-0\\.5{padding-bottom:calc(var(--spacing)*.5)}.pb-1{padding-bottom:calc(var(--spacing)*1)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-2\\.5{padding-bottom:calc(var(--spacing)*2.5)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pl-3{padding-left:calc(var(--spacing)*3)}.pl-6{padding-left:calc(var(--spacing)*6)}.pl-7{padding-left:calc(var(--spacing)*7)}.pl-10{padding-left:calc(var(--spacing)*10)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.break-all{word-break:break-all}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-amber-100{color:var(--color-amber-100)}.text-amber-500{color:var(--color-amber-500)}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-amber-800{color:var(--color-amber-800)}.text-blue-100{color:var(--color-blue-100)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500{color:var(--color-blue-500)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-blue-900{color:var(--color-blue-900)}.text-cyan-400{color:var(--color-cyan-400)}.text-cyan-600{color:var(--color-cyan-600)}.text-cyan-700{color:var(--color-cyan-700)}.text-cyan-800{color:var(--color-cyan-800)}.text-emerald-600{color:var(--color-emerald-600)}.text-emerald-700{color:var(--color-emerald-700)}.text-emerald-800{color:var(--color-emerald-800)}.text-fuchsia-700{color:var(--color-fuchsia-700)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-green-100{color:var(--color-green-100)}.text-green-200{color:var(--color-green-200)}.text-green-300{color:var(--color-green-300)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-green-600{color:var(--color-green-600)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-indigo-200{color:var(--color-indigo-200)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-indigo-800{color:var(--color-indigo-800)}.text-orange-600{color:var(--color-orange-600)}.text-orange-700{color:var(--color-orange-700)}.text-orange-800{color:var(--color-orange-800)}.text-pink-700{color:var(--color-pink-700)}.text-pink-800{color:var(--color-pink-800)}.text-purple-100{color:var(--color-purple-100)}.text-purple-200{color:var(--color-purple-200)}.text-purple-300{color:var(--color-purple-300)}.text-purple-400{color:var(--color-purple-400)}.text-purple-500{color:var(--color-purple-500)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-purple-800{color:var(--color-purple-800)}.text-purple-900{color:var(--color-purple-900)}.text-red-200{color:var(--color-red-200)}.text-red-400{color:var(--color-red-400)}.text-red-500{color:var(--color-red-500)}.text-red-500\\/70{color:#fb2c36b3}@supports (color:color-mix(in lab,red,red)){.text-red-500\\/70{color:color-mix(in oklab,var(--color-red-500)70%,transparent)}}.text-red-600{color:var(--color-red-600)}.text-red-700{color:var(--color-red-700)}.text-red-800{color:var(--color-red-800)}.text-rose-700{color:var(--color-rose-700)}.text-sky-100{color:var(--color-sky-100)}.text-sky-400{color:var(--color-sky-400)}.text-sky-600{color:var(--color-sky-600)}.text-sky-700{color:var(--color-sky-700)}.text-sky-800{color:var(--color-sky-800)}.text-slate-50{color:var(--color-slate-50)}.text-slate-300{color:var(--color-slate-300)}.text-slate-400{color:var(--color-slate-400)}.text-slate-500{color:var(--color-slate-500)}.text-slate-600{color:var(--color-slate-600)}.text-slate-700{color:var(--color-slate-700)}.text-slate-800{color:var(--color-slate-800)}.text-slate-900{color:var(--color-slate-900)}.text-teal-700{color:var(--color-teal-700)}.text-transparent{color:#0000}.text-violet-700{color:var(--color-violet-700)}.text-white{color:var(--color-white)}.text-white\\/80{color:#fffc}@supports (color:color-mix(in lab,red,red)){.text-white\\/80{color:color-mix(in oklab,var(--color-white)80%,transparent)}}.normal-case{text-transform:none}.uppercase{text-transform:uppercase}.italic{font-style:italic}.line-through{text-decoration-line:line-through}.underline{text-decoration-line:underline}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 var(--tw-shadow-color,#0000000d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring,.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-amber-400{--tw-ring-color:var(--color-amber-400)}.ring-black{--tw-ring-color:var(--color-black)}.ring-black\\/5{--tw-ring-color:#0000000d}@supports (color:color-mix(in lab,red,red)){.ring-black\\/5{--tw-ring-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.ring-green-400{--tw-ring-color:var(--color-green-400)}.ring-orange-500{--tw-ring-color:var(--color-orange-500)}.ring-purple-400{--tw-ring-color:var(--color-purple-400)}.ring-red-400{--tw-ring-color:var(--color-red-400)}.outline{outline-style:var(--tw-outline-style);outline-width:1px}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-150{--tw-duration:.15s;transition-duration:.15s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}.group-open\\:rotate-90:is(:where(.group):is([open],:popover-open,:open) *),.group-open\\/house\\:rotate-90:is(:where(.group\\/house):is([open],:popover-open,:open) *){rotate:90deg}@media(hover:hover){.group-hover\\:block:is(:where(.group):hover *){display:block}.group-hover\\:translate-x-1:is(:where(.group):hover *){--tw-translate-x:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.group-hover\\:text-blue-600:is(:where(.group):hover *){color:var(--color-blue-600)}.group-hover\\:text-purple-600:is(:where(.group):hover *){color:var(--color-purple-600)}}.peer-checked\\:bg-amber-500:is(:where(.peer):checked~*){background-color:var(--color-amber-500)}.peer-checked\\:bg-green-600:is(:where(.peer):checked~*){background-color:var(--color-green-600)}.peer-checked\\:bg-purple-600:is(:where(.peer):checked~*){background-color:var(--color-purple-600)}.peer-focus\\:ring-2:is(:where(.peer):focus~*){--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.peer-focus\\:ring-amber-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-amber-300)}.peer-focus\\:ring-green-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-green-300)}.peer-focus\\:ring-purple-300:is(:where(.peer):focus~*){--tw-ring-color:var(--color-purple-300)}.placeholder\\:text-purple-400::placeholder{color:var(--color-purple-400)}.placeholder\\:text-slate-400::placeholder{color:var(--color-slate-400)}.placeholder\\:italic::placeholder{font-style:italic}.after\\:absolute:after{content:var(--tw-content);position:absolute}.after\\:top-\\[2px\\]:after{content:var(--tw-content);top:2px}.after\\:left-\\[2px\\]:after{content:var(--tw-content);left:2px}.after\\:h-5:after{content:var(--tw-content);height:calc(var(--spacing)*5)}.after\\:w-5:after{content:var(--tw-content);width:calc(var(--spacing)*5)}.after\\:rounded-full:after{content:var(--tw-content);border-radius:3.40282e38px}.after\\:bg-white:after{content:var(--tw-content);background-color:var(--color-white)}.after\\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.after\\:content-\\[\\'\\'\\]:after{--tw-content:"";content:var(--tw-content)}.peer-checked\\:after\\:translate-x-full:is(:where(.peer):checked~*):after{content:var(--tw-content);--tw-translate-x:100%;translate:var(--tw-translate-x)var(--tw-translate-y)}@media(hover:hover){.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-blue-300:hover{border-color:var(--color-blue-300)}.hover\\:border-green-400:hover{border-color:var(--color-green-400)}.hover\\:border-slate-300:hover{border-color:var(--color-slate-300)}.hover\\:bg-amber-50:hover{background-color:var(--color-amber-50)}.hover\\:bg-amber-200:hover{background-color:var(--color-amber-200)}.hover\\:bg-amber-600:hover{background-color:var(--color-amber-600)}.hover\\:bg-amber-700:hover{background-color:var(--color-amber-700)}.hover\\:bg-black\\/5:hover{background-color:#0000000d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-black\\/5:hover{background-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.hover\\:bg-blue-200:hover{background-color:var(--color-blue-200)}.hover\\:bg-emerald-700:hover{background-color:var(--color-emerald-700)}.hover\\:bg-green-50\\/30:hover{background-color:#f0fdf44d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-green-50\\/30:hover{background-color:color-mix(in oklab,var(--color-green-50)30%,transparent)}}.hover\\:bg-green-100:hover{background-color:var(--color-green-100)}.hover\\:bg-green-200:hover{background-color:var(--color-green-200)}.hover\\:bg-green-400\\/30:hover{background-color:#05df724d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-green-400\\/30:hover{background-color:color-mix(in oklab,var(--color-green-400)30%,transparent)}}.hover\\:bg-green-600:hover{background-color:var(--color-green-600)}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-50:hover{background-color:var(--color-indigo-50)}.hover\\:bg-indigo-200:hover{background-color:var(--color-indigo-200)}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-purple-50:hover{background-color:var(--color-purple-50)}.hover\\:bg-purple-100:hover{background-color:var(--color-purple-100)}.hover\\:bg-purple-200:hover{background-color:var(--color-purple-200)}.hover\\:bg-purple-600:hover{background-color:var(--color-purple-600)}.hover\\:bg-purple-700:hover{background-color:var(--color-purple-700)}.hover\\:bg-red-50:hover{background-color:var(--color-red-50)}.hover\\:bg-red-100:hover{background-color:var(--color-red-100)}.hover\\:bg-red-300:hover{background-color:var(--color-red-300)}.hover\\:bg-sky-100:hover{background-color:var(--color-sky-100)}.hover\\:bg-sky-200:hover{background-color:var(--color-sky-200)}.hover\\:bg-slate-50:hover{background-color:var(--color-slate-50)}.hover\\:bg-slate-100:hover{background-color:var(--color-slate-100)}.hover\\:bg-slate-200:hover{background-color:var(--color-slate-200)}.hover\\:bg-slate-200\\/50:hover{background-color:#e2e8f080}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-slate-200\\/50:hover{background-color:color-mix(in oklab,var(--color-slate-200)50%,transparent)}}.hover\\:bg-slate-300:hover{background-color:var(--color-slate-300)}.hover\\:bg-slate-700:hover{background-color:var(--color-slate-700)}.hover\\:bg-white\\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\\:bg-white\\/30:hover{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/30:hover{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.hover\\:bg-white\\/50:hover{background-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/50:hover{background-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.hover\\:text-amber-700:hover{color:var(--color-amber-700)}.hover\\:text-amber-900:hover{color:var(--color-amber-900)}.hover\\:text-indigo-700:hover{color:var(--color-indigo-700)}.hover\\:text-purple-500:hover{color:var(--color-purple-500)}.hover\\:text-purple-600:hover{color:var(--color-purple-600)}.hover\\:text-purple-800:hover{color:var(--color-purple-800)}.hover\\:text-red-600:hover{color:var(--color-red-600)}.hover\\:text-red-700:hover{color:var(--color-red-700)}.hover\\:text-sky-400:hover{color:var(--color-sky-400)}.hover\\:text-slate-600:hover{color:var(--color-slate-600)}.hover\\:text-slate-700:hover{color:var(--color-slate-700)}.hover\\:text-slate-800:hover{color:var(--color-slate-800)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-80:hover{opacity:.8}.hover\\:opacity-90:hover{opacity:.9}.hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:ring-1:hover{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:ring-purple-400:hover{--tw-ring-color:var(--color-purple-400)}.hover\\:brightness-95:hover{--tw-brightness:brightness(95%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}}.focus\\:border-purple-500:focus{border-color:var(--color-purple-500)}.focus\\:border-slate-400:focus{border-color:var(--color-slate-400)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-amber-300:focus{--tw-ring-color:var(--color-amber-300)}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:ring-emerald-400:focus{--tw-ring-color:var(--color-emerald-400)}.focus\\:ring-purple-200:focus{--tw-ring-color:var(--color-purple-200)}.focus\\:ring-purple-300:focus{--tw-ring-color:var(--color-purple-300)}.focus\\:ring-purple-400:focus{--tw-ring-color:var(--color-purple-400)}.focus\\:ring-purple-500:focus{--tw-ring-color:var(--color-purple-500)}.focus\\:ring-slate-100:focus{--tw-ring-color:var(--color-slate-100)}.focus\\:ring-slate-200:focus{--tw-ring-color:var(--color-slate-200)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\\:scale-95:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:bg-slate-50:disabled{background-color:var(--color-slate-50)}.disabled\\:bg-slate-400:disabled{background-color:var(--color-slate-400)}.disabled\\:opacity-50:disabled{opacity:.5}@media(min-width:40rem){.sm\\:flex-row{flex-direction:row}.sm\\:px-6{padding-inline:calc(var(--spacing)*6)}}@media(min-width:48rem){.md\\:inline{display:inline}.md\\:w-80{width:calc(var(--spacing)*80)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:items-center{align-items:center}.md\\:items-end{align-items:flex-end}.md\\:border-t-0{border-top-style:var(--tw-border-style);border-top-width:0}.md\\:border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.md\\:p-8{padding:calc(var(--spacing)*8)}.md\\:pt-0{padding-top:calc(var(--spacing)*0)}.md\\:pl-6{padding-left:calc(var(--spacing)*6)}.md\\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.md\\:text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}}@media(min-width:64rem){.lg\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.lg\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-6{grid-template-columns:repeat(6,minmax(0,1fr))}.lg\\:px-8{padding-inline:calc(var(--spacing)*8)}}}:host,:host *,#traxon-portal-mount,#traxon-portal-mount *{--color-white:#fff!important;--color-black:#000!important;--color-slate-50:#f8fafc!important;--color-slate-100:#f1f5f9!important;--color-slate-200:#e2e8f0!important;--color-slate-300:#cbd5e1!important;--color-slate-400:#94a3b8!important;--color-slate-500:#64748b!important;--color-slate-600:#475569!important;--color-slate-700:#334155!important;--color-slate-800:#1e293b!important;--color-slate-900:#0f172a!important;--color-slate-950:#020617!important;--color-gray-50:#f9fafb!important;--color-gray-100:#f3f4f6!important;--color-gray-200:#e5e7eb!important;--color-gray-300:#d1d5db!important;--color-gray-400:#9ca3af!important;--color-gray-500:#6b7280!important;--color-gray-600:#4b5563!important;--color-gray-700:#374151!important;--color-gray-800:#1f2937!important;--color-gray-900:#111827!important;--color-red-50:#fef2f2!important;--color-red-100:#fee2e2!important;--color-red-200:#fecaca!important;--color-red-300:#fca5a5!important;--color-red-400:#f87171!important;--color-red-500:#ef4444!important;--color-red-600:#dc2626!important;--color-red-700:#b91c1c!important;--color-red-800:#991b1b!important;--color-red-900:#7f1d1d!important;--color-orange-50:#fff7ed!important;--color-orange-100:#ffedd5!important;--color-orange-200:#fed7aa!important;--color-orange-300:#fdba74!important;--color-orange-400:#fb923c!important;--color-orange-500:#f97316!important;--color-orange-600:#ea580c!important;--color-orange-700:#c2410c!important;--color-amber-50:#fffbeb!important;--color-amber-100:#fef3c7!important;--color-amber-200:#fde68a!important;--color-amber-300:#fcd34d!important;--color-amber-400:#fbbf24!important;--color-amber-500:#f59e0b!important;--color-amber-600:#d97706!important;--color-amber-700:#b45309!important;--color-amber-800:#92400e!important;--color-amber-900:#78350f!important;--color-yellow-50:#fefce8!important;--color-yellow-100:#fef9c3!important;--color-yellow-200:#fef08a!important;--color-yellow-300:#fde047!important;--color-yellow-400:#facc15!important;--color-yellow-500:#eab308!important;--color-green-50:#f0fdf4!important;--color-green-100:#dcfce7!important;--color-green-200:#bbf7d0!important;--color-green-300:#86efac!important;--color-green-400:#4ade80!important;--color-green-500:#22c55e!important;--color-green-600:#16a34a!important;--color-green-700:#15803d!important;--color-green-800:#166534!important;--color-green-900:#14532d!important;--color-emerald-50:#ecfdf5!important;--color-emerald-100:#d1fae5!important;--color-emerald-500:#10b981!important;--color-emerald-600:#059669!important;--color-sky-50:#f0f9ff!important;--color-sky-100:#e0f2fe!important;--color-sky-200:#bae6fd!important;--color-sky-300:#7dd3fc!important;--color-sky-400:#38bdf8!important;--color-sky-500:#0ea5e9!important;--color-sky-600:#0284c7!important;--color-sky-700:#0369a1!important;--color-sky-800:#075985!important;--color-blue-50:#eff6ff!important;--color-blue-100:#dbeafe!important;--color-blue-200:#bfdbfe!important;--color-blue-300:#93c5fd!important;--color-blue-400:#60a5fa!important;--color-blue-500:#3b82f6!important;--color-blue-600:#2563eb!important;--color-blue-700:#1d4ed8!important;--color-blue-800:#1e40af!important;--color-blue-900:#1e3a8a!important;--color-indigo-50:#eef2ff!important;--color-indigo-100:#e0e7ff!important;--color-indigo-200:#c7d2fe!important;--color-indigo-300:#a5b4fc!important;--color-indigo-400:#818cf8!important;--color-indigo-500:#6366f1!important;--color-indigo-600:#4f46e5!important;--color-indigo-700:#4338ca!important;--color-indigo-800:#3730a3!important;--color-indigo-900:#312e81!important;--color-purple-50:#faf5ff!important;--color-purple-100:#f3e8ff!important;--color-purple-200:#e9d5ff!important;--color-purple-300:#d8b4fe!important;--color-purple-400:#c084fc!important;--color-purple-500:#a855f7!important;--color-purple-600:#9333ea!important;--color-purple-700:#7c3aed!important;--color-purple-800:#6b21a8!important;--color-purple-900:#581c87!important;--color-fuchsia-50:#fdf4ff!important;--color-fuchsia-100:#fae8ff!important;--color-fuchsia-400:#e879f9!important;--color-fuchsia-500:#d946ef!important;--color-fuchsia-600:#c026d3!important;--spacing:.25rem!important;--text-xs:.75rem!important;--text-xs--line-height:1rem!important;--text-sm:.875rem!important;--text-sm--line-height:1.25rem!important;--text-base:1rem!important;--text-base--line-height:1.5rem!important;--text-lg:1.125rem!important;--text-lg--line-height:1.75rem!important;--text-xl:1.25rem!important;--text-xl--line-height:1.75rem!important;--text-2xl:1.5rem!important;--text-2xl--line-height:2rem!important;--text-3xl:1.875rem!important;--text-3xl--line-height:2.25rem!important;--text-4xl:2.25rem!important;--text-4xl--line-height:2.5rem!important;--font-weight-normal:400!important;--font-weight-medium:500!important;--font-weight-semibold:600!important;--font-weight-bold:700!important;--font-mono:ui-monospace,SFMono-Regular,"SF Mono",Menlo,Consolas,monospace!important;--leading-tight:1.25!important;--leading-relaxed:1.625!important;--leading-loose:2!important;--tracking-wide:.025em!important;--tracking-wider:.05em!important;--ease-in-out:cubic-bezier(.4,0,.2,1)!important;--ease-out:cubic-bezier(0,0,.2,1)!important;--blur-sm:4px!important;--default-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;--default-transition-duration:.15s!important;--tw-border-opacity:1!important;--tw-ring-opacity:1!important;--tw-ring-offset-width:0px!important;--tw-ring-offset-color:#fff!important;--radius-sm:.125rem!important;--radius-md:.375rem!important;--radius-lg:.5rem!important;--radius-xl:.75rem!important;--radius-2xl:1rem!important;--radius-full:9999px!important}:host input,:host select,:host textarea{font-family:inherit!important;font-size:inherit!important;line-height:inherit!important;color:inherit!important}:host button{font-family:inherit!important}:host input,:host select,:host textarea{border-width:1px;border-style:solid!important;border-color:var(--color-slate-200,#e2e8f0)!important;color:#0f172a!important;background-color:#fff!important}:host input[type=text],:host input[type=number],:host input[type=date],:host input[type=time],:host select{box-sizing:border-box!important;height:34px!important;min-height:34px!important;padding-top:.375rem!important;padding-bottom:.375rem!important}:host select{-webkit-appearance:auto!important;-moz-appearance:auto!important;appearance:auto!important;background-color:#fff!important}:host .border{border-style:solid!important;border-width:1px!important}:host .focus\\:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)!important;--tw-ring-shadow:var(--tw-ring-inset)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color)!important;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)!important}@keyframes slideInRight{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.animate-slideInRight{animation:.3s ease-out forwards slideInRight}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}@keyframes spin{to{transform:rotate(360deg)}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}`,us=({initialShipment:t,initialShipments:r,onClose:a,isVisible:n,onCopyResult:o,onSaveConfig:s,userRole:i})=>{const[c,d]=_([]),[p,m]=_(null),[u,l]=_(!1),[g,v]=_(!1),f=c.length===1;st(()=>{if(n)if(r&&r.length>0){const N=r.map(w=>eo(w));d(N),N.length===1&&(m(N[0]),l(!1)),v(!1)}else if(t&&Object.keys(t).length>0){const N=eo(t);d([N]),m(N),l(!1),v(!1)}else d([Mr[0]]),m(Mr[0]),l(!1),v(!1);else l(!1),v(!1)},[n,t,r]);const S=ie(N=>{d(w=>w.map(O=>O.id===N.id?N:O)),m(N)},[]),T=ie((N,w)=>{const O=`log-${Date.now()}`,D=new Date().toISOString(),y=(p==null?void 0:p.awbNumber)||"";o&&o(!0,y,{timestamp:D,summary:"EDI copiado al portapapeles",ediContent:w});const M={id:O,timestamp:D,type:"OUTBOUND",status:"ACCEPTED",payloadJson:w,responseMessage:"EDI copiado exitosamente",responseTimestamp:new Date().toISOString()};d(B=>B.map(ne=>ne.id!==N?ne:{...ne,logs:[M,...ne.logs||[]]})),console.log(`✅ EDI copiado para shipment ${N}`)},[p,o]),b=ie(()=>{l(!1),c.length===1?(m(null),a()):m(null)},[c.length,a]),k=ie(()=>{l(!1),v(!1),m(null),a()},[a]),C=ie(()=>{l(!0)},[]),A=ie(N=>{m(N),l(!0)},[]);return n?f&&p?e(se,{children:[e(ms,{shipment:p,mode:"transmit",onClose:b,onOpenModal:C,userRole:i,onTransmitSuccess:(N,w)=>{console.log(`✅ Transmisión exitosa para ${N}: ${w}`),o&&o(!0,p.awbNumber,{timestamp:new Date().toISOString(),summary:`Transmitido: ${w}`,ediContent:w})}}),e(Ya,{isOpen:u,onClose:()=>l(!1),shipment:p,onSave:S,onCopySuccess:T,onSaveConfig:s,userRole:i})]}):e(se,{children:[e(hs,{shipments:c,onSelectShipment:A,onClose:k}),e(Ya,{isOpen:u,onClose:b,shipment:p,onSave:S,onCopySuccess:T,onSaveConfig:s,userRole:i})]}):null},hs=({shipments:t,onSelectShipment:r,onClose:a})=>{const[n,o]=_(""),s=t.filter(c=>{if(!n.trim())return!0;const d=n.toLowerCase();return c.awbNumber.toLowerCase().includes(d)||c.shipper.name.toLowerCase().includes(d)||c.consignee.name.toLowerCase().includes(d)}),i=c=>{switch(c){case"TRANSMITTED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"Pending"});case"ACKNOWLEDGED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Confirmed"});case"REJECTED":return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:"Rejected"});default:return e("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600",children:"Draft"})}};return e("div",{className:"modal-overlay",children:e("div",{className:"modal-content max-w-4xl w-full",children:[e("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 flex items-center justify-between flex-shrink-0",children:[e("div",{className:"flex items-center gap-3",children:[e("div",{className:"bg-white/20 p-2 rounded-lg",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e("div",{children:[e("h2",{className:"text-lg font-bold",children:"Shipment Management"}),e("p",{className:"text-blue-100 text-sm",children:[t.length," AWBs para transmitir"]})]})]}),e("button",{onClick:a,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{className:"px-6 py-4 border-b border-slate-200 bg-slate-50",children:e("div",{className:"relative max-w-md",children:[e("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Buscar AWB, Shipper, Consignee...",value:n,onChange:c=>o(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})}),e("div",{className:"flex-1 overflow-y-auto p-4",style:{maxHeight:"calc(70vh - 150px)"},children:[e("div",{className:"space-y-3",children:s.map(c=>e("div",{onClick:()=>r(c),className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md hover:border-blue-300 transition-all cursor-pointer group",children:e("div",{className:"flex items-center justify-between",children:e("div",{className:"flex-1",children:[e("div",{className:"flex items-center gap-3 mb-2",children:[e("span",{className:"text-lg font-bold font-mono text-slate-900 group-hover:text-blue-600 transition-colors",children:c.awbNumber}),i(c.status),c.hasHouses&&e("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["Consol (",c.houseBills.length,")"]})]}),e("div",{className:"grid grid-cols-4 gap-4 text-sm text-slate-600",children:[e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Ruta"}),e("span",{className:"font-semibold",children:[c.origin," → ",c.destination]})]}),e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Shipper"}),e("span",{className:"truncate block max-w-[150px]",children:c.shipper.name})]}),e("div",{children:[e("span",{className:"text-xs text-slate-400 uppercase block",children:"Piezas/Peso"}),e("span",{className:"font-semibold",children:[c.pieces," pcs / ",c.weight," kg"]})]}),e("div",{className:"flex items-center justify-end",children:e("span",{className:"text-blue-600 group-hover:translate-x-1 transition-transform",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]})]})})},c.id))}),s.length===0&&e("div",{className:"text-center py-12 text-slate-500",children:['No se encontraron guías que coincidan con "',n,'"']})]}),e("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50 text-sm text-slate-600",children:"Selecciona una guía para revisar y transmitir a Traxon"})]})})};function bs(t){if(!t)return"KILOGRAM";const r=t.toUpperCase().trim();return["KG","KGS","KILOGRAM","KILOGRAMS","KILO","KILOS"].includes(r)?"KILOGRAM":["LB","LBS","POUND","POUNDS","LIBRA","LIBRAS"].includes(r)?"POUND":"KILOGRAM"}function fs(t){if(!t)return;const r=t.toUpperCase().trim();return["CM3","CM³","CUBIC_CENTIMETRE","CUBIC_CENTIMETER","CC"].includes(r)?"CUBIC_CENTIMETRE":(["M3","M³","CUBIC_METRE","CUBIC_METER","CBM"].includes(r),"CUBIC_METRE")}function Qa(t){if(!t)return"Prepaid";const r=t.toUpperCase().trim();return["COLLECT","COL","C","COBRAR","POR_COBRAR"].includes(r)?"Collect":(["PREPAID","PRE","P","PP","PREPAGO","PAGADO"].includes(r),"Prepaid")}function xs(t){if(!t)return"DRAFT";const r=t.toUpperCase().trim();return["DRAFT","BORRADOR","NUEVO","NEW"].includes(r)?"DRAFT":["TRANSMITTED","ENVIADO","SENT","PENDING"].includes(r)?"TRANSMITTED":["ACKNOWLEDGED","ACK","CONFIRMADO","CONFIRMED","OK"].includes(r)?"ACKNOWLEDGED":["REJECTED","RECHAZADO","ERROR","FAILED"].includes(r)?"REJECTED":"DRAFT"}function vs(t){if(!t)return"CENTIMETRE";const r=t.toUpperCase().trim();return["IN","INCH","INCHES","PULGADA","PULGADAS"].includes(r)?"INCH":"CENTIMETRE"}function Ns(t){if(!t)return"QUANTITY_RATE";const r=t.toUpperCase().trim(),a={Q:"QUANTITY_RATE",N:"NORMAL_RATE",M:"MINIMUM_CHARGE",B:"BASIC_CHARGE",C:"SPECIFIC_COMMODITY_RATE",K:"RATE_PER_KILOGRAM",R:"CLASS_RATE_REDUCTION",S:"CLASS_RATE_SURCHARGE",E:"INTERNATIONAL_PRIORITY_SERVICE_RATE",X:"UNIT_LOAD_DEVICE_ADDITIONAL_INFORMATION",Y:"UNIT_LOAD_DEVICE_ADDITIONAL_RATE",U:"UNIT_LOAD_DEVIDE_BASIC_CHARGE_OR_RATE",W:"UNIT_LOAD_DEVICE_DISCOUNT"};return a[r]?a[r]:new Set(Object.values(a)).has(r)?r:"QUANTITY_RATE"}function Cs(t){if(!t)return"DueAgent";const r=t.toUpperCase().trim();return["DUECARRIER","DUE_CARRIER","CARRIER","C","AEROLINEA"].includes(r)?"DueCarrier":"DueAgent"}function ur(t,r){var a,n,o,s,i,c,d,p,m,u;return t?{name:t.name||r.name,name2:t.name2||"",accountNumber:t.accountNumber||"",taxId:t.taxId||t.nit||t.ruc||"",address:{street:((a=t.address)==null?void 0:a.street)||t.direccion||r.address.street,street2:((n=t.address)==null?void 0:n.street2)||"",place:((o=t.address)==null?void 0:o.place)||((s=t.address)==null?void 0:s.city)||t.ciudad||r.address.place,state:((i=t.address)==null?void 0:i.state)||((c=t.address)==null?void 0:c.provincia)||"",countryCode:(((d=t.address)==null?void 0:d.countryCode)||((p=t.address)==null?void 0:p.country)||t.pais||r.address.countryCode).toUpperCase().substring(0,2),postalCode:((m=t.address)==null?void 0:m.postalCode)||((u=t.address)==null?void 0:u.zip)||""},contact:t.contact||r.contact||{identifier:"TE",number:""}}:r}function ws(t,r){return t?{name:t.name||r.name,iataCode:t.iataCode||t.codigoIata||r.iataCode,cassCode:t.cassCode||t.codigoCass||"",place:t.place||t.ciudad||r.place,accountNumber:t.accountNumber||""}:r}function ys(t){var T,b,k,C,A,N,w,O,D,y,M,B,ne,Z,E,G,ce,be,ye,P,W,re,Q,L,xe,Se,je,Ue;const r=t.shipperName||((T=t.shipper)==null?void 0:T.name)||"",a=t.shipperTaxId||((b=t.shipper)==null?void 0:b.taxId)||"",n=t.shipperAddress||((C=(k=t.shipper)==null?void 0:k.address)==null?void 0:C.street)||"",o=t.shipperCity||((N=(A=t.shipper)==null?void 0:A.address)==null?void 0:N.place)||"",s=t.shipperCountry||((O=(w=t.shipper)==null?void 0:w.address)==null?void 0:O.countryCode)||"",i=t.shipperState||((y=(D=t.shipper)==null?void 0:D.address)==null?void 0:y.state)||"",c=t.shipperPostalCode||((B=(M=t.shipper)==null?void 0:M.address)==null?void 0:B.postalCode)||"",d=t.shipperPhone||((Z=(ne=t.shipper)==null?void 0:ne.contact)==null?void 0:Z.number)||"",p=t.consigneeName||((E=t.consignee)==null?void 0:E.name)||"",m=t.consigneeTaxId||((G=t.consignee)==null?void 0:G.taxId)||"",u=t.consigneeAddress||((be=(ce=t.consignee)==null?void 0:ce.address)==null?void 0:be.street)||"",l=t.consigneeCity||((P=(ye=t.consignee)==null?void 0:ye.address)==null?void 0:P.place)||"",g=t.consigneeCountry||((re=(W=t.consignee)==null?void 0:W.address)==null?void 0:re.countryCode)||"",v=t.consigneeState||((L=(Q=t.consignee)==null?void 0:Q.address)==null?void 0:L.state)||"",f=t.consigneePostalCode||((Se=(xe=t.consignee)==null?void 0:xe.address)==null?void 0:Se.postalCode)||"",S=t.consigneePhone||((Ue=(je=t.consignee)==null?void 0:je.contact)==null?void 0:Ue.number)||"";return{id:t.id||`house-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,messageId:t.messageId,hawbNumber:t.hawbNumber||t.numero||"",origin:t.origin||"",destination:t.destination||"",shipperName:r,shipperTaxId:a,shipperAddress:n,shipperCity:o,shipperCountry:s,shipperState:i,shipperPostalCode:c,shipperPhone:d,consigneeName:p,consigneeTaxId:m,consigneeAddress:u,consigneeCity:l,consigneeCountry:g,consigneeState:v,consigneePostalCode:f,consigneePhone:S,pieces:t.pieces??0,weight:t.weight??0,chargeableWeight:t.chargeableWeight??t.pesoFacturable??void 0,volume:t.volume??t.volumen??void 0,volumeCubicMeters:t.volumeCubicMeters??t.volumenM3??t.cbm??t.volume??void 0,natureOfGoods:t.natureOfGoods||t.descripcion||"",commonName:t.commonName||"",htsCodes:t.htsCodes||[],shipper:t.shipper?ur(t.shipper,{name:"",address:{street:"",place:"",countryCode:"CO",postalCode:""}}):r?{name:r,taxId:a,address:{street:n,place:o,countryCode:s||"CO",state:i,postalCode:c},contact:d?{identifier:"TE",number:d}:void 0}:void 0,consignee:t.consignee?ur(t.consignee,{name:"",address:{street:"",place:"",countryCode:"US",postalCode:""}}):p?{name:p,taxId:m,address:{street:u,place:l,countryCode:g||"US",state:v,postalCode:f},contact:S?{identifier:"TE",number:S}:void 0}:void 0}}function As(t){return{pieces:t.pieces??0,weight:t.weight??0,chargeableWeight:t.chargeableWeight||t.pesoFacturable,rateClassCode:Ns(t.rateClassCode),rateOrCharge:t.rateOrCharge??t.tarifa??0,total:t.total??0,description:t.description||t.descripcion||"",goodsDescriptionOverride:t.goodsDescriptionOverride||t.descripcionMercancia||void 0,commodityCode:t.commodityCode||"",hsCode:t.hsCode||""}}function Ss(t){return{code:t.code||t.codigo||"",entitlement:Cs(t.entitlement),amount:t.amount??t.monto??0,paymentMethod:Qa(t.paymentMethod)}}function Es(t){return{length:t.length??t.largo??0,width:t.width??t.ancho??0,height:t.height??t.alto??0,pieces:t.pieces??t.piezas??1,unit:vs(t.unit)}}function eo(t){const r=Mr[0],a=(t.rates||r.rates).map(As),n=(t.houseBills||[]).map(ys),o=(t.otherCharges||[]).map(Ss),s=t.dimensions?t.dimensions.map(Es):void 0;return{id:t.id||`shipment-${Date.now()}`,messageId:t.messageId,status:xs(t.status),traxonResponse:t.traxonResponse,awbNumber:t.awbNumber||r.awbNumber,origin:(t.origin||r.origin).toUpperCase().substring(0,3),destination:(t.destination||r.destination).toUpperCase().substring(0,3),pieces:t.pieces??r.pieces,weight:t.weight??r.weight,weightUnit:bs(t.weightUnit),volume:t.volume,volumeUnit:t.volume?fs(t.volumeUnit):void 0,dimensions:s,description:t.description||r.description,commodityCode:t.commodityCode||r.commodityCode,currency:(t.currency||"USD").toUpperCase(),paymentMethod:Qa(t.paymentMethod),shipper:ur(t.shipper,r.shipper),consignee:ur(t.consignee,r.consignee),agent:ws(t.agent,r.agent),routing:t.routing||r.routing,flights:t.flights||r.flights,rates:a,otherCharges:o,oci:t.oci||[],specialHandlingCodes:t.specialHandlingCodes&&t.specialHandlingCodes.length>0?t.specialHandlingCodes:Mt(Ht(t.awbNumber||r.awbNumber)),specialServiceRequest:t.specialServiceRequest||void 0,chargeSummaryOverride:t.chargeSummaryOverride||void 0,executionDate:t.executionDate||new Date().toISOString().split("T")[0],executionPlace:t.executionPlace||"BOGOTA",signature:t.signature||"AVTOPF",hasHouses:t.hasHouses??n.length>0,houseBills:n,logs:t.logs||[],descartesConfig:t.descartesConfig}}class hr extends HTMLElement{constructor(){super(),this.portalMountRef=null,this.isVisible=!1,this.currentShipment=null,this.currentShipments=null,this.portalContainer=null,this.portalShadow=null,this.copyResultCallback=null,this.userRole="",this.shadowRoot_=this.attachShadow({mode:"open"}),this.mountPoint=document.createElement("div"),this.mountPoint.id="cargo-imp-connector-root",this.shadowRoot_.appendChild(this.mountPoint)}getOrCreatePortal(){if(!this.portalContainer){this.portalContainer=document.createElement("div"),this.portalContainer.id="cargo-imp-connector-portal",this.portalContainer.style.cssText=`
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        z-index: 2147483647 !important;
        pointer-events: none;
      `,document.body.appendChild(this.portalContainer),this.portalShadow=this.portalContainer.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=gs,this.portalShadow.appendChild(r);const a=document.createElement("div");a.id="cargo-imp-portal-mount",this.portalShadow.appendChild(a)}return{container:this.portalContainer,shadow:this.portalShadow}}updatePortalVisibility(r){this.portalContainer&&(this.portalContainer.style.pointerEvents=r?"auto":"none",this.portalContainer.setAttribute("data-visible",r.toString()))}connectedCallback(){const{shadow:r}=this.getOrCreatePortal(),a=r.getElementById("cargo-imp-portal-mount");a&&(this.portalMountRef=a,this.renderApp())}disconnectedCallback(){this.portalMountRef&&(ta(null,this.portalMountRef),this.portalMountRef=null),this.portalContainer&&this.portalContainer.parentNode&&(this.portalContainer.parentNode.removeChild(this.portalContainer),this.portalContainer=null,this.portalShadow=null)}renderApp(){this.updatePortalVisibility(this.isVisible),this.portalMountRef&&ta(e(us,{initialShipment:this.currentShipment,initialShipments:this.currentShipments,onClose:()=>this.close(),isVisible:this.isVisible,userRole:this.userRole,onCopyResult:(r,a,n)=>{const o={success:r,awbNumber:a,timestamp:n.timestamp,summary:n.summary,ediContent:n.ediContent};this.copyResultCallback&&this.copyResultCallback(o),this.dispatchEvent(new CustomEvent("cargo-imp-copy-result",{detail:o,bubbles:!0,composed:!0}))},onSaveConfig:r=>{this.dispatchEvent(new CustomEvent("cargo-imp-config-saved",{detail:{config:r,timestamp:new Date().toISOString()},bubbles:!0,composed:!0}))}}),this.portalMountRef)}openWithShipment(r){r.onCopyResult?this.copyResultCallback=r.onCopyResult:this.copyResultCallback=null;const a=r,n=a.userRole||a.UserRole||a.userrole||a.USERROLE||a.user_role||"";n&&(this.userRole=String(n)),console.log("[CargoImpConnector] userRole recibido:",this.userRole,"| raw keys:",Object.keys(r).filter(c=>c.toLowerCase().includes("role")));const{onCopyResult:o,userRole:s,...i}=r;this.currentShipment=i,this.currentShipments=null,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipment:i,mode:"single"},bubbles:!0,composed:!0}))}openWithShipments(r,a){var o;a!=null&&a.userRole?this.userRole=a.userRole:(o=r[0])!=null&&o.userRole&&(this.userRole=r[0].userRole);const n=r.map(s=>{const{onCopyResult:i,userRole:c,...d}=s;return d});this.currentShipment=null,this.currentShipments=n,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipments:n,mode:"multiple",count:n.length},bubbles:!0,composed:!0}))}setUserRole(r){this.userRole=r,this.isVisible&&this.renderApp()}open(){this.currentShipment=null,this.currentShipments=null,this.isVisible=!0,this.setAttribute("data-visible","true"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-opened",{detail:{shipment:null,usingDemo:!0},bubbles:!0,composed:!0}))}close(){this.isVisible=!1,this.currentShipment=null,this.currentShipments=null,this.removeAttribute("data-visible"),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-closed",{bubbles:!0,composed:!0}))}getConfig(){return yt()}loadConfig(r){const n={...yt(),...r};ha(n),this.renderApp(),this.dispatchEvent(new CustomEvent("cargo-imp-config-loaded",{detail:{config:n},bubbles:!0,composed:!0}))}setConfig(r){this.loadConfig(r)}resetConfig(){ha(Bt),this.dispatchEvent(new CustomEvent("cargo-imp-config-reset",{bubbles:!0,composed:!0}))}isOpen(){return this.isVisible}}if(customElements.get("traxon-connector")||customElements.define("traxon-connector",hr),!customElements.get("cargo-imp-connector")){class t extends hr{}customElements.define("cargo-imp-connector",t)}return Zt.CargoImpConnectorElement=hr,Zt.default=hr,Object.defineProperties(Zt,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),Zt})({});
